<?xml version="1.0" encoding="UTF-8"?>
<library xmlns="urn:hl7-org:elm:r1" xmlns:t="urn:hl7-org:elm-types:r1" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:fhir="http://hl7.org/fhir" xmlns:qdm43="urn:healthit-gov:qdm:v4_3" xmlns:qdm53="urn:healthit-gov:qdm:v5_3" xmlns:a="urn:hl7-org:cql-annotations:r1">
   <annotation translatorVersion="1.4" translatorOptions="EnableAnnotations,EnableLocators,DisableListDemotion,DisableListPromotion" xsi:type="a:CqlToElmInfo"/>
   <annotation xsi:type="a:Annotation">
      <a:s r="1224">
         <a:s>library IMMZCommon</a:s>
      </a:s>
   </annotation>
   <identifier id="IMMZCommon" system="http://fhir.org/guides/who/smart-immunization"/>
   <schemaIdentifier id="urn:hl7-org:elm" version="r1"/>
   <usings>
      <def localIdentifier="System" uri="urn:hl7-org:elm-types:r1"/>
      <def localId="1" locator="3:1-3:26" localIdentifier="FHIR" uri="http://hl7.org/fhir" version="4.0.1">
         <annotation xsi:type="a:Annotation">
            <a:s r="1">
               <a:s>using </a:s>
               <a:s>
                  <a:s>FHIR</a:s>
               </a:s>
               <a:s> version '4.0.1'</a:s>
            </a:s>
         </annotation>
      </def>
   </usings>
   <includes>
      <def localId="2" locator="5:1-5:29" localIdentifier="WCom" path="http://fhir.org/guides/who/smart-immunization/WHOCommon">
         <annotation xsi:type="a:Annotation">
            <a:s r="2">
               <a:s>include </a:s>
               <a:s>
                  <a:s>WHOCommon</a:s>
               </a:s>
               <a:s> called WCom</a:s>
            </a:s>
         </annotation>
      </def>
      <def localId="3" locator="6:1-6:31" localIdentifier="Wcon" path="http://fhir.org/guides/who/smart-immunization/WHOConcepts">
         <annotation xsi:type="a:Annotation">
            <a:s r="3">
               <a:s>include </a:s>
               <a:s>
                  <a:s>WHOConcepts</a:s>
               </a:s>
               <a:s> called Wcon</a:s>
            </a:s>
         </annotation>
      </def>
      <def localId="4" locator="7:1-7:35" localIdentifier="FHIRHelpers" path="http://fhir.org/guides/who/smart-immunization/FHIRHelpers" version="4.0.1">
         <annotation xsi:type="a:Annotation">
            <a:s r="4">
               <a:s>include </a:s>
               <a:s>
                  <a:s>FHIRHelpers</a:s>
               </a:s>
               <a:s> version '4.0.1'</a:s>
            </a:s>
         </annotation>
      </def>
      <def localId="5" locator="8:1-8:28" localIdentifier="FC" path="http://fhir.org/guides/who/smart-immunization/FHIRCommon">
         <annotation xsi:type="a:Annotation">
            <a:s r="5">
               <a:s>include </a:s>
               <a:s>
                  <a:s>FHIRCommon</a:s>
               </a:s>
               <a:s> called FC</a:s>
            </a:s>
         </annotation>
      </def>
      <def localId="6" locator="9:1-9:33" localIdentifier="IMMZc" path="http://fhir.org/guides/who/smart-immunization/IMMZConcepts">
         <annotation xsi:type="a:Annotation">
            <a:s r="6">
               <a:s>include </a:s>
               <a:s>
                  <a:s>IMMZConcepts</a:s>
               </a:s>
               <a:s> called IMMZc</a:s>
            </a:s>
         </annotation>
      </def>
   </includes>
   <codes>
      <def localId="8" locator="12:1-12:81" name="[#] Births total" id="11640-0" display="Pregnancy outcome" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="8">
               <a:s>code &quot;[#] Births total&quot;: '11640-0' from </a:s>
               <a:s r="7">
                  <a:s>IMMZc.&quot;LOINC&quot;</a:s>
               </a:s>
               <a:s> display 'Pregnancy outcome'</a:s>
            </a:s>
         </annotation>
         <codeSystem localId="7" locator="12:41-12:53" name="LOINC" libraryName="IMMZc"/>
      </def>
      <def localId="10" locator="13:1-13:73" name="[#] Births.preterm" id="11637-6" display="Preterm" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="10">
               <a:s>code &quot;[#] Births.preterm&quot;: '11637-6' from </a:s>
               <a:s r="9">
                  <a:s>IMMZc.&quot;LOINC&quot;</a:s>
               </a:s>
               <a:s> display 'Preterm'</a:s>
            </a:s>
         </annotation>
         <codeSystem localId="9" locator="13:43-13:55" name="LOINC" libraryName="IMMZc"/>
      </def>
   </codes>
   <statements>
      <def locator="14:1-14:15" name="Patient" context="Patient">
         <expression xsi:type="SingletonFrom">
            <operand locator="14:1-14:15" dataType="fhir:Patient" templateId="http://hl7.org/fhir/StructureDefinition/Patient" xsi:type="Retrieve"/>
         </expression>
      </def>
      <def localId="12" locator="19:1-20:16" name="Get Immunization" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="12">
               <a:s>//TODO: Check patient is alive

//Get patient immunizations
define &quot;Get Immunization&quot;:
  </a:s>
               <a:s r="11">
                  <a:s>[Immunization]</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="11" locator="20:3-20:16" dataType="fhir:Immunization" templateId="http://hl7.org/fhir/StructureDefinition/Immunization" xsi:type="Retrieve"/>
      </def>
      <def localId="19" locator="23:1-25:19" name="Immunization Status" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="19">
               <a:s>// check vaccine status
define &quot;Immunization Status&quot;:
  </a:s>
               <a:s r="18">
                  <a:s>
                     <a:s r="14">
                        <a:s r="13">
                           <a:s r="13">
                              <a:s>[Immunization]</a:s>
                           </a:s>
                        </a:s>
                        <a:s> I</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s r="17">
                     <a:s>return </a:s>
                     <a:s r="16">
                        <a:s r="15">
                           <a:s>I</a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="16">
                           <a:s>status</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="18" locator="24:3-25:19" xsi:type="Query">
            <source localId="14" locator="24:3-24:18" alias="I">
               <expression localId="13" locator="24:3-24:16" dataType="fhir:Immunization" templateId="http://hl7.org/fhir/StructureDefinition/Immunization" xsi:type="Retrieve"/>
            </source>
            <return localId="17" locator="25:5-25:19">
               <expression localId="16" locator="25:12-25:19" path="status" scope="I" xsi:type="Property"/>
            </return>
         </expression>
      </def>
      <def localId="28" locator="28:1-30:35" name="Immunization Completed" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="28">
               <a:s>//check Immunization.status for not-done
define &quot;Immunization Completed&quot;:
  </a:s>
               <a:s r="27">
                  <a:s>
                     <a:s r="21">
                        <a:s r="20">
                           <a:s r="20">
                              <a:s>[Immunization]</a:s>
                           </a:s>
                        </a:s>
                        <a:s> I</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s r="26">
                     <a:s>where </a:s>
                     <a:s r="26">
                        <a:s r="23">
                           <a:s r="22">
                              <a:s>I</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="23">
                              <a:s>status</a:s>
                           </a:s>
                        </a:s>
                        <a:s> in </a:s>
                        <a:s r="25">
                           <a:s>{</a:s>
                           <a:s r="24">
                              <a:s>'completed'</a:s>
                           </a:s>
                           <a:s>}</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="27" locator="29:3-30:35" xsi:type="Query">
            <source localId="21" locator="29:3-29:18" alias="I">
               <expression localId="20" locator="29:3-29:16" dataType="fhir:Immunization" templateId="http://hl7.org/fhir/StructureDefinition/Immunization" xsi:type="Retrieve"/>
            </source>
            <where localId="26" locator="30:5-30:35" xsi:type="In">
               <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                  <operand localId="23" locator="30:11-30:18" path="status" scope="I" xsi:type="Property"/>
               </operand>
               <operand localId="25" locator="30:23-30:35" xsi:type="List">
                  <element localId="24" locator="30:24-30:34" valueType="t:String" value="completed" xsi:type="Literal"/>
               </operand>
            </where>
         </expression>
      </def>
      <def localId="37" locator="33:1-35:34" name="Immunization Not Done" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="37">
               <a:s>//check Immunization.status for not-done
define &quot;Immunization Not Done&quot;:
  </a:s>
               <a:s r="36">
                  <a:s>
                     <a:s r="30">
                        <a:s r="29">
                           <a:s r="29">
                              <a:s>[Immunization]</a:s>
                           </a:s>
                        </a:s>
                        <a:s> I</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s r="35">
                     <a:s>where </a:s>
                     <a:s r="35">
                        <a:s r="32">
                           <a:s r="31">
                              <a:s>I</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="32">
                              <a:s>status</a:s>
                           </a:s>
                        </a:s>
                        <a:s> in </a:s>
                        <a:s r="34">
                           <a:s>{</a:s>
                           <a:s r="33">
                              <a:s>'not-done'</a:s>
                           </a:s>
                           <a:s>}</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="36" locator="34:3-35:34" xsi:type="Query">
            <source localId="30" locator="34:3-34:18" alias="I">
               <expression localId="29" locator="34:3-34:16" dataType="fhir:Immunization" templateId="http://hl7.org/fhir/StructureDefinition/Immunization" xsi:type="Retrieve"/>
            </source>
            <where localId="35" locator="35:5-35:34" xsi:type="In">
               <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                  <operand localId="32" locator="35:11-35:18" path="status" scope="I" xsi:type="Property"/>
               </operand>
               <operand localId="34" locator="35:23-35:34" xsi:type="List">
                  <element localId="33" locator="35:24-35:33" valueType="t:String" value="not-done" xsi:type="Literal"/>
               </operand>
            </where>
         </expression>
      </def>
      <def localId="44" locator="40:1-42:25" name="Immunization StatusReason" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="44">
               <a:s>//how do we handle entered-in-error? It seems like it should be different from not-done in how it should be handled? These should be ignored so we likely don't need to check for them. We should maybe set these to check for statuses like complete, or amended 

//check vaccine status reason - e.g. if vaccine was not given
define &quot;Immunization StatusReason&quot;:
  </a:s>
               <a:s r="43">
                  <a:s>
                     <a:s r="39">
                        <a:s r="38">
                           <a:s r="38">
                              <a:s>[Immunization]</a:s>
                           </a:s>
                        </a:s>
                        <a:s> I</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s r="42">
                     <a:s>return </a:s>
                     <a:s r="41">
                        <a:s r="40">
                           <a:s>I</a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="41">
                           <a:s>statusReason</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="43" locator="41:3-42:25" xsi:type="Query">
            <source localId="39" locator="41:3-41:18" alias="I">
               <expression localId="38" locator="41:3-41:16" dataType="fhir:Immunization" templateId="http://hl7.org/fhir/StructureDefinition/Immunization" xsi:type="Retrieve"/>
            </source>
            <return localId="42" locator="42:5-42:25">
               <expression localId="41" locator="42:12-42:25" path="statusReason" scope="I" xsi:type="Property"/>
            </return>
         </expression>
      </def>
      <def localId="46" locator="49:1-50:15" name="Get Observations" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="46">
               <a:s>//define statusReason Immunizations for when it was not given

//Procedure for vaccine administration

//Get patient observations. Do we need this statement to get all Observations?
define &quot;Get Observations&quot;:
  </a:s>
               <a:s r="45">
                  <a:s>[Observation]</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="45" locator="50:3-50:15" dataType="fhir:Observation" templateId="http://hl7.org/fhir/StructureDefinition/Observation" xsi:type="Retrieve"/>
      </def>
      <def localId="57" locator="54:1-57:74" name="Pregnant Observation" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="57">
               <a:s>//Check if patient is pregnant
//not sure if pregnancy is an Observation
define &quot;Pregnant Observation&quot;:
  </a:s>
               <a:s r="56">
                  <a:s>
                     <a:s r="48">
                        <a:s r="47">
                           <a:s r="47">
                              <a:s>[Observation]</a:s>
                           </a:s>
                        </a:s>
                        <a:s> O</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
  //IPS Uses Observation - https://hl7.org/fhir/uv/ips/StructureDefinition-observation-pregnancy-status-uv-ips.html
    </a:s>
                  <a:s r="55">
                     <a:s>where </a:s>
                     <a:s r="55">
                        <a:s r="52">
                           <a:s>(</a:s>
                           <a:s r="52">
                              <a:s r="50">
                                 <a:s r="49">
                                    <a:s>O</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="50">
                                    <a:s>value</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> as </a:s>
                              <a:s r="51">
                                 <a:s>CodeableConcept</a:s>
                              </a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                        <a:s> in </a:s>
                        <a:s r="54">
                           <a:s r="53">
                              <a:s>Wcon</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="54">
                              <a:s>&quot;Pregnancy Status Pregnant&quot;</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="56" locator="55:3-57:74" xsi:type="Query">
            <source localId="48" locator="55:3-55:17" alias="O">
               <expression localId="47" locator="55:3-55:15" dataType="fhir:Observation" templateId="http://hl7.org/fhir/StructureDefinition/Observation" xsi:type="Retrieve"/>
            </source>
            <where localId="55" locator="57:5-57:74" xsi:type="InValueSet">
               <code name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                  <operand localId="52" locator="57:11-57:38" strict="false" xsi:type="As">
                     <operand localId="50" locator="57:12-57:18" path="value" scope="O" xsi:type="Property"/>
                     <asTypeSpecifier localId="51" locator="57:23-57:37" name="fhir:CodeableConcept" xsi:type="NamedTypeSpecifier"/>
                  </operand>
               </code>
               <valueset localId="54" locator="57:43-57:74" name="Pregnancy Status Pregnant" libraryName="Wcon"/>
            </where>
         </expression>
      </def>
      <def localId="71" locator="64:1-67:26" name="Patient Has Active Sickle-cell disease" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="71">
               <a:s>/*
Need to figure out how to add the OR Condition in case pregnancy is stored in a condition instead of an Observation 
or [Condition] C
      where (C.code as CodeableConcept) in Wcon.&quot;Pregnancy Status Pregnant&quot;
*/
define &quot;Patient Has Active Sickle-cell disease&quot;:
  </a:s>
               <a:s r="70">
                  <a:s>exists</a:s>
                  <a:s r="69">
                     <a:s>(</a:s>
                     <a:s r="69">
                        <a:s>
                           <a:s r="59">
                              <a:s r="58">
                                 <a:s r="58">
                                    <a:s>[Condition: </a:s>
                                    <a:s>
                                       <a:s>code</a:s>
                                    </a:s>
                                    <a:s> = </a:s>
                                    <a:s>
                                       <a:s>IMMZc.&quot;Sickle-cell Disease Condition&quot;</a:s>
                                    </a:s>
                                    <a:s>]</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> C</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
  </a:s>
                        <a:s r="68">
                           <a:s>where </a:s>
                           <a:s r="68">
                              <a:s r="64">
                                 <a:s r="61">
                                    <a:s r="60">
                                       <a:s>C</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="61">
                                       <a:s>clinicalStatus</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> in </a:s>
                                 <a:s r="63">
                                    <a:s r="62">
                                       <a:s>FC</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="63">
                                       <a:s>&quot;Active Condition&quot;</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s>
  and </a:s>
                              <a:s r="67">
                                 <a:s r="66">
                                    <a:s r="65">
                                       <a:s>C</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="66">
                                       <a:s>abatement</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> is null</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>)</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="70" locator="65:3-67:26" xsi:type="Exists">
            <operand localId="69" locator="65:9-67:26" xsi:type="Query">
               <source localId="59" locator="65:10-65:68" alias="C">
                  <expression localId="58" locator="65:10-65:66" dataType="fhir:Condition" templateId="http://hl7.org/fhir/StructureDefinition/Condition" codeProperty="code" codeComparator="=" xsi:type="Retrieve">
                     <codes xsi:type="ToList">
                        <operand locator="65:29-65:65" name="Sickle-cell Disease Condition" libraryName="IMMZc" xsi:type="CodeRef"/>
                     </codes>
                  </expression>
               </source>
               <where localId="68" locator="66:3-67:25" xsi:type="And">
                  <operand localId="64" locator="66:9-66:49" xsi:type="InValueSet">
                     <code name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand localId="61" locator="66:9-66:24" path="clinicalStatus" scope="C" xsi:type="Property"/>
                     </code>
                     <valueset localId="63" locator="66:29-66:49" name="Active Condition" libraryName="FC"/>
                  </operand>
                  <operand localId="67" locator="67:7-67:25" xsi:type="IsNull">
                     <operand localId="66" locator="67:7-67:17" path="abatement" scope="C" xsi:type="Property"/>
                  </operand>
               </where>
            </operand>
         </expression>
      </def>
      <def localId="82" locator="69:1-71:73" name="Pregnant Condition" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="82">
               <a:s>define &quot;Pregnant Condition&quot;:
  </a:s>
               <a:s r="81">
                  <a:s>
                     <a:s r="73">
                        <a:s r="72">
                           <a:s r="72">
                              <a:s>[Condition]</a:s>
                           </a:s>
                        </a:s>
                        <a:s> C</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s r="80">
                     <a:s>where </a:s>
                     <a:s r="80">
                        <a:s r="77">
                           <a:s>(</a:s>
                           <a:s r="77">
                              <a:s r="75">
                                 <a:s r="74">
                                    <a:s>C</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="75">
                                    <a:s>code</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> as </a:s>
                              <a:s r="76">
                                 <a:s>CodeableConcept</a:s>
                              </a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                        <a:s> in </a:s>
                        <a:s r="79">
                           <a:s r="78">
                              <a:s>Wcon</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="79">
                              <a:s>&quot;Pregnancy Status Pregnant&quot;</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="81" locator="70:3-71:73" xsi:type="Query">
            <source localId="73" locator="70:3-70:15" alias="C">
               <expression localId="72" locator="70:3-70:13" dataType="fhir:Condition" templateId="http://hl7.org/fhir/StructureDefinition/Condition" xsi:type="Retrieve"/>
            </source>
            <where localId="80" locator="71:5-71:73" xsi:type="InValueSet">
               <code name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                  <operand localId="77" locator="71:11-71:37" strict="false" xsi:type="As">
                     <operand localId="75" locator="71:12-71:17" path="code" scope="C" xsi:type="Property"/>
                     <asTypeSpecifier localId="76" locator="71:22-71:36" name="fhir:CodeableConcept" xsi:type="NamedTypeSpecifier"/>
                  </operand>
               </code>
               <valueset localId="79" locator="71:42-71:73" name="Pregnancy Status Pregnant" libraryName="Wcon"/>
            </where>
         </expression>
      </def>
      <def localId="88" locator="73:1-76:34" name="Pregnant" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="88">
               <a:s>define &quot;Pregnant&quot;: 
  </a:s>
               <a:s r="87">
                  <a:s r="84">
                     <a:s>exists
  </a:s>
                     <a:s r="83">
                        <a:s>( </a:s>
                        <a:s r="83">
                           <a:s>&quot;Pregnant Observation&quot;</a:s>
                        </a:s>
                        <a:s>)</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
  or </a:s>
                  <a:s r="86">
                     <a:s>exists </a:s>
                     <a:s r="85">
                        <a:s>(</a:s>
                        <a:s r="85">
                           <a:s>&quot;Pregnant Condition&quot;</a:s>
                        </a:s>
                        <a:s>)</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="87" locator="74:3-76:34" xsi:type="Or">
            <operand localId="84" locator="74:3-75:27" xsi:type="Exists">
               <operand localId="83" locator="75:3-75:27" name="Pregnant Observation" xsi:type="ExpressionRef"/>
            </operand>
            <operand localId="86" locator="76:6-76:34" xsi:type="Exists">
               <operand localId="85" locator="76:13-76:34" name="Pregnant Condition" xsi:type="ExpressionRef"/>
            </operand>
         </expression>
      </def>
      <def localId="99" locator="79:1-81:60" name="Individual is Seronegative for Dengue" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="99">
               <a:s>//Seronegative. Relevant for Dengue
define &quot;Individual is Seronegative for Dengue&quot;:
  </a:s>
               <a:s r="98">
                  <a:s>
                     <a:s r="90">
                        <a:s r="89">
                           <a:s r="89">
                              <a:s>[Observation]</a:s>
                           </a:s>
                        </a:s>
                        <a:s> O</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s r="97">
                     <a:s>where </a:s>
                     <a:s r="97">
                        <a:s r="94">
                           <a:s>(</a:s>
                           <a:s r="94">
                              <a:s r="92">
                                 <a:s r="91">
                                    <a:s>O</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="92">
                                    <a:s>value</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> as </a:s>
                              <a:s r="93">
                                 <a:s>CodeableConcept</a:s>
                              </a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                        <a:s> in </a:s>
                        <a:s r="96">
                           <a:s r="95">
                              <a:s>IMMZc</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="96">
                              <a:s>Seronegative</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="98" locator="80:3-81:60" xsi:type="Query">
            <source localId="90" locator="80:3-80:17" alias="O">
               <expression localId="89" locator="80:3-80:15" dataType="fhir:Observation" templateId="http://hl7.org/fhir/StructureDefinition/Observation" xsi:type="Retrieve"/>
            </source>
            <where localId="97" locator="81:5-81:60" xsi:type="InValueSet">
               <code name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                  <operand localId="94" locator="81:11-81:38" strict="false" xsi:type="As">
                     <operand localId="92" locator="81:12-81:18" path="value" scope="O" xsi:type="Property"/>
                     <asTypeSpecifier localId="93" locator="81:23-81:37" name="fhir:CodeableConcept" xsi:type="NamedTypeSpecifier"/>
                  </operand>
               </code>
               <valueset localId="96" locator="81:43-81:60" name="Seronegative" libraryName="IMMZc"/>
            </where>
         </expression>
      </def>
      <def localId="106" locator="84:1-86:18" name="Patient mother's pregnancy outcome observation" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="106">
               <a:s>//Total number of births including abortions, stillbirths and live births.
define &quot;Patient mother's pregnancy outcome observation&quot;:
  </a:s>
               <a:s r="105">
                  <a:s>
                     <a:s r="101">
                        <a:s r="100">
                           <a:s r="100">
                              <a:s>[Observation: </a:s>
                              <a:s>
                                 <a:s>code</a:s>
                              </a:s>
                              <a:s> = </a:s>
                              <a:s>
                                 <a:s>&quot;[#] Births total&quot;</a:s>
                              </a:s>
                              <a:s>]</a:s>
                           </a:s>
                        </a:s>
                        <a:s> O</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s r="104">
                     <a:s>return </a:s>
                     <a:s r="103">
                        <a:s r="102">
                           <a:s>O</a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="103">
                           <a:s>value</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="105" locator="85:3-86:18" xsi:type="Query">
            <source localId="101" locator="85:3-85:44" alias="O">
               <expression localId="100" locator="85:3-85:42" dataType="fhir:Observation" templateId="http://hl7.org/fhir/StructureDefinition/Observation" codeProperty="code" codeComparator="=" xsi:type="Retrieve">
                  <codes xsi:type="ToList">
                     <operand locator="85:24-85:41" name="[#] Births total" xsi:type="CodeRef"/>
                  </codes>
               </expression>
            </source>
            <return localId="104" locator="86:5-86:18">
               <expression localId="103" locator="86:12-86:18" path="value" scope="O" xsi:type="Property"/>
            </return>
         </expression>
      </def>
      <def localId="113" locator="90:1-92:18" name="Preterm" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="113">
               <a:s>// Total number of children whose birth occurred through the end of the last day of the 37th week (259th day) 
// following onset of the last menstrual period
define &quot;Preterm&quot;:
  </a:s>
               <a:s r="112">
                  <a:s>
                     <a:s r="108">
                        <a:s r="107">
                           <a:s r="107">
                              <a:s>[Observation: </a:s>
                              <a:s>
                                 <a:s>code</a:s>
                              </a:s>
                              <a:s> = </a:s>
                              <a:s>
                                 <a:s>&quot;[#] Births.preterm&quot;</a:s>
                              </a:s>
                              <a:s>]</a:s>
                           </a:s>
                        </a:s>
                        <a:s> O</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s r="111">
                     <a:s>return </a:s>
                     <a:s r="110">
                        <a:s r="109">
                           <a:s>O</a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="110">
                           <a:s>value</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="112" locator="91:3-92:18" xsi:type="Query">
            <source localId="108" locator="91:3-91:46" alias="O">
               <expression localId="107" locator="91:3-91:44" dataType="fhir:Observation" templateId="http://hl7.org/fhir/StructureDefinition/Observation" codeProperty="code" codeComparator="=" xsi:type="Retrieve">
                  <codes xsi:type="ToList">
                     <operand locator="91:24-91:43" name="[#] Births.preterm" xsi:type="CodeRef"/>
                  </codes>
               </expression>
            </source>
            <return localId="111" locator="92:5-92:18">
               <expression localId="110" locator="92:12-92:18" path="value" scope="O" xsi:type="Property"/>
            </return>
         </expression>
      </def>
      <def localId="124" locator="95:1-97:60" name="Preterm Birth" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="124">
               <a:s>//Observed Preterm birth
define &quot;Preterm Birth&quot;:
  </a:s>
               <a:s r="123">
                  <a:s>
                     <a:s r="115">
                        <a:s r="114">
                           <a:s r="114">
                              <a:s>[Observation]</a:s>
                           </a:s>
                        </a:s>
                        <a:s> O</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s r="122">
                     <a:s>where </a:s>
                     <a:s r="122">
                        <a:s r="119">
                           <a:s>(</a:s>
                           <a:s r="119">
                              <a:s r="117">
                                 <a:s r="116">
                                    <a:s>O</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="117">
                                    <a:s>value</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> as </a:s>
                              <a:s r="118">
                                 <a:s>CodeableConcept</a:s>
                              </a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                        <a:s> in </a:s>
                        <a:s r="121">
                           <a:s r="120">
                              <a:s>IMMZc</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="121">
                              <a:s>PretermBirth</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="123" locator="96:3-97:60" xsi:type="Query">
            <source localId="115" locator="96:3-96:17" alias="O">
               <expression localId="114" locator="96:3-96:15" dataType="fhir:Observation" templateId="http://hl7.org/fhir/StructureDefinition/Observation" xsi:type="Retrieve"/>
            </source>
            <where localId="122" locator="97:5-97:60" xsi:type="InValueSet">
               <code name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                  <operand localId="119" locator="97:11-97:38" strict="false" xsi:type="As">
                     <operand localId="117" locator="97:12-97:18" path="value" scope="O" xsi:type="Property"/>
                     <asTypeSpecifier localId="118" locator="97:23-97:37" name="fhir:CodeableConcept" xsi:type="NamedTypeSpecifier"/>
                  </operand>
               </code>
               <valueset localId="121" locator="97:43-97:60" name="PretermBirth" libraryName="IMMZc"/>
            </where>
         </expression>
      </def>
      <def localId="145" locator="100:1-103:12" name="Adverse Event" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="145">
               <a:s>//@dataElement Adverse Event:
define &quot;Adverse Event&quot;:
  </a:s>
               <a:s r="144">
                  <a:s>
                     <a:s>from </a:s>
                     <a:s r="126">
                        <a:s r="125">
                           <a:s r="125">
                              <a:s>[Immunization]</a:s>
                           </a:s>
                        </a:s>
                        <a:s> I</a:s>
                     </a:s>
                     <a:s>, </a:s>
                     <a:s r="128">
                        <a:s r="127">
                           <a:s r="127">
                              <a:s>[Observation]</a:s>
                           </a:s>
                        </a:s>
                        <a:s> O</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s r="141">
                     <a:s>where </a:s>
                     <a:s r="141">
                        <a:s r="130">
                           <a:s r="129">
                              <a:s>O</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="130">
                              <a:s>id</a:s>
                           </a:s>
                        </a:s>
                        <a:s> in </a:s>
                        <a:s r="140">
                           <a:s>(</a:s>
                           <a:s r="140">
                              <a:s>
                                 <a:s r="132">
                                    <a:s r="131">
                                       <a:s>
                                          <a:s>I.reaction</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> R</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> </a:s>
                              <a:s r="139">
                                 <a:s>return </a:s>
                                 <a:s r="138">
                                    <a:s>Last(</a:s>
                                    <a:s r="137">
                                       <a:s>Split(</a:s>
                                       <a:s r="135">
                                          <a:s r="134">
                                             <a:s r="133">
                                                <a:s>R</a:s>
                                             </a:s>
                                             <a:s>.</a:s>
                                             <a:s r="134">
                                                <a:s>detail</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="135">
                                             <a:s>reference</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>, </a:s>
                                       <a:s r="136">
                                          <a:s>'/'</a:s>
                                       </a:s>
                                       <a:s>)</a:s>
                                    </a:s>
                                    <a:s>)</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s r="143">
                     <a:s>return </a:s>
                     <a:s r="142">
                        <a:s>O</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="144" locator="101:3-103:12" xsi:type="Query">
            <source localId="126" locator="101:8-101:23" alias="I">
               <expression localId="125" locator="101:8-101:21" dataType="fhir:Immunization" templateId="http://hl7.org/fhir/StructureDefinition/Immunization" xsi:type="Retrieve"/>
            </source>
            <source localId="128" locator="101:26-101:40" alias="O">
               <expression localId="127" locator="101:26-101:38" dataType="fhir:Observation" templateId="http://hl7.org/fhir/StructureDefinition/Observation" xsi:type="Retrieve"/>
            </source>
            <where localId="141" locator="102:5-102:76" xsi:type="In">
               <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                  <operand localId="130" locator="102:11-102:14" path="id" scope="O" xsi:type="Property"/>
               </operand>
               <operand localId="140" locator="102:19-102:76" xsi:type="Query">
                  <source localId="132" locator="102:20-102:31" alias="R">
                     <expression localId="131" locator="102:20-102:29" path="reaction" scope="I" xsi:type="Property"/>
                  </source>
                  <return localId="139" locator="102:33-102:75">
                     <expression localId="138" locator="102:40-102:75" xsi:type="Last">
                        <source localId="137" locator="102:45-102:74" xsi:type="Split">
                           <stringToSplit name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                              <operand localId="135" locator="102:51-102:68" path="reference" xsi:type="Property">
                                 <source localId="134" locator="102:51-102:58" path="detail" scope="R" xsi:type="Property"/>
                              </operand>
                           </stringToSplit>
                           <separator localId="136" locator="102:71-102:73" valueType="t:String" value="/" xsi:type="Literal"/>
                        </source>
                     </expression>
                  </return>
               </operand>
            </where>
            <return localId="143" locator="103:5-103:12">
               <expression localId="142" locator="103:12" name="O" xsi:type="AliasRef"/>
            </return>
         </expression>
      </def>
      <def localId="160" locator="108:1-113:46" name="Allergy = True" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="160">
               <a:s>/* 
 * @dataElement Allergy = True
 */
define &quot;Allergy = True&quot;:
	</a:s>
               <a:s r="159">
                  <a:s>
                     <a:s r="147">
                        <a:s r="146">
                           <a:s r="146">
                              <a:s>[AllergyIntolerance]</a:s>
                           </a:s>
                        </a:s>
                        <a:s> A</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
	</a:s>
                  <a:s r="158">
                     <a:s>where 
	</a:s>
                     <a:s r="158">
                        <a:s r="152">
                           <a:s r="149">
                              <a:s r="148">
                                 <a:s>A</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="149">
                                 <a:s>clinicalStatus</a:s>
                              </a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="151">
                              <a:s r="150">
                                 <a:s>FC</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="151">
                                 <a:s>&quot;allergy-active&quot;</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>
	and
	</a:s>
                        <a:s r="157">
                           <a:s r="154">
                              <a:s r="153">
                                 <a:s>A</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="154">
                                 <a:s>verificationStatus</a:s>
                              </a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="156">
                              <a:s r="155">
                                 <a:s>FC</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="156">
                                 <a:s>&quot;allergy-confirmed&quot;</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="159" locator="109:2-113:46" xsi:type="Query">
            <source localId="147" locator="109:2-109:23" alias="A">
               <expression localId="146" locator="109:2-109:21" dataType="fhir:AllergyIntolerance" templateId="http://hl7.org/fhir/StructureDefinition/AllergyIntolerance" xsi:type="Retrieve"/>
            </source>
            <where localId="158" locator="110:2-113:46" xsi:type="And">
               <operand localId="152" locator="111:2-111:39" xsi:type="Equivalent">
                  <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <operand localId="149" locator="111:2-111:17" path="clinicalStatus" scope="A" xsi:type="Property"/>
                  </operand>
                  <operand xsi:type="ToConcept">
                     <operand localId="151" locator="111:21-111:39" name="allergy-active" libraryName="FC" xsi:type="CodeRef"/>
                  </operand>
               </operand>
               <operand localId="157" locator="113:2-113:46" xsi:type="Equivalent">
                  <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <operand localId="154" locator="113:2-113:21" path="verificationStatus" scope="A" xsi:type="Property"/>
                  </operand>
                  <operand xsi:type="ToConcept">
                     <operand localId="156" locator="113:25-113:46" name="allergy-confirmed" libraryName="FC" xsi:type="CodeRef"/>
                  </operand>
               </operand>
            </where>
         </expression>
      </def>
      <def localId="182" locator="118:1-124:39" name="Immunocompromised = True" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="182">
               <a:s>/* 
 * @dataElement Immunocompromised = True
 */
define &quot;Immunocompromised = True&quot;:
	</a:s>
               <a:s r="181">
                  <a:s>exists</a:s>
                  <a:s r="180">
                     <a:s>(</a:s>
                     <a:s r="180">
                        <a:s>
                           <a:s r="162">
                              <a:s r="161">
                                 <a:s r="161">
                                    <a:s>[Condition]</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> C</a:s>
                           </a:s>
                        </a:s>
                        <a:s> 
	</a:s>
                        <a:s r="179">
                           <a:s>where </a:s>
                           <a:s r="179">
                              <a:s r="173">
                                 <a:s r="167">
                                    <a:s r="164">
                                       <a:s r="163">
                                          <a:s>C</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="164">
                                          <a:s>code</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> in </a:s>
                                    <a:s r="166">
                                       <a:s r="165">
                                          <a:s>IMMZc</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="166">
                                          <a:s>&quot;Immunocompromised&quot;</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>
	and
  	</a:s>
                                 <a:s r="172">
                                    <a:s r="169">
                                       <a:s r="168">
                                          <a:s>C</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="169">
                                          <a:s>clinicalStatus</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> in </a:s>
                                    <a:s r="171">
                                       <a:s r="170">
                                          <a:s>FC</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="171">
                                          <a:s>&quot;Active Condition&quot;</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s>
	and
	</a:s>
                              <a:s r="178">
                                 <a:s r="175">
                                    <a:s r="174">
                                       <a:s>C</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="175">
                                       <a:s>verificationStatus</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> ~ </a:s>
                                 <a:s r="177">
                                    <a:s r="176">
                                       <a:s>FC</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="177">
                                       <a:s>&quot;confirmed&quot;</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>)</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="181" locator="119:2-124:39" xsi:type="Exists">
            <operand localId="180" locator="119:8-124:39" xsi:type="Query">
               <source localId="162" locator="119:9-119:21" alias="C">
                  <expression localId="161" locator="119:9-119:19" dataType="fhir:Condition" templateId="http://hl7.org/fhir/StructureDefinition/Condition" xsi:type="Retrieve"/>
               </source>
               <where localId="179" locator="120:2-124:38" xsi:type="And">
                  <operand localId="173" locator="120:8-122:44" xsi:type="And">
                     <operand localId="167" locator="120:8-120:42" xsi:type="InValueSet">
                        <code name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand localId="164" locator="120:8-120:13" path="code" scope="C" xsi:type="Property"/>
                        </code>
                        <valueset localId="166" locator="120:18-120:42" name="Immunocompromised" libraryName="IMMZc"/>
                     </operand>
                     <operand localId="172" locator="122:4-122:44" xsi:type="InValueSet">
                        <code name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand localId="169" locator="122:4-122:19" path="clinicalStatus" scope="C" xsi:type="Property"/>
                        </code>
                        <valueset localId="171" locator="122:24-122:44" name="Active Condition" libraryName="FC"/>
                     </operand>
                  </operand>
                  <operand localId="178" locator="124:2-124:38" xsi:type="Equivalent">
                     <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand localId="175" locator="124:2-124:21" path="verificationStatus" scope="C" xsi:type="Property"/>
                     </operand>
                     <operand xsi:type="ToConcept">
                        <operand localId="177" locator="124:25-124:38" name="confirmed" libraryName="FC" xsi:type="CodeRef"/>
                     </operand>
                  </operand>
               </where>
            </operand>
         </expression>
      </def>
      <def localId="196" locator="129:1-132:56" name="Doses Administered to Patient" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="196">
               <a:s>/**
 * @dataElement All Doses Administered to Patient to patient ordered newest to oldest
 */
define &quot;Doses Administered to Patient&quot;:
  </a:s>
               <a:s r="195">
                  <a:s>
                     <a:s r="184">
                        <a:s r="183">
                           <a:s r="183">
                              <a:s>[Immunization]</a:s>
                           </a:s>
                        </a:s>
                        <a:s> I</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s r="188">
                     <a:s>where </a:s>
                     <a:s r="188">
                        <a:s r="186">
                           <a:s r="185">
                              <a:s>I</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="186">
                              <a:s>status</a:s>
                           </a:s>
                        </a:s>
                        <a:s> = </a:s>
                        <a:s r="187">
                           <a:s>'completed'</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s r="194">
                     <a:s>sort by </a:s>
                     <a:s r="193">
                        <a:s r="192">
                           <a:s>date from </a:s>
                           <a:s r="191">
                              <a:s>(</a:s>
                              <a:s r="191">
                                 <a:s r="189">
                                    <a:s>occurrence</a:s>
                                 </a:s>
                                 <a:s> as </a:s>
                                 <a:s r="190">
                                    <a:s>FHIR.dateTime</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                        </a:s>
                        <a:s> desc</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="195" locator="130:3-132:56" xsi:type="Query">
            <source localId="184" locator="130:3-130:18" alias="I">
               <expression localId="183" locator="130:3-130:16" dataType="fhir:Immunization" templateId="http://hl7.org/fhir/StructureDefinition/Immunization" xsi:type="Retrieve"/>
            </source>
            <where localId="188" locator="131:5-131:32" xsi:type="Equal">
               <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                  <operand localId="186" locator="131:11-131:18" path="status" scope="I" xsi:type="Property"/>
               </operand>
               <operand localId="187" locator="131:22-131:32" valueType="t:String" value="completed" xsi:type="Literal"/>
            </where>
            <sort localId="194" locator="132:5-132:56">
               <by localId="193" locator="132:13-132:56" direction="desc" xsi:type="ByExpression">
                  <expression localId="192" locator="132:13-132:51" xsi:type="DateFrom">
                     <operand name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand localId="191" locator="132:23-132:51" strict="false" xsi:type="As">
                           <operand localId="189" locator="132:24-132:33" name="occurrence" xsi:type="IdentifierRef"/>
                           <asTypeSpecifier localId="190" locator="132:38-132:50" name="fhir:dateTime" xsi:type="NamedTypeSpecifier"/>
                        </operand>
                     </operand>
                  </expression>
               </by>
            </sort>
         </expression>
      </def>
      <def localId="205" locator="137:1-140:40" name="BCG Doses Administered to Patient" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="205">
               <a:s>/**
 * @dataElement BCG Doses Administered to Patient
 */
define &quot;BCG Doses Administered to Patient&quot;:
  </a:s>
               <a:s r="204">
                  <a:s>
                     <a:s r="198">
                        <a:s r="197">
                           <a:s>
                              <a:s>&quot;Doses Administered to Patient&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s> I</a:s>
                     </a:s>
                  </a:s>
                  <a:s> 
  </a:s>
                  <a:s r="203">
                     <a:s>where 
    </a:s>
                     <a:s r="203">
                        <a:s r="200">
                           <a:s r="199">
                              <a:s>I</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="200">
                              <a:s>vaccineCode</a:s>
                           </a:s>
                        </a:s>
                        <a:s> in </a:s>
                        <a:s r="202">
                           <a:s r="201">
                              <a:s>IMMZc</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="202">
                              <a:s>&quot;BCG Vaccine&quot;</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="204" locator="138:3-140:40" xsi:type="Query">
            <source localId="198" locator="138:3-138:35" alias="I">
               <expression localId="197" locator="138:3-138:33" name="Doses Administered to Patient" xsi:type="ExpressionRef"/>
            </source>
            <where localId="203" locator="139:3-140:40" xsi:type="InValueSet">
               <code name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                  <operand localId="200" locator="140:5-140:17" path="vaccineCode" scope="I" xsi:type="Property"/>
               </code>
               <valueset localId="202" locator="140:22-140:40" name="BCG Vaccine" libraryName="IMMZc"/>
            </where>
         </expression>
      </def>
      <def localId="209" locator="145:1-146:49" name="No BCG Doses Administered to Patient" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="209">
               <a:s>/**
 * @dataElement Patient has no BCG doses
 */
define &quot;No BCG Doses Administered to Patient&quot;:
  </a:s>
               <a:s r="208">
                  <a:s>not </a:s>
                  <a:s r="207">
                     <a:s>exists</a:s>
                     <a:s r="206">
                        <a:s>(</a:s>
                        <a:s r="206">
                           <a:s>&quot;BCG Doses Administered to Patient&quot;</a:s>
                        </a:s>
                        <a:s>)</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="208" locator="146:3-146:49" xsi:type="Not">
            <operand localId="207" locator="146:7-146:49" xsi:type="Exists">
               <operand localId="206" locator="146:13-146:49" name="BCG Doses Administered to Patient" xsi:type="ExpressionRef"/>
            </operand>
         </expression>
      </def>
      <def localId="218" locator="151:1-154:42" name="Polio Doses Administered to Patient" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="218">
               <a:s>/**
 * @dataElement Polio Doses Administered to Patient
 */
define &quot;Polio Doses Administered to Patient&quot;:
  </a:s>
               <a:s r="217">
                  <a:s>
                     <a:s r="211">
                        <a:s r="210">
                           <a:s>
                              <a:s>&quot;Doses Administered to Patient&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s> I</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
  </a:s>
                  <a:s r="216">
                     <a:s>where
    </a:s>
                     <a:s r="216">
                        <a:s r="213">
                           <a:s r="212">
                              <a:s>I</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="213">
                              <a:s>vaccineCode</a:s>
                           </a:s>
                        </a:s>
                        <a:s> in </a:s>
                        <a:s r="215">
                           <a:s r="214">
                              <a:s>IMMZc</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="215">
                              <a:s>&quot;Polio Vaccine&quot;</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="217" locator="152:3-154:42" xsi:type="Query">
            <source localId="211" locator="152:3-152:35" alias="I">
               <expression localId="210" locator="152:3-152:33" name="Doses Administered to Patient" xsi:type="ExpressionRef"/>
            </source>
            <where localId="216" locator="153:3-154:42" xsi:type="InValueSet">
               <code name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                  <operand localId="213" locator="154:5-154:17" path="vaccineCode" scope="I" xsi:type="Property"/>
               </code>
               <valueset localId="215" locator="154:22-154:42" name="Polio Vaccine" libraryName="IMMZc"/>
            </where>
         </expression>
      </def>
      <def localId="227" locator="159:1-162:47" name="bOPV Doses Administered to Patient" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="227">
               <a:s>/**
 * @dataElement Polio Doses Administered to Patient
 */
define &quot;bOPV Doses Administered to Patient&quot;:
  </a:s>
               <a:s r="226">
                  <a:s>
                     <a:s r="220">
                        <a:s r="219">
                           <a:s>
                              <a:s>&quot;Doses Administered to Patient&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s> I</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
  </a:s>
                  <a:s r="225">
                     <a:s>where
    </a:s>
                     <a:s r="225">
                        <a:s r="222">
                           <a:s r="221">
                              <a:s>I</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="222">
                              <a:s>vaccineCode</a:s>
                           </a:s>
                        </a:s>
                        <a:s> in </a:s>
                        <a:s r="224">
                           <a:s r="223">
                              <a:s>IMMZc</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="224">
                              <a:s>&quot;Oral Polio Vaccine&quot;</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="226" locator="160:3-162:47" xsi:type="Query">
            <source localId="220" locator="160:3-160:35" alias="I">
               <expression localId="219" locator="160:3-160:33" name="Doses Administered to Patient" xsi:type="ExpressionRef"/>
            </source>
            <where localId="225" locator="161:3-162:47" xsi:type="InValueSet">
               <code name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                  <operand localId="222" locator="162:5-162:17" path="vaccineCode" scope="I" xsi:type="Property"/>
               </code>
               <valueset localId="224" locator="162:22-162:47" name="Oral Polio Vaccine" libraryName="IMMZc"/>
            </where>
         </expression>
      </def>
      <def localId="253" locator="946:1-952:4" name="ToPositiveInt" context="Patient" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="253">
               <a:s>/**
 * @description Takes a choice of FHIR.string and FHIR.positiveInt and ensures the result is a FHIR.positiveInt
 */
define function ToPositiveInt(choice </a:s>
               <a:s r="236">
                  <a:s>Choice&lt;</a:s>
                  <a:s r="234">
                     <a:s>FHIR.positiveInt</a:s>
                  </a:s>
                  <a:s>, </a:s>
                  <a:s r="235">
                     <a:s>FHIR.string</a:s>
                  </a:s>
                  <a:s>></a:s>
               </a:s>
               <a:s>):
  </a:s>
               <a:s r="252">
                  <a:s r="252">
                     <a:s>case
	  </a:s>
                     <a:s r="243">
                        <a:s>when </a:s>
                        <a:s r="239">
                           <a:s r="237">
                              <a:s>choice</a:s>
                           </a:s>
                           <a:s> is </a:s>
                           <a:s r="238">
                              <a:s>FHIR.positiveInt</a:s>
                           </a:s>
                        </a:s>
                        <a:s> then
    	</a:s>
                        <a:s r="242">
                           <a:s r="240">
                              <a:s>choice</a:s>
                           </a:s>
                           <a:s> as </a:s>
                           <a:s r="241">
                              <a:s>FHIR.positiveInt</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>
		else
      </a:s>
                     <a:s r="251">
                        <a:s>Message(</a:s>
                        <a:s r="246">
                           <a:s r="244">null as </a:s>
                           <a:s r="245">
                              <a:s>FHIR.positiveInt</a:s>
                           </a:s>
                        </a:s>
                        <a:s r="247">, true, </a:s>
                        <a:s r="248">
                           <a:s>'1'</a:s>
                        </a:s>
                        <a:s>, </a:s>
                        <a:s r="249">
                           <a:s>'Error'</a:s>
                        </a:s>
                        <a:s>, </a:s>
                        <a:s r="250">
                           <a:s>'Cannot compute a positive from a String value'</a:s>
                        </a:s>
                        <a:s>)</a:s>
                     </a:s>
                     <a:s> // TODO: I'm sure that this is supported somehow?
	end</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="252" locator="947:3-952:4" xsi:type="Case">
            <caseItem localId="243" locator="948:4-949:31">
               <when localId="239" locator="948:9-948:34" xsi:type="Is">
                  <operand localId="237" locator="948:9-948:14" name="choice" xsi:type="OperandRef"/>
                  <isTypeSpecifier localId="238" locator="948:19-948:34" name="fhir:positiveInt" xsi:type="NamedTypeSpecifier"/>
               </when>
               <then localId="242" locator="949:6-949:31" strict="false" xsi:type="As">
                  <operand localId="240" locator="949:6-949:11" name="choice" xsi:type="OperandRef"/>
                  <asTypeSpecifier localId="241" locator="949:16-949:31" name="fhir:positiveInt" xsi:type="NamedTypeSpecifier"/>
               </then>
            </caseItem>
            <else localId="251" locator="951:7-951:108" xsi:type="Message">
               <source localId="246" locator="951:15-951:38" strict="false" xsi:type="As">
                  <operand localId="244" locator="951:15-951:18" xsi:type="Null"/>
                  <asTypeSpecifier localId="245" locator="951:23-951:38" name="fhir:positiveInt" xsi:type="NamedTypeSpecifier"/>
               </source>
               <condition localId="247" locator="951:41-951:44" valueType="t:Boolean" value="true" xsi:type="Literal"/>
               <code localId="248" locator="951:47-951:49" valueType="t:String" value="1" xsi:type="Literal"/>
               <severity localId="249" locator="951:52-951:58" valueType="t:String" value="Error" xsi:type="Literal"/>
               <message localId="250" locator="951:61-951:107" valueType="t:String" value="Cannot compute a positive from a String value" xsi:type="Literal"/>
            </else>
         </expression>
         <operand name="choice">
            <operandTypeSpecifier localId="236" locator="946:38-946:74" xsi:type="ChoiceTypeSpecifier">
               <choice localId="234" locator="946:45-946:60" name="fhir:positiveInt" xsi:type="NamedTypeSpecifier"/>
               <choice localId="235" locator="946:63-946:73" name="fhir:string" xsi:type="NamedTypeSpecifier"/>
            </operandTypeSpecifier>
         </operand>
      </def>
      <def localId="259" locator="169:1-170:119" name="Number of bOPV Doses Administered to Patient Excluding Birth Dose" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="259">
               <a:s>/**
 * @dataElement Patient has no bOPV Doses
 * TODO: Do we want &quot;number of doses&quot; or &quot;highest dose sequence&quot;? For example for interrupted series the dose
 *       number would be 1, 2, 1, 2, 1, 2 -> the highest sequence is 2 but the number is 6
 */
define &quot;Number of bOPV Doses Administered to Patient Excluding Birth Dose&quot;:
  </a:s>
               <a:s r="258">
                  <a:s>Count(</a:s>
                  <a:s r="257">
                     <a:s>
                        <a:s r="229">
                           <a:s r="228">
                              <a:s>
                                 <a:s>&quot;bOPV Doses Administered to Patient&quot;</a:s>
                              </a:s>
                           </a:s>
                           <a:s> O</a:s>
                        </a:s>
                     </a:s>
                     <a:s> </a:s>
                     <a:s r="256">
                        <a:s>where </a:s>
                        <a:s r="256">
                           <a:s r="254">
                              <a:s>ToPositiveInt(</a:s>
                              <a:s r="233">
                                 <a:s r="232">
                                    <a:s>(</a:s>
                                    <a:s r="232">
                                       <a:s>singleton from </a:s>
                                       <a:s r="231">
                                          <a:s r="230">
                                             <a:s>O</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="231">
                                             <a:s>protocolApplied</a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>)</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="233">
                                    <a:s>doseNumber</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                           <a:s r="255"> != 0</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>)</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="258" locator="170:3-170:119" xsi:type="Count">
            <source localId="257" locator="170:9-170:118" xsi:type="Query">
               <source localId="229" locator="170:9-170:46" alias="O">
                  <expression localId="228" locator="170:9-170:44" name="bOPV Doses Administered to Patient" xsi:type="ExpressionRef"/>
               </source>
               <where localId="256" locator="170:48-170:118" xsi:type="Not">
                  <operand locator="170:54-170:118" xsi:type="Equal">
                     <operand name="ToInteger" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand localId="254" locator="170:54-170:113" name="ToPositiveInt" xsi:type="FunctionRef">
                           <operand localId="233" locator="170:68-170:112" path="doseNumber" xsi:type="Property">
                              <source localId="232" locator="170:68-170:101" xsi:type="SingletonFrom">
                                 <operand localId="231" locator="170:84-170:100" path="protocolApplied" scope="O" xsi:type="Property"/>
                              </source>
                           </operand>
                        </operand>
                     </operand>
                     <operand localId="255" locator="170:118" valueType="t:Integer" value="0" xsi:type="Literal"/>
                  </operand>
               </where>
            </source>
         </expression>
      </def>
      <def localId="263" locator="175:1-176:51" name="No bOPV Doses Administered to Patient" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="263">
               <a:s>/**
 * @dataElement Patient has no IPV doses
 */
define &quot;No bOPV Doses Administered to Patient&quot;:
  </a:s>
               <a:s r="262">
                  <a:s>not </a:s>
                  <a:s r="261">
                     <a:s>exists </a:s>
                     <a:s r="260">
                        <a:s>(</a:s>
                        <a:s r="260">
                           <a:s>&quot;bOPV Doses Administered to Patient&quot;</a:s>
                        </a:s>
                        <a:s>)</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="262" locator="176:3-176:51" xsi:type="Not">
            <operand localId="261" locator="176:7-176:51" xsi:type="Exists">
               <operand localId="260" locator="176:14-176:51" name="bOPV Doses Administered to Patient" xsi:type="ExpressionRef"/>
            </operand>
         </expression>
      </def>
      <def localId="270" locator="181:1-182:85" name="Date Last bOPV Dose Administered to Patient" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="270">
               <a:s>/** 
 * @dataElement Date of last OPV dose administration
 */
define &quot;Date Last bOPV Dose Administered to Patient&quot;:
  </a:s>
               <a:s r="269">
                  <a:s>date from </a:s>
                  <a:s r="268">
                     <a:s>(</a:s>
                     <a:s r="268">
                        <a:s r="266">
                           <a:s r="265">
                              <a:s>First(</a:s>
                              <a:s r="264">
                                 <a:s>&quot;bOPV Doses Administered to Patient&quot;</a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="266">
                              <a:s>occurrence</a:s>
                           </a:s>
                        </a:s>
                        <a:s> as </a:s>
                        <a:s r="267">
                           <a:s>FHIR.dateTime</a:s>
                        </a:s>
                     </a:s>
                     <a:s>)</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="269" locator="182:3-182:85" xsi:type="DateFrom">
            <operand name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
               <operand localId="268" locator="182:13-182:85" strict="false" xsi:type="As">
                  <operand localId="266" locator="182:14-182:67" path="occurrence" xsi:type="Property">
                     <source localId="265" locator="182:14-182:56" xsi:type="First">
                        <source localId="264" locator="182:20-182:55" name="bOPV Doses Administered to Patient" xsi:type="ExpressionRef"/>
                     </source>
                  </operand>
                  <asTypeSpecifier localId="267" locator="182:72-182:84" name="fhir:dateTime" xsi:type="NamedTypeSpecifier"/>
               </operand>
            </operand>
         </expression>
      </def>
      <def localId="279" locator="187:1-190:54" name="IPV Doses Administered to Patient" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="279">
               <a:s>/**
 * @dataElement Polio Doses Administered to Patient
 */
define &quot;IPV Doses Administered to Patient&quot;:
  </a:s>
               <a:s r="278">
                  <a:s>
                     <a:s r="272">
                        <a:s r="271">
                           <a:s>
                              <a:s>&quot;Doses Administered to Patient&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s> I</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
  </a:s>
                  <a:s r="277">
                     <a:s>where
    </a:s>
                     <a:s r="277">
                        <a:s r="274">
                           <a:s r="273">
                              <a:s>I</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="274">
                              <a:s>vaccineCode</a:s>
                           </a:s>
                        </a:s>
                        <a:s> in </a:s>
                        <a:s r="276">
                           <a:s r="275">
                              <a:s>IMMZc</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="276">
                              <a:s>&quot;Inactivated Polio Vaccine&quot;</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="278" locator="188:3-190:54" xsi:type="Query">
            <source localId="272" locator="188:3-188:35" alias="I">
               <expression localId="271" locator="188:3-188:33" name="Doses Administered to Patient" xsi:type="ExpressionRef"/>
            </source>
            <where localId="277" locator="189:3-190:54" xsi:type="InValueSet">
               <code name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                  <operand localId="274" locator="190:5-190:17" path="vaccineCode" scope="I" xsi:type="Property"/>
               </code>
               <valueset localId="276" locator="190:22-190:54" name="Inactivated Polio Vaccine" libraryName="IMMZc"/>
            </where>
         </expression>
      </def>
      <def localId="291" locator="195:1-196:118" name="Number of IPV Doses Administered to Patient" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="291">
               <a:s>/**
 * @dataElement Patient has no IPV doses
 */
define &quot;Number of IPV Doses Administered to Patient&quot;:
  </a:s>
               <a:s r="290">
                  <a:s>Count(</a:s>
                  <a:s r="289">
                     <a:s>
                        <a:s r="281">
                           <a:s r="280">
                              <a:s>
                                 <a:s>&quot;IPV Doses Administered to Patient&quot;</a:s>
                              </a:s>
                           </a:s>
                           <a:s> O</a:s>
                        </a:s>
                     </a:s>
                     <a:s> </a:s>
                     <a:s r="288">
                        <a:s>where </a:s>
                        <a:s r="288">
                           <a:s r="286">
                              <a:s>ToPositiveInt(</a:s>
                              <a:s r="285">
                                 <a:s r="284">
                                    <a:s>(</a:s>
                                    <a:s r="284">
                                       <a:s>singleton from </a:s>
                                       <a:s r="283">
                                          <a:s r="282">
                                             <a:s>O</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="283">
                                             <a:s>protocolApplied</a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>)</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="285">
                                    <a:s>doseNumber</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                           <a:s r="287"> != 0</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>)</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="290" locator="196:3-196:118" xsi:type="Count">
            <source localId="289" locator="196:9-196:117" xsi:type="Query">
               <source localId="281" locator="196:9-196:45" alias="O">
                  <expression localId="280" locator="196:9-196:43" name="IPV Doses Administered to Patient" xsi:type="ExpressionRef"/>
               </source>
               <where localId="288" locator="196:47-196:117" xsi:type="Not">
                  <operand locator="196:53-196:117" xsi:type="Equal">
                     <operand name="ToInteger" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand localId="286" locator="196:53-196:112" name="ToPositiveInt" xsi:type="FunctionRef">
                           <operand localId="285" locator="196:67-196:111" path="doseNumber" xsi:type="Property">
                              <source localId="284" locator="196:67-196:100" xsi:type="SingletonFrom">
                                 <operand localId="283" locator="196:83-196:99" path="protocolApplied" scope="O" xsi:type="Property"/>
                              </source>
                           </operand>
                        </operand>
                     </operand>
                     <operand localId="287" locator="196:117" valueType="t:Integer" value="0" xsi:type="Literal"/>
                  </operand>
               </where>
            </source>
         </expression>
      </def>
      <def localId="295" locator="201:1-202:50" name="No IPV Doses Administered to Patient" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="295">
               <a:s>/**
 * @dataElement Patient has no IPV doses
 */
define &quot;No IPV Doses Administered to Patient&quot;:
  </a:s>
               <a:s r="294">
                  <a:s>not </a:s>
                  <a:s r="293">
                     <a:s>exists </a:s>
                     <a:s r="292">
                        <a:s>(</a:s>
                        <a:s r="292">
                           <a:s>&quot;IPV Doses Administered to Patient&quot;</a:s>
                        </a:s>
                        <a:s>)</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="294" locator="202:3-202:50" xsi:type="Not">
            <operand localId="293" locator="202:7-202:50" xsi:type="Exists">
               <operand localId="292" locator="202:14-202:50" name="IPV Doses Administered to Patient" xsi:type="ExpressionRef"/>
            </operand>
         </expression>
      </def>
      <def localId="302" locator="207:1-208:84" name="Date Last IPV Dose Administered to Patient" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="302">
               <a:s>/** 
 * @dataElement Date of last IPV dose administration
 */
define &quot;Date Last IPV Dose Administered to Patient&quot;:
  </a:s>
               <a:s r="301">
                  <a:s>date from </a:s>
                  <a:s r="300">
                     <a:s>(</a:s>
                     <a:s r="300">
                        <a:s r="298">
                           <a:s r="297">
                              <a:s>First(</a:s>
                              <a:s r="296">
                                 <a:s>&quot;IPV Doses Administered to Patient&quot;</a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="298">
                              <a:s>occurrence</a:s>
                           </a:s>
                        </a:s>
                        <a:s> as </a:s>
                        <a:s r="299">
                           <a:s>FHIR.dateTime</a:s>
                        </a:s>
                     </a:s>
                     <a:s>)</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="301" locator="208:3-208:84" xsi:type="DateFrom">
            <operand name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
               <operand localId="300" locator="208:13-208:84" strict="false" xsi:type="As">
                  <operand localId="298" locator="208:14-208:66" path="occurrence" xsi:type="Property">
                     <source localId="297" locator="208:14-208:55" xsi:type="First">
                        <source localId="296" locator="208:20-208:54" name="IPV Doses Administered to Patient" xsi:type="ExpressionRef"/>
                     </source>
                  </operand>
                  <asTypeSpecifier localId="299" locator="208:71-208:83" name="fhir:dateTime" xsi:type="NamedTypeSpecifier"/>
               </operand>
            </operand>
         </expression>
      </def>
      <def localId="318" locator="213:1-218:31" name="Patient Age at 1st IPV Dose in Weeks" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="318">
               <a:s>/**
 * @dataElement Patient of the patient of the most recent IPV dose
 */
define &quot;Patient Age at 1st IPV Dose in Weeks&quot;:
  </a:s>
               <a:s r="317">
                  <a:s>First(</a:s>
                  <a:s r="316">
                     <a:s>
                        <a:s r="304">
                           <a:s r="303">
                              <a:s>
                                 <a:s>&quot;IPV Doses Administered to Patient&quot;</a:s>
                              </a:s>
                           </a:s>
                           <a:s> I</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
  </a:s>
                     <a:s r="311">
                        <a:s>where 
    </a:s>
                        <a:s r="311">
                           <a:s r="309">
                              <a:s>ToPositiveInt(</a:s>
                              <a:s r="308">
                                 <a:s>singleton from </a:s>
                                 <a:s r="307">
                                    <a:s r="306">
                                       <a:s>(</a:s>
                                       <a:s r="306">
                                          <a:s r="305">
                                             <a:s>I</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="306">
                                             <a:s>protocolApplied</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>)</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="307">
                                       <a:s>doseNumber</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                           <a:s r="310"> = 1</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
  </a:s>
                     <a:s r="315">
                        <a:s>return 
    </a:s>
                        <a:s r="314">
                           <a:s>AgeInWeeksAt(</a:s>
                           <a:s r="313">
                              <a:s r="312">
                                 <a:s>I</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="313">
                                 <a:s>occurrence</a:s>
                              </a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>)</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="317" locator="214:3-218:31" xsi:type="First">
            <source localId="316" locator="214:9-218:30" xsi:type="Query">
               <source localId="304" locator="214:9-214:45" alias="I">
                  <expression localId="303" locator="214:9-214:43" name="IPV Doses Administered to Patient" xsi:type="ExpressionRef"/>
               </source>
               <where localId="311" locator="215:3-216:68" xsi:type="Equal">
                  <operand name="ToInteger" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <operand localId="309" locator="216:5-216:64" name="ToPositiveInt" xsi:type="FunctionRef">
                        <operand localId="308" locator="216:19-216:63" xsi:type="SingletonFrom">
                           <operand localId="307" locator="216:34-216:63" xsi:type="Query">
                              <source alias="$this">
                                 <expression localId="306" locator="216:34-216:52" path="protocolApplied" scope="I" xsi:type="Property"/>
                              </source>
                              <where xsi:type="Not">
                                 <operand xsi:type="IsNull">
                                    <operand path="doseNumber" xsi:type="Property">
                                       <source name="$this" xsi:type="AliasRef"/>
                                    </operand>
                                 </operand>
                              </where>
                              <return distinct="false">
                                 <expression path="doseNumber" xsi:type="Property">
                                    <source name="$this" xsi:type="AliasRef"/>
                                 </expression>
                              </return>
                           </operand>
                        </operand>
                     </operand>
                  </operand>
                  <operand localId="310" locator="216:68" valueType="t:Integer" value="1" xsi:type="Literal"/>
               </where>
               <return localId="315" locator="217:3-218:30">
                  <expression localId="314" locator="218:5-218:30" precision="Week" xsi:type="CalculateAgeAt">
                     <operand xsi:type="ToDateTime">
                        <operand path="birthDate.value" xsi:type="Property">
                           <source name="Patient" xsi:type="ExpressionRef"/>
                        </operand>
                     </operand>
                     <operand name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand asType="fhir:dateTime" xsi:type="As">
                           <operand localId="313" locator="218:18-218:29" path="occurrence" scope="I" xsi:type="Property"/>
                        </operand>
                     </operand>
                  </expression>
               </return>
            </source>
         </expression>
      </def>
      <def localId="327" locator="481:1-484:49" name="Pneumococcal Doses Administered to Patient" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="327">
               <a:s>/**
 * @dataElement Pneumococcal containing Doses Administered to Patient
 */
define &quot;Pneumococcal Doses Administered to Patient&quot;:
  </a:s>
               <a:s r="326">
                  <a:s>
                     <a:s r="320">
                        <a:s r="319">
                           <a:s>
                              <a:s>&quot;Doses Administered to Patient&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s> I</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
  </a:s>
                  <a:s r="325">
                     <a:s>where
    </a:s>
                     <a:s r="325">
                        <a:s r="322">
                           <a:s r="321">
                              <a:s>I</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="322">
                              <a:s>vaccineCode</a:s>
                           </a:s>
                        </a:s>
                        <a:s> in </a:s>
                        <a:s r="324">
                           <a:s r="323">
                              <a:s>IMMZc</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="324">
                              <a:s>&quot;Pneumococcal Vaccine&quot;</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="326" locator="482:3-484:49" xsi:type="Query">
            <source localId="320" locator="482:3-482:35" alias="I">
               <expression localId="319" locator="482:3-482:33" name="Doses Administered to Patient" xsi:type="ExpressionRef"/>
            </source>
            <where localId="325" locator="483:3-484:49" xsi:type="InValueSet">
               <code name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                  <operand localId="322" locator="484:5-484:17" path="vaccineCode" scope="I" xsi:type="Property"/>
               </code>
               <valueset localId="324" locator="484:22-484:49" name="Pneumococcal Vaccine" libraryName="IMMZc"/>
            </where>
         </expression>
      </def>
      <def localId="343" locator="223:1-227:31" name="Patient Age at 1st Dose of Pneumococcal in Months" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="343">
               <a:s>/** 
* @dataElement Age of patient at first dose of pneu
 */
define &quot;Patient Age at 1st Dose of Pneumococcal in Months&quot;:
  </a:s>
               <a:s r="342">
                  <a:s>First(</a:s>
                  <a:s r="341">
                     <a:s>
                        <a:s r="329">
                           <a:s r="328">
                              <a:s>
                                 <a:s>&quot;Pneumococcal Doses Administered to Patient&quot;</a:s>
                              </a:s>
                           </a:s>
                           <a:s> I</a:s>
                        </a:s>
                     </a:s>
                     <a:s> 
    </a:s>
                     <a:s r="336">
                        <a:s>where </a:s>
                        <a:s r="336">
                           <a:s r="334">
                              <a:s>ToPositiveInt(</a:s>
                              <a:s r="333">
                                 <a:s r="332">
                                    <a:s>(</a:s>
                                    <a:s r="332">
                                       <a:s>singleton from </a:s>
                                       <a:s r="331">
                                          <a:s r="330">
                                             <a:s>I</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="331">
                                             <a:s>protocolApplied</a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>)</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="333">
                                    <a:s>doseNumber</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                           <a:s r="335"> = 1</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
  </a:s>
                     <a:s r="340">
                        <a:s>return 
    </a:s>
                        <a:s r="339">
                           <a:s>AgeInWeeksAt(</a:s>
                           <a:s r="338">
                              <a:s r="337">
                                 <a:s>I</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="338">
                                 <a:s>occurrence</a:s>
                              </a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>)</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="342" locator="224:3-227:31" xsi:type="First">
            <source localId="341" locator="224:9-227:30" xsi:type="Query">
               <source localId="329" locator="224:9-224:54" alias="I">
                  <expression localId="328" locator="224:9-224:52" name="Pneumococcal Doses Administered to Patient" xsi:type="ExpressionRef"/>
               </source>
               <where localId="336" locator="225:5-225:74" xsi:type="Equal">
                  <operand name="ToInteger" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <operand localId="334" locator="225:11-225:70" name="ToPositiveInt" xsi:type="FunctionRef">
                        <operand localId="333" locator="225:25-225:69" path="doseNumber" xsi:type="Property">
                           <source localId="332" locator="225:25-225:58" xsi:type="SingletonFrom">
                              <operand localId="331" locator="225:41-225:57" path="protocolApplied" scope="I" xsi:type="Property"/>
                           </source>
                        </operand>
                     </operand>
                  </operand>
                  <operand localId="335" locator="225:74" valueType="t:Integer" value="1" xsi:type="Literal"/>
               </where>
               <return localId="340" locator="226:3-227:30">
                  <expression localId="339" locator="227:5-227:30" precision="Week" xsi:type="CalculateAgeAt">
                     <operand xsi:type="ToDateTime">
                        <operand path="birthDate.value" xsi:type="Property">
                           <source name="Patient" xsi:type="ExpressionRef"/>
                        </operand>
                     </operand>
                     <operand name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand asType="fhir:dateTime" xsi:type="As">
                           <operand localId="338" locator="227:18-227:29" path="occurrence" scope="I" xsi:type="Property"/>
                        </operand>
                     </operand>
                  </expression>
               </return>
            </source>
         </expression>
      </def>
      <def localId="352" locator="232:1-235:47" name="Diphtheria Doses Administered to Patient" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="352">
               <a:s>/**
 * @dataElement Diptheria containing Doses Administered to Patient
 */
define &quot;Diphtheria Doses Administered to Patient&quot;:
  </a:s>
               <a:s r="351">
                  <a:s>
                     <a:s r="345">
                        <a:s r="344">
                           <a:s>
                              <a:s>&quot;Doses Administered to Patient&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s> I</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
  </a:s>
                  <a:s r="350">
                     <a:s>where
    </a:s>
                     <a:s r="350">
                        <a:s r="347">
                           <a:s r="346">
                              <a:s>I</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="347">
                              <a:s>vaccineCode</a:s>
                           </a:s>
                        </a:s>
                        <a:s> in </a:s>
                        <a:s r="349">
                           <a:s r="348">
                              <a:s>IMMZc</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="349">
                              <a:s>&quot;Diphtheria Vaccine&quot;</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="351" locator="233:3-235:47" xsi:type="Query">
            <source localId="345" locator="233:3-233:35" alias="I">
               <expression localId="344" locator="233:3-233:33" name="Doses Administered to Patient" xsi:type="ExpressionRef"/>
            </source>
            <where localId="350" locator="234:3-235:47" xsi:type="InValueSet">
               <code name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                  <operand localId="347" locator="235:5-235:17" path="vaccineCode" scope="I" xsi:type="Property"/>
               </code>
               <valueset localId="349" locator="235:22-235:47" name="Diphtheria Vaccine" libraryName="IMMZc"/>
            </where>
         </expression>
      </def>
      <def localId="361" locator="241:1-244:44" name="Cholera Doses Administered to Patient" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="361">
               <a:s>/**
 * @dataElement Cholera containing Doses Administered to Patient
 */
define &quot;Cholera Doses Administered to Patient&quot;:
  </a:s>
               <a:s r="360">
                  <a:s>
                     <a:s r="354">
                        <a:s r="353">
                           <a:s>
                              <a:s>&quot;Doses Administered to Patient&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s> I</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
  </a:s>
                  <a:s r="359">
                     <a:s>where
    </a:s>
                     <a:s r="359">
                        <a:s r="356">
                           <a:s r="355">
                              <a:s>I</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="356">
                              <a:s>vaccineCode</a:s>
                           </a:s>
                        </a:s>
                        <a:s> in </a:s>
                        <a:s r="358">
                           <a:s r="357">
                              <a:s>IMMZc</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="358">
                              <a:s>&quot;Cholera Vaccine&quot;</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="360" locator="242:3-244:44" xsi:type="Query">
            <source localId="354" locator="242:3-242:35" alias="I">
               <expression localId="353" locator="242:3-242:33" name="Doses Administered to Patient" xsi:type="ExpressionRef"/>
            </source>
            <where localId="359" locator="243:3-244:44" xsi:type="InValueSet">
               <code name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                  <operand localId="356" locator="244:5-244:17" path="vaccineCode" scope="I" xsi:type="Property"/>
               </code>
               <valueset localId="358" locator="244:22-244:44" name="Cholera Vaccine" libraryName="IMMZc"/>
            </where>
         </expression>
      </def>
      <def localId="365" locator="249:1-250:53" name="No Cholera Doses Administered to Patient" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="365">
               <a:s>/** 
 * @dataElement There have been no choldera doses administered to patient
 */
define &quot;No Cholera Doses Administered to Patient&quot;:
  </a:s>
               <a:s r="364">
                  <a:s>not </a:s>
                  <a:s r="363">
                     <a:s>exists</a:s>
                     <a:s r="362">
                        <a:s>(</a:s>
                        <a:s r="362">
                           <a:s>&quot;Cholera Doses Administered to Patient&quot;</a:s>
                        </a:s>
                        <a:s>)</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="364" locator="250:3-250:53" xsi:type="Not">
            <operand localId="363" locator="250:7-250:53" xsi:type="Exists">
               <operand localId="362" locator="250:13-250:53" name="Cholera Doses Administered to Patient" xsi:type="ExpressionRef"/>
            </operand>
         </expression>
      </def>
      <def localId="372" locator="255:1-256:88" name="Date Last Cholera Dose Administered to Patient" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="372">
               <a:s>/** 
 * @dataElement Fact: Date last cholera dose was administered to the patient
 */
define &quot;Date Last Cholera Dose Administered to Patient&quot;:
  </a:s>
               <a:s r="371">
                  <a:s>date from </a:s>
                  <a:s r="370">
                     <a:s>(</a:s>
                     <a:s r="370">
                        <a:s r="368">
                           <a:s r="367">
                              <a:s>First(</a:s>
                              <a:s r="366">
                                 <a:s>&quot;Cholera Doses Administered to Patient&quot;</a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="368">
                              <a:s>occurrence</a:s>
                           </a:s>
                        </a:s>
                        <a:s> as </a:s>
                        <a:s r="369">
                           <a:s>FHIR.dateTime</a:s>
                        </a:s>
                     </a:s>
                     <a:s>)</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="371" locator="256:3-256:88" xsi:type="DateFrom">
            <operand name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
               <operand localId="370" locator="256:13-256:88" strict="false" xsi:type="As">
                  <operand localId="368" locator="256:14-256:70" path="occurrence" xsi:type="Property">
                     <source localId="367" locator="256:14-256:59" xsi:type="First">
                        <source localId="366" locator="256:20-256:58" name="Cholera Doses Administered to Patient" xsi:type="ExpressionRef"/>
                     </source>
                  </operand>
                  <asTypeSpecifier localId="369" locator="256:75-256:87" name="fhir:dateTime" xsi:type="NamedTypeSpecifier"/>
               </operand>
            </operand>
         </expression>
      </def>
      <def localId="380" locator="261:1-262:71" name="Type of Last Cholera Dose Administered to Patient" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="380">
               <a:s>/** 
 * @dataElement Fact: Type of last cholera dose administered to patient
 */
define &quot;Type of Last Cholera Dose Administered to Patient&quot;:
  </a:s>
               <a:s r="379">
                  <a:s>First(</a:s>
                  <a:s r="378">
                     <a:s>
                        <a:s r="374">
                           <a:s r="373">
                              <a:s>
                                 <a:s>&quot;Cholera Doses Administered to Patient&quot;</a:s>
                              </a:s>
                           </a:s>
                           <a:s> I</a:s>
                        </a:s>
                     </a:s>
                     <a:s> </a:s>
                     <a:s r="377">
                        <a:s>return </a:s>
                        <a:s r="376">
                           <a:s r="375">
                              <a:s>I</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="376">
                              <a:s>vaccineCode</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>)</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="379" locator="262:3-262:71" xsi:type="First">
            <source localId="378" locator="262:9-262:70" xsi:type="Query">
               <source localId="374" locator="262:9-262:49" alias="I">
                  <expression localId="373" locator="262:9-262:47" name="Cholera Doses Administered to Patient" xsi:type="ExpressionRef"/>
               </source>
               <return localId="377" locator="262:51-262:70">
                  <expression localId="376" locator="262:58-262:70" path="vaccineCode" scope="I" xsi:type="Property"/>
               </return>
            </source>
         </expression>
      </def>
      <def localId="391" locator="267:1-268:116" name="Highest Sequence of Cholera Doses Administered to Patient" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="391">
               <a:s>/**
 * @dataElement Fact: The highest dosing sequence of cholera vaccine administerd to patient
 */
define &quot;Highest Sequence of Cholera Doses Administered to Patient&quot;:
  </a:s>
               <a:s r="390">
                  <a:s>Max(</a:s>
                  <a:s r="389">
                     <a:s>
                        <a:s r="382">
                           <a:s r="381">
                              <a:s>
                                 <a:s>&quot;Cholera Doses Administered to Patient&quot;</a:s>
                              </a:s>
                           </a:s>
                           <a:s> I</a:s>
                        </a:s>
                     </a:s>
                     <a:s> </a:s>
                     <a:s r="388">
                        <a:s>return </a:s>
                        <a:s r="387">
                           <a:s>ToPositiveInt(</a:s>
                           <a:s r="386">
                              <a:s r="385">
                                 <a:s>(</a:s>
                                 <a:s r="385">
                                    <a:s>singleton from </a:s>
                                    <a:s r="384">
                                       <a:s r="383">
                                          <a:s>I</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="384">
                                          <a:s>protocolApplied</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="386">
                                 <a:s>doseNumber</a:s>
                              </a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>)</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="390" locator="268:3-268:116" xsi:type="Max">
            <source xsi:type="Query">
               <source alias="X">
                  <expression localId="389" locator="268:7-268:115" xsi:type="Query">
                     <source localId="382" locator="268:7-268:47" alias="I">
                        <expression localId="381" locator="268:7-268:45" name="Cholera Doses Administered to Patient" xsi:type="ExpressionRef"/>
                     </source>
                     <return localId="388" locator="268:49-268:115">
                        <expression localId="387" locator="268:56-268:115" name="ToPositiveInt" xsi:type="FunctionRef">
                           <operand localId="386" locator="268:70-268:114" path="doseNumber" xsi:type="Property">
                              <source localId="385" locator="268:70-268:103" xsi:type="SingletonFrom">
                                 <operand localId="384" locator="268:86-268:102" path="protocolApplied" scope="I" xsi:type="Property"/>
                              </source>
                           </operand>
                        </expression>
                     </return>
                  </expression>
               </source>
               <return distinct="false">
                  <expression name="ToInteger" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <operand name="X" xsi:type="AliasRef"/>
                  </expression>
               </return>
            </source>
         </expression>
      </def>
      <def localId="402" locator="273:1-274:118" name="Most Recent Dose Sequence of Cholera Doses Administered to Patient" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="402">
               <a:s>/** 
 * @dataele
 */
define &quot;Most Recent Dose Sequence of Cholera Doses Administered to Patient&quot;:
  </a:s>
               <a:s r="401">
                  <a:s>First(</a:s>
                  <a:s r="400">
                     <a:s>
                        <a:s r="393">
                           <a:s r="392">
                              <a:s>
                                 <a:s>&quot;Cholera Doses Administered to Patient&quot;</a:s>
                              </a:s>
                           </a:s>
                           <a:s> I</a:s>
                        </a:s>
                     </a:s>
                     <a:s> </a:s>
                     <a:s r="399">
                        <a:s>return </a:s>
                        <a:s r="398">
                           <a:s>ToPositiveInt(</a:s>
                           <a:s r="397">
                              <a:s r="396">
                                 <a:s>(</a:s>
                                 <a:s r="396">
                                    <a:s>singleton from </a:s>
                                    <a:s r="395">
                                       <a:s r="394">
                                          <a:s>I</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="395">
                                          <a:s>protocolApplied</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="397">
                                 <a:s>doseNumber</a:s>
                              </a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>)</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="401" locator="274:3-274:118" xsi:type="First">
            <source localId="400" locator="274:9-274:117" xsi:type="Query">
               <source localId="393" locator="274:9-274:49" alias="I">
                  <expression localId="392" locator="274:9-274:47" name="Cholera Doses Administered to Patient" xsi:type="ExpressionRef"/>
               </source>
               <return localId="399" locator="274:51-274:117">
                  <expression localId="398" locator="274:58-274:117" name="ToPositiveInt" xsi:type="FunctionRef">
                     <operand localId="397" locator="274:72-274:116" path="doseNumber" xsi:type="Property">
                        <source localId="396" locator="274:72-274:105" xsi:type="SingletonFrom">
                           <operand localId="395" locator="274:88-274:104" path="protocolApplied" scope="I" xsi:type="Property"/>
                        </source>
                     </operand>
                  </expression>
               </return>
            </source>
         </expression>
      </def>
      <def localId="411" locator="279:1-282:40" name="Hib Doses Administered to Patient" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="411">
               <a:s>/**
 * @dataElement Hib containing Doses Administered to Patient
 */
define &quot;Hib Doses Administered to Patient&quot;:
  </a:s>
               <a:s r="410">
                  <a:s>
                     <a:s r="404">
                        <a:s r="403">
                           <a:s>
                              <a:s>&quot;Doses Administered to Patient&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s> I</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
  </a:s>
                  <a:s r="409">
                     <a:s>where
    </a:s>
                     <a:s r="409">
                        <a:s r="406">
                           <a:s r="405">
                              <a:s>I</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="406">
                              <a:s>vaccineCode</a:s>
                           </a:s>
                        </a:s>
                        <a:s> in </a:s>
                        <a:s r="408">
                           <a:s r="407">
                              <a:s>IMMZc</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="408">
                              <a:s>&quot;Hib Vaccine&quot;</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="410" locator="280:3-282:40" xsi:type="Query">
            <source localId="404" locator="280:3-280:35" alias="I">
               <expression localId="403" locator="280:3-280:33" name="Doses Administered to Patient" xsi:type="ExpressionRef"/>
            </source>
            <where localId="409" locator="281:3-282:40" xsi:type="InValueSet">
               <code name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                  <operand localId="406" locator="282:5-282:17" path="vaccineCode" scope="I" xsi:type="Property"/>
               </code>
               <valueset localId="408" locator="282:22-282:40" name="Hib Vaccine" libraryName="IMMZc"/>
            </where>
         </expression>
      </def>
      <def localId="415" locator="287:1-288:49" name="No Hib Doses Administered to Patient" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="415">
               <a:s>/**
 * @dataElement Hib containing Doses Administered to Patient
 */
define &quot;No Hib Doses Administered to Patient&quot;:
  </a:s>
               <a:s r="414">
                  <a:s>not </a:s>
                  <a:s r="413">
                     <a:s>exists</a:s>
                     <a:s r="412">
                        <a:s>(</a:s>
                        <a:s r="412">
                           <a:s>&quot;Hib Doses Administered to Patient&quot;</a:s>
                        </a:s>
                        <a:s>)</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="414" locator="288:3-288:49" xsi:type="Not">
            <operand localId="413" locator="288:7-288:49" xsi:type="Exists">
               <operand localId="412" locator="288:13-288:49" name="Hib Doses Administered to Patient" xsi:type="ExpressionRef"/>
            </operand>
         </expression>
      </def>
      <def localId="418" locator="294:1-295:44" name="Number of Hib Doses Administered to Patient" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="418">
               <a:s>/**
 * @dataElement Number of Hib Doses Administered to Patient excluding the birth dose
 */
define &quot;Number of Hib Doses Administered to Patient&quot;:
  </a:s>
               <a:s r="417">
                  <a:s>Count(</a:s>
                  <a:s r="416">
                     <a:s>&quot;Hib Doses Administered to Patient&quot;</a:s>
                  </a:s>
                  <a:s>)</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="417" locator="295:3-295:44" xsi:type="Count">
            <source localId="416" locator="295:9-295:43" name="Hib Doses Administered to Patient" xsi:type="ExpressionRef"/>
         </expression>
      </def>
      <def localId="425" locator="300:1-301:84" name="Date Last Hib Dose Administered to Patient" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="425">
               <a:s>// O return ToPositiveInt((singleton from O.protocolApplied).doseNumber))

/**
 * @dataElement 
 */
define &quot;Date Last Hib Dose Administered to Patient&quot;:
  </a:s>
               <a:s r="424">
                  <a:s>date from </a:s>
                  <a:s r="423">
                     <a:s>(</a:s>
                     <a:s r="423">
                        <a:s r="421">
                           <a:s r="420">
                              <a:s>First(</a:s>
                              <a:s r="419">
                                 <a:s>&quot;Hib Doses Administered to Patient&quot;</a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="421">
                              <a:s>occurrence</a:s>
                           </a:s>
                        </a:s>
                        <a:s> as </a:s>
                        <a:s r="422">
                           <a:s>FHIR.dateTime</a:s>
                        </a:s>
                     </a:s>
                     <a:s>)</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="424" locator="301:3-301:84" xsi:type="DateFrom">
            <operand name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
               <operand localId="423" locator="301:13-301:84" strict="false" xsi:type="As">
                  <operand localId="421" locator="301:14-301:66" path="occurrence" xsi:type="Property">
                     <source localId="420" locator="301:14-301:55" xsi:type="First">
                        <source localId="419" locator="301:20-301:54" name="Hib Doses Administered to Patient" xsi:type="ExpressionRef"/>
                     </source>
                  </operand>
                  <asTypeSpecifier localId="422" locator="301:71-301:83" name="fhir:dateTime" xsi:type="NamedTypeSpecifier"/>
               </operand>
            </operand>
         </expression>
      </def>
      <def localId="432" locator="307:1-308:84" name="Date First Hib Dose Administered to Patient" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="432">
               <a:s>/**
 * @dataElement 
 */
define &quot;Date First Hib Dose Administered to Patient&quot;:
  </a:s>
               <a:s r="431">
                  <a:s>date from </a:s>
                  <a:s r="430">
                     <a:s>(</a:s>
                     <a:s r="430">
                        <a:s r="428">
                           <a:s r="427">
                              <a:s>First(</a:s>
                              <a:s r="426">
                                 <a:s>&quot;Hib Doses Administered to Patient&quot;</a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="428">
                              <a:s>occurrence</a:s>
                           </a:s>
                        </a:s>
                        <a:s> as </a:s>
                        <a:s r="429">
                           <a:s>FHIR.dateTime</a:s>
                        </a:s>
                     </a:s>
                     <a:s>)</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="431" locator="308:3-308:84" xsi:type="DateFrom">
            <operand name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
               <operand localId="430" locator="308:13-308:84" strict="false" xsi:type="As">
                  <operand localId="428" locator="308:14-308:66" path="occurrence" xsi:type="Property">
                     <source localId="427" locator="308:14-308:55" xsi:type="First">
                        <source localId="426" locator="308:20-308:54" name="Hib Doses Administered to Patient" xsi:type="ExpressionRef"/>
                     </source>
                  </operand>
                  <asTypeSpecifier localId="429" locator="308:71-308:83" name="fhir:dateTime" xsi:type="NamedTypeSpecifier"/>
               </operand>
            </operand>
         </expression>
      </def>
      <def localId="441" locator="314:1-317:41" name="HepA Doses Administered to Patient" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="441">
               <a:s>/**
 * @dataElement HepA containing Doses Administered to Patient
 */
define &quot;HepA Doses Administered to Patient&quot;:
  </a:s>
               <a:s r="440">
                  <a:s>
                     <a:s r="434">
                        <a:s r="433">
                           <a:s>
                              <a:s>&quot;Doses Administered to Patient&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s> I</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
  </a:s>
                  <a:s r="439">
                     <a:s>where
    </a:s>
                     <a:s r="439">
                        <a:s r="436">
                           <a:s r="435">
                              <a:s>I</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="436">
                              <a:s>vaccineCode</a:s>
                           </a:s>
                        </a:s>
                        <a:s> in </a:s>
                        <a:s r="438">
                           <a:s r="437">
                              <a:s>IMMZc</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="438">
                              <a:s>&quot;HepA Vaccine&quot;</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="440" locator="315:3-317:41" xsi:type="Query">
            <source localId="434" locator="315:3-315:35" alias="I">
               <expression localId="433" locator="315:3-315:33" name="Doses Administered to Patient" xsi:type="ExpressionRef"/>
            </source>
            <where localId="439" locator="316:3-317:41" xsi:type="InValueSet">
               <code name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                  <operand localId="436" locator="317:5-317:17" path="vaccineCode" scope="I" xsi:type="Property"/>
               </code>
               <valueset localId="438" locator="317:22-317:41" name="HepA Vaccine" libraryName="IMMZc"/>
            </where>
         </expression>
      </def>
      <def localId="450" locator="322:1-325:41" name="HepB Doses Administered to Patient" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="450">
               <a:s>/**
 * @dataElement HepB containing Doses Administered to Patient
 */
define &quot;HepB Doses Administered to Patient&quot;:
  </a:s>
               <a:s r="449">
                  <a:s>
                     <a:s r="443">
                        <a:s r="442">
                           <a:s>
                              <a:s>&quot;Doses Administered to Patient&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s> I</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
  </a:s>
                  <a:s r="448">
                     <a:s>where
    </a:s>
                     <a:s r="448">
                        <a:s r="445">
                           <a:s r="444">
                              <a:s>I</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="445">
                              <a:s>vaccineCode</a:s>
                           </a:s>
                        </a:s>
                        <a:s> in </a:s>
                        <a:s r="447">
                           <a:s r="446">
                              <a:s>IMMZc</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="447">
                              <a:s>&quot;HepB Vaccine&quot;</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="449" locator="323:3-325:41" xsi:type="Query">
            <source localId="443" locator="323:3-323:35" alias="I">
               <expression localId="442" locator="323:3-323:33" name="Doses Administered to Patient" xsi:type="ExpressionRef"/>
            </source>
            <where localId="448" locator="324:3-325:41" xsi:type="InValueSet">
               <code name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                  <operand localId="445" locator="325:5-325:17" path="vaccineCode" scope="I" xsi:type="Property"/>
               </code>
               <valueset localId="447" locator="325:22-325:41" name="HepB Vaccine" libraryName="IMMZc"/>
            </where>
         </expression>
      </def>
      <def localId="462" locator="330:1-331:119" name="Number of HepB Doses Administered to Patient" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="462">
               <a:s>/**
 * @dataElement Number of HepB Doses Administered to Patient
 */
define &quot;Number of HepB Doses Administered to Patient&quot;:
  </a:s>
               <a:s r="461">
                  <a:s>Count(</a:s>
                  <a:s r="460">
                     <a:s>
                        <a:s r="452">
                           <a:s r="451">
                              <a:s>
                                 <a:s>&quot;HepB Doses Administered to Patient&quot;</a:s>
                              </a:s>
                           </a:s>
                           <a:s> O</a:s>
                        </a:s>
                     </a:s>
                     <a:s> </a:s>
                     <a:s r="459">
                        <a:s>where </a:s>
                        <a:s r="459">
                           <a:s r="457">
                              <a:s>ToPositiveInt(</a:s>
                              <a:s r="456">
                                 <a:s r="455">
                                    <a:s>(</a:s>
                                    <a:s r="455">
                                       <a:s>singleton from </a:s>
                                       <a:s r="454">
                                          <a:s r="453">
                                             <a:s>O</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="454">
                                             <a:s>protocolApplied</a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>)</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="456">
                                    <a:s>doseNumber</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                           <a:s r="458"> != 0</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>)</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="461" locator="331:3-331:119" xsi:type="Count">
            <source localId="460" locator="331:9-331:118" xsi:type="Query">
               <source localId="452" locator="331:9-331:46" alias="O">
                  <expression localId="451" locator="331:9-331:44" name="HepB Doses Administered to Patient" xsi:type="ExpressionRef"/>
               </source>
               <where localId="459" locator="331:48-331:118" xsi:type="Not">
                  <operand locator="331:54-331:118" xsi:type="Equal">
                     <operand name="ToInteger" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand localId="457" locator="331:54-331:113" name="ToPositiveInt" xsi:type="FunctionRef">
                           <operand localId="456" locator="331:68-331:112" path="doseNumber" xsi:type="Property">
                              <source localId="455" locator="331:68-331:101" xsi:type="SingletonFrom">
                                 <operand localId="454" locator="331:84-331:100" path="protocolApplied" scope="O" xsi:type="Property"/>
                              </source>
                           </operand>
                        </operand>
                     </operand>
                     <operand localId="458" locator="331:118" valueType="t:Integer" value="0" xsi:type="Literal"/>
                  </operand>
               </where>
            </source>
         </expression>
      </def>
      <def localId="475" locator="337:1-338:123" name="No HepB Birth Dose Administered to Patient" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="475">
               <a:s>/**
 * @dataElement No HepB containing Birth Dose Administered to Patient
 */
define &quot;No HepB Birth Dose Administered to Patient&quot;:
  </a:s>
               <a:s r="474">
                  <a:s>not </a:s>
                  <a:s r="473">
                     <a:s>exists</a:s>
                     <a:s r="472">
                        <a:s>(</a:s>
                        <a:s r="472">
                           <a:s>
                              <a:s r="464">
                                 <a:s r="463">
                                    <a:s>
                                       <a:s>&quot;HepB Doses Administered to Patient&quot;</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> I</a:s>
                              </a:s>
                           </a:s>
                           <a:s> </a:s>
                           <a:s r="471">
                              <a:s>where </a:s>
                              <a:s r="471">
                                 <a:s r="469">
                                    <a:s>ToPositiveInt(</a:s>
                                    <a:s r="468">
                                       <a:s r="467">
                                          <a:s>(</a:s>
                                          <a:s r="467">
                                             <a:s>singleton from </a:s>
                                             <a:s r="466">
                                                <a:s r="465">
                                                   <a:s>I</a:s>
                                                </a:s>
                                                <a:s>.</a:s>
                                                <a:s r="466">
                                                   <a:s>protocolApplied</a:s>
                                                </a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s>)</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="468">
                                          <a:s>doseNumber</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>)</a:s>
                                 </a:s>
                                 <a:s r="470"> = 0</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>)</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="474" locator="338:3-338:123" xsi:type="Not">
            <operand localId="473" locator="338:7-338:123" xsi:type="Exists">
               <operand localId="472" locator="338:13-338:123" xsi:type="Query">
                  <source localId="464" locator="338:14-338:51" alias="I">
                     <expression localId="463" locator="338:14-338:49" name="HepB Doses Administered to Patient" xsi:type="ExpressionRef"/>
                  </source>
                  <where localId="471" locator="338:53-338:122" xsi:type="Equal">
                     <operand name="ToInteger" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand localId="469" locator="338:59-338:118" name="ToPositiveInt" xsi:type="FunctionRef">
                           <operand localId="468" locator="338:73-338:117" path="doseNumber" xsi:type="Property">
                              <source localId="467" locator="338:73-338:106" xsi:type="SingletonFrom">
                                 <operand localId="466" locator="338:89-338:105" path="protocolApplied" scope="I" xsi:type="Property"/>
                              </source>
                           </operand>
                        </operand>
                     </operand>
                     <operand localId="470" locator="338:122" valueType="t:Integer" value="0" xsi:type="Literal"/>
                  </where>
               </operand>
            </operand>
         </expression>
      </def>
      <def localId="482" locator="341:1-342:85" name="Date Last HepB Dose Administered to Patient" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="482">
               <a:s>//Date last administered HepB
define &quot;Date Last HepB Dose Administered to Patient&quot;:
  </a:s>
               <a:s r="481">
                  <a:s>date from </a:s>
                  <a:s r="480">
                     <a:s>(</a:s>
                     <a:s r="480">
                        <a:s r="478">
                           <a:s r="477">
                              <a:s>First(</a:s>
                              <a:s r="476">
                                 <a:s>&quot;HepB Doses Administered to Patient&quot;</a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="478">
                              <a:s>occurrence</a:s>
                           </a:s>
                        </a:s>
                        <a:s> as </a:s>
                        <a:s r="479">
                           <a:s>FHIR.dateTime</a:s>
                        </a:s>
                     </a:s>
                     <a:s>)</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="481" locator="342:3-342:85" xsi:type="DateFrom">
            <operand name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
               <operand localId="480" locator="342:13-342:85" strict="false" xsi:type="As">
                  <operand localId="478" locator="342:14-342:67" path="occurrence" xsi:type="Property">
                     <source localId="477" locator="342:14-342:56" xsi:type="First">
                        <source localId="476" locator="342:20-342:55" name="HepB Doses Administered to Patient" xsi:type="ExpressionRef"/>
                     </source>
                  </operand>
                  <asTypeSpecifier localId="479" locator="342:72-342:84" name="fhir:dateTime" xsi:type="NamedTypeSpecifier"/>
               </operand>
            </operand>
         </expression>
      </def>
      <def localId="491" locator="347:1-350:40" name="HPV Doses Administered to Patient" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="491">
               <a:s>/**
 * @dataElement HPV containing Doses Administered to Patient
 */
define &quot;HPV Doses Administered to Patient&quot;:
  </a:s>
               <a:s r="490">
                  <a:s>
                     <a:s r="484">
                        <a:s r="483">
                           <a:s>
                              <a:s>&quot;Doses Administered to Patient&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s> I</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
  </a:s>
                  <a:s r="489">
                     <a:s>where
    </a:s>
                     <a:s r="489">
                        <a:s r="486">
                           <a:s r="485">
                              <a:s>I</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="486">
                              <a:s>vaccineCode</a:s>
                           </a:s>
                        </a:s>
                        <a:s> in </a:s>
                        <a:s r="488">
                           <a:s r="487">
                              <a:s>IMMZc</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="488">
                              <a:s>&quot;HPV Vaccine&quot;</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="490" locator="348:3-350:40" xsi:type="Query">
            <source localId="484" locator="348:3-348:35" alias="I">
               <expression localId="483" locator="348:3-348:33" name="Doses Administered to Patient" xsi:type="ExpressionRef"/>
            </source>
            <where localId="489" locator="349:3-350:40" xsi:type="InValueSet">
               <code name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                  <operand localId="486" locator="350:5-350:17" path="vaccineCode" scope="I" xsi:type="Property"/>
               </code>
               <valueset localId="488" locator="350:22-350:40" name="HPV Vaccine" libraryName="IMMZc"/>
            </where>
         </expression>
      </def>
      <def localId="495" locator="355:1-356:49" name="No HPV Doses Administered to Patient" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="495">
               <a:s>/** 
 * @dataElement No HPV doses have been administered to patient 
 */
define &quot;No HPV Doses Administered to Patient&quot;:
  </a:s>
               <a:s r="494">
                  <a:s>not </a:s>
                  <a:s r="493">
                     <a:s>exists</a:s>
                     <a:s r="492">
                        <a:s>(</a:s>
                        <a:s r="492">
                           <a:s>&quot;HPV Doses Administered to Patient&quot;</a:s>
                        </a:s>
                        <a:s>)</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="494" locator="356:3-356:49" xsi:type="Not">
            <operand localId="493" locator="356:7-356:49" xsi:type="Exists">
               <operand localId="492" locator="356:13-356:49" name="HPV Doses Administered to Patient" xsi:type="ExpressionRef"/>
            </operand>
         </expression>
      </def>
      <def localId="498" locator="361:1-362:44" name="Number of HPV Doses Administered to Patient" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="498">
               <a:s>/** 
 * @dataElement Number of HPV doses administered to patient
 */
define &quot;Number of HPV Doses Administered to Patient&quot;:
  </a:s>
               <a:s r="497">
                  <a:s>Count(</a:s>
                  <a:s r="496">
                     <a:s>&quot;HPV Doses Administered to Patient&quot;</a:s>
                  </a:s>
                  <a:s>)</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="497" locator="362:3-362:44" xsi:type="Count">
            <source localId="496" locator="362:9-362:43" name="HPV Doses Administered to Patient" xsi:type="ExpressionRef"/>
         </expression>
      </def>
      <def localId="505" locator="367:1-368:84" name="Date Last HPV Dose Administered to Patient" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="505">
               <a:s>/**
 * @dataElement Date of HPV dose administered
 */
define &quot;Date Last HPV Dose Administered to Patient&quot;:
  </a:s>
               <a:s r="504">
                  <a:s>date from </a:s>
                  <a:s r="503">
                     <a:s>(</a:s>
                     <a:s r="503">
                        <a:s r="501">
                           <a:s r="500">
                              <a:s>First(</a:s>
                              <a:s r="499">
                                 <a:s>&quot;HPV Doses Administered to Patient&quot;</a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="501">
                              <a:s>occurrence</a:s>
                           </a:s>
                        </a:s>
                        <a:s> as </a:s>
                        <a:s r="502">
                           <a:s>FHIR.dateTime</a:s>
                        </a:s>
                     </a:s>
                     <a:s>)</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="504" locator="368:3-368:84" xsi:type="DateFrom">
            <operand name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
               <operand localId="503" locator="368:13-368:84" strict="false" xsi:type="As">
                  <operand localId="501" locator="368:14-368:66" path="occurrence" xsi:type="Property">
                     <source localId="500" locator="368:14-368:55" xsi:type="First">
                        <source localId="499" locator="368:20-368:54" name="HPV Doses Administered to Patient" xsi:type="ExpressionRef"/>
                     </source>
                  </operand>
                  <asTypeSpecifier localId="502" locator="368:71-368:83" name="fhir:dateTime" xsi:type="NamedTypeSpecifier"/>
               </operand>
            </operand>
         </expression>
      </def>
      <def localId="514" locator="373:1-376:58" name="JE Doses Administered to Patient" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="514">
               <a:s>/**
 * @dataElement Japanese Encephalitis containing Doses Administered to Patient
 */
define &quot;JE Doses Administered to Patient&quot;:
  </a:s>
               <a:s r="513">
                  <a:s>
                     <a:s r="507">
                        <a:s r="506">
                           <a:s>
                              <a:s>&quot;Doses Administered to Patient&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s> I</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
  </a:s>
                  <a:s r="512">
                     <a:s>where
    </a:s>
                     <a:s r="512">
                        <a:s r="509">
                           <a:s r="508">
                              <a:s>I</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="509">
                              <a:s>vaccineCode</a:s>
                           </a:s>
                        </a:s>
                        <a:s> in </a:s>
                        <a:s r="511">
                           <a:s r="510">
                              <a:s>IMMZc</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="511">
                              <a:s>&quot;Japanese Encephalitis Vaccine&quot;</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="513" locator="374:3-376:58" xsi:type="Query">
            <source localId="507" locator="374:3-374:35" alias="I">
               <expression localId="506" locator="374:3-374:33" name="Doses Administered to Patient" xsi:type="ExpressionRef"/>
            </source>
            <where localId="512" locator="375:3-376:58" xsi:type="InValueSet">
               <code name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                  <operand localId="509" locator="376:5-376:17" path="vaccineCode" scope="I" xsi:type="Property"/>
               </code>
               <valueset localId="511" locator="376:22-376:58" name="Japanese Encephalitis Vaccine" libraryName="IMMZc"/>
            </where>
         </expression>
      </def>
      <def localId="518" locator="381:1-382:48" name="No JE Doses Administered to Patient" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="518">
               <a:s>/**
 * @dataElement No Japanese Encephalitis containing Doses Administered to Patient
 */
define &quot;No JE Doses Administered to Patient&quot;:
  </a:s>
               <a:s r="517">
                  <a:s>not </a:s>
                  <a:s r="516">
                     <a:s>exists</a:s>
                     <a:s r="515">
                        <a:s>(</a:s>
                        <a:s r="515">
                           <a:s>&quot;JE Doses Administered to Patient&quot;</a:s>
                        </a:s>
                        <a:s>)</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="517" locator="382:3-382:48" xsi:type="Not">
            <operand localId="516" locator="382:7-382:48" xsi:type="Exists">
               <operand localId="515" locator="382:13-382:48" name="JE Doses Administered to Patient" xsi:type="ExpressionRef"/>
            </operand>
         </expression>
      </def>
      <def localId="525" locator="387:1-388:83" name="Date Last JE Dose Administered to Patient" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="525">
               <a:s>/**
 * @dataElement Date the last JE dose was administered
 */
define &quot;Date Last JE Dose Administered to Patient&quot;:
  </a:s>
               <a:s r="524">
                  <a:s>date from </a:s>
                  <a:s r="523">
                     <a:s>(</a:s>
                     <a:s r="523">
                        <a:s r="521">
                           <a:s r="520">
                              <a:s>First(</a:s>
                              <a:s r="519">
                                 <a:s>&quot;JE Doses Administered to Patient&quot;</a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="521">
                              <a:s>occurrence</a:s>
                           </a:s>
                        </a:s>
                        <a:s> as </a:s>
                        <a:s r="522">
                           <a:s>FHIR.dateTime</a:s>
                        </a:s>
                     </a:s>
                     <a:s>)</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="524" locator="388:3-388:83" xsi:type="DateFrom">
            <operand name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
               <operand localId="523" locator="388:13-388:83" strict="false" xsi:type="As">
                  <operand localId="521" locator="388:14-388:65" path="occurrence" xsi:type="Property">
                     <source localId="520" locator="388:14-388:54" xsi:type="First">
                        <source localId="519" locator="388:20-388:53" name="JE Doses Administered to Patient" xsi:type="ExpressionRef"/>
                     </source>
                  </operand>
                  <asTypeSpecifier localId="522" locator="388:70-388:82" name="fhir:dateTime" xsi:type="NamedTypeSpecifier"/>
               </operand>
            </operand>
         </expression>
      </def>
      <def localId="533" locator="393:1-394:66" name="Type of Last JE Dose Administered to Patient" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="533">
               <a:s>/** 
 * @dataElement The type of the last typhoid dose administered to patient
 */
define &quot;Type of Last JE Dose Administered to Patient&quot;:
  </a:s>
               <a:s r="532">
                  <a:s>First(</a:s>
                  <a:s r="531">
                     <a:s>
                        <a:s r="527">
                           <a:s r="526">
                              <a:s>
                                 <a:s>&quot;JE Doses Administered to Patient&quot;</a:s>
                              </a:s>
                           </a:s>
                           <a:s> I</a:s>
                        </a:s>
                     </a:s>
                     <a:s> </a:s>
                     <a:s r="530">
                        <a:s>return </a:s>
                        <a:s r="529">
                           <a:s r="528">
                              <a:s>I</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="529">
                              <a:s>vaccineCode</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>)</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="532" locator="394:3-394:66" xsi:type="First">
            <source localId="531" locator="394:9-394:65" xsi:type="Query">
               <source localId="527" locator="394:9-394:44" alias="I">
                  <expression localId="526" locator="394:9-394:42" name="JE Doses Administered to Patient" xsi:type="ExpressionRef"/>
               </source>
               <return localId="530" locator="394:46-394:65">
                  <expression localId="529" locator="394:53-394:65" path="vaccineCode" scope="I" xsi:type="Property"/>
               </return>
            </source>
         </expression>
      </def>
      <def localId="545" locator="399:1-400:117" name="Number of JE Doses Administered to Patient" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="545">
               <a:s>/**
 * @dataElement No Japanese Encephalitis containing Doses Administered to Patient
 */
define &quot;Number of JE Doses Administered to Patient&quot;:
  </a:s>
               <a:s r="544">
                  <a:s>Count(</a:s>
                  <a:s r="543">
                     <a:s>
                        <a:s r="535">
                           <a:s r="534">
                              <a:s>
                                 <a:s>&quot;JE Doses Administered to Patient&quot;</a:s>
                              </a:s>
                           </a:s>
                           <a:s> I</a:s>
                        </a:s>
                     </a:s>
                     <a:s> </a:s>
                     <a:s r="542">
                        <a:s>where </a:s>
                        <a:s r="542">
                           <a:s r="540">
                              <a:s>ToPositiveInt(</a:s>
                              <a:s r="539">
                                 <a:s r="538">
                                    <a:s>(</a:s>
                                    <a:s r="538">
                                       <a:s>singleton from </a:s>
                                       <a:s r="537">
                                          <a:s r="536">
                                             <a:s>I</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="537">
                                             <a:s>protocolApplied</a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>)</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="539">
                                    <a:s>doseNumber</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                           <a:s r="541"> != 0</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>)</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="544" locator="400:3-400:117" xsi:type="Count">
            <source localId="543" locator="400:9-400:116" xsi:type="Query">
               <source localId="535" locator="400:9-400:44" alias="I">
                  <expression localId="534" locator="400:9-400:42" name="JE Doses Administered to Patient" xsi:type="ExpressionRef"/>
               </source>
               <where localId="542" locator="400:46-400:116" xsi:type="Not">
                  <operand locator="400:52-400:116" xsi:type="Equal">
                     <operand name="ToInteger" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand localId="540" locator="400:52-400:111" name="ToPositiveInt" xsi:type="FunctionRef">
                           <operand localId="539" locator="400:66-400:110" path="doseNumber" xsi:type="Property">
                              <source localId="538" locator="400:66-400:99" xsi:type="SingletonFrom">
                                 <operand localId="537" locator="400:82-400:98" path="protocolApplied" scope="I" xsi:type="Property"/>
                              </source>
                           </operand>
                        </operand>
                     </operand>
                     <operand localId="541" locator="400:116" valueType="t:Integer" value="0" xsi:type="Literal"/>
                  </operand>
               </where>
            </source>
         </expression>
      </def>
      <def localId="554" locator="405:1-408:40" name="MCV Doses Administered to Patient" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="554">
               <a:s>/**
 * @dataElement MCV containing Doses Administered to Patient
 */
define &quot;MCV Doses Administered to Patient&quot;:
  </a:s>
               <a:s r="553">
                  <a:s>
                     <a:s r="547">
                        <a:s r="546">
                           <a:s>
                              <a:s>&quot;Doses Administered to Patient&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s> I</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
  </a:s>
                  <a:s r="552">
                     <a:s>where
    </a:s>
                     <a:s r="552">
                        <a:s r="549">
                           <a:s r="548">
                              <a:s>I</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="549">
                              <a:s>vaccineCode</a:s>
                           </a:s>
                        </a:s>
                        <a:s> in </a:s>
                        <a:s r="551">
                           <a:s r="550">
                              <a:s>IMMZc</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="551">
                              <a:s>&quot;MCV Vaccine&quot;</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="553" locator="406:3-408:40" xsi:type="Query">
            <source localId="547" locator="406:3-406:35" alias="I">
               <expression localId="546" locator="406:3-406:33" name="Doses Administered to Patient" xsi:type="ExpressionRef"/>
            </source>
            <where localId="552" locator="407:3-408:40" xsi:type="InValueSet">
               <code name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                  <operand localId="549" locator="408:5-408:17" path="vaccineCode" scope="I" xsi:type="Property"/>
               </code>
               <valueset localId="551" locator="408:22-408:40" name="MCV Vaccine" libraryName="IMMZc"/>
            </where>
         </expression>
      </def>
      <def localId="558" locator="413:1-414:49" name="No MCV Doses Administered to Patient" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="558">
               <a:s>/**
 * @define The patient has no MCV doses administered
 */
define &quot;No MCV Doses Administered to Patient&quot;:
  </a:s>
               <a:s r="557">
                  <a:s>not </a:s>
                  <a:s r="556">
                     <a:s>exists</a:s>
                     <a:s r="555">
                        <a:s>(</a:s>
                        <a:s r="555">
                           <a:s>&quot;MCV Doses Administered to Patient&quot;</a:s>
                        </a:s>
                        <a:s>)</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="557" locator="414:3-414:49" xsi:type="Not">
            <operand localId="556" locator="414:7-414:49" xsi:type="Exists">
               <operand localId="555" locator="414:13-414:49" name="MCV Doses Administered to Patient" xsi:type="ExpressionRef"/>
            </operand>
         </expression>
      </def>
      <def localId="565" locator="420:1-421:84" name="Date Last MCV Dose Administered to Patient" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="565">
               <a:s>/** 
 * @dataElement Date of last MCV dose administration
 */
define &quot;Date Last MCV Dose Administered to Patient&quot;:
  </a:s>
               <a:s r="564">
                  <a:s>date from </a:s>
                  <a:s r="563">
                     <a:s>(</a:s>
                     <a:s r="563">
                        <a:s r="561">
                           <a:s r="560">
                              <a:s>First(</a:s>
                              <a:s r="559">
                                 <a:s>&quot;MCV Doses Administered to Patient&quot;</a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="561">
                              <a:s>occurrence</a:s>
                           </a:s>
                        </a:s>
                        <a:s> as </a:s>
                        <a:s r="562">
                           <a:s>FHIR.dateTime</a:s>
                        </a:s>
                     </a:s>
                     <a:s>)</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="564" locator="421:3-421:84" xsi:type="DateFrom">
            <operand name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
               <operand localId="563" locator="421:13-421:84" strict="false" xsi:type="As">
                  <operand localId="561" locator="421:14-421:66" path="occurrence" xsi:type="Property">
                     <source localId="560" locator="421:14-421:55" xsi:type="First">
                        <source localId="559" locator="421:20-421:54" name="MCV Doses Administered to Patient" xsi:type="ExpressionRef"/>
                     </source>
                  </operand>
                  <asTypeSpecifier localId="562" locator="421:71-421:83" name="fhir:dateTime" xsi:type="NamedTypeSpecifier"/>
               </operand>
            </operand>
         </expression>
      </def>
      <def localId="568" locator="426:1-427:44" name="Number of MCV Doses Administered to Patient" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="568">
               <a:s>/**
 * @define The number of MCV doses administerd to the patient
 */
define &quot;Number of MCV Doses Administered to Patient&quot;:
  </a:s>
               <a:s r="567">
                  <a:s>Count(</a:s>
                  <a:s r="566">
                     <a:s>&quot;MCV Doses Administered to Patient&quot;</a:s>
                  </a:s>
                  <a:s>)</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="567" locator="427:3-427:44" xsi:type="Count">
            <source localId="566" locator="427:9-427:43" name="MCV Doses Administered to Patient" xsi:type="ExpressionRef"/>
         </expression>
      </def>
      <def localId="577" locator="432:1-435:50" name="Meningococcal Doses Administered to Patient" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="577">
               <a:s>/**
 * @dataElement Meningococcal containing Doses Administered to Patient
 */
define &quot;Meningococcal Doses Administered to Patient&quot;:
  </a:s>
               <a:s r="576">
                  <a:s>
                     <a:s r="570">
                        <a:s r="569">
                           <a:s>
                              <a:s>&quot;Doses Administered to Patient&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s> I</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
  </a:s>
                  <a:s r="575">
                     <a:s>where
    </a:s>
                     <a:s r="575">
                        <a:s r="572">
                           <a:s r="571">
                              <a:s>I</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="572">
                              <a:s>vaccineCode</a:s>
                           </a:s>
                        </a:s>
                        <a:s> in </a:s>
                        <a:s r="574">
                           <a:s r="573">
                              <a:s>IMMZc</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="574">
                              <a:s>&quot;Meningococcal Vaccine&quot;</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="576" locator="433:3-435:50" xsi:type="Query">
            <source localId="570" locator="433:3-433:35" alias="I">
               <expression localId="569" locator="433:3-433:33" name="Doses Administered to Patient" xsi:type="ExpressionRef"/>
            </source>
            <where localId="575" locator="434:3-435:50" xsi:type="InValueSet">
               <code name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                  <operand localId="572" locator="435:5-435:17" path="vaccineCode" scope="I" xsi:type="Property"/>
               </code>
               <valueset localId="574" locator="435:22-435:50" name="Meningococcal Vaccine" libraryName="IMMZc"/>
            </where>
         </expression>
      </def>
      <def localId="580" locator="440:1-441:54" name="Number of Meningococcal Doses Administered to Patient" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="580">
               <a:s>/**
 * @define The number of Meningococcal doses administerd to the patient
 */
define &quot;Number of Meningococcal Doses Administered to Patient&quot;:
  </a:s>
               <a:s r="579">
                  <a:s>Count(</a:s>
                  <a:s r="578">
                     <a:s>&quot;Meningococcal Doses Administered to Patient&quot;</a:s>
                  </a:s>
                  <a:s>)</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="579" locator="441:3-441:54" xsi:type="Count">
            <source localId="578" locator="441:9-441:53" name="Meningococcal Doses Administered to Patient" xsi:type="ExpressionRef"/>
         </expression>
      </def>
      <def localId="583" locator="446:1-447:45" name="Number of HepA Doses Administered to Patient" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="583">
               <a:s>/**
 * @define The number of HepA Doses administerd to the patient
 */
define &quot;Number of HepA Doses Administered to Patient&quot;:
  </a:s>
               <a:s r="582">
                  <a:s>Count(</a:s>
                  <a:s r="581">
                     <a:s>&quot;HepA Doses Administered to Patient&quot;</a:s>
                  </a:s>
                  <a:s>)</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="582" locator="447:3-447:45" xsi:type="Count">
            <source localId="581" locator="447:9-447:44" name="HepA Doses Administered to Patient" xsi:type="ExpressionRef"/>
         </expression>
      </def>
      <def localId="592" locator="452:1-455:42" name="Mumps Doses Administered to Patient" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="592">
               <a:s>/**
 * @dataElement Mumps containing Doses Administered to Patient
 */
define &quot;Mumps Doses Administered to Patient&quot;:
  </a:s>
               <a:s r="591">
                  <a:s>
                     <a:s r="585">
                        <a:s r="584">
                           <a:s>
                              <a:s>&quot;Doses Administered to Patient&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s> I</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
  </a:s>
                  <a:s r="590">
                     <a:s>where
    </a:s>
                     <a:s r="590">
                        <a:s r="587">
                           <a:s r="586">
                              <a:s>I</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="587">
                              <a:s>vaccineCode</a:s>
                           </a:s>
                        </a:s>
                        <a:s> in </a:s>
                        <a:s r="589">
                           <a:s r="588">
                              <a:s>IMMZc</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="589">
                              <a:s>&quot;Mumps Vaccine&quot;</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="591" locator="453:3-455:42" xsi:type="Query">
            <source localId="585" locator="453:3-453:35" alias="I">
               <expression localId="584" locator="453:3-453:33" name="Doses Administered to Patient" xsi:type="ExpressionRef"/>
            </source>
            <where localId="590" locator="454:3-455:42" xsi:type="InValueSet">
               <code name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                  <operand localId="587" locator="455:5-455:17" path="vaccineCode" scope="I" xsi:type="Property"/>
               </code>
               <valueset localId="589" locator="455:22-455:42" name="Mumps Vaccine" libraryName="IMMZc"/>
            </where>
         </expression>
      </def>
      <def localId="595" locator="461:1-462:46" name="Number of Mumps Doses Administered to Patient" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="595">
               <a:s>/**
 * @dataElement Mumps containing Doses Administered to Patient
 */
define &quot;Number of Mumps Doses Administered to Patient&quot;:
  </a:s>
               <a:s r="594">
                  <a:s>Count(</a:s>
                  <a:s r="593">
                     <a:s>&quot;Mumps Doses Administered to Patient&quot;</a:s>
                  </a:s>
                  <a:s>)</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="594" locator="462:3-462:46" xsi:type="Count">
            <source localId="593" locator="462:9-462:45" name="Mumps Doses Administered to Patient" xsi:type="ExpressionRef"/>
         </expression>
      </def>
      <def localId="602" locator="467:1-468:86" name="Date last Mumps dose Administered to Patient" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="602">
               <a:s>/**
 * @dataElement last date Mumps doses administered to the Patient
 */
define &quot;Date last Mumps dose Administered to Patient&quot;:
  </a:s>
               <a:s r="601">
                  <a:s>date from </a:s>
                  <a:s r="600">
                     <a:s>(</a:s>
                     <a:s r="600">
                        <a:s r="598">
                           <a:s r="597">
                              <a:s>First(</a:s>
                              <a:s r="596">
                                 <a:s>&quot;Mumps Doses Administered to Patient&quot;</a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="598">
                              <a:s>occurrence</a:s>
                           </a:s>
                        </a:s>
                        <a:s> as </a:s>
                        <a:s r="599">
                           <a:s>FHIR.dateTime</a:s>
                        </a:s>
                     </a:s>
                     <a:s>)</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="601" locator="468:3-468:86" xsi:type="DateFrom">
            <operand name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
               <operand localId="600" locator="468:13-468:86" strict="false" xsi:type="As">
                  <operand localId="598" locator="468:14-468:68" path="occurrence" xsi:type="Property">
                     <source localId="597" locator="468:14-468:57" xsi:type="First">
                        <source localId="596" locator="468:20-468:56" name="Mumps Doses Administered to Patient" xsi:type="ExpressionRef"/>
                     </source>
                  </operand>
                  <asTypeSpecifier localId="599" locator="468:73-468:85" name="fhir:dateTime" xsi:type="NamedTypeSpecifier"/>
               </operand>
            </operand>
         </expression>
      </def>
      <def localId="611" locator="473:1-476:46" name="Pertussis Doses Administered to Patient" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="611">
               <a:s>/**
 * @dataElement Pertussis containing Doses Administered to Patient
 */
define &quot;Pertussis Doses Administered to Patient&quot;:
  </a:s>
               <a:s r="610">
                  <a:s>
                     <a:s r="604">
                        <a:s r="603">
                           <a:s>
                              <a:s>&quot;Doses Administered to Patient&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s> I</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
  </a:s>
                  <a:s r="609">
                     <a:s>where
    </a:s>
                     <a:s r="609">
                        <a:s r="606">
                           <a:s r="605">
                              <a:s>I</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="606">
                              <a:s>vaccineCode</a:s>
                           </a:s>
                        </a:s>
                        <a:s> in </a:s>
                        <a:s r="608">
                           <a:s r="607">
                              <a:s>IMMZc</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="608">
                              <a:s>&quot;Pertussis Vaccine&quot;</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="610" locator="474:3-476:46" xsi:type="Query">
            <source localId="604" locator="474:3-474:35" alias="I">
               <expression localId="603" locator="474:3-474:33" name="Doses Administered to Patient" xsi:type="ExpressionRef"/>
            </source>
            <where localId="609" locator="475:3-476:46" xsi:type="InValueSet">
               <code name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                  <operand localId="606" locator="476:5-476:17" path="vaccineCode" scope="I" xsi:type="Property"/>
               </code>
               <valueset localId="608" locator="476:22-476:46" name="Pertussis Vaccine" libraryName="IMMZc"/>
            </where>
         </expression>
      </def>
      <def localId="614" locator="489:1-490:53" name="Number of Pneumococcal Doses Administered to Patient" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="614">
               <a:s>/**
 * @dataElement Number of Pneumococcal Doses Administered to Patient
 */
define &quot;Number of Pneumococcal Doses Administered to Patient&quot;:
  </a:s>
               <a:s r="613">
                  <a:s>Count(</a:s>
                  <a:s r="612">
                     <a:s>&quot;Pneumococcal Doses Administered to Patient&quot;</a:s>
                  </a:s>
                  <a:s>)</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="613" locator="490:3-490:53" xsi:type="Count">
            <source localId="612" locator="490:9-490:52" name="Pneumococcal Doses Administered to Patient" xsi:type="ExpressionRef"/>
         </expression>
      </def>
      <def localId="621" locator="495:1-496:93" name="Date Last Pneumococcal Dose Administered to Patient" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="621">
               <a:s>/**
 * @dataElement Date last Pneumococcal dose administered 
 */
define &quot;Date Last Pneumococcal Dose Administered to Patient&quot;:
  </a:s>
               <a:s r="620">
                  <a:s>date from </a:s>
                  <a:s r="619">
                     <a:s>(</a:s>
                     <a:s r="619">
                        <a:s r="617">
                           <a:s r="616">
                              <a:s>First(</a:s>
                              <a:s r="615">
                                 <a:s>&quot;Pneumococcal Doses Administered to Patient&quot;</a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="617">
                              <a:s>occurrence</a:s>
                           </a:s>
                        </a:s>
                        <a:s> as </a:s>
                        <a:s r="618">
                           <a:s>FHIR.dateTime</a:s>
                        </a:s>
                     </a:s>
                     <a:s>)</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="620" locator="496:3-496:93" xsi:type="DateFrom">
            <operand name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
               <operand localId="619" locator="496:13-496:93" strict="false" xsi:type="As">
                  <operand localId="617" locator="496:14-496:75" path="occurrence" xsi:type="Property">
                     <source localId="616" locator="496:14-496:64" xsi:type="First">
                        <source localId="615" locator="496:20-496:63" name="Pneumococcal Doses Administered to Patient" xsi:type="ExpressionRef"/>
                     </source>
                  </operand>
                  <asTypeSpecifier localId="618" locator="496:80-496:92" name="fhir:dateTime" xsi:type="NamedTypeSpecifier"/>
               </operand>
            </operand>
         </expression>
      </def>
      <def localId="625" locator="502:1-503:58" name="No Pneumococcal Doses Administered to Patient" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="625">
               <a:s>/**
 * @dataElement Number of Pneumococcal Doses Administered to Patient
 */
define &quot;No Pneumococcal Doses Administered to Patient&quot;:
  </a:s>
               <a:s r="624">
                  <a:s>not </a:s>
                  <a:s r="623">
                     <a:s>exists</a:s>
                     <a:s r="622">
                        <a:s>(</a:s>
                        <a:s r="622">
                           <a:s>&quot;Pneumococcal Doses Administered to Patient&quot;</a:s>
                        </a:s>
                        <a:s>)</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="624" locator="503:3-503:58" xsi:type="Not">
            <operand localId="623" locator="503:7-503:58" xsi:type="Exists">
               <operand localId="622" locator="503:13-503:58" name="Pneumococcal Doses Administered to Patient" xsi:type="ExpressionRef"/>
            </operand>
         </expression>
      </def>
      <def localId="634" locator="509:1-512:43" name="Rabies Doses Administered to Patient" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="634">
               <a:s>/**
 * @dataElement Rabies containing Doses Administered to Patient
 */
define &quot;Rabies Doses Administered to Patient&quot;:
  </a:s>
               <a:s r="633">
                  <a:s>
                     <a:s r="627">
                        <a:s r="626">
                           <a:s>
                              <a:s>&quot;Doses Administered to Patient&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s> I</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
  </a:s>
                  <a:s r="632">
                     <a:s>where
    </a:s>
                     <a:s r="632">
                        <a:s r="629">
                           <a:s r="628">
                              <a:s>I</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="629">
                              <a:s>vaccineCode</a:s>
                           </a:s>
                        </a:s>
                        <a:s> in </a:s>
                        <a:s r="631">
                           <a:s r="630">
                              <a:s>IMMZc</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="631">
                              <a:s>&quot;Rabies Vaccine&quot;</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="633" locator="510:3-512:43" xsi:type="Query">
            <source localId="627" locator="510:3-510:35" alias="I">
               <expression localId="626" locator="510:3-510:33" name="Doses Administered to Patient" xsi:type="ExpressionRef"/>
            </source>
            <where localId="632" locator="511:3-512:43" xsi:type="InValueSet">
               <code name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                  <operand localId="629" locator="512:5-512:17" path="vaccineCode" scope="I" xsi:type="Property"/>
               </code>
               <valueset localId="631" locator="512:22-512:43" name="Rabies Vaccine" libraryName="IMMZc"/>
            </where>
         </expression>
      </def>
      <def localId="637" locator="517:1-518:47" name="Number of Rabies Doses Administered to Patient" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="637">
               <a:s>/**
 * @dataElement Number of Rabies Doses Administered to Patient
 */
define &quot;Number of Rabies Doses Administered to Patient&quot;:
  </a:s>
               <a:s r="636">
                  <a:s>Count(</a:s>
                  <a:s r="635">
                     <a:s>&quot;Rabies Doses Administered to Patient&quot;</a:s>
                  </a:s>
                  <a:s>)</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="636" locator="518:3-518:47" xsi:type="Count">
            <source localId="635" locator="518:9-518:46" name="Rabies Doses Administered to Patient" xsi:type="ExpressionRef"/>
         </expression>
      </def>
      <def localId="646" locator="523:1-526:46" name="Rotavirus Doses Administered to Patient" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="646">
               <a:s>/**
 * @dataElement Rotavirus containing Doses Administered to Patient
 */
define &quot;Rotavirus Doses Administered to Patient&quot;:
  </a:s>
               <a:s r="645">
                  <a:s>
                     <a:s r="639">
                        <a:s r="638">
                           <a:s>
                              <a:s>&quot;Doses Administered to Patient&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s> I</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
  </a:s>
                  <a:s r="644">
                     <a:s>where
    </a:s>
                     <a:s r="644">
                        <a:s r="641">
                           <a:s r="640">
                              <a:s>I</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="641">
                              <a:s>vaccineCode</a:s>
                           </a:s>
                        </a:s>
                        <a:s> in </a:s>
                        <a:s r="643">
                           <a:s r="642">
                              <a:s>IMMZc</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="643">
                              <a:s>&quot;Rotavirus Vaccine&quot;</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="645" locator="524:3-526:46" xsi:type="Query">
            <source localId="639" locator="524:3-524:35" alias="I">
               <expression localId="638" locator="524:3-524:33" name="Doses Administered to Patient" xsi:type="ExpressionRef"/>
            </source>
            <where localId="644" locator="525:3-526:46" xsi:type="InValueSet">
               <code name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                  <operand localId="641" locator="526:5-526:17" path="vaccineCode" scope="I" xsi:type="Property"/>
               </code>
               <valueset localId="643" locator="526:22-526:46" name="Rotavirus Vaccine" libraryName="IMMZc"/>
            </where>
         </expression>
      </def>
      <def localId="655" locator="531:1-534:44" name="Rubella Doses Administered to Patient" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="655">
               <a:s>/**
 * @dataElement Rubella containing Doses Administered to Patient
 */
define &quot;Rubella Doses Administered to Patient&quot;:
  </a:s>
               <a:s r="654">
                  <a:s>
                     <a:s r="648">
                        <a:s r="647">
                           <a:s>
                              <a:s>&quot;Doses Administered to Patient&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s> I</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
  </a:s>
                  <a:s r="653">
                     <a:s>where
    </a:s>
                     <a:s r="653">
                        <a:s r="650">
                           <a:s r="649">
                              <a:s>I</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="650">
                              <a:s>vaccineCode</a:s>
                           </a:s>
                        </a:s>
                        <a:s> in </a:s>
                        <a:s r="652">
                           <a:s r="651">
                              <a:s>IMMZc</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="652">
                              <a:s>&quot;Rubella Vaccine&quot;</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="654" locator="532:3-534:44" xsi:type="Query">
            <source localId="648" locator="532:3-532:35" alias="I">
               <expression localId="647" locator="532:3-532:33" name="Doses Administered to Patient" xsi:type="ExpressionRef"/>
            </source>
            <where localId="653" locator="533:3-534:44" xsi:type="InValueSet">
               <code name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                  <operand localId="650" locator="534:5-534:17" path="vaccineCode" scope="I" xsi:type="Property"/>
               </code>
               <valueset localId="652" locator="534:22-534:44" name="Rubella Vaccine" libraryName="IMMZc"/>
            </where>
         </expression>
      </def>
      <def localId="659" locator="539:1-540:53" name="No Rubella Doses Administered to Patient" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="659">
               <a:s>/**
 * @dataElement Rubella containing doses administered
 */
define &quot;No Rubella Doses Administered to Patient&quot;:
  </a:s>
               <a:s r="658">
                  <a:s>not </a:s>
                  <a:s r="657">
                     <a:s>exists</a:s>
                     <a:s r="656">
                        <a:s>(</a:s>
                        <a:s r="656">
                           <a:s>&quot;Rubella Doses Administered to Patient&quot;</a:s>
                        </a:s>
                        <a:s>)</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="658" locator="540:3-540:53" xsi:type="Not">
            <operand localId="657" locator="540:7-540:53" xsi:type="Exists">
               <operand localId="656" locator="540:13-540:53" name="Rubella Doses Administered to Patient" xsi:type="ExpressionRef"/>
            </operand>
         </expression>
      </def>
      <def localId="668" locator="546:1-549:55" name="Seasonal Influenza Doses Administered to Patient" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="668">
               <a:s>/**
 * @dataElement Seasonal Influenza containing doses administered
 */
define &quot;Seasonal Influenza Doses Administered to Patient&quot;:
  </a:s>
               <a:s r="667">
                  <a:s>
                     <a:s r="661">
                        <a:s r="660">
                           <a:s>
                              <a:s>&quot;Doses Administered to Patient&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s> I</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
  </a:s>
                  <a:s r="666">
                     <a:s>where
    </a:s>
                     <a:s r="666">
                        <a:s r="663">
                           <a:s r="662">
                              <a:s>I</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="663">
                              <a:s>vaccineCode</a:s>
                           </a:s>
                        </a:s>
                        <a:s> in </a:s>
                        <a:s r="665">
                           <a:s r="664">
                              <a:s>IMMZc</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="665">
                              <a:s>&quot;Seasonal Influenza Vaccine&quot;</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="667" locator="547:3-549:55" xsi:type="Query">
            <source localId="661" locator="547:3-547:35" alias="I">
               <expression localId="660" locator="547:3-547:33" name="Doses Administered to Patient" xsi:type="ExpressionRef"/>
            </source>
            <where localId="666" locator="548:3-549:55" xsi:type="InValueSet">
               <code name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                  <operand localId="663" locator="549:5-549:17" path="vaccineCode" scope="I" xsi:type="Property"/>
               </code>
               <valueset localId="665" locator="549:22-549:55" name="Seasonal Influenza Vaccine" libraryName="IMMZc"/>
            </where>
         </expression>
      </def>
      <def localId="672" locator="554:1-555:64" name="No Seasonal Influenza Doses Administered to Patient" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="672">
               <a:s>/** 
 * @dataElement No seasonal influenza doses administerd to patient
 */
define &quot;No Seasonal Influenza Doses Administered to Patient&quot;:
  </a:s>
               <a:s r="671">
                  <a:s>not </a:s>
                  <a:s r="670">
                     <a:s>exists</a:s>
                     <a:s r="669">
                        <a:s>(</a:s>
                        <a:s r="669">
                           <a:s>&quot;Seasonal Influenza Doses Administered to Patient&quot;</a:s>
                        </a:s>
                        <a:s>)</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="671" locator="555:3-555:64" xsi:type="Not">
            <operand localId="670" locator="555:7-555:64" xsi:type="Exists">
               <operand localId="669" locator="555:13-555:64" name="Seasonal Influenza Doses Administered to Patient" xsi:type="ExpressionRef"/>
            </operand>
         </expression>
      </def>
      <def localId="675" locator="560:1-561:59" name="Number of Seasonal Influenza Doses Administered to Patient" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="675">
               <a:s>/** 
 * @dataElement Number of seasonal influenza doses administerd to patient
 */
define &quot;Number of Seasonal Influenza Doses Administered to Patient&quot;:
  </a:s>
               <a:s r="674">
                  <a:s>Count(</a:s>
                  <a:s r="673">
                     <a:s>&quot;Seasonal Influenza Doses Administered to Patient&quot;</a:s>
                  </a:s>
                  <a:s>)</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="674" locator="561:3-561:59" xsi:type="Count">
            <source localId="673" locator="561:9-561:58" name="Seasonal Influenza Doses Administered to Patient" xsi:type="ExpressionRef"/>
         </expression>
      </def>
      <def localId="682" locator="566:1-567:99" name="Date Last Seasonal Influenza Dose Administered to Patient" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="682">
               <a:s>/**
 * @dataElement Number of DTP doses administered excluding the birth dose
 */
define &quot;Date Last Seasonal Influenza Dose Administered to Patient&quot;:
  </a:s>
               <a:s r="681">
                  <a:s>date from </a:s>
                  <a:s r="680">
                     <a:s>(</a:s>
                     <a:s r="680">
                        <a:s r="678">
                           <a:s r="677">
                              <a:s>First(</a:s>
                              <a:s r="676">
                                 <a:s>&quot;Seasonal Influenza Doses Administered to Patient&quot;</a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="678">
                              <a:s>occurrence</a:s>
                           </a:s>
                        </a:s>
                        <a:s> as </a:s>
                        <a:s r="679">
                           <a:s>FHIR.dateTime</a:s>
                        </a:s>
                     </a:s>
                     <a:s>)</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="681" locator="567:3-567:99" xsi:type="DateFrom">
            <operand name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
               <operand localId="680" locator="567:13-567:99" strict="false" xsi:type="As">
                  <operand localId="678" locator="567:14-567:81" path="occurrence" xsi:type="Property">
                     <source localId="677" locator="567:14-567:70" xsi:type="First">
                        <source localId="676" locator="567:20-567:69" name="Seasonal Influenza Doses Administered to Patient" xsi:type="ExpressionRef"/>
                     </source>
                  </operand>
                  <asTypeSpecifier localId="679" locator="567:86-567:98" name="fhir:dateTime" xsi:type="NamedTypeSpecifier"/>
               </operand>
            </operand>
         </expression>
      </def>
      <def localId="689" locator="572:1-573:87" name="Date last Rabies dose given Dose Administered to Patient" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="689">
               <a:s>/**
 * @dataElement Date last Rabies dose administered excluding the birth dose
 */
define &quot;Date last Rabies dose given Dose Administered to Patient&quot;:
  </a:s>
               <a:s r="688">
                  <a:s>date from </a:s>
                  <a:s r="687">
                     <a:s>(</a:s>
                     <a:s r="687">
                        <a:s r="685">
                           <a:s r="684">
                              <a:s>First(</a:s>
                              <a:s r="683">
                                 <a:s>&quot;Rabies Doses Administered to Patient&quot;</a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="685">
                              <a:s>occurrence</a:s>
                           </a:s>
                        </a:s>
                        <a:s> as </a:s>
                        <a:s r="686">
                           <a:s>FHIR.dateTime</a:s>
                        </a:s>
                     </a:s>
                     <a:s>)</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="688" locator="573:3-573:87" xsi:type="DateFrom">
            <operand name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
               <operand localId="687" locator="573:13-573:87" strict="false" xsi:type="As">
                  <operand localId="685" locator="573:14-573:69" path="occurrence" xsi:type="Property">
                     <source localId="684" locator="573:14-573:58" xsi:type="First">
                        <source localId="683" locator="573:20-573:57" name="Rabies Doses Administered to Patient" xsi:type="ExpressionRef"/>
                     </source>
                  </operand>
                  <asTypeSpecifier localId="686" locator="573:74-573:86" name="fhir:dateTime" xsi:type="NamedTypeSpecifier"/>
               </operand>
            </operand>
         </expression>
      </def>
      <def localId="696" locator="577:1-578:94" name="Date last Meningococcal dose Administered to Patient" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="696">
               <a:s>/**
 * @dataElement Number of Meningococcal doses administered to the Patient
 */
define &quot;Date last Meningococcal dose Administered to Patient&quot;:
  </a:s>
               <a:s r="695">
                  <a:s>date from </a:s>
                  <a:s r="694">
                     <a:s>(</a:s>
                     <a:s r="694">
                        <a:s r="692">
                           <a:s r="691">
                              <a:s>First(</a:s>
                              <a:s r="690">
                                 <a:s>&quot;Meningococcal Doses Administered to Patient&quot;</a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="692">
                              <a:s>occurrence</a:s>
                           </a:s>
                        </a:s>
                        <a:s> as </a:s>
                        <a:s r="693">
                           <a:s>FHIR.dateTime</a:s>
                        </a:s>
                     </a:s>
                     <a:s>)</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="695" locator="578:3-578:94" xsi:type="DateFrom">
            <operand name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
               <operand localId="694" locator="578:13-578:94" strict="false" xsi:type="As">
                  <operand localId="692" locator="578:14-578:76" path="occurrence" xsi:type="Property">
                     <source localId="691" locator="578:14-578:65" xsi:type="First">
                        <source localId="690" locator="578:20-578:64" name="Meningococcal Doses Administered to Patient" xsi:type="ExpressionRef"/>
                     </source>
                  </operand>
                  <asTypeSpecifier localId="693" locator="578:81-578:93" name="fhir:dateTime" xsi:type="NamedTypeSpecifier"/>
               </operand>
            </operand>
         </expression>
      </def>
      <def localId="703" locator="583:1-584:85" name="Date last HepA dose Administered to Patient" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="703">
               <a:s>/**
 * @dataElement last date HepA doses administered to the Patient
 */
define &quot;Date last HepA dose Administered to Patient&quot;:
  </a:s>
               <a:s r="702">
                  <a:s>date from </a:s>
                  <a:s r="701">
                     <a:s>(</a:s>
                     <a:s r="701">
                        <a:s r="699">
                           <a:s r="698">
                              <a:s>First(</a:s>
                              <a:s r="697">
                                 <a:s>&quot;HepA Doses Administered to Patient&quot;</a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="699">
                              <a:s>occurrence</a:s>
                           </a:s>
                        </a:s>
                        <a:s> as </a:s>
                        <a:s r="700">
                           <a:s>FHIR.dateTime</a:s>
                        </a:s>
                     </a:s>
                     <a:s>)</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="702" locator="584:3-584:85" xsi:type="DateFrom">
            <operand name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
               <operand localId="701" locator="584:13-584:85" strict="false" xsi:type="As">
                  <operand localId="699" locator="584:14-584:67" path="occurrence" xsi:type="Property">
                     <source localId="698" locator="584:14-584:56" xsi:type="First">
                        <source localId="697" locator="584:20-584:55" name="HepA Doses Administered to Patient" xsi:type="ExpressionRef"/>
                     </source>
                  </operand>
                  <asTypeSpecifier localId="700" locator="584:72-584:84" name="fhir:dateTime" xsi:type="NamedTypeSpecifier"/>
               </operand>
            </operand>
         </expression>
      </def>
      <def localId="712" locator="588:1-591:44" name="Tetanus Doses Administered to Patient" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="712">
               <a:s>/**
 * @dataElement Tetanus containing Doses Administered to Patient
 */
define &quot;Tetanus Doses Administered to Patient&quot;:
  </a:s>
               <a:s r="711">
                  <a:s>
                     <a:s r="705">
                        <a:s r="704">
                           <a:s>
                              <a:s>&quot;Doses Administered to Patient&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s> I</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
  </a:s>
                  <a:s r="710">
                     <a:s>where
    </a:s>
                     <a:s r="710">
                        <a:s r="707">
                           <a:s r="706">
                              <a:s>I</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="707">
                              <a:s>vaccineCode</a:s>
                           </a:s>
                        </a:s>
                        <a:s> in </a:s>
                        <a:s r="709">
                           <a:s r="708">
                              <a:s>IMMZc</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="709">
                              <a:s>&quot;Tetanus Vaccine&quot;</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="711" locator="589:3-591:44" xsi:type="Query">
            <source localId="705" locator="589:3-589:35" alias="I">
               <expression localId="704" locator="589:3-589:33" name="Doses Administered to Patient" xsi:type="ExpressionRef"/>
            </source>
            <where localId="710" locator="590:3-591:44" xsi:type="InValueSet">
               <code name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                  <operand localId="707" locator="591:5-591:17" path="vaccineCode" scope="I" xsi:type="Property"/>
               </code>
               <valueset localId="709" locator="591:22-591:44" name="Tetanus Vaccine" libraryName="IMMZc"/>
            </where>
         </expression>
      </def>
      <def localId="721" locator="596:1-599:44" name="Typhoid Doses Administered to Patient" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="721">
               <a:s>/**
 * @dataElement Typhoid containing Doses Administered to Patient
 */
define &quot;Typhoid Doses Administered to Patient&quot;:
  </a:s>
               <a:s r="720">
                  <a:s>
                     <a:s r="714">
                        <a:s r="713">
                           <a:s>
                              <a:s>&quot;Doses Administered to Patient&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s> I</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
  </a:s>
                  <a:s r="719">
                     <a:s>where
    </a:s>
                     <a:s r="719">
                        <a:s r="716">
                           <a:s r="715">
                              <a:s>I</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="716">
                              <a:s>vaccineCode</a:s>
                           </a:s>
                        </a:s>
                        <a:s> in </a:s>
                        <a:s r="718">
                           <a:s r="717">
                              <a:s>IMMZc</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="718">
                              <a:s>&quot;Typhoid Vaccine&quot;</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="720" locator="597:3-599:44" xsi:type="Query">
            <source localId="714" locator="597:3-597:35" alias="I">
               <expression localId="713" locator="597:3-597:33" name="Doses Administered to Patient" xsi:type="ExpressionRef"/>
            </source>
            <where localId="719" locator="598:3-599:44" xsi:type="InValueSet">
               <code name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                  <operand localId="716" locator="599:5-599:17" path="vaccineCode" scope="I" xsi:type="Property"/>
               </code>
               <valueset localId="718" locator="599:22-599:44" name="Typhoid Vaccine" libraryName="IMMZc"/>
            </where>
         </expression>
      </def>
      <def localId="725" locator="604:1-605:54" name="No Typhoid Doses Administered to Patient" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="725">
               <a:s>/** 
 * @dataElement No Typhoid doses administered to patient
 */
define &quot;No Typhoid Doses Administered to Patient&quot;:
  </a:s>
               <a:s r="724">
                  <a:s>not </a:s>
                  <a:s r="723">
                     <a:s>exists </a:s>
                     <a:s r="722">
                        <a:s>(</a:s>
                        <a:s r="722">
                           <a:s>&quot;Typhoid Doses Administered to Patient&quot;</a:s>
                        </a:s>
                        <a:s>)</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="724" locator="605:3-605:54" xsi:type="Not">
            <operand localId="723" locator="605:7-605:54" xsi:type="Exists">
               <operand localId="722" locator="605:14-605:54" name="Typhoid Doses Administered to Patient" xsi:type="ExpressionRef"/>
            </operand>
         </expression>
      </def>
      <def localId="736" locator="610:1-611:116" name="Highest Sequence of Typhoid Doses Administered to Patient" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="736">
               <a:s>/** 
 * @dataElement Largest sequence of typhoid doses administered to patient
 */
define &quot;Highest Sequence of Typhoid Doses Administered to Patient&quot;:
  </a:s>
               <a:s r="735">
                  <a:s>Max(</a:s>
                  <a:s r="734">
                     <a:s>
                        <a:s r="727">
                           <a:s r="726">
                              <a:s>
                                 <a:s>&quot;Typhoid Doses Administered to Patient&quot;</a:s>
                              </a:s>
                           </a:s>
                           <a:s> I</a:s>
                        </a:s>
                     </a:s>
                     <a:s> </a:s>
                     <a:s r="733">
                        <a:s>return </a:s>
                        <a:s r="732">
                           <a:s>ToPositiveInt(</a:s>
                           <a:s r="731">
                              <a:s r="730">
                                 <a:s>(</a:s>
                                 <a:s r="730">
                                    <a:s>singleton from </a:s>
                                    <a:s r="729">
                                       <a:s r="728">
                                          <a:s>I</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="729">
                                          <a:s>protocolApplied</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="731">
                                 <a:s>doseNumber</a:s>
                              </a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>)</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="735" locator="611:3-611:116" xsi:type="Max">
            <source xsi:type="Query">
               <source alias="X">
                  <expression localId="734" locator="611:7-611:115" xsi:type="Query">
                     <source localId="727" locator="611:7-611:47" alias="I">
                        <expression localId="726" locator="611:7-611:45" name="Typhoid Doses Administered to Patient" xsi:type="ExpressionRef"/>
                     </source>
                     <return localId="733" locator="611:49-611:115">
                        <expression localId="732" locator="611:56-611:115" name="ToPositiveInt" xsi:type="FunctionRef">
                           <operand localId="731" locator="611:70-611:114" path="doseNumber" xsi:type="Property">
                              <source localId="730" locator="611:70-611:103" xsi:type="SingletonFrom">
                                 <operand localId="729" locator="611:86-611:102" path="protocolApplied" scope="I" xsi:type="Property"/>
                              </source>
                           </operand>
                        </expression>
                     </return>
                  </expression>
               </source>
               <return distinct="false">
                  <expression name="ToInteger" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <operand name="X" xsi:type="AliasRef"/>
                  </expression>
               </return>
            </source>
         </expression>
      </def>
      <def localId="743" locator="616:1-617:88" name="Date Last Typhoid Dose Administered to Patient" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="743">
               <a:s>/** 
 * @dataElement Date last typhoid dose administered
 */
define &quot;Date Last Typhoid Dose Administered to Patient&quot;:
  </a:s>
               <a:s r="742">
                  <a:s>date from </a:s>
                  <a:s r="741">
                     <a:s>(</a:s>
                     <a:s r="741">
                        <a:s r="739">
                           <a:s r="738">
                              <a:s>First(</a:s>
                              <a:s r="737">
                                 <a:s>&quot;Typhoid Doses Administered to Patient&quot;</a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="739">
                              <a:s>occurrence</a:s>
                           </a:s>
                        </a:s>
                        <a:s> as </a:s>
                        <a:s r="740">
                           <a:s>FHIR.dateTime</a:s>
                        </a:s>
                     </a:s>
                     <a:s>)</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="742" locator="617:3-617:88" xsi:type="DateFrom">
            <operand name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
               <operand localId="741" locator="617:13-617:88" strict="false" xsi:type="As">
                  <operand localId="739" locator="617:14-617:70" path="occurrence" xsi:type="Property">
                     <source localId="738" locator="617:14-617:59" xsi:type="First">
                        <source localId="737" locator="617:20-617:58" name="Typhoid Doses Administered to Patient" xsi:type="ExpressionRef"/>
                     </source>
                  </operand>
                  <asTypeSpecifier localId="740" locator="617:75-617:87" name="fhir:dateTime" xsi:type="NamedTypeSpecifier"/>
               </operand>
            </operand>
         </expression>
      </def>
      <def localId="751" locator="622:1-623:71" name="Type of Last Typhoid Dose Administered to Patient" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="751">
               <a:s>/** 
 * @dataElement The type of the last typhoid dose administered to patient
 */
define &quot;Type of Last Typhoid Dose Administered to Patient&quot;:
  </a:s>
               <a:s r="750">
                  <a:s>First(</a:s>
                  <a:s r="749">
                     <a:s>
                        <a:s r="745">
                           <a:s r="744">
                              <a:s>
                                 <a:s>&quot;Typhoid Doses Administered to Patient&quot;</a:s>
                              </a:s>
                           </a:s>
                           <a:s> I</a:s>
                        </a:s>
                     </a:s>
                     <a:s> </a:s>
                     <a:s r="748">
                        <a:s>return </a:s>
                        <a:s r="747">
                           <a:s r="746">
                              <a:s>I</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="747">
                              <a:s>vaccineCode</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>)</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="750" locator="623:3-623:71" xsi:type="First">
            <source localId="749" locator="623:9-623:70" xsi:type="Query">
               <source localId="745" locator="623:9-623:49" alias="I">
                  <expression localId="744" locator="623:9-623:47" name="Typhoid Doses Administered to Patient" xsi:type="ExpressionRef"/>
               </source>
               <return localId="748" locator="623:51-623:70">
                  <expression localId="747" locator="623:58-623:70" path="vaccineCode" scope="I" xsi:type="Property"/>
               </return>
            </source>
         </expression>
      </def>
      <def localId="759" locator="628:1-629:77" name="Type of last Meningococcal Dose Administered to Patient" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="759">
               <a:s>/** 
 * @dataElement Type of last Meningococcal Dose Administered to Patient
 */
define &quot;Type of last Meningococcal Dose Administered to Patient&quot;:
  </a:s>
               <a:s r="758">
                  <a:s>First(</a:s>
                  <a:s r="757">
                     <a:s>
                        <a:s r="753">
                           <a:s r="752">
                              <a:s>
                                 <a:s>&quot;Meningococcal Doses Administered to Patient&quot;</a:s>
                              </a:s>
                           </a:s>
                           <a:s> I</a:s>
                        </a:s>
                     </a:s>
                     <a:s> </a:s>
                     <a:s r="756">
                        <a:s>return </a:s>
                        <a:s r="755">
                           <a:s r="754">
                              <a:s>I</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="755">
                              <a:s>vaccineCode</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>)</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="758" locator="629:3-629:77" xsi:type="First">
            <source localId="757" locator="629:9-629:76" xsi:type="Query">
               <source localId="753" locator="629:9-629:55" alias="I">
                  <expression localId="752" locator="629:9-629:53" name="Meningococcal Doses Administered to Patient" xsi:type="ExpressionRef"/>
               </source>
               <return localId="756" locator="629:57-629:76">
                  <expression localId="755" locator="629:64-629:76" path="vaccineCode" scope="I" xsi:type="Property"/>
               </return>
            </source>
         </expression>
      </def>
      <def localId="767" locator="634:1-635:68" name="Type of last Hepatits A dose Administered to Patient" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="767">
               <a:s>/** 
 * @dataElement Type of last Hepatits A dose Administered to Patient
 */
define &quot;Type of last Hepatits A dose Administered to Patient&quot;:
  </a:s>
               <a:s r="766">
                  <a:s>First(</a:s>
                  <a:s r="765">
                     <a:s>
                        <a:s r="761">
                           <a:s r="760">
                              <a:s>
                                 <a:s>&quot;HepA Doses Administered to Patient&quot;</a:s>
                              </a:s>
                           </a:s>
                           <a:s> I</a:s>
                        </a:s>
                     </a:s>
                     <a:s> </a:s>
                     <a:s r="764">
                        <a:s>return </a:s>
                        <a:s r="763">
                           <a:s r="762">
                              <a:s>I</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="763">
                              <a:s>vaccineCode</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>)</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="766" locator="635:3-635:68" xsi:type="First">
            <source localId="765" locator="635:9-635:67" xsi:type="Query">
               <source localId="761" locator="635:9-635:46" alias="I">
                  <expression localId="760" locator="635:9-635:44" name="HepA Doses Administered to Patient" xsi:type="ExpressionRef"/>
               </source>
               <return localId="764" locator="635:48-635:67">
                  <expression localId="763" locator="635:55-635:67" path="vaccineCode" scope="I" xsi:type="Property"/>
               </return>
            </source>
         </expression>
      </def>
      <def localId="776" locator="641:1-644:46" name="Varicella Doses Administered to Patient" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="776">
               <a:s>/**
 * @dataElement Varicella containing Doses Administered to Patient
 */
define &quot;Varicella Doses Administered to Patient&quot;:
  </a:s>
               <a:s r="775">
                  <a:s>
                     <a:s r="769">
                        <a:s r="768">
                           <a:s>
                              <a:s>&quot;Doses Administered to Patient&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s> I</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
  </a:s>
                  <a:s r="774">
                     <a:s>where
    </a:s>
                     <a:s r="774">
                        <a:s r="771">
                           <a:s r="770">
                              <a:s>I</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="771">
                              <a:s>vaccineCode</a:s>
                           </a:s>
                        </a:s>
                        <a:s> in </a:s>
                        <a:s r="773">
                           <a:s r="772">
                              <a:s>IMMZc</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="773">
                              <a:s>&quot;Varicella Vaccine&quot;</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="775" locator="642:3-644:46" xsi:type="Query">
            <source localId="769" locator="642:3-642:35" alias="I">
               <expression localId="768" locator="642:3-642:33" name="Doses Administered to Patient" xsi:type="ExpressionRef"/>
            </source>
            <where localId="774" locator="643:3-644:46" xsi:type="InValueSet">
               <code name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                  <operand localId="771" locator="644:5-644:17" path="vaccineCode" scope="I" xsi:type="Property"/>
               </code>
               <valueset localId="773" locator="644:22-644:46" name="Varicella Vaccine" libraryName="IMMZc"/>
            </where>
         </expression>
      </def>
      <def localId="780" locator="649:1-650:55" name="No Varicella Doses Administered to Patient" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="780">
               <a:s>/** 
 * @dataElement There have been no Varicella doses administered to patient
 */
define &quot;No Varicella Doses Administered to Patient&quot;:
  </a:s>
               <a:s r="779">
                  <a:s>not </a:s>
                  <a:s r="778">
                     <a:s>exists</a:s>
                     <a:s r="777">
                        <a:s>(</a:s>
                        <a:s r="777">
                           <a:s>&quot;Varicella Doses Administered to Patient&quot;</a:s>
                        </a:s>
                        <a:s>)</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="779" locator="650:3-650:55" xsi:type="Not">
            <operand localId="778" locator="650:7-650:55" xsi:type="Exists">
               <operand localId="777" locator="650:13-650:55" name="Varicella Doses Administered to Patient" xsi:type="ExpressionRef"/>
            </operand>
         </expression>
      </def>
      <def localId="783" locator="655:1-656:50" name="Number of Varicella Doses Administered to Patient" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="783">
               <a:s>/**
 * @define The number of Varicella doses administerd to the patient
 */
define &quot;Number of Varicella Doses Administered to Patient&quot;:
  </a:s>
               <a:s r="782">
                  <a:s>Count(</a:s>
                  <a:s r="781">
                     <a:s>&quot;Varicella Doses Administered to Patient&quot;</a:s>
                  </a:s>
                  <a:s>)</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="782" locator="656:3-656:50" xsi:type="Count">
            <source localId="781" locator="656:9-656:49" name="Varicella Doses Administered to Patient" xsi:type="ExpressionRef"/>
         </expression>
      </def>
      <def localId="790" locator="661:1-662:90" name="Date Last Varicella Dose Administered to Patient" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="790">
               <a:s>/** 
 * @dataElement Date of last Varicella dose administration
 */
define &quot;Date Last Varicella Dose Administered to Patient&quot;:
  </a:s>
               <a:s r="789">
                  <a:s>date from </a:s>
                  <a:s r="788">
                     <a:s>(</a:s>
                     <a:s r="788">
                        <a:s r="786">
                           <a:s r="785">
                              <a:s>First(</a:s>
                              <a:s r="784">
                                 <a:s>&quot;Varicella Doses Administered to Patient&quot;</a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="786">
                              <a:s>occurrence</a:s>
                           </a:s>
                        </a:s>
                        <a:s> as </a:s>
                        <a:s r="787">
                           <a:s>FHIR.dateTime</a:s>
                        </a:s>
                     </a:s>
                     <a:s>)</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="789" locator="662:3-662:90" xsi:type="DateFrom">
            <operand name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
               <operand localId="788" locator="662:13-662:90" strict="false" xsi:type="As">
                  <operand localId="786" locator="662:14-662:72" path="occurrence" xsi:type="Property">
                     <source localId="785" locator="662:14-662:61" xsi:type="First">
                        <source localId="784" locator="662:20-662:60" name="Varicella Doses Administered to Patient" xsi:type="ExpressionRef"/>
                     </source>
                  </operand>
                  <asTypeSpecifier localId="787" locator="662:77-662:89" name="fhir:dateTime" xsi:type="NamedTypeSpecifier"/>
               </operand>
            </operand>
         </expression>
      </def>
      <def localId="799" locator="667:1-670:49" name="Yellow Fever Doses Administered to Patient" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="799">
               <a:s>/**
 * @dataElement Yellow Fever containing Doses Administered to Patient
 */
define &quot;Yellow Fever Doses Administered to Patient&quot;:
  </a:s>
               <a:s r="798">
                  <a:s>
                     <a:s r="792">
                        <a:s r="791">
                           <a:s>
                              <a:s>&quot;Doses Administered to Patient&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s> I</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
  </a:s>
                  <a:s r="797">
                     <a:s>where
    </a:s>
                     <a:s r="797">
                        <a:s r="794">
                           <a:s r="793">
                              <a:s>I</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="794">
                              <a:s>vaccineCode</a:s>
                           </a:s>
                        </a:s>
                        <a:s> in </a:s>
                        <a:s r="796">
                           <a:s r="795">
                              <a:s>IMMZc</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="796">
                              <a:s>&quot;Yellow Fever Vaccine&quot;</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="798" locator="668:3-670:49" xsi:type="Query">
            <source localId="792" locator="668:3-668:35" alias="I">
               <expression localId="791" locator="668:3-668:33" name="Doses Administered to Patient" xsi:type="ExpressionRef"/>
            </source>
            <where localId="797" locator="669:3-670:49" xsi:type="InValueSet">
               <code name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                  <operand localId="794" locator="670:5-670:17" path="vaccineCode" scope="I" xsi:type="Property"/>
               </code>
               <valueset localId="796" locator="670:22-670:49" name="Yellow Fever Vaccine" libraryName="IMMZc"/>
            </where>
         </expression>
      </def>
      <def localId="808" locator="675:1-678:40" name="DTP Doses Administered to Patient" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="808">
               <a:s>/**
 * @dataElement DTP containing Doses Administered to Patient
 */
define &quot;DTP Doses Administered to Patient&quot;:
  </a:s>
               <a:s r="807">
                  <a:s>
                     <a:s r="801">
                        <a:s r="800">
                           <a:s>
                              <a:s>&quot;Doses Administered to Patient&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s> I</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
  </a:s>
                  <a:s r="806">
                     <a:s>where
    </a:s>
                     <a:s r="806">
                        <a:s r="803">
                           <a:s r="802">
                              <a:s>I</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="803">
                              <a:s>vaccineCode</a:s>
                           </a:s>
                        </a:s>
                        <a:s> in </a:s>
                        <a:s r="805">
                           <a:s r="804">
                              <a:s>IMMZc</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="805">
                              <a:s>&quot;DTP Vaccine&quot;</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="807" locator="676:3-678:40" xsi:type="Query">
            <source localId="801" locator="676:3-676:35" alias="I">
               <expression localId="800" locator="676:3-676:33" name="Doses Administered to Patient" xsi:type="ExpressionRef"/>
            </source>
            <where localId="806" locator="677:3-678:40" xsi:type="InValueSet">
               <code name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                  <operand localId="803" locator="678:5-678:17" path="vaccineCode" scope="I" xsi:type="Property"/>
               </code>
               <valueset localId="805" locator="678:22-678:40" name="DTP Vaccine" libraryName="IMMZc"/>
            </where>
         </expression>
      </def>
      <def localId="819" locator="683:1-685:73" name="DTP Doses Administered to Patient Excluding Birth Dose" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="819">
               <a:s>/** 
  * @dataElement DTP administrations excluding birth doses
 */
define &quot;DTP Doses Administered to Patient Excluding Birth Dose&quot;:
  </a:s>
               <a:s r="818">
                  <a:s>
                     <a:s r="810">
                        <a:s r="809">
                           <a:s>
                              <a:s>&quot;DTP Doses Administered to Patient&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s> O</a:s>
                     </a:s>
                  </a:s>
                  <a:s> 
  </a:s>
                  <a:s r="817">
                     <a:s>where </a:s>
                     <a:s r="817">
                        <a:s r="815">
                           <a:s>ToPositiveInt(</a:s>
                           <a:s r="814">
                              <a:s r="813">
                                 <a:s>(</a:s>
                                 <a:s r="813">
                                    <a:s>singleton from </a:s>
                                    <a:s r="812">
                                       <a:s r="811">
                                          <a:s>O</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="812">
                                          <a:s>protocolApplied</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="814">
                                 <a:s>doseNumber</a:s>
                              </a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                        <a:s r="816"> != 0</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="818" locator="684:3-685:73" xsi:type="Query">
            <source localId="810" locator="684:3-684:39" alias="O">
               <expression localId="809" locator="684:3-684:37" name="DTP Doses Administered to Patient" xsi:type="ExpressionRef"/>
            </source>
            <where localId="817" locator="685:3-685:73" xsi:type="Not">
               <operand locator="685:9-685:73" xsi:type="Equal">
                  <operand name="ToInteger" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <operand localId="815" locator="685:9-685:68" name="ToPositiveInt" xsi:type="FunctionRef">
                        <operand localId="814" locator="685:23-685:67" path="doseNumber" xsi:type="Property">
                           <source localId="813" locator="685:23-685:56" xsi:type="SingletonFrom">
                              <operand localId="812" locator="685:39-685:55" path="protocolApplied" scope="O" xsi:type="Property"/>
                           </source>
                        </operand>
                     </operand>
                  </operand>
                  <operand localId="816" locator="685:73" valueType="t:Integer" value="0" xsi:type="Literal"/>
               </operand>
            </where>
         </expression>
      </def>
      <def localId="822" locator="690:1-691:65" name="Number of DTP Doses Administered to Patient Excluding Birth Dose" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="822">
               <a:s>/**
 * @dataElement Number of DTP Doses Administered to Patient excluding the birth dose
 */
define &quot;Number of DTP Doses Administered to Patient Excluding Birth Dose&quot;:
  </a:s>
               <a:s r="821">
                  <a:s>Count(</a:s>
                  <a:s r="820">
                     <a:s>&quot;DTP Doses Administered to Patient Excluding Birth Dose&quot;</a:s>
                  </a:s>
                  <a:s>)</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="821" locator="691:3-691:65" xsi:type="Count">
            <source localId="820" locator="691:9-691:64" name="DTP Doses Administered to Patient Excluding Birth Dose" xsi:type="ExpressionRef"/>
         </expression>
      </def>
      <def localId="831" locator="697:1-700:43" name="Dengue Doses Administered to Patient" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="831">
               <a:s>// O return ToPositiveInt((singleton from O.protocolApplied).doseNumber))

/**

 * @dataElement Dengue containing doses administered
 */
define &quot;Dengue Doses Administered to Patient&quot;:
  </a:s>
               <a:s r="830">
                  <a:s>
                     <a:s r="824">
                        <a:s r="823">
                           <a:s>
                              <a:s>&quot;Doses Administered to Patient&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s> I</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
  </a:s>
                  <a:s r="829">
                     <a:s>where
    </a:s>
                     <a:s r="829">
                        <a:s r="826">
                           <a:s r="825">
                              <a:s>I</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="826">
                              <a:s>vaccineCode</a:s>
                           </a:s>
                        </a:s>
                        <a:s> in </a:s>
                        <a:s r="828">
                           <a:s r="827">
                              <a:s>IMMZc</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="828">
                              <a:s>&quot;Dengue Vaccine&quot;</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="830" locator="698:3-700:43" xsi:type="Query">
            <source localId="824" locator="698:3-698:35" alias="I">
               <expression localId="823" locator="698:3-698:33" name="Doses Administered to Patient" xsi:type="ExpressionRef"/>
            </source>
            <where localId="829" locator="699:3-700:43" xsi:type="InValueSet">
               <code name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                  <operand localId="826" locator="700:5-700:17" path="vaccineCode" scope="I" xsi:type="Property"/>
               </code>
               <valueset localId="828" locator="700:22-700:43" name="Dengue Vaccine" libraryName="IMMZc"/>
            </where>
         </expression>
      </def>
      <def localId="838" locator="705:1-706:84" name="Date Last DTP Dose Administered to Patient" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="838">
               <a:s>/**
 * @dataElement Number of DTP doses administered excluding the birth dose
 */
define &quot;Date Last DTP Dose Administered to Patient&quot;:
  </a:s>
               <a:s r="837">
                  <a:s>date from </a:s>
                  <a:s r="836">
                     <a:s>(</a:s>
                     <a:s r="836">
                        <a:s r="834">
                           <a:s r="833">
                              <a:s>First(</a:s>
                              <a:s r="832">
                                 <a:s>&quot;DTP Doses Administered to Patient&quot;</a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="834">
                              <a:s>occurrence</a:s>
                           </a:s>
                        </a:s>
                        <a:s> as </a:s>
                        <a:s r="835">
                           <a:s>FHIR.dateTime</a:s>
                        </a:s>
                     </a:s>
                     <a:s>)</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="837" locator="706:3-706:84" xsi:type="DateFrom">
            <operand name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
               <operand localId="836" locator="706:13-706:84" strict="false" xsi:type="As">
                  <operand localId="834" locator="706:14-706:66" path="occurrence" xsi:type="Property">
                     <source localId="833" locator="706:14-706:55" xsi:type="First">
                        <source localId="832" locator="706:20-706:54" name="DTP Doses Administered to Patient" xsi:type="ExpressionRef"/>
                     </source>
                  </operand>
                  <asTypeSpecifier localId="835" locator="706:71-706:83" name="fhir:dateTime" xsi:type="NamedTypeSpecifier"/>
               </operand>
            </operand>
         </expression>
      </def>
      <def localId="845" locator="711:1-712:104" name="Date First DTP Dose Administered to Patient Excluding Birth Dose" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="845">
               <a:s>/**
 * @dataElement 
 */
define &quot;Date First DTP Dose Administered to Patient Excluding Birth Dose&quot;:
  </a:s>
               <a:s r="844">
                  <a:s>date from </a:s>
                  <a:s r="843">
                     <a:s>(</a:s>
                     <a:s r="843">
                        <a:s r="841">
                           <a:s r="840">
                              <a:s>Last(</a:s>
                              <a:s r="839">
                                 <a:s>&quot;DTP Doses Administered to Patient Excluding Birth Dose&quot;</a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="841">
                              <a:s>occurrence</a:s>
                           </a:s>
                        </a:s>
                        <a:s> as </a:s>
                        <a:s r="842">
                           <a:s>FHIR.dateTime</a:s>
                        </a:s>
                     </a:s>
                     <a:s>)</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="844" locator="712:3-712:104" xsi:type="DateFrom">
            <operand name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
               <operand localId="843" locator="712:13-712:104" strict="false" xsi:type="As">
                  <operand localId="841" locator="712:14-712:86" path="occurrence" xsi:type="Property">
                     <source localId="840" locator="712:14-712:75" xsi:type="Last">
                        <source localId="839" locator="712:19-712:74" name="DTP Doses Administered to Patient Excluding Birth Dose" xsi:type="ExpressionRef"/>
                     </source>
                  </operand>
                  <asTypeSpecifier localId="842" locator="712:91-712:103" name="fhir:dateTime" xsi:type="NamedTypeSpecifier"/>
               </operand>
            </operand>
         </expression>
      </def>
      <def localId="849" locator="718:1-719:49" name="No DTP Doses Administered to Patient" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="849">
               <a:s>/**
 * @dataElement 
 */
define &quot;No DTP Doses Administered to Patient&quot;:
  </a:s>
               <a:s r="848">
                  <a:s>not </a:s>
                  <a:s r="847">
                     <a:s>exists</a:s>
                     <a:s r="846">
                        <a:s>(</a:s>
                        <a:s r="846">
                           <a:s>&quot;DTP Doses Administered to Patient&quot;</a:s>
                        </a:s>
                        <a:s>)</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="848" locator="719:3-719:49" xsi:type="Not">
            <operand localId="847" locator="719:7-719:49" xsi:type="Exists">
               <operand localId="846" locator="719:13-719:49" name="DTP Doses Administered to Patient" xsi:type="ExpressionRef"/>
            </operand>
         </expression>
      </def>
      <def localId="858" locator="724:1-727:40" name="TBE Doses Administered to Patient" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="858">
               <a:s>/**
 * @dataElement Tick-Borne Encephalitis containing Doses Administered to Patient
 */
define &quot;TBE Doses Administered to Patient&quot;:
  </a:s>
               <a:s r="857">
                  <a:s>
                     <a:s r="851">
                        <a:s r="850">
                           <a:s>
                              <a:s>&quot;Doses Administered to Patient&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s> I</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
  </a:s>
                  <a:s r="856">
                     <a:s>where
    </a:s>
                     <a:s r="856">
                        <a:s r="853">
                           <a:s r="852">
                              <a:s>I</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="853">
                              <a:s>vaccineCode</a:s>
                           </a:s>
                        </a:s>
                        <a:s> in </a:s>
                        <a:s r="855">
                           <a:s r="854">
                              <a:s>IMMZc</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="855">
                              <a:s>&quot;TBE Vaccine&quot;</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="857" locator="725:3-727:40" xsi:type="Query">
            <source localId="851" locator="725:3-725:35" alias="I">
               <expression localId="850" locator="725:3-725:33" name="Doses Administered to Patient" xsi:type="ExpressionRef"/>
            </source>
            <where localId="856" locator="726:3-727:40" xsi:type="InValueSet">
               <code name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                  <operand localId="853" locator="727:5-727:17" path="vaccineCode" scope="I" xsi:type="Property"/>
               </code>
               <valueset localId="855" locator="727:22-727:40" name="TBE Vaccine" libraryName="IMMZc"/>
            </where>
         </expression>
      </def>
      <def localId="865" locator="732:1-733:84" name="Date Last TBE Dose Administered to Patient" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="865">
               <a:s>/** 
 * @dataElement Date of last TBE dose administration
 */
define &quot;Date Last TBE Dose Administered to Patient&quot;:
  </a:s>
               <a:s r="864">
                  <a:s>date from </a:s>
                  <a:s r="863">
                     <a:s>(</a:s>
                     <a:s r="863">
                        <a:s r="861">
                           <a:s r="860">
                              <a:s>First(</a:s>
                              <a:s r="859">
                                 <a:s>&quot;TBE Doses Administered to Patient&quot;</a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="861">
                              <a:s>occurrence</a:s>
                           </a:s>
                        </a:s>
                        <a:s> as </a:s>
                        <a:s r="862">
                           <a:s>FHIR.dateTime</a:s>
                        </a:s>
                     </a:s>
                     <a:s>)</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="864" locator="733:3-733:84" xsi:type="DateFrom">
            <operand name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
               <operand localId="863" locator="733:13-733:84" strict="false" xsi:type="As">
                  <operand localId="861" locator="733:14-733:66" path="occurrence" xsi:type="Property">
                     <source localId="860" locator="733:14-733:55" xsi:type="First">
                        <source localId="859" locator="733:20-733:54" name="TBE Doses Administered to Patient" xsi:type="ExpressionRef"/>
                     </source>
                  </operand>
                  <asTypeSpecifier localId="862" locator="733:71-733:83" name="fhir:dateTime" xsi:type="NamedTypeSpecifier"/>
               </operand>
            </operand>
         </expression>
      </def>
      <def localId="869" locator="738:1-739:56" name="Type of Last TBE Dose Administered to Patient" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="869">
               <a:s>/** 
 * @dataElement Date of last TBE dose administration
 */
define &quot;Type of Last TBE Dose Administered to Patient&quot;:
  </a:s>
               <a:s r="868">
                  <a:s r="867">
                     <a:s>First(</a:s>
                     <a:s r="866">
                        <a:s>&quot;TBE Doses Administered to Patient&quot;</a:s>
                     </a:s>
                     <a:s>)</a:s>
                  </a:s>
                  <a:s>.</a:s>
                  <a:s r="868">
                     <a:s>vaccineCode</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="868" locator="739:3-739:56" path="vaccineCode" xsi:type="Property">
            <source localId="867" locator="739:3-739:44" xsi:type="First">
               <source localId="866" locator="739:9-739:43" name="TBE Doses Administered to Patient" xsi:type="ExpressionRef"/>
            </source>
         </expression>
      </def>
      <def localId="873" locator="745:1-746:49" name="No TBE Doses Administered to Patient" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="873">
               <a:s>/**
 * @dataElement Patient has no Tick-Borne Encephalitis doses
 */
define &quot;No TBE Doses Administered to Patient&quot;:
  </a:s>
               <a:s r="872">
                  <a:s>not </a:s>
                  <a:s r="871">
                     <a:s>exists</a:s>
                     <a:s r="870">
                        <a:s>(</a:s>
                        <a:s r="870">
                           <a:s>&quot;TBE Doses Administered to Patient&quot;</a:s>
                        </a:s>
                        <a:s>)</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="872" locator="746:3-746:49" xsi:type="Not">
            <operand localId="871" locator="746:7-746:49" xsi:type="Exists">
               <operand localId="870" locator="746:13-746:49" name="TBE Doses Administered to Patient" xsi:type="ExpressionRef"/>
            </operand>
         </expression>
      </def>
      <def localId="876" locator="751:1-752:44" name="Number of TBE Doses Administered to Patient" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="876">
               <a:s>/**
 * @dataElement Number of TBE Doses Administered to Patient excluding the birth dose
 */
define &quot;Number of TBE Doses Administered to Patient&quot;:
  </a:s>
               <a:s r="875">
                  <a:s>Count(</a:s>
                  <a:s r="874">
                     <a:s>&quot;TBE Doses Administered to Patient&quot;</a:s>
                  </a:s>
                  <a:s>)</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="875" locator="752:3-752:44" xsi:type="Count">
            <source localId="874" locator="752:9-752:43" name="TBE Doses Administered to Patient" xsi:type="ExpressionRef"/>
         </expression>
      </def>
      <def localId="899" locator="762:1-766:24" name="TST Test Results" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="899">
               <a:s>// O return ToPositiveInt((singleton from O.protocolApplied).doseNumber))


/******************************
 * Test Results
 */

/* 
 * @dataElement TST Test Result
 */
define &quot;TST Test Results&quot;:
	</a:s>
               <a:s r="898">
                  <a:s>
                     <a:s r="878">
                        <a:s r="877">
                           <a:s r="877">
                              <a:s>[Observation: </a:s>
                              <a:s>
                                 <a:s>code</a:s>
                              </a:s>
                              <a:s> in </a:s>
                              <a:s>
                                 <a:s>IMMZc.&quot;TST Test Result&quot;</a:s>
                              </a:s>
                              <a:s>]</a:s>
                           </a:s>
                        </a:s>
                        <a:s> O</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
  </a:s>
                  <a:s r="894">
                     <a:s>where </a:s>
                     <a:s r="894">
                        <a:s r="885">
                           <a:s r="880">
                              <a:s r="879">
                                 <a:s>O</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="880">
                                 <a:s>status</a:s>
                              </a:s>
                           </a:s>
                           <a:s> in </a:s>
                           <a:s r="884">
                              <a:s>{ </a:s>
                              <a:s r="881">
                                 <a:s>'final'</a:s>
                              </a:s>
                              <a:s>, </a:s>
                              <a:s r="882">
                                 <a:s>'amended'</a:s>
                              </a:s>
                              <a:s>, </a:s>
                              <a:s r="883">
                                 <a:s>'corrected'</a:s>
                              </a:s>
                              <a:s> }</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
    and </a:s>
                        <a:s r="893">
                           <a:s>not</a:s>
                           <a:s r="892">
                              <a:s>(</a:s>
                              <a:s r="892">
                                 <a:s>Coalesce(</a:s>
                                 <a:s r="890">
                                    <a:s r="889">
                                       <a:s r="886">
                                          <a:s>WCom</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="889">
                                          <a:s>ModifierExtension(</a:s>
                                          <a:s r="887">
                                             <a:s>O</a:s>
                                          </a:s>
                                          <a:s>, </a:s>
                                          <a:s r="888">
                                             <a:s>'who-notDone'</a:s>
                                          </a:s>
                                          <a:s>)</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="890">
                                       <a:s>value</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s r="891">, false)</a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>
  </a:s>
                  <a:s r="897">
                     <a:s>sort by </a:s>
                     <a:s r="896">
                        <a:s r="895">
                           <a:s>effective</a:s>
                        </a:s>
                        <a:s> desc</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="898" locator="763:2-766:24" xsi:type="Query">
            <source localId="878" locator="763:2-763:49" alias="O">
               <expression localId="877" locator="763:2-763:47" dataType="fhir:Observation" templateId="http://hl7.org/fhir/StructureDefinition/Observation" codeProperty="code" codeComparator="in" xsi:type="Retrieve">
                  <codes locator="763:24-763:46" name="TST Test Result" libraryName="IMMZc" xsi:type="ValueSetRef"/>
               </expression>
            </source>
            <where localId="894" locator="764:3-765:76" xsi:type="And">
               <operand localId="885" locator="764:9-764:55" xsi:type="In">
                  <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <operand localId="880" locator="764:9-764:16" path="status" scope="O" xsi:type="Property"/>
                  </operand>
                  <operand localId="884" locator="764:21-764:55" xsi:type="List">
                     <element localId="881" locator="764:23-764:29" valueType="t:String" value="final" xsi:type="Literal"/>
                     <element localId="882" locator="764:32-764:40" valueType="t:String" value="amended" xsi:type="Literal"/>
                     <element localId="883" locator="764:43-764:53" valueType="t:String" value="corrected" xsi:type="Literal"/>
                  </operand>
               </operand>
               <operand localId="893" locator="765:9-765:76" xsi:type="Not">
                  <operand localId="892" locator="765:12-765:76" xsi:type="Coalesce">
                     <operand name="ToBoolean" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand asType="fhir:boolean" xsi:type="As">
                           <operand localId="890" locator="765:22-765:67" path="value" xsi:type="Property">
                              <source localId="889" locator="765:22-765:61" name="ModifierExtension" libraryName="WCom" xsi:type="FunctionRef">
                                 <operand localId="887" locator="765:45" name="O" xsi:type="AliasRef"/>
                                 <operand localId="888" locator="765:48-765:60" valueType="t:String" value="who-notDone" xsi:type="Literal"/>
                              </source>
                           </operand>
                        </operand>
                     </operand>
                     <operand localId="891" locator="765:70-765:74" valueType="t:Boolean" value="false" xsi:type="Literal"/>
                  </operand>
               </operand>
            </where>
            <sort localId="897" locator="766:3-766:24">
               <by localId="896" locator="766:11-766:24" direction="desc" path="effective" xsi:type="ByColumn"/>
            </sort>
         </expression>
      </def>
      <def localId="909" locator="771:1-773:43" name="Most Recent TST Test Result" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="909">
               <a:s>/*
 * @dataElement Most recent TST Test result
 */
define &quot;Most Recent TST Test Result&quot;:
  </a:s>
               <a:s r="908">
                  <a:s>First(</a:s>
                  <a:s r="907">
                     <a:s>
                        <a:s r="901">
                           <a:s r="900">
                              <a:s>
                                 <a:s>&quot;TST Test Results&quot;</a:s>
                              </a:s>
                           </a:s>
                           <a:s> O</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="906">
                        <a:s>return </a:s>
                        <a:s r="905">
                           <a:s r="903">
                              <a:s r="902">
                                 <a:s>O</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="903">
                                 <a:s>value</a:s>
                              </a:s>
                           </a:s>
                           <a:s> as </a:s>
                           <a:s r="904">
                              <a:s>FHIR.CodeableConcept</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>)</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="908" locator="772:3-773:43" xsi:type="First">
            <source localId="907" locator="772:9-773:42" xsi:type="Query">
               <source localId="901" locator="772:9-772:28" alias="O">
                  <expression localId="900" locator="772:9-772:26" name="TST Test Results" xsi:type="ExpressionRef"/>
               </source>
               <return localId="906" locator="773:5-773:42">
                  <expression localId="905" locator="773:12-773:42" strict="false" xsi:type="As">
                     <operand localId="903" locator="773:12-773:18" path="value" scope="O" xsi:type="Property"/>
                     <asTypeSpecifier localId="904" locator="773:23-773:42" name="fhir:CodeableConcept" xsi:type="NamedTypeSpecifier"/>
                  </expression>
               </return>
            </source>
         </expression>
      </def>
      <def localId="932" locator="778:1-782:26" name="VNA Test Results" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="932">
               <a:s>/**
 * @dataElement Observed VNA Levels
 */
define &quot;VNA Test Results&quot;:
  </a:s>
               <a:s r="931">
                  <a:s>
                     <a:s r="911">
                        <a:s r="910">
                           <a:s r="910">
                              <a:s>[Observation: </a:s>
                              <a:s>
                                 <a:s>code</a:s>
                              </a:s>
                              <a:s> in </a:s>
                              <a:s>
                                 <a:s>IMMZc.&quot;VNA levels&quot;</a:s>
                              </a:s>
                              <a:s>]</a:s>
                           </a:s>
                        </a:s>
                        <a:s> O</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s r="927">
                     <a:s>where </a:s>
                     <a:s r="927">
                        <a:s r="918">
                           <a:s r="913">
                              <a:s r="912">
                                 <a:s>O</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="913">
                                 <a:s>status</a:s>
                              </a:s>
                           </a:s>
                           <a:s> in </a:s>
                           <a:s r="917">
                              <a:s>{ </a:s>
                              <a:s r="914">
                                 <a:s>'final'</a:s>
                              </a:s>
                              <a:s>, </a:s>
                              <a:s r="915">
                                 <a:s>'amended'</a:s>
                              </a:s>
                              <a:s>, </a:s>
                              <a:s r="916">
                                 <a:s>'corrected'</a:s>
                              </a:s>
                              <a:s> }</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
      and </a:s>
                        <a:s r="926">
                           <a:s>not</a:s>
                           <a:s r="925">
                              <a:s>(</a:s>
                              <a:s r="925">
                                 <a:s>Coalesce(</a:s>
                                 <a:s r="923">
                                    <a:s r="922">
                                       <a:s r="919">
                                          <a:s>WCom</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="922">
                                          <a:s>ModifierExtension(</a:s>
                                          <a:s r="920">
                                             <a:s>O</a:s>
                                          </a:s>
                                          <a:s>, </a:s>
                                          <a:s r="921">
                                             <a:s>'who-notDone'</a:s>
                                          </a:s>
                                          <a:s>)</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="923">
                                       <a:s>value</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s r="924">, false)</a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s r="930">
                     <a:s>sort by </a:s>
                     <a:s r="929">
                        <a:s r="928">
                           <a:s>effective</a:s>
                        </a:s>
                        <a:s> desc</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="931" locator="779:3-782:26" xsi:type="Query">
            <source localId="911" locator="779:3-779:45" alias="O">
               <expression localId="910" locator="779:3-779:43" dataType="fhir:Observation" templateId="http://hl7.org/fhir/StructureDefinition/Observation" codeProperty="code" codeComparator="in" xsi:type="Retrieve">
                  <codes locator="779:25-779:42" name="VNA levels" libraryName="IMMZc" xsi:type="ValueSetRef"/>
               </expression>
            </source>
            <where localId="927" locator="780:5-781:78" xsi:type="And">
               <operand localId="918" locator="780:11-780:57" xsi:type="In">
                  <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <operand localId="913" locator="780:11-780:18" path="status" scope="O" xsi:type="Property"/>
                  </operand>
                  <operand localId="917" locator="780:23-780:57" xsi:type="List">
                     <element localId="914" locator="780:25-780:31" valueType="t:String" value="final" xsi:type="Literal"/>
                     <element localId="915" locator="780:34-780:42" valueType="t:String" value="amended" xsi:type="Literal"/>
                     <element localId="916" locator="780:45-780:55" valueType="t:String" value="corrected" xsi:type="Literal"/>
                  </operand>
               </operand>
               <operand localId="926" locator="781:11-781:78" xsi:type="Not">
                  <operand localId="925" locator="781:14-781:78" xsi:type="Coalesce">
                     <operand name="ToBoolean" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand asType="fhir:boolean" xsi:type="As">
                           <operand localId="923" locator="781:24-781:69" path="value" xsi:type="Property">
                              <source localId="922" locator="781:24-781:63" name="ModifierExtension" libraryName="WCom" xsi:type="FunctionRef">
                                 <operand localId="920" locator="781:47" name="O" xsi:type="AliasRef"/>
                                 <operand localId="921" locator="781:50-781:62" valueType="t:String" value="who-notDone" xsi:type="Literal"/>
                              </source>
                           </operand>
                        </operand>
                     </operand>
                     <operand localId="924" locator="781:72-781:76" valueType="t:Boolean" value="false" xsi:type="Literal"/>
                  </operand>
               </operand>
            </where>
            <sort localId="930" locator="782:5-782:26">
               <by localId="929" locator="782:13-782:26" direction="desc" path="effective" xsi:type="ByColumn"/>
            </sort>
         </expression>
      </def>
      <def localId="955" locator="787:1-791:26" name="IGRA Test Results" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="955">
               <a:s>/* 
 * @dataElement IGRA Test Result
 */
define &quot;IGRA Test Results&quot;:
	</a:s>
               <a:s r="954">
                  <a:s>
                     <a:s r="934">
                        <a:s r="933">
                           <a:s r="933">
                              <a:s>[Observation: </a:s>
                              <a:s>
                                 <a:s>code</a:s>
                              </a:s>
                              <a:s> in </a:s>
                              <a:s>
                                 <a:s>IMMZc.&quot;IGRA Test Result&quot;</a:s>
                              </a:s>
                              <a:s>]</a:s>
                           </a:s>
                        </a:s>
                        <a:s> O</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s r="950">
                     <a:s>where </a:s>
                     <a:s r="950">
                        <a:s r="941">
                           <a:s r="936">
                              <a:s r="935">
                                 <a:s>O</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="936">
                                 <a:s>status</a:s>
                              </a:s>
                           </a:s>
                           <a:s> in </a:s>
                           <a:s r="940">
                              <a:s>{ </a:s>
                              <a:s r="937">
                                 <a:s>'final'</a:s>
                              </a:s>
                              <a:s>, </a:s>
                              <a:s r="938">
                                 <a:s>'amended'</a:s>
                              </a:s>
                              <a:s>, </a:s>
                              <a:s r="939">
                                 <a:s>'corrected'</a:s>
                              </a:s>
                              <a:s> }</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
      and </a:s>
                        <a:s r="949">
                           <a:s>not</a:s>
                           <a:s r="948">
                              <a:s>(</a:s>
                              <a:s r="948">
                                 <a:s>Coalesce(</a:s>
                                 <a:s r="946">
                                    <a:s r="945">
                                       <a:s r="942">
                                          <a:s>WCom</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="945">
                                          <a:s>ModifierExtension(</a:s>
                                          <a:s r="943">
                                             <a:s>O</a:s>
                                          </a:s>
                                          <a:s>, </a:s>
                                          <a:s r="944">
                                             <a:s>'who-notDone'</a:s>
                                          </a:s>
                                          <a:s>)</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="946">
                                       <a:s>value</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s r="947">, false)</a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s r="953">
                     <a:s>sort by </a:s>
                     <a:s r="952">
                        <a:s r="951">
                           <a:s>effective</a:s>
                        </a:s>
                        <a:s> desc</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="954" locator="788:2-791:26" xsi:type="Query">
            <source localId="934" locator="788:2-788:50" alias="O">
               <expression localId="933" locator="788:2-788:48" dataType="fhir:Observation" templateId="http://hl7.org/fhir/StructureDefinition/Observation" codeProperty="code" codeComparator="in" xsi:type="Retrieve">
                  <codes locator="788:24-788:47" name="IGRA Test Result" libraryName="IMMZc" xsi:type="ValueSetRef"/>
               </expression>
            </source>
            <where localId="950" locator="789:5-790:78" xsi:type="And">
               <operand localId="941" locator="789:11-789:57" xsi:type="In">
                  <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <operand localId="936" locator="789:11-789:18" path="status" scope="O" xsi:type="Property"/>
                  </operand>
                  <operand localId="940" locator="789:23-789:57" xsi:type="List">
                     <element localId="937" locator="789:25-789:31" valueType="t:String" value="final" xsi:type="Literal"/>
                     <element localId="938" locator="789:34-789:42" valueType="t:String" value="amended" xsi:type="Literal"/>
                     <element localId="939" locator="789:45-789:55" valueType="t:String" value="corrected" xsi:type="Literal"/>
                  </operand>
               </operand>
               <operand localId="949" locator="790:11-790:78" xsi:type="Not">
                  <operand localId="948" locator="790:14-790:78" xsi:type="Coalesce">
                     <operand name="ToBoolean" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand asType="fhir:boolean" xsi:type="As">
                           <operand localId="946" locator="790:24-790:69" path="value" xsi:type="Property">
                              <source localId="945" locator="790:24-790:63" name="ModifierExtension" libraryName="WCom" xsi:type="FunctionRef">
                                 <operand localId="943" locator="790:47" name="O" xsi:type="AliasRef"/>
                                 <operand localId="944" locator="790:50-790:62" valueType="t:String" value="who-notDone" xsi:type="Literal"/>
                              </source>
                           </operand>
                        </operand>
                     </operand>
                     <operand localId="947" locator="790:72-790:76" valueType="t:Boolean" value="false" xsi:type="Literal"/>
                  </operand>
               </operand>
            </where>
            <sort localId="953" locator="791:5-791:26">
               <by localId="952" locator="791:13-791:26" direction="desc" path="effective" xsi:type="ByColumn"/>
            </sort>
         </expression>
      </def>
      <def localId="965" locator="796:1-798:43" name="Most Recent IGRA Test Result" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="965">
               <a:s>/*
 * @dataElement Most recent IGRA Test Result
 */
define &quot;Most Recent IGRA Test Result&quot;:
  </a:s>
               <a:s r="964">
                  <a:s>First(</a:s>
                  <a:s r="963">
                     <a:s>
                        <a:s r="957">
                           <a:s r="956">
                              <a:s>
                                 <a:s>&quot;IGRA Test Results&quot;</a:s>
                              </a:s>
                           </a:s>
                           <a:s> O</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="962">
                        <a:s>return </a:s>
                        <a:s r="961">
                           <a:s r="959">
                              <a:s r="958">
                                 <a:s>O</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="959">
                                 <a:s>value</a:s>
                              </a:s>
                           </a:s>
                           <a:s> as </a:s>
                           <a:s r="960">
                              <a:s>FHIR.CodeableConcept</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>)</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="964" locator="797:3-798:43" xsi:type="First">
            <source localId="963" locator="797:9-798:42" xsi:type="Query">
               <source localId="957" locator="797:9-797:29" alias="O">
                  <expression localId="956" locator="797:9-797:27" name="IGRA Test Results" xsi:type="ExpressionRef"/>
               </source>
               <return localId="962" locator="798:5-798:42">
                  <expression localId="961" locator="798:12-798:42" strict="false" xsi:type="As">
                     <operand localId="959" locator="798:12-798:18" path="value" scope="O" xsi:type="Property"/>
                     <asTypeSpecifier localId="960" locator="798:23-798:42" name="fhir:CodeableConcept" xsi:type="NamedTypeSpecifier"/>
                  </expression>
               </return>
            </source>
         </expression>
      </def>
      <def localId="972" locator="803:1-805:26" name="Observed CD4% Measurements" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="972">
               <a:s>/* 
 * @dataElement All CD4% observations ordered by date issued
 */
define &quot;Observed CD4% Measurements&quot;:
	</a:s>
               <a:s r="971">
                  <a:s>
                     <a:s r="967">
                        <a:s r="966">
                           <a:s r="966">
                              <a:s>[Observation: </a:s>
                              <a:s>
                                 <a:s>code</a:s>
                              </a:s>
                              <a:s> in </a:s>
                              <a:s>
                                 <a:s>IMMZc.&quot;CD4% Test Result&quot;</a:s>
                              </a:s>
                              <a:s>]</a:s>
                           </a:s>
                        </a:s>
                        <a:s> O</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s r="970">
                     <a:s>sort by </a:s>
                     <a:s r="969">
                        <a:s r="968">
                           <a:s>effective</a:s>
                        </a:s>
                        <a:s> desc</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="971" locator="804:2-805:26" xsi:type="Query">
            <source localId="967" locator="804:2-804:50" alias="O">
               <expression localId="966" locator="804:2-804:48" dataType="fhir:Observation" templateId="http://hl7.org/fhir/StructureDefinition/Observation" codeProperty="code" codeComparator="in" xsi:type="Retrieve">
                  <codes locator="804:24-804:47" name="CD4% Test Result" libraryName="IMMZc" xsi:type="ValueSetRef"/>
               </expression>
            </source>
            <sort localId="970" locator="805:5-805:26">
               <by localId="969" locator="805:13-805:26" direction="desc" path="effective" xsi:type="ByColumn"/>
            </sort>
         </expression>
      </def>
      <def localId="982" locator="810:1-812:36" name="Most Recent CD4%" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="982">
               <a:s>/**
 * @dataElement The most recent CD4%
 */
define &quot;Most Recent CD4%&quot;:
  </a:s>
               <a:s r="981">
                  <a:s>First(</a:s>
                  <a:s r="980">
                     <a:s>
                        <a:s r="974">
                           <a:s r="973">
                              <a:s>
                                 <a:s>&quot;Observed CD4% Measurements&quot;</a:s>
                              </a:s>
                           </a:s>
                           <a:s> O</a:s>
                        </a:s>
                     </a:s>
                     <a:s> 
    </a:s>
                     <a:s r="979">
                        <a:s>return </a:s>
                        <a:s r="978">
                           <a:s r="976">
                              <a:s r="975">
                                 <a:s>O</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="976">
                                 <a:s>value</a:s>
                              </a:s>
                           </a:s>
                           <a:s> as </a:s>
                           <a:s r="977">
                              <a:s>FHIR.Quantity</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>)</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="981" locator="811:3-812:36" xsi:type="First">
            <source localId="980" locator="811:9-812:35" xsi:type="Query">
               <source localId="974" locator="811:9-811:38" alias="O">
                  <expression localId="973" locator="811:9-811:36" name="Observed CD4% Measurements" xsi:type="ExpressionRef"/>
               </source>
               <return localId="979" locator="812:5-812:35">
                  <expression localId="978" locator="812:12-812:35" strict="false" xsi:type="As">
                     <operand localId="976" locator="812:12-812:18" path="value" scope="O" xsi:type="Property"/>
                     <asTypeSpecifier localId="977" locator="812:23-812:35" name="fhir:Quantity" xsi:type="NamedTypeSpecifier"/>
                  </expression>
               </return>
            </source>
         </expression>
      </def>
      <def localId="989" locator="818:1-820:26" name="Observed CD4 Count" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="989">
               <a:s>/**
 * @dataElement The observed CD4 counts ordered newest to oldest
 */
define &quot;Observed CD4 Count&quot;:
	</a:s>
               <a:s r="988">
                  <a:s>
                     <a:s r="984">
                        <a:s r="983">
                           <a:s r="983">
                              <a:s>[Observation: </a:s>
                              <a:s>
                                 <a:s>code</a:s>
                              </a:s>
                              <a:s> in </a:s>
                              <a:s>
                                 <a:s>IMMZc.&quot;CD4 Count Test Result&quot;</a:s>
                              </a:s>
                              <a:s>]</a:s>
                           </a:s>
                        </a:s>
                        <a:s> O</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s r="987">
                     <a:s>sort by </a:s>
                     <a:s r="986">
                        <a:s r="985">
                           <a:s>effective</a:s>
                        </a:s>
                        <a:s> desc</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="988" locator="819:2-820:26" xsi:type="Query">
            <source localId="984" locator="819:2-819:55" alias="O">
               <expression localId="983" locator="819:2-819:53" dataType="fhir:Observation" templateId="http://hl7.org/fhir/StructureDefinition/Observation" codeProperty="code" codeComparator="in" xsi:type="Retrieve">
                  <codes locator="819:24-819:52" name="CD4 Count Test Result" libraryName="IMMZc" xsi:type="ValueSetRef"/>
               </expression>
            </source>
            <sort localId="987" locator="820:5-820:26">
               <by localId="986" locator="820:13-820:26" direction="desc" path="effective" xsi:type="ByColumn"/>
            </sort>
         </expression>
      </def>
      <def localId="998" locator="823:1-825:33" name="Patient birth weight observation value" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="998">
               <a:s>define &quot;Patient birth weight observation value&quot;:
</a:s>
               <a:s r="997">
                  <a:s>
                     <a:s r="991">
                        <a:s r="990">
                           <a:s r="990">
                              <a:s>[Observation: </a:s>
                              <a:s>
                                 <a:s>code</a:s>
                              </a:s>
                              <a:s> in </a:s>
                              <a:s>
                                 <a:s>IMMZc.&quot;Patient birth weight observation value&quot;</a:s>
                              </a:s>
                              <a:s>]</a:s>
                           </a:s>
                        </a:s>
                        <a:s> O</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
  </a:s>
                  <a:s r="996">
                     <a:s>return </a:s>
                     <a:s r="995">
                        <a:s r="993">
                           <a:s r="992">
                              <a:s>O</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="993">
                              <a:s>value</a:s>
                           </a:s>
                        </a:s>
                        <a:s> as </a:s>
                        <a:s r="994">
                           <a:s>FHIR.Quantity</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="997" locator="824:1-825:33" xsi:type="Query">
            <source localId="991" locator="824:1-824:71" alias="O">
               <expression localId="990" locator="824:1-824:69" dataType="fhir:Observation" templateId="http://hl7.org/fhir/StructureDefinition/Observation" codeProperty="code" codeComparator="in" xsi:type="Retrieve">
                  <codes locator="824:23-824:68" name="Patient birth weight observation value" libraryName="IMMZc" xsi:type="ValueSetRef"/>
               </expression>
            </source>
            <return localId="996" locator="825:3-825:33">
               <expression localId="995" locator="825:10-825:33" strict="false" xsi:type="As">
                  <operand localId="993" locator="825:10-825:16" path="value" scope="O" xsi:type="Property"/>
                  <asTypeSpecifier localId="994" locator="825:21-825:33" name="fhir:Quantity" xsi:type="NamedTypeSpecifier"/>
               </expression>
            </return>
         </expression>
      </def>
      <def localId="1003" locator="830:1-831:46" name="Most Recent CD4% Between 20% and 25%" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1003">
               <a:s>/** 
 * @dataElement Immune reconsititution has been achieved for this patient
 */
define &quot;Most Recent CD4% Between 20% and 25%&quot;:
  </a:s>
               <a:s r="1002">
                  <a:s r="999">
                     <a:s>&quot;Most Recent CD4%&quot;</a:s>
                  </a:s>
                  <a:s> between </a:s>
                  <a:s r="1000">
                     <a:s>20 '%'</a:s>
                  </a:s>
                  <a:s> and </a:s>
                  <a:s r="1001">
                     <a:s>25 '%'</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1002" locator="831:3-831:46" xsi:type="And">
            <operand xsi:type="GreaterOrEqual">
               <operand name="ToQuantity" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                  <operand localId="999" locator="831:3-831:20" name="Most Recent CD4%" xsi:type="ExpressionRef"/>
               </operand>
               <operand localId="1000" locator="831:30-831:35" value="20" unit="%" xsi:type="Quantity"/>
            </operand>
            <operand xsi:type="LessOrEqual">
               <operand name="ToQuantity" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                  <operand localId="999" locator="831:3-831:20" name="Most Recent CD4%" xsi:type="ExpressionRef"/>
               </operand>
               <operand localId="1001" locator="831:41-831:46" value="25" unit="%" xsi:type="Quantity"/>
            </operand>
         </expression>
      </def>
      <def localId="1048" locator="958:1-968:4" name="ExtractMedicationCode" context="Patient" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="1048">
               <a:s>/**
 * @description Takes a choice between a Medication and a CodeableConcept and returns just the code of the medication
 */
define function ExtractMedicationCode(choice </a:s>
               <a:s r="1010">
                  <a:s>Choice&lt;</a:s>
                  <a:s r="1008">
                     <a:s>FHIR.CodeableConcept</a:s>
                  </a:s>
                  <a:s>, </a:s>
                  <a:s r="1009">
                     <a:s>FHIR.Reference</a:s>
                  </a:s>
                  <a:s>></a:s>
               </a:s>
               <a:s>):
  </a:s>
               <a:s r="1047">
                  <a:s r="1047">
                     <a:s>case
	  </a:s>
                     <a:s r="1017">
                        <a:s>when </a:s>
                        <a:s r="1013">
                           <a:s r="1011">
                              <a:s>choice</a:s>
                           </a:s>
                           <a:s> is </a:s>
                           <a:s r="1012">
                              <a:s>FHIR.CodeableConcept</a:s>
                           </a:s>
                        </a:s>
                        <a:s> then
    	</a:s>
                        <a:s r="1016">
                           <a:s r="1014">
                              <a:s>choice</a:s>
                           </a:s>
                           <a:s> as </a:s>
                           <a:s r="1015">
                              <a:s>FHIR.CodeableConcept</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="1038">
                        <a:s>when </a:s>
                        <a:s r="1020">
                           <a:s r="1018">
                              <a:s>choice</a:s>
                           </a:s>
                           <a:s> is </a:s>
                           <a:s r="1019">
                              <a:s>FHIR.Reference</a:s>
                           </a:s>
                        </a:s>
                        <a:s> then
      </a:s>
                        <a:s r="1037">
                           <a:s>First(</a:s>
                           <a:s r="1036">
                              <a:s>
                                 <a:s r="1022">
                                    <a:s r="1021">
                                       <a:s r="1021">
                                          <a:s>[Medication]</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> M</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> 
        </a:s>
                              <a:s r="1030">
                                 <a:s>where </a:s>
                                 <a:s r="1030">
                                    <a:s r="1024">
                                       <a:s r="1023">
                                          <a:s>M</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="1024">
                                          <a:s>id</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> = </a:s>
                                    <a:s r="1029">
                                       <a:s>Last(</a:s>
                                       <a:s r="1028">
                                          <a:s>Split(</a:s>
                                          <a:s r="1026">
                                             <a:s r="1025">
                                                <a:s>choice</a:s>
                                             </a:s>
                                             <a:s>.</a:s>
                                             <a:s r="1026">
                                                <a:s>reference</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s>, </a:s>
                                          <a:s r="1027">
                                             <a:s>'/'</a:s>
                                          </a:s>
                                          <a:s>)</a:s>
                                       </a:s>
                                       <a:s>)</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s>
        </a:s>
                              <a:s r="1035">
                                 <a:s>return </a:s>
                                 <a:s r="1034">
                                    <a:s r="1032">
                                       <a:s r="1031">
                                          <a:s>M</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="1032">
                                          <a:s>code</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> as </a:s>
                                    <a:s r="1033">
                                       <a:s>FHIR.CodeableConcept</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
		else
      </a:s>
                     <a:s r="1046">
                        <a:s>Message(</a:s>
                        <a:s r="1041">
                           <a:s r="1039">null as </a:s>
                           <a:s r="1040">
                              <a:s>FHIR.CodeableConcept</a:s>
                           </a:s>
                        </a:s>
                        <a:s r="1042">, true, </a:s>
                        <a:s r="1043">
                           <a:s>'1'</a:s>
                        </a:s>
                        <a:s>, </a:s>
                        <a:s r="1044">
                           <a:s>'Error'</a:s>
                        </a:s>
                        <a:s>, </a:s>
                        <a:s r="1045">
                           <a:s>'Cannot compute a medication code'</a:s>
                        </a:s>
                        <a:s>)</a:s>
                     </a:s>
                     <a:s> // TODO: I'm sure that this is supported somehow?
	end</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1047" locator="959:3-968:4" xsi:type="Case">
            <caseItem localId="1017" locator="960:4-961:35">
               <when localId="1013" locator="960:9-960:38" xsi:type="Is">
                  <operand localId="1011" locator="960:9-960:14" name="choice" xsi:type="OperandRef"/>
                  <isTypeSpecifier localId="1012" locator="960:19-960:38" name="fhir:CodeableConcept" xsi:type="NamedTypeSpecifier"/>
               </when>
               <then localId="1016" locator="961:6-961:35" strict="false" xsi:type="As">
                  <operand localId="1014" locator="961:6-961:11" name="choice" xsi:type="OperandRef"/>
                  <asTypeSpecifier localId="1015" locator="961:16-961:35" name="fhir:CodeableConcept" xsi:type="NamedTypeSpecifier"/>
               </then>
            </caseItem>
            <caseItem localId="1038" locator="962:5-965:46">
               <when localId="1020" locator="962:10-962:33" xsi:type="Is">
                  <operand localId="1018" locator="962:10-962:15" name="choice" xsi:type="OperandRef"/>
                  <isTypeSpecifier localId="1019" locator="962:20-962:33" name="fhir:Reference" xsi:type="NamedTypeSpecifier"/>
               </when>
               <then localId="1037" locator="963:7-965:46" xsi:type="First">
                  <source localId="1036" locator="963:13-965:45" xsi:type="Query">
                     <source localId="1022" locator="963:13-963:26" alias="M">
                        <expression localId="1021" locator="963:13-963:24" dataType="fhir:Medication" templateId="http://hl7.org/fhir/StructureDefinition/Medication" xsi:type="Retrieve"/>
                     </source>
                     <where localId="1030" locator="964:9-964:55" xsi:type="Equal">
                        <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand localId="1024" locator="964:15-964:18" path="id" scope="M" xsi:type="Property"/>
                        </operand>
                        <operand localId="1029" locator="964:22-964:55" xsi:type="Last">
                           <source localId="1028" locator="964:27-964:54" xsi:type="Split">
                              <stringToSplit name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <operand localId="1026" locator="964:33-964:48" path="reference" xsi:type="Property">
                                    <source localId="1025" locator="964:33-964:38" name="choice" xsi:type="OperandRef"/>
                                 </operand>
                              </stringToSplit>
                              <separator localId="1027" locator="964:51-964:53" valueType="t:String" value="/" xsi:type="Literal"/>
                           </source>
                        </operand>
                     </where>
                     <return localId="1035" locator="965:9-965:45">
                        <expression localId="1034" locator="965:16-965:45" strict="false" xsi:type="As">
                           <operand localId="1032" locator="965:16-965:21" path="code" scope="M" xsi:type="Property"/>
                           <asTypeSpecifier localId="1033" locator="965:26-965:45" name="fhir:CodeableConcept" xsi:type="NamedTypeSpecifier"/>
                        </expression>
                     </return>
                  </source>
               </then>
            </caseItem>
            <else localId="1046" locator="967:7-967:99" xsi:type="Message">
               <source localId="1041" locator="967:15-967:42" strict="false" xsi:type="As">
                  <operand localId="1039" locator="967:15-967:18" xsi:type="Null"/>
                  <asTypeSpecifier localId="1040" locator="967:23-967:42" name="fhir:CodeableConcept" xsi:type="NamedTypeSpecifier"/>
               </source>
               <condition localId="1042" locator="967:45-967:48" valueType="t:Boolean" value="true" xsi:type="Literal"/>
               <code localId="1043" locator="967:51-967:53" valueType="t:String" value="1" xsi:type="Literal"/>
               <severity localId="1044" locator="967:56-967:62" valueType="t:String" value="Error" xsi:type="Literal"/>
               <message localId="1045" locator="967:65-967:98" valueType="t:String" value="Cannot compute a medication code" xsi:type="Literal"/>
            </else>
         </expression>
         <operand name="choice">
            <operandTypeSpecifier localId="1010" locator="958:46-958:89" xsi:type="ChoiceTypeSpecifier">
               <choice localId="1008" locator="958:53-958:72" name="fhir:CodeableConcept" xsi:type="NamedTypeSpecifier"/>
               <choice localId="1009" locator="958:75-958:88" name="fhir:Reference" xsi:type="NamedTypeSpecifier"/>
            </operandTypeSpecifier>
         </operand>
      </def>
      <def localId="1089" locator="974:1-982:4" name="ExtractMedicationInitiationDate" context="Patient" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="1089">
               <a:s>/**
 * @description Takes a choice between a Medication and a CodeableConcept and returns just the code of the medication
 */
define function ExtractMedicationInitiationDate(choice </a:s>
               <a:s r="1064">
                  <a:s>Choice&lt;</a:s>
                  <a:s r="1062">
                     <a:s>FHIR.dateTime</a:s>
                  </a:s>
                  <a:s>, </a:s>
                  <a:s r="1063">
                     <a:s>FHIR.Period</a:s>
                  </a:s>
                  <a:s>></a:s>
               </a:s>
               <a:s>):
  </a:s>
               <a:s r="1088">
                  <a:s r="1088">
                     <a:s>case
	  </a:s>
                     <a:s r="1072">
                        <a:s>when </a:s>
                        <a:s r="1067">
                           <a:s r="1065">
                              <a:s>choice</a:s>
                           </a:s>
                           <a:s> is </a:s>
                           <a:s r="1066">
                              <a:s>FHIR.Period</a:s>
                           </a:s>
                        </a:s>
                        <a:s> then
    	</a:s>
                        <a:s r="1071">
                           <a:s>start of </a:s>
                           <a:s r="1070">
                              <a:s>(</a:s>
                              <a:s r="1070">
                                 <a:s r="1068">
                                    <a:s>choice</a:s>
                                 </a:s>
                                 <a:s> as </a:s>
                                 <a:s r="1069">
                                    <a:s>FHIR.Period</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="1079">
                        <a:s>when </a:s>
                        <a:s r="1075">
                           <a:s r="1073">
                              <a:s>choice</a:s>
                           </a:s>
                           <a:s> is </a:s>
                           <a:s r="1074">
                              <a:s>FHIR.dateTime</a:s>
                           </a:s>
                        </a:s>
                        <a:s> then
      </a:s>
                        <a:s r="1078">
                           <a:s r="1076">
                              <a:s>choice</a:s>
                           </a:s>
                           <a:s> as </a:s>
                           <a:s r="1077">
                              <a:s>FHIR.dateTime</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>
		else
      </a:s>
                     <a:s r="1087">
                        <a:s>Message(</a:s>
                        <a:s r="1082">
                           <a:s r="1080">null as </a:s>
                           <a:s r="1081">
                              <a:s>FHIR.dateTime</a:s>
                           </a:s>
                        </a:s>
                        <a:s r="1083">, true, </a:s>
                        <a:s r="1084">
                           <a:s>'1'</a:s>
                        </a:s>
                        <a:s>, </a:s>
                        <a:s r="1085">
                           <a:s>'Error'</a:s>
                        </a:s>
                        <a:s>, </a:s>
                        <a:s r="1086">
                           <a:s>'Cannot compute medication treatment initiation date'</a:s>
                        </a:s>
                        <a:s>)</a:s>
                     </a:s>
                     <a:s> // TODO: I'm sure that this is supported somehow?
	end</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1088" locator="975:3-982:4" xsi:type="Case">
            <caseItem localId="1072" locator="976:4-977:37">
               <when localId="1067" locator="976:9-976:29" xsi:type="Is">
                  <operand localId="1065" locator="976:9-976:14" name="choice" xsi:type="OperandRef"/>
                  <isTypeSpecifier localId="1066" locator="976:19-976:29" name="fhir:Period" xsi:type="NamedTypeSpecifier"/>
               </when>
               <then localId="1071" locator="977:6-977:37" xsi:type="Start">
                  <operand name="ToInterval" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <operand localId="1070" locator="977:15-977:37" strict="false" xsi:type="As">
                        <operand localId="1068" locator="977:16-977:21" name="choice" xsi:type="OperandRef"/>
                        <asTypeSpecifier localId="1069" locator="977:26-977:36" name="fhir:Period" xsi:type="NamedTypeSpecifier"/>
                     </operand>
                  </operand>
               </then>
            </caseItem>
            <caseItem localId="1079" locator="978:5-979:29">
               <when localId="1075" locator="978:10-978:32" xsi:type="Is">
                  <operand localId="1073" locator="978:10-978:15" name="choice" xsi:type="OperandRef"/>
                  <isTypeSpecifier localId="1074" locator="978:20-978:32" name="fhir:dateTime" xsi:type="NamedTypeSpecifier"/>
               </when>
               <then name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                  <operand localId="1078" locator="979:7-979:29" strict="false" xsi:type="As">
                     <operand localId="1076" locator="979:7-979:12" name="choice" xsi:type="OperandRef"/>
                     <asTypeSpecifier localId="1077" locator="979:17-979:29" name="fhir:dateTime" xsi:type="NamedTypeSpecifier"/>
                  </operand>
               </then>
            </caseItem>
            <else name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
               <operand localId="1087" locator="981:7-981:111" xsi:type="Message">
                  <source localId="1082" locator="981:15-981:35" strict="false" xsi:type="As">
                     <operand localId="1080" locator="981:15-981:18" xsi:type="Null"/>
                     <asTypeSpecifier localId="1081" locator="981:23-981:35" name="fhir:dateTime" xsi:type="NamedTypeSpecifier"/>
                  </source>
                  <condition localId="1083" locator="981:38-981:41" valueType="t:Boolean" value="true" xsi:type="Literal"/>
                  <code localId="1084" locator="981:44-981:46" valueType="t:String" value="1" xsi:type="Literal"/>
                  <severity localId="1085" locator="981:49-981:55" valueType="t:String" value="Error" xsi:type="Literal"/>
                  <message localId="1086" locator="981:58-981:110" valueType="t:String" value="Cannot compute medication treatment initiation date" xsi:type="Literal"/>
               </operand>
            </else>
         </expression>
         <operand name="choice">
            <operandTypeSpecifier localId="1064" locator="974:56-974:89" xsi:type="ChoiceTypeSpecifier">
               <choice localId="1062" locator="974:63-974:75" name="fhir:dateTime" xsi:type="NamedTypeSpecifier"/>
               <choice localId="1063" locator="974:78-974:88" name="fhir:Period" xsi:type="NamedTypeSpecifier"/>
            </operandTypeSpecifier>
         </operand>
      </def>
      <def localId="1104" locator="836:1-853:3" name="Patient HAART Treatment Started 6 to 12 Months Ago" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1104">
               <a:s>// TODO: Define this

/** 
 * @dataElements Periods where the patient was receiving HAART treatment
 */
define &quot;Patient HAART Treatment Started 6 to 12 Months Ago&quot;:
  /*exists(
    [MedicationStatement] S 
    where 
      ExtractMedicationCode(S.medication) in IMMZc.&quot;ARV Drugs&quot; 
      and S.status in { 'active', 'completed' } 
      and ExtractMedicationInitiationDate(S.effective) more than 6 'month' before Today() 
      and ExtractMedicationInitiationDate(S.effective) less than 12 'month' before Today()
  )
  or */
  </a:s>
               <a:s r="1103">
                  <a:s>exists</a:s>
                  <a:s r="1102">
                     <a:s>(
    </a:s>
                     <a:s r="1102">
                        <a:s>
                           <a:s r="1005">
                              <a:s r="1004">
                                 <a:s r="1004">
                                    <a:s>[MedicationAdministration]</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> A</a:s>
                           </a:s>
                        </a:s>
                        <a:s> 
    </a:s>
                        <a:s r="1101">
                           <a:s>where 
      </a:s>
                           <a:s r="1101">
                              <a:s r="1094">
                                 <a:s r="1059">
                                    <a:s r="1052">
                                       <a:s r="1049">
                                          <a:s>ExtractMedicationCode(</a:s>
                                          <a:s r="1007">
                                             <a:s r="1006">
                                                <a:s>A</a:s>
                                             </a:s>
                                             <a:s>.</a:s>
                                             <a:s r="1007">
                                                <a:s>medication</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s>)</a:s>
                                       </a:s>
                                       <a:s> in </a:s>
                                       <a:s r="1051">
                                          <a:s r="1050">
                                             <a:s>IMMZc</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="1051">
                                             <a:s>&quot;ARV Drugs&quot;</a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> 
      and </a:s>
                                    <a:s r="1058">
                                       <a:s r="1054">
                                          <a:s r="1053">
                                             <a:s>A</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="1054">
                                             <a:s>status</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s> in </a:s>
                                       <a:s r="1057">
                                          <a:s>{ </a:s>
                                          <a:s r="1055">
                                             <a:s>'active'</a:s>
                                          </a:s>
                                          <a:s>, </a:s>
                                          <a:s r="1056">
                                             <a:s>'complete'</a:s>
                                          </a:s>
                                          <a:s> }</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> 
      and </a:s>
                                 <a:s r="1093">
                                    <a:s r="1090">
                                       <a:s>ExtractMedicationInitiationDate(</a:s>
                                       <a:s r="1061">
                                          <a:s r="1060">
                                             <a:s>A</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="1061">
                                             <a:s>effective</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>)</a:s>
                                    </a:s>
                                    <a:s> </a:s>
                                    <a:s r="1093">
                                       <a:s>more than </a:s>
                                       <a:s r="1092">
                                          <a:s>6 'month'</a:s>
                                       </a:s>
                                       <a:s> before</a:s>
                                    </a:s>
                                    <a:s> </a:s>
                                    <a:s r="1091">
                                       <a:s>Today()</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s> 
      and </a:s>
                              <a:s r="1100">
                                 <a:s r="1097">
                                    <a:s>ExtractMedicationInitiationDate(</a:s>
                                    <a:s r="1096">
                                       <a:s r="1095">
                                          <a:s>A</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="1096">
                                          <a:s>effective</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>)</a:s>
                                 </a:s>
                                 <a:s> </a:s>
                                 <a:s r="1100">
                                    <a:s>less than </a:s>
                                    <a:s r="1099">
                                       <a:s>12 'month'</a:s>
                                    </a:s>
                                    <a:s> before</a:s>
                                 </a:s>
                                 <a:s> </a:s>
                                 <a:s r="1098">
                                    <a:s>Today()</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>
  )</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1103" locator="846:3-853:3" xsi:type="Exists">
            <operand localId="1102" locator="846:9-853:3" xsi:type="Query">
               <source localId="1005" locator="847:5-847:32" alias="A">
                  <expression localId="1004" locator="847:5-847:30" dataType="fhir:MedicationAdministration" templateId="http://hl7.org/fhir/StructureDefinition/MedicationAdministration" xsi:type="Retrieve"/>
               </source>
               <where localId="1101" locator="848:5-852:90" xsi:type="And">
                  <operand localId="1094" locator="849:7-851:89" xsi:type="And">
                     <operand localId="1059" locator="849:7-850:46" xsi:type="And">
                        <operand localId="1052" locator="849:7-849:62" xsi:type="InValueSet">
                           <code name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                              <operand localId="1049" locator="849:7-849:41" name="ExtractMedicationCode" xsi:type="FunctionRef">
                                 <operand localId="1007" locator="849:29-849:40" path="medication" scope="A" xsi:type="Property"/>
                              </operand>
                           </code>
                           <valueset localId="1051" locator="849:46-849:62" name="ARV Drugs" libraryName="IMMZc"/>
                        </operand>
                        <operand localId="1058" locator="850:11-850:46" xsi:type="In">
                           <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                              <operand localId="1054" locator="850:11-850:18" path="status" scope="A" xsi:type="Property"/>
                           </operand>
                           <operand localId="1057" locator="850:23-850:46" xsi:type="List">
                              <element localId="1055" locator="850:25-850:32" valueType="t:String" value="active" xsi:type="Literal"/>
                              <element localId="1056" locator="850:35-850:44" valueType="t:String" value="complete" xsi:type="Literal"/>
                           </operand>
                        </operand>
                     </operand>
                     <operand localId="1093" locator="851:11-851:89" xsi:type="Before">
                        <operand localId="1090" locator="851:11-851:54" name="ExtractMedicationInitiationDate" xsi:type="FunctionRef">
                           <operand localId="1061" locator="851:43-851:53" path="effective" scope="A" xsi:type="Property"/>
                        </operand>
                        <operand xsi:type="ToDateTime">
                           <operand locator="851:83-851:89" xsi:type="Subtract">
                              <operand localId="1091" locator="851:83-851:89" xsi:type="Today"/>
                              <operand localId="1092" locator="851:66-851:74" value="6" unit="month" xsi:type="Quantity"/>
                           </operand>
                        </operand>
                     </operand>
                  </operand>
                  <operand localId="1100" locator="852:11-852:90" xsi:type="In">
                     <operand localId="1097" locator="852:11-852:54" name="ExtractMedicationInitiationDate" xsi:type="FunctionRef">
                        <operand localId="1096" locator="852:43-852:53" path="effective" scope="A" xsi:type="Property"/>
                     </operand>
                     <operand xsi:type="Interval">
                        <low xsi:type="ToDateTime">
                           <operand path="low" xsi:type="Property">
                              <source locator="852:56-852:75" lowClosed="false" highClosed="false" xsi:type="Interval">
                                 <low locator="852:84-852:90" xsi:type="Subtract">
                                    <operand localId="1098" locator="852:84-852:90" xsi:type="Today"/>
                                    <operand localId="1099" locator="852:66-852:75" value="12" unit="month" xsi:type="Quantity"/>
                                 </low>
                                 <high localId="1098" locator="852:84-852:90" xsi:type="Today"/>
                              </source>
                           </operand>
                        </low>
                        <lowClosedExpression path="lowClosed" xsi:type="Property">
                           <source locator="852:56-852:75" lowClosed="false" highClosed="false" xsi:type="Interval">
                              <low locator="852:84-852:90" xsi:type="Subtract">
                                 <operand localId="1098" locator="852:84-852:90" xsi:type="Today"/>
                                 <operand localId="1099" locator="852:66-852:75" value="12" unit="month" xsi:type="Quantity"/>
                              </low>
                              <high localId="1098" locator="852:84-852:90" xsi:type="Today"/>
                           </source>
                        </lowClosedExpression>
                        <high xsi:type="ToDateTime">
                           <operand path="high" xsi:type="Property">
                              <source locator="852:56-852:75" lowClosed="false" highClosed="false" xsi:type="Interval">
                                 <low locator="852:84-852:90" xsi:type="Subtract">
                                    <operand localId="1098" locator="852:84-852:90" xsi:type="Today"/>
                                    <operand localId="1099" locator="852:66-852:75" value="12" unit="month" xsi:type="Quantity"/>
                                 </low>
                                 <high localId="1098" locator="852:84-852:90" xsi:type="Today"/>
                              </source>
                           </operand>
                        </high>
                        <highClosedExpression path="highClosed" xsi:type="Property">
                           <source locator="852:56-852:75" lowClosed="false" highClosed="false" xsi:type="Interval">
                              <low locator="852:84-852:90" xsi:type="Subtract">
                                 <operand localId="1098" locator="852:84-852:90" xsi:type="Today"/>
                                 <operand localId="1099" locator="852:66-852:75" value="12" unit="month" xsi:type="Quantity"/>
                              </low>
                              <high localId="1098" locator="852:84-852:90" xsi:type="Today"/>
                           </source>
                        </highClosedExpression>
                     </operand>
                  </operand>
               </where>
            </operand>
         </expression>
      </def>
      <def localId="1120" locator="858:1-861:129" name="Patient is receiving HAART" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1120">
               <a:s>/**
 * @dataElement The patient has a medication record which indicates that they are receiving ARV
 */
define &quot;Patient is receiving HAART&quot;:
 //exists([MedicationStatement] S where ExtractMedicationCode(S.medication) in IMMZc.&quot;ARV Drugs&quot; and S.status = 'active')
 //or 
 </a:s>
               <a:s r="1119">
                  <a:s>exists</a:s>
                  <a:s r="1118">
                     <a:s>(</a:s>
                     <a:s r="1118">
                        <a:s>
                           <a:s r="1106">
                              <a:s r="1105">
                                 <a:s r="1105">
                                    <a:s>[MedicationAdministration]</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> A</a:s>
                           </a:s>
                        </a:s>
                        <a:s> </a:s>
                        <a:s r="1117">
                           <a:s>where </a:s>
                           <a:s r="1117">
                              <a:s r="1112">
                                 <a:s r="1109">
                                    <a:s>ExtractMedicationCode(</a:s>
                                    <a:s r="1108">
                                       <a:s r="1107">
                                          <a:s>A</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="1108">
                                          <a:s>medication</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>)</a:s>
                                 </a:s>
                                 <a:s> in </a:s>
                                 <a:s r="1111">
                                    <a:s r="1110">
                                       <a:s>IMMZc</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="1111">
                                       <a:s>&quot;ARV Drugs&quot;</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s> and </a:s>
                              <a:s r="1116">
                                 <a:s r="1114">
                                    <a:s r="1113">
                                       <a:s>A</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="1114">
                                       <a:s>status</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> = </a:s>
                                 <a:s r="1115">
                                    <a:s>'in-progress'</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>)</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1119" locator="861:2-861:129" xsi:type="Exists">
            <operand localId="1118" locator="861:8-861:129" xsi:type="Query">
               <source localId="1106" locator="861:9-861:36" alias="A">
                  <expression localId="1105" locator="861:9-861:34" dataType="fhir:MedicationAdministration" templateId="http://hl7.org/fhir/StructureDefinition/MedicationAdministration" xsi:type="Retrieve"/>
               </source>
               <where localId="1117" locator="861:38-861:128" xsi:type="And">
                  <operand localId="1112" locator="861:44-861:99" xsi:type="InValueSet">
                     <code name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand localId="1109" locator="861:44-861:78" name="ExtractMedicationCode" xsi:type="FunctionRef">
                           <operand localId="1108" locator="861:66-861:77" path="medication" scope="A" xsi:type="Property"/>
                        </operand>
                     </code>
                     <valueset localId="1111" locator="861:83-861:99" name="ARV Drugs" libraryName="IMMZc"/>
                  </operand>
                  <operand localId="1116" locator="861:105-861:128" xsi:type="Equal">
                     <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand localId="1114" locator="861:105-861:112" path="status" scope="A" xsi:type="Property"/>
                     </operand>
                     <operand localId="1115" locator="861:116-861:128" valueType="t:String" value="in-progress" xsi:type="Literal"/>
                  </operand>
               </where>
            </operand>
         </expression>
      </def>
      <def localId="1145" locator="868:1-872:42" name="HIV Status" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1145">
               <a:s>//union 
 //

/*
  @dataElement HIV Status observations of the patient most recent first
*/
define &quot;HIV Status&quot;:
  </a:s>
               <a:s r="1144">
                  <a:s>
                     <a:s r="1122">
                        <a:s r="1121">
                           <a:s r="1121">
                              <a:s>[Observation: </a:s>
                              <a:s>
                                 <a:s>IMMZc.&quot;HIV status&quot;</a:s>
                              </a:s>
                              <a:s>]</a:s>
                           </a:s>
                        </a:s>
                        <a:s> O</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s r="1138">
                     <a:s>where </a:s>
                     <a:s r="1138">
                        <a:s r="1129">
                           <a:s r="1124">
                              <a:s r="1123">
                                 <a:s>O</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="1124">
                                 <a:s>status</a:s>
                              </a:s>
                           </a:s>
                           <a:s> in </a:s>
                           <a:s r="1128">
                              <a:s>{ </a:s>
                              <a:s r="1125">
                                 <a:s>'final'</a:s>
                              </a:s>
                              <a:s>, </a:s>
                              <a:s r="1126">
                                 <a:s>'amended'</a:s>
                              </a:s>
                              <a:s>, </a:s>
                              <a:s r="1127">
                                 <a:s>'corrected'</a:s>
                              </a:s>
                              <a:s> }</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
      and </a:s>
                        <a:s r="1137">
                           <a:s r="1136">
                              <a:s>Coalesce(</a:s>
                              <a:s r="1134">
                                 <a:s r="1133">
                                    <a:s r="1130">
                                       <a:s>WCom</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="1133">
                                       <a:s>ModifierExtension(</a:s>
                                       <a:s r="1131">
                                          <a:s>O</a:s>
                                       </a:s>
                                       <a:s>, </a:s>
                                       <a:s r="1132">
                                          <a:s>'who-notDone'</a:s>
                                       </a:s>
                                       <a:s>)</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="1134">
                                    <a:s>value</a:s>
                                 </a:s>
                              </a:s>
                              <a:s r="1135">, false)</a:s>
                           </a:s>
                           <a:s> is false</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s r="1143">
                     <a:s>return </a:s>
                     <a:s r="1142">
                        <a:s r="1140">
                           <a:s r="1139">
                              <a:s>O</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="1140">
                              <a:s>value</a:s>
                           </a:s>
                        </a:s>
                        <a:s> as </a:s>
                        <a:s r="1141">
                           <a:s>FHIR.CodeableConcept</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1144" locator="869:3-872:42" xsi:type="Query">
            <source localId="1122" locator="869:3-869:37" alias="O">
               <expression localId="1121" locator="869:3-869:35" dataType="fhir:Observation" templateId="http://hl7.org/fhir/StructureDefinition/Observation" codeProperty="code" codeComparator="in" xsi:type="Retrieve">
                  <codes locator="869:17-869:34" name="HIV status" libraryName="IMMZc" xsi:type="ValueSetRef"/>
               </expression>
            </source>
            <where localId="1138" locator="870:5-871:82" xsi:type="And">
               <operand localId="1129" locator="870:11-870:57" xsi:type="In">
                  <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <operand localId="1124" locator="870:11-870:18" path="status" scope="O" xsi:type="Property"/>
                  </operand>
                  <operand localId="1128" locator="870:23-870:57" xsi:type="List">
                     <element localId="1125" locator="870:25-870:31" valueType="t:String" value="final" xsi:type="Literal"/>
                     <element localId="1126" locator="870:34-870:42" valueType="t:String" value="amended" xsi:type="Literal"/>
                     <element localId="1127" locator="870:45-870:55" valueType="t:String" value="corrected" xsi:type="Literal"/>
                  </operand>
               </operand>
               <operand localId="1137" locator="871:11-871:82" xsi:type="IsFalse">
                  <operand localId="1136" locator="871:11-871:73" xsi:type="Coalesce">
                     <operand name="ToBoolean" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand asType="fhir:boolean" xsi:type="As">
                           <operand localId="1134" locator="871:20-871:65" path="value" xsi:type="Property">
                              <source localId="1133" locator="871:20-871:59" name="ModifierExtension" libraryName="WCom" xsi:type="FunctionRef">
                                 <operand localId="1131" locator="871:43" name="O" xsi:type="AliasRef"/>
                                 <operand localId="1132" locator="871:46-871:58" valueType="t:String" value="who-notDone" xsi:type="Literal"/>
                              </source>
                           </operand>
                        </operand>
                     </operand>
                     <operand localId="1135" locator="871:68-871:72" valueType="t:Boolean" value="false" xsi:type="Literal"/>
                  </operand>
               </operand>
            </where>
            <return localId="1143" locator="872:5-872:42">
               <expression localId="1142" locator="872:12-872:42" strict="false" xsi:type="As">
                  <operand localId="1140" locator="872:12-872:18" path="value" scope="O" xsi:type="Property"/>
                  <asTypeSpecifier localId="1141" locator="872:23-872:42" name="fhir:CodeableConcept" xsi:type="NamedTypeSpecifier"/>
               </expression>
            </return>
         </expression>
      </def>
      <def localId="1155" locator="877:1-879:36" name="Most Recent CD4 Count" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1155">
               <a:s>/**
 * @dataElement The most recent CD4 count
 */
define &quot;Most Recent CD4 Count&quot;:
  </a:s>
               <a:s r="1154">
                  <a:s>First(</a:s>
                  <a:s r="1153">
                     <a:s>
                        <a:s r="1147">
                           <a:s r="1146">
                              <a:s>
                                 <a:s>&quot;Observed CD4 Count&quot;</a:s>
                              </a:s>
                           </a:s>
                           <a:s> O</a:s>
                        </a:s>
                     </a:s>
                     <a:s> 
    </a:s>
                     <a:s r="1152">
                        <a:s>return </a:s>
                        <a:s r="1151">
                           <a:s r="1149">
                              <a:s r="1148">
                                 <a:s>O</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="1149">
                                 <a:s>value</a:s>
                              </a:s>
                           </a:s>
                           <a:s> as </a:s>
                           <a:s r="1150">
                              <a:s>FHIR.Quantity</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>)</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1154" locator="878:3-879:36" xsi:type="First">
            <source localId="1153" locator="878:9-879:35" xsi:type="Query">
               <source localId="1147" locator="878:9-878:30" alias="O">
                  <expression localId="1146" locator="878:9-878:28" name="Observed CD4 Count" xsi:type="ExpressionRef"/>
               </source>
               <return localId="1152" locator="879:5-879:35">
                  <expression localId="1151" locator="879:12-879:35" strict="false" xsi:type="As">
                     <operand localId="1149" locator="879:12-879:18" path="value" scope="O" xsi:type="Property"/>
                     <asTypeSpecifier localId="1150" locator="879:23-879:35" name="fhir:Quantity" xsi:type="NamedTypeSpecifier"/>
                  </expression>
               </return>
            </source>
         </expression>
      </def>
      <def localId="1158" locator="885:1-886:23" name="Current Patient Age In Years" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1158">
               <a:s>/** 
 * @dataElement Patient age in years
 */
define &quot;Current Patient Age In Years&quot;:
  </a:s>
               <a:s r="1157">
                  <a:s>AgeInYearsAt(</a:s>
                  <a:s r="1156">
                     <a:s>Today()</a:s>
                  </a:s>
                  <a:s>)</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1157" locator="886:3-886:23" precision="Year" xsi:type="CalculateAgeAt">
            <operand path="birthDate.value" xsi:type="Property">
               <source name="Patient" xsi:type="ExpressionRef"/>
            </operand>
            <operand localId="1156" locator="886:16-886:22" xsi:type="Today"/>
         </expression>
      </def>
      <def localId="1161" locator="892:1-893:23" name="Current Patient Age In Weeks" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1161">
               <a:s>//Today() - (Patient.birthDate as System.Date)

/** 
 * @dataElement Patient age in weeks
 */
define &quot;Current Patient Age In Weeks&quot;:
  </a:s>
               <a:s r="1160">
                  <a:s>AgeInWeeksAt(</a:s>
                  <a:s r="1159">
                     <a:s>Today()</a:s>
                  </a:s>
                  <a:s>)</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1160" locator="893:3-893:23" precision="Week" xsi:type="CalculateAgeAt">
            <operand path="birthDate.value" xsi:type="Property">
               <source name="Patient" xsi:type="ExpressionRef"/>
            </operand>
            <operand localId="1159" locator="893:16-893:22" xsi:type="Today"/>
         </expression>
      </def>
      <def localId="1164" locator="898:1-899:24" name="Current Patient Age In Months" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1164">
               <a:s>/** 
 * @dataElement Patient age in months
 */
define &quot;Current Patient Age In Months&quot;:
  </a:s>
               <a:s r="1163">
                  <a:s>AgeInMonthsAt(</a:s>
                  <a:s r="1162">
                     <a:s>Today()</a:s>
                  </a:s>
                  <a:s>)</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1163" locator="899:3-899:24" precision="Month" xsi:type="CalculateAgeAt">
            <operand path="birthDate.value" xsi:type="Property">
               <source name="Patient" xsi:type="ExpressionRef"/>
            </operand>
            <operand localId="1162" locator="899:17-899:23" xsi:type="Today"/>
         </expression>
      </def>
      <def localId="1167" locator="906:1-907:16" name="Patient Biological Sex" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1167">
               <a:s>/** 
 * @dataElement Patient biological sex used for deciding vaccine eligibility
 * TODO: &quot;Gender&quot; of patient in FHIR is the administrative gender - or can we expect that this will be biological sex and administrative
 *        gender identity will be captured using the gender identity extension?
 */
define &quot;Patient Biological Sex&quot;:
  </a:s>
               <a:s r="1166">
                  <a:s r="1165">
                     <a:s>Patient</a:s>
                  </a:s>
                  <a:s>.</a:s>
                  <a:s r="1166">
                     <a:s>gender</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1166" locator="907:3-907:16" path="gender" xsi:type="Property">
            <source localId="1165" locator="907:3-907:9" name="Patient" xsi:type="ExpressionRef"/>
         </expression>
      </def>
      <def localId="1172" locator="917:1-918:26" name="Only" context="Patient" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="1172">
               <a:s>/******************************
 * CQL Helper Functions
 */

/**
 * @description Fetches a singleton protocol applied from an immunization
 * @comment The protocol list from the immunization
 */
define function Only(protocols </a:s>
               <a:s r="1169">
                  <a:s>List&lt;</a:s>
                  <a:s r="1168">
                     <a:s>FHIR.Immunization.ProtocolApplied</a:s>
                  </a:s>
                  <a:s>></a:s>
               </a:s>
               <a:s>):
  </a:s>
               <a:s r="1171">
                  <a:s r="1171">
                     <a:s>singleton from </a:s>
                     <a:s r="1170">
                        <a:s>protocols</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1171" locator="918:3-918:26" xsi:type="SingletonFrom">
            <operand localId="1170" locator="918:18-918:26" name="protocols" xsi:type="OperandRef"/>
         </expression>
         <operand name="protocols">
            <operandTypeSpecifier localId="1169" locator="917:32-917:70" xsi:type="ListTypeSpecifier">
               <elementType localId="1168" locator="917:37-917:69" name="fhir:Immunization.ProtocolApplied" xsi:type="NamedTypeSpecifier"/>
            </operandTypeSpecifier>
         </operand>
      </def>
      <def localId="1192" locator="923:1-929:4" name="ToDate" context="Patient" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="1192">
               <a:s>/**
 * @description Takes the date choice of a date/string choice (for Immunization date)
 */
define function ToDate(choice </a:s>
               <a:s r="1175">
                  <a:s>Choice&lt;</a:s>
                  <a:s r="1173">
                     <a:s>FHIR.date</a:s>
                  </a:s>
                  <a:s>, </a:s>
                  <a:s r="1174">
                     <a:s>FHIR.string</a:s>
                  </a:s>
                  <a:s>></a:s>
               </a:s>
               <a:s>):
  </a:s>
               <a:s r="1191">
                  <a:s r="1191">
                     <a:s>case
	  </a:s>
                     <a:s r="1182">
                        <a:s>when </a:s>
                        <a:s r="1178">
                           <a:s r="1176">
                              <a:s>choice</a:s>
                           </a:s>
                           <a:s> is </a:s>
                           <a:s r="1177">
                              <a:s>FHIR.date</a:s>
                           </a:s>
                        </a:s>
                        <a:s> then
    	</a:s>
                        <a:s r="1181">
                           <a:s r="1179">
                              <a:s>choice</a:s>
                           </a:s>
                           <a:s> as </a:s>
                           <a:s r="1180">
                              <a:s>FHIR.date</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>
		else
      </a:s>
                     <a:s r="1190">
                        <a:s>Message(</a:s>
                        <a:s r="1185">
                           <a:s r="1183">null as </a:s>
                           <a:s r="1184">
                              <a:s>FHIR.date</a:s>
                           </a:s>
                        </a:s>
                        <a:s r="1186">, true, </a:s>
                        <a:s r="1187">
                           <a:s>'1'</a:s>
                        </a:s>
                        <a:s>, </a:s>
                        <a:s r="1188">
                           <a:s>'Error'</a:s>
                        </a:s>
                        <a:s>, </a:s>
                        <a:s r="1189">
                           <a:s>'Cannot compute a date from a String value'</a:s>
                        </a:s>
                        <a:s>)</a:s>
                     </a:s>
                     <a:s>
	end</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1191" locator="924:3-929:4" xsi:type="Case">
            <caseItem localId="1182" locator="925:4-926:24">
               <when localId="1178" locator="925:9-925:27" xsi:type="Is">
                  <operand localId="1176" locator="925:9-925:14" name="choice" xsi:type="OperandRef"/>
                  <isTypeSpecifier localId="1177" locator="925:19-925:27" name="fhir:date" xsi:type="NamedTypeSpecifier"/>
               </when>
               <then localId="1181" locator="926:6-926:24" strict="false" xsi:type="As">
                  <operand localId="1179" locator="926:6-926:11" name="choice" xsi:type="OperandRef"/>
                  <asTypeSpecifier localId="1180" locator="926:16-926:24" name="fhir:date" xsi:type="NamedTypeSpecifier"/>
               </then>
            </caseItem>
            <else localId="1190" locator="928:7-928:97" xsi:type="Message">
               <source localId="1185" locator="928:15-928:31" strict="false" xsi:type="As">
                  <operand localId="1183" locator="928:15-928:18" xsi:type="Null"/>
                  <asTypeSpecifier localId="1184" locator="928:23-928:31" name="fhir:date" xsi:type="NamedTypeSpecifier"/>
               </source>
               <condition localId="1186" locator="928:34-928:37" valueType="t:Boolean" value="true" xsi:type="Literal"/>
               <code localId="1187" locator="928:40-928:42" valueType="t:String" value="1" xsi:type="Literal"/>
               <severity localId="1188" locator="928:45-928:51" valueType="t:String" value="Error" xsi:type="Literal"/>
               <message localId="1189" locator="928:54-928:96" valueType="t:String" value="Cannot compute a date from a String value" xsi:type="Literal"/>
            </else>
         </expression>
         <operand name="choice">
            <operandTypeSpecifier localId="1175" locator="923:31-923:60" xsi:type="ChoiceTypeSpecifier">
               <choice localId="1173" locator="923:38-923:46" name="fhir:date" xsi:type="NamedTypeSpecifier"/>
               <choice localId="1174" locator="923:49-923:59" name="fhir:string" xsi:type="NamedTypeSpecifier"/>
            </operandTypeSpecifier>
         </operand>
      </def>
      <def localId="1212" locator="934:1-940:4" name="ToDateTime" context="Patient" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="1212">
               <a:s>/**
 * @description Takes the date choice of a date/string choice (for Immunization date)
 */
define function ToDateTime(choice </a:s>
               <a:s r="1195">
                  <a:s>Choice&lt;</a:s>
                  <a:s r="1193">
                     <a:s>FHIR.dateTime</a:s>
                  </a:s>
                  <a:s>, </a:s>
                  <a:s r="1194">
                     <a:s>FHIR.string</a:s>
                  </a:s>
                  <a:s>></a:s>
               </a:s>
               <a:s>):
  </a:s>
               <a:s r="1211">
                  <a:s r="1211">
                     <a:s>case
	  </a:s>
                     <a:s r="1202">
                        <a:s>when </a:s>
                        <a:s r="1198">
                           <a:s r="1196">
                              <a:s>choice</a:s>
                           </a:s>
                           <a:s> is </a:s>
                           <a:s r="1197">
                              <a:s>FHIR.dateTime</a:s>
                           </a:s>
                        </a:s>
                        <a:s> then
    	</a:s>
                        <a:s r="1201">
                           <a:s r="1199">
                              <a:s>choice</a:s>
                           </a:s>
                           <a:s> as </a:s>
                           <a:s r="1200">
                              <a:s>FHIR.dateTime</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>
		else
      </a:s>
                     <a:s r="1210">
                        <a:s>Message(</a:s>
                        <a:s r="1205">
                           <a:s r="1203">null as </a:s>
                           <a:s r="1204">
                              <a:s>FHIR.dateTime</a:s>
                           </a:s>
                        </a:s>
                        <a:s r="1206">, true, </a:s>
                        <a:s r="1207">
                           <a:s>'1'</a:s>
                        </a:s>
                        <a:s>, </a:s>
                        <a:s r="1208">
                           <a:s>'Error'</a:s>
                        </a:s>
                        <a:s>, </a:s>
                        <a:s r="1209">
                           <a:s>'Cannot compute a date from a String value'</a:s>
                        </a:s>
                        <a:s>)</a:s>
                     </a:s>
                     <a:s>
	end</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1211" locator="935:3-940:4" xsi:type="Case">
            <caseItem localId="1202" locator="936:4-937:28">
               <when localId="1198" locator="936:9-936:31" xsi:type="Is">
                  <operand localId="1196" locator="936:9-936:14" name="choice" xsi:type="OperandRef"/>
                  <isTypeSpecifier localId="1197" locator="936:19-936:31" name="fhir:dateTime" xsi:type="NamedTypeSpecifier"/>
               </when>
               <then localId="1201" locator="937:6-937:28" strict="false" xsi:type="As">
                  <operand localId="1199" locator="937:6-937:11" name="choice" xsi:type="OperandRef"/>
                  <asTypeSpecifier localId="1200" locator="937:16-937:28" name="fhir:dateTime" xsi:type="NamedTypeSpecifier"/>
               </then>
            </caseItem>
            <else localId="1210" locator="939:7-939:101" xsi:type="Message">
               <source localId="1205" locator="939:15-939:35" strict="false" xsi:type="As">
                  <operand localId="1203" locator="939:15-939:18" xsi:type="Null"/>
                  <asTypeSpecifier localId="1204" locator="939:23-939:35" name="fhir:dateTime" xsi:type="NamedTypeSpecifier"/>
               </source>
               <condition localId="1206" locator="939:38-939:41" valueType="t:Boolean" value="true" xsi:type="Literal"/>
               <code localId="1207" locator="939:44-939:46" valueType="t:String" value="1" xsi:type="Literal"/>
               <severity localId="1208" locator="939:49-939:55" valueType="t:String" value="Error" xsi:type="Literal"/>
               <message localId="1209" locator="939:58-939:100" valueType="t:String" value="Cannot compute a date from a String value" xsi:type="Literal"/>
            </else>
         </expression>
         <operand name="choice">
            <operandTypeSpecifier localId="1195" locator="934:35-934:68" xsi:type="ChoiceTypeSpecifier">
               <choice localId="1193" locator="934:42-934:54" name="fhir:dateTime" xsi:type="NamedTypeSpecifier"/>
               <choice localId="1194" locator="934:57-934:67" name="fhir:string" xsi:type="NamedTypeSpecifier"/>
            </operandTypeSpecifier>
         </operand>
      </def>
   </statements>
</library>
