<?xml version="1.0" encoding="UTF-8"?>
<library xmlns="urn:hl7-org:elm:r1" xmlns:t="urn:hl7-org:elm-types:r1" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:fhir="http://hl7.org/fhir" xmlns:qdm43="urn:healthit-gov:qdm:v4_3" xmlns:qdm53="urn:healthit-gov:qdm:v5_3" xmlns:a="urn:hl7-org:cql-annotations:r1">
   <annotation translatorVersion="1.4" translatorOptions="EnableAnnotations,EnableLocators,DisableListDemotion,DisableListPromotion" xsi:type="a:CqlToElmInfo"/>
   <annotation xsi:type="a:Annotation">
      <a:s r="258">
         <a:s>library WHOCommon</a:s>
      </a:s>
   </annotation>
   <identifier id="WHOCommon" system="http://fhir.org/guides/who/smart-immunization"/>
   <schemaIdentifier id="urn:hl7-org:elm" version="r1"/>
   <usings>
      <def localIdentifier="System" uri="urn:hl7-org:elm-types:r1"/>
      <def localId="1" locator="3:1-3:26" localIdentifier="FHIR" uri="http://hl7.org/fhir" version="4.0.1">
         <annotation xsi:type="a:Annotation">
            <a:s r="1">
               <a:s>using </a:s>
               <a:s>
                  <a:s>FHIR</a:s>
               </a:s>
               <a:s> version '4.0.1'</a:s>
            </a:s>
         </annotation>
      </def>
   </usings>
   <includes>
      <def localId="2" locator="5:1-5:35" localIdentifier="FHIRHelpers" path="http://fhir.org/guides/who/smart-immunization/FHIRHelpers" version="4.0.1">
         <annotation xsi:type="a:Annotation">
            <a:s r="2">
               <a:s>include </a:s>
               <a:s>
                  <a:s>FHIRHelpers</a:s>
               </a:s>
               <a:s> version '4.0.1'</a:s>
            </a:s>
         </annotation>
      </def>
      <def localId="3" locator="7:1-7:28" localIdentifier="FC" path="http://fhir.org/guides/who/smart-immunization/FHIRCommon">
         <annotation xsi:type="a:Annotation">
            <a:s r="3">
               <a:s>include </a:s>
               <a:s>
                  <a:s>FHIRCommon</a:s>
               </a:s>
               <a:s> called FC</a:s>
            </a:s>
         </annotation>
      </def>
   </includes>
   <statements>
      <def locator="9:1-9:15" name="Patient" context="Patient">
         <expression xsi:type="SingletonFrom">
            <operand locator="9:1-9:15" dataType="fhir:Patient" templateId="http://hl7.org/fhir/StructureDefinition/Patient" xsi:type="Retrieve"/>
         </expression>
      </def>
      <def localId="14" locator="11:1-12:57" name="Official" context="Patient" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="14">
               <a:s>define function Official(identifiers </a:s>
               <a:s r="5">
                  <a:s>List&lt;</a:s>
                  <a:s r="4">
                     <a:s>Identifier</a:s>
                  </a:s>
                  <a:s>></a:s>
               </a:s>
               <a:s>):
  </a:s>
               <a:s r="13">
                  <a:s r="13">
                     <a:s>singleton from </a:s>
                     <a:s r="12">
                        <a:s>(</a:s>
                        <a:s r="12">
                           <a:s>
                              <a:s r="7">
                                 <a:s r="6">
                                    <a:s>
                                       <a:s>identifiers</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> I</a:s>
                              </a:s>
                           </a:s>
                           <a:s> </a:s>
                           <a:s r="11">
                              <a:s>where </a:s>
                              <a:s r="11">
                                 <a:s r="9">
                                    <a:s r="8">
                                       <a:s>I</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="9">
                                       <a:s>use</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> = </a:s>
                                 <a:s r="10">
                                    <a:s>'official'</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>)</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="13" locator="12:3-12:57" xsi:type="SingletonFrom">
            <operand localId="12" locator="12:18-12:57" xsi:type="Query">
               <source localId="7" locator="12:19-12:31" alias="I">
                  <expression localId="6" locator="12:19-12:29" name="identifiers" xsi:type="OperandRef"/>
               </source>
               <where localId="11" locator="12:33-12:56" xsi:type="Equal">
                  <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <operand localId="9" locator="12:39-12:43" path="use" scope="I" xsi:type="Property"/>
                  </operand>
                  <operand localId="10" locator="12:47-12:56" valueType="t:String" value="official" xsi:type="Literal"/>
               </where>
            </operand>
         </expression>
         <operand name="identifiers">
            <operandTypeSpecifier localId="5" locator="11:38-11:53" xsi:type="ListTypeSpecifier">
               <elementType localId="4" locator="11:43-11:52" name="fhir:Identifier" xsi:type="NamedTypeSpecifier"/>
            </operandTypeSpecifier>
         </operand>
      </def>
      <def localId="25" locator="14:1-15:55" name="Official" context="Patient" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="25">
               <a:s>define function Official(addresses </a:s>
               <a:s r="16">
                  <a:s>List&lt;</a:s>
                  <a:s r="15">
                     <a:s>Address</a:s>
                  </a:s>
                  <a:s>></a:s>
               </a:s>
               <a:s>):
  </a:s>
               <a:s r="24">
                  <a:s r="24">
                     <a:s>singleton from </a:s>
                     <a:s r="23">
                        <a:s>(</a:s>
                        <a:s r="23">
                           <a:s>
                              <a:s r="18">
                                 <a:s r="17">
                                    <a:s>
                                       <a:s>addresses</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> A</a:s>
                              </a:s>
                           </a:s>
                           <a:s> </a:s>
                           <a:s r="22">
                              <a:s>where </a:s>
                              <a:s r="22">
                                 <a:s r="20">
                                    <a:s r="19">
                                       <a:s>A</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="20">
                                       <a:s>use</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> = </a:s>
                                 <a:s r="21">
                                    <a:s>'official'</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>)</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="24" locator="15:3-15:55" xsi:type="SingletonFrom">
            <operand localId="23" locator="15:18-15:55" xsi:type="Query">
               <source localId="18" locator="15:19-15:29" alias="A">
                  <expression localId="17" locator="15:19-15:27" name="addresses" xsi:type="OperandRef"/>
               </source>
               <where localId="22" locator="15:31-15:54" xsi:type="Equal">
                  <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <operand localId="20" locator="15:37-15:41" path="use" scope="A" xsi:type="Property"/>
                  </operand>
                  <operand localId="21" locator="15:45-15:54" valueType="t:String" value="official" xsi:type="Literal"/>
               </where>
            </operand>
         </expression>
         <operand name="addresses">
            <operandTypeSpecifier localId="16" locator="14:36-14:48" xsi:type="ListTypeSpecifier">
               <elementType localId="15" locator="14:41-14:47" name="fhir:Address" xsi:type="NamedTypeSpecifier"/>
            </operandTypeSpecifier>
         </operand>
      </def>
      <def localId="36" locator="17:1-18:51" name="Official" context="Patient" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="36">
               <a:s>define function Official(names </a:s>
               <a:s r="27">
                  <a:s>List&lt;</a:s>
                  <a:s r="26">
                     <a:s>HumanName</a:s>
                  </a:s>
                  <a:s>></a:s>
               </a:s>
               <a:s>):
  </a:s>
               <a:s r="35">
                  <a:s r="35">
                     <a:s>singleton from </a:s>
                     <a:s r="34">
                        <a:s>(</a:s>
                        <a:s r="34">
                           <a:s>
                              <a:s r="29">
                                 <a:s r="28">
                                    <a:s>
                                       <a:s>names</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> N</a:s>
                              </a:s>
                           </a:s>
                           <a:s> </a:s>
                           <a:s r="33">
                              <a:s>where </a:s>
                              <a:s r="33">
                                 <a:s r="31">
                                    <a:s r="30">
                                       <a:s>N</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="31">
                                       <a:s>use</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> = </a:s>
                                 <a:s r="32">
                                    <a:s>'official'</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>)</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="35" locator="18:3-18:51" xsi:type="SingletonFrom">
            <operand localId="34" locator="18:18-18:51" xsi:type="Query">
               <source localId="29" locator="18:19-18:25" alias="N">
                  <expression localId="28" locator="18:19-18:23" name="names" xsi:type="OperandRef"/>
               </source>
               <where localId="33" locator="18:27-18:50" xsi:type="Equal">
                  <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <operand localId="31" locator="18:33-18:37" path="use" scope="N" xsi:type="Property"/>
                  </operand>
                  <operand localId="32" locator="18:41-18:50" valueType="t:String" value="official" xsi:type="Literal"/>
               </where>
            </operand>
         </expression>
         <operand name="names">
            <operandTypeSpecifier localId="27" locator="17:32-17:46" xsi:type="ListTypeSpecifier">
               <elementType localId="26" locator="17:37-17:45" name="fhir:HumanName" xsi:type="NamedTypeSpecifier"/>
            </operandTypeSpecifier>
         </operand>
      </def>
      <def localId="47" locator="20:1-21:57" name="Mobile" context="Patient" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="47">
               <a:s>define function Mobile(contactPoints </a:s>
               <a:s r="38">
                  <a:s>List&lt;</a:s>
                  <a:s r="37">
                     <a:s>ContactPoint</a:s>
                  </a:s>
                  <a:s>></a:s>
               </a:s>
               <a:s>):
  </a:s>
               <a:s r="46">
                  <a:s r="46">
                     <a:s>singleton from </a:s>
                     <a:s r="45">
                        <a:s>(</a:s>
                        <a:s r="45">
                           <a:s>
                              <a:s r="40">
                                 <a:s r="39">
                                    <a:s>
                                       <a:s>contactPoints</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> P</a:s>
                              </a:s>
                           </a:s>
                           <a:s> </a:s>
                           <a:s r="44">
                              <a:s>where </a:s>
                              <a:s r="44">
                                 <a:s r="42">
                                    <a:s r="41">
                                       <a:s>P</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="42">
                                       <a:s>use</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> = </a:s>
                                 <a:s r="43">
                                    <a:s>'mobile'</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>)</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="46" locator="21:3-21:57" xsi:type="SingletonFrom">
            <operand localId="45" locator="21:18-21:57" xsi:type="Query">
               <source localId="40" locator="21:19-21:33" alias="P">
                  <expression localId="39" locator="21:19-21:31" name="contactPoints" xsi:type="OperandRef"/>
               </source>
               <where localId="44" locator="21:35-21:56" xsi:type="Equal">
                  <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <operand localId="42" locator="21:41-21:45" path="use" scope="P" xsi:type="Property"/>
                  </operand>
                  <operand localId="43" locator="21:49-21:56" valueType="t:String" value="mobile" xsi:type="Literal"/>
               </where>
            </operand>
         </expression>
         <operand name="contactPoints">
            <operandTypeSpecifier localId="38" locator="20:38-20:55" xsi:type="ListTypeSpecifier">
               <elementType localId="37" locator="20:43-20:54" name="fhir:ContactPoint" xsi:type="NamedTypeSpecifier"/>
            </operandTypeSpecifier>
         </operand>
      </def>
      <def localId="52" locator="23:1-24:26" name="Only" context="Patient" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="52">
               <a:s>define function Only(allergies </a:s>
               <a:s r="49">
                  <a:s>List&lt;</a:s>
                  <a:s r="48">
                     <a:s>AllergyIntolerance</a:s>
                  </a:s>
                  <a:s>></a:s>
               </a:s>
               <a:s>):
  </a:s>
               <a:s r="51">
                  <a:s r="51">
                     <a:s>singleton from </a:s>
                     <a:s r="50">
                        <a:s>allergies</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="51" locator="24:3-24:26" xsi:type="SingletonFrom">
            <operand localId="50" locator="24:18-24:26" name="allergies" xsi:type="OperandRef"/>
         </expression>
         <operand name="allergies">
            <operandTypeSpecifier localId="49" locator="23:32-23:55" xsi:type="ListTypeSpecifier">
               <elementType localId="48" locator="23:37-23:54" name="fhir:AllergyIntolerance" xsi:type="NamedTypeSpecifier"/>
            </operandTypeSpecifier>
         </operand>
      </def>
      <def localId="57" locator="26:1-27:29" name="Only" context="Patient" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="57">
               <a:s>define function Only(appointments </a:s>
               <a:s r="54">
                  <a:s>List&lt;</a:s>
                  <a:s r="53">
                     <a:s>Appointment</a:s>
                  </a:s>
                  <a:s>></a:s>
               </a:s>
               <a:s>):
  </a:s>
               <a:s r="56">
                  <a:s r="56">
                     <a:s>singleton from </a:s>
                     <a:s r="55">
                        <a:s>appointments</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="56" locator="27:3-27:29" xsi:type="SingletonFrom">
            <operand localId="55" locator="27:18-27:29" name="appointments" xsi:type="OperandRef"/>
         </expression>
         <operand name="appointments">
            <operandTypeSpecifier localId="54" locator="26:35-26:51" xsi:type="ListTypeSpecifier">
               <elementType localId="53" locator="26:40-26:50" name="fhir:Appointment" xsi:type="NamedTypeSpecifier"/>
            </operandTypeSpecifier>
         </operand>
      </def>
      <def localId="62" locator="29:1-30:26" name="Only" context="Patient" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="62">
               <a:s>define function Only(careplans </a:s>
               <a:s r="59">
                  <a:s>List&lt;</a:s>
                  <a:s r="58">
                     <a:s>CarePlan</a:s>
                  </a:s>
                  <a:s>></a:s>
               </a:s>
               <a:s>):
  </a:s>
               <a:s r="61">
                  <a:s r="61">
                     <a:s>singleton from </a:s>
                     <a:s r="60">
                        <a:s>careplans</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="61" locator="30:3-30:26" xsi:type="SingletonFrom">
            <operand localId="60" locator="30:18-30:26" name="careplans" xsi:type="OperandRef"/>
         </expression>
         <operand name="careplans">
            <operandTypeSpecifier localId="59" locator="29:32-29:45" xsi:type="ListTypeSpecifier">
               <elementType localId="58" locator="29:37-29:44" name="fhir:CarePlan" xsi:type="NamedTypeSpecifier"/>
            </operandTypeSpecifier>
         </operand>
      </def>
      <def localId="67" locator="32:1-33:27" name="Only" context="Patient" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="67">
               <a:s>define function Only(conditions </a:s>
               <a:s r="64">
                  <a:s>List&lt;</a:s>
                  <a:s r="63">
                     <a:s>Condition</a:s>
                  </a:s>
                  <a:s>></a:s>
               </a:s>
               <a:s>):
  </a:s>
               <a:s r="66">
                  <a:s r="66">
                     <a:s>singleton from </a:s>
                     <a:s r="65">
                        <a:s>conditions</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="66" locator="33:3-33:27" xsi:type="SingletonFrom">
            <operand localId="65" locator="33:18-33:27" name="conditions" xsi:type="OperandRef"/>
         </expression>
         <operand name="conditions">
            <operandTypeSpecifier localId="64" locator="32:33-32:47" xsi:type="ListTypeSpecifier">
               <elementType localId="63" locator="32:38-32:46" name="fhir:Condition" xsi:type="NamedTypeSpecifier"/>
            </operandTypeSpecifier>
         </operand>
      </def>
      <def localId="72" locator="35:1-36:27" name="Only" context="Patient" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="72">
               <a:s>define function Only(encounters </a:s>
               <a:s r="69">
                  <a:s>List&lt;</a:s>
                  <a:s r="68">
                     <a:s>Encounter</a:s>
                  </a:s>
                  <a:s>></a:s>
               </a:s>
               <a:s>):
  </a:s>
               <a:s r="71">
                  <a:s r="71">
                     <a:s>singleton from </a:s>
                     <a:s r="70">
                        <a:s>encounters</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="71" locator="36:3-36:27" xsi:type="SingletonFrom">
            <operand localId="70" locator="36:18-36:27" name="encounters" xsi:type="OperandRef"/>
         </expression>
         <operand name="encounters">
            <operandTypeSpecifier localId="69" locator="35:33-35:47" xsi:type="ListTypeSpecifier">
               <elementType localId="68" locator="35:38-35:46" name="fhir:Encounter" xsi:type="NamedTypeSpecifier"/>
            </operandTypeSpecifier>
         </operand>
      </def>
      <def localId="77" locator="38:1-39:30" name="Only" context="Patient" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="77">
               <a:s>define function Only(immunizations </a:s>
               <a:s r="74">
                  <a:s>List&lt;</a:s>
                  <a:s r="73">
                     <a:s>Immunization</a:s>
                  </a:s>
                  <a:s>></a:s>
               </a:s>
               <a:s>):
  </a:s>
               <a:s r="76">
                  <a:s r="76">
                     <a:s>singleton from </a:s>
                     <a:s r="75">
                        <a:s>immunizations</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="76" locator="39:3-39:30" xsi:type="SingletonFrom">
            <operand localId="75" locator="39:18-39:30" name="immunizations" xsi:type="OperandRef"/>
         </expression>
         <operand name="immunizations">
            <operandTypeSpecifier localId="74" locator="38:36-38:53" xsi:type="ListTypeSpecifier">
               <elementType localId="73" locator="38:41-38:52" name="fhir:Immunization" xsi:type="NamedTypeSpecifier"/>
            </operandTypeSpecifier>
         </operand>
      </def>
      <def localId="82" locator="41:1-42:35" name="Only" context="Patient" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="82">
               <a:s>define function Only(medicationrequests </a:s>
               <a:s r="79">
                  <a:s>List&lt;</a:s>
                  <a:s r="78">
                     <a:s>MedicationRequest</a:s>
                  </a:s>
                  <a:s>></a:s>
               </a:s>
               <a:s>):
  </a:s>
               <a:s r="81">
                  <a:s r="81">
                     <a:s>singleton from </a:s>
                     <a:s r="80">
                        <a:s>medicationrequests</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="81" locator="42:3-42:35" xsi:type="SingletonFrom">
            <operand localId="80" locator="42:18-42:35" name="medicationrequests" xsi:type="OperandRef"/>
         </expression>
         <operand name="medicationrequests">
            <operandTypeSpecifier localId="79" locator="41:41-41:63" xsi:type="ListTypeSpecifier">
               <elementType localId="78" locator="41:46-41:62" name="fhir:MedicationRequest" xsi:type="NamedTypeSpecifier"/>
            </operandTypeSpecifier>
         </operand>
      </def>
      <def localId="87" locator="44:1-45:29" name="Only" context="Patient" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="87">
               <a:s>define function Only(observations </a:s>
               <a:s r="84">
                  <a:s>List&lt;</a:s>
                  <a:s r="83">
                     <a:s>Observation</a:s>
                  </a:s>
                  <a:s>></a:s>
               </a:s>
               <a:s>):
  </a:s>
               <a:s r="86">
                  <a:s r="86">
                     <a:s>singleton from </a:s>
                     <a:s r="85">
                        <a:s>observations</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="86" locator="45:3-45:29" xsi:type="SingletonFrom">
            <operand localId="85" locator="45:18-45:29" name="observations" xsi:type="OperandRef"/>
         </expression>
         <operand name="observations">
            <operandTypeSpecifier localId="84" locator="44:35-44:51" xsi:type="ListTypeSpecifier">
               <elementType localId="83" locator="44:40-44:50" name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
            </operandTypeSpecifier>
         </operand>
      </def>
      <def localId="92" locator="47:1-48:27" name="Only" context="Patient" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="92">
               <a:s>define function Only(procedures </a:s>
               <a:s r="89">
                  <a:s>List&lt;</a:s>
                  <a:s r="88">
                     <a:s>Procedure</a:s>
                  </a:s>
                  <a:s>></a:s>
               </a:s>
               <a:s>):
  </a:s>
               <a:s r="91">
                  <a:s r="91">
                     <a:s>singleton from </a:s>
                     <a:s r="90">
                        <a:s>procedures</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="91" locator="48:3-48:27" xsi:type="SingletonFrom">
            <operand localId="90" locator="48:18-48:27" name="procedures" xsi:type="OperandRef"/>
         </expression>
         <operand name="procedures">
            <operandTypeSpecifier localId="89" locator="47:33-47:47" xsi:type="ListTypeSpecifier">
               <elementType localId="88" locator="47:38-47:46" name="fhir:Procedure" xsi:type="NamedTypeSpecifier"/>
            </operandTypeSpecifier>
         </operand>
      </def>
      <def localId="97" locator="50:1-51:32" name="Only" context="Patient" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="97">
               <a:s>define function Only(serviceRequests </a:s>
               <a:s r="94">
                  <a:s>List&lt;</a:s>
                  <a:s r="93">
                     <a:s>ServiceRequest</a:s>
                  </a:s>
                  <a:s>></a:s>
               </a:s>
               <a:s>):
  </a:s>
               <a:s r="96">
                  <a:s r="96">
                     <a:s>singleton from </a:s>
                     <a:s r="95">
                        <a:s>serviceRequests</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="96" locator="51:3-51:32" xsi:type="SingletonFrom">
            <operand localId="95" locator="51:18-51:32" name="serviceRequests" xsi:type="OperandRef"/>
         </expression>
         <operand name="serviceRequests">
            <operandTypeSpecifier localId="94" locator="50:38-50:57" xsi:type="ListTypeSpecifier">
               <elementType localId="93" locator="50:43-50:56" name="fhir:ServiceRequest" xsi:type="NamedTypeSpecifier"/>
            </operandTypeSpecifier>
         </operand>
      </def>
      <def localId="102" locator="53:1-54:24" name="Only" context="Patient" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="102">
               <a:s>define function Only(dosages </a:s>
               <a:s r="99">
                  <a:s>List&lt;</a:s>
                  <a:s r="98">
                     <a:s>Dosage</a:s>
                  </a:s>
                  <a:s>></a:s>
               </a:s>
               <a:s>):
  </a:s>
               <a:s r="101">
                  <a:s r="101">
                     <a:s>singleton from </a:s>
                     <a:s r="100">
                        <a:s>dosages</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="101" locator="54:3-54:24" xsi:type="SingletonFrom">
            <operand localId="100" locator="54:18-54:24" name="dosages" xsi:type="OperandRef"/>
         </expression>
         <operand name="dosages">
            <operandTypeSpecifier localId="99" locator="53:30-53:41" xsi:type="ListTypeSpecifier">
               <elementType localId="98" locator="53:35-53:40" name="fhir:Dosage" xsi:type="NamedTypeSpecifier"/>
            </operandTypeSpecifier>
         </operand>
      </def>
      <def localId="107" locator="56:1-57:22" name="Only" context="Patient" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="107">
               <a:s>define function Only(doses </a:s>
               <a:s r="104">
                  <a:s>List&lt;</a:s>
                  <a:s r="103">
                     <a:s>FHIR.Dosage.DoseAndRate</a:s>
                  </a:s>
                  <a:s>></a:s>
               </a:s>
               <a:s>):
  </a:s>
               <a:s r="106">
                  <a:s r="106">
                     <a:s>singleton from </a:s>
                     <a:s r="105">
                        <a:s>doses</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="106" locator="57:3-57:22" xsi:type="SingletonFrom">
            <operand localId="105" locator="57:18-57:22" name="doses" xsi:type="OperandRef"/>
         </expression>
         <operand name="doses">
            <operandTypeSpecifier localId="104" locator="56:28-56:56" xsi:type="ListTypeSpecifier">
               <elementType localId="103" locator="56:33-56:55" name="fhir:Dosage.DoseAndRate" xsi:type="NamedTypeSpecifier"/>
            </operandTypeSpecifier>
         </operand>
      </def>
      <def localId="117" locator="59:1-63:3" name="Earliest" context="Patient" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="117">
               <a:s>define function Earliest(observations </a:s>
               <a:s r="109">
                  <a:s>List&lt;</a:s>
                  <a:s r="108">
                     <a:s>Observation</a:s>
                  </a:s>
                  <a:s>></a:s>
               </a:s>
               <a:s>):
  </a:s>
               <a:s r="116">
                  <a:s r="116">
                     <a:s>First(
    </a:s>
                     <a:s r="115">
                        <a:s>
                           <a:s r="111">
                              <a:s r="110">
                                 <a:s>
                                    <a:s>observations</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> O</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
      </a:s>
                        <a:s r="114">
                           <a:s>sort by </a:s>
                           <a:s r="113">
                              <a:s r="112">
                                 <a:s>issued</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>
  )</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="116" locator="60:3-63:3" xsi:type="First">
            <source localId="115" locator="61:5-62:20" xsi:type="Query">
               <source localId="111" locator="61:5-61:18" alias="O">
                  <expression localId="110" locator="61:5-61:16" name="observations" xsi:type="OperandRef"/>
               </source>
               <sort localId="114" locator="62:7-62:20">
                  <by localId="113" locator="62:15-62:20" direction="asc" path="issued" xsi:type="ByColumn"/>
               </sort>
            </source>
         </expression>
         <operand name="observations">
            <operandTypeSpecifier localId="109" locator="59:39-59:55" xsi:type="ListTypeSpecifier">
               <elementType localId="108" locator="59:44-59:54" name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
            </operandTypeSpecifier>
         </operand>
      </def>
      <def localId="127" locator="65:1-69:3" name="Latest" context="Patient" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="127">
               <a:s>define function Latest(observations </a:s>
               <a:s r="119">
                  <a:s>List&lt;</a:s>
                  <a:s r="118">
                     <a:s>Observation</a:s>
                  </a:s>
                  <a:s>></a:s>
               </a:s>
               <a:s>):
  </a:s>
               <a:s r="126">
                  <a:s r="126">
                     <a:s>Last(
    </a:s>
                     <a:s r="125">
                        <a:s>
                           <a:s r="121">
                              <a:s r="120">
                                 <a:s>
                                    <a:s>observations</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> O</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
      </a:s>
                        <a:s r="124">
                           <a:s>sort by </a:s>
                           <a:s r="123">
                              <a:s r="122">
                                 <a:s>issued</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>
  )</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="126" locator="66:3-69:3" xsi:type="Last">
            <source localId="125" locator="67:5-68:20" xsi:type="Query">
               <source localId="121" locator="67:5-67:18" alias="O">
                  <expression localId="120" locator="67:5-67:16" name="observations" xsi:type="OperandRef"/>
               </source>
               <sort localId="124" locator="68:7-68:20">
                  <by localId="123" locator="68:15-68:20" direction="asc" path="issued" xsi:type="ByColumn"/>
               </sort>
            </source>
         </expression>
         <operand name="observations">
            <operandTypeSpecifier localId="119" locator="65:37-65:53" xsi:type="ListTypeSpecifier">
               <elementType localId="118" locator="65:42-65:52" name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
            </operandTypeSpecifier>
         </operand>
      </def>
      <def localId="137" locator="71:1-75:3" name="MostRecent" context="Patient" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="137">
               <a:s>define function MostRecent(observations </a:s>
               <a:s r="129">
                  <a:s>List&lt;</a:s>
                  <a:s r="128">
                     <a:s>Observation</a:s>
                  </a:s>
                  <a:s>></a:s>
               </a:s>
               <a:s>):
  </a:s>
               <a:s r="136">
                  <a:s r="136">
                     <a:s>Last(
    </a:s>
                     <a:s r="135">
                        <a:s>
                           <a:s r="131">
                              <a:s r="130">
                                 <a:s>
                                    <a:s>observations</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> O</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
      </a:s>
                        <a:s r="134">
                           <a:s>sort by </a:s>
                           <a:s r="133">
                              <a:s r="132">
                                 <a:s>issued</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>
  )</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="136" locator="72:3-75:3" xsi:type="Last">
            <source localId="135" locator="73:5-74:20" xsi:type="Query">
               <source localId="131" locator="73:5-73:18" alias="O">
                  <expression localId="130" locator="73:5-73:16" name="observations" xsi:type="OperandRef"/>
               </source>
               <sort localId="134" locator="74:7-74:20">
                  <by localId="133" locator="74:15-74:20" direction="asc" path="issued" xsi:type="ByColumn"/>
               </sort>
            </source>
         </expression>
         <operand name="observations">
            <operandTypeSpecifier localId="129" locator="71:41-71:57" xsi:type="ListTypeSpecifier">
               <elementType localId="128" locator="71:46-71:56" name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
            </operandTypeSpecifier>
         </operand>
      </def>
      <def localId="150" locator="77:1-81:5" name="MostRecent" context="Patient" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="150">
               <a:s>define function MostRecent(procedures </a:s>
               <a:s r="139">
                  <a:s>List&lt;</a:s>
                  <a:s r="138">
                     <a:s>Procedure</a:s>
                  </a:s>
                  <a:s>></a:s>
               </a:s>
               <a:s>):
  </a:s>
               <a:s r="149">
                  <a:s r="149">
                     <a:s>Last(
    </a:s>
                     <a:s r="148">
                        <a:s>
                           <a:s r="141">
                              <a:s r="140">
                                 <a:s>
                                    <a:s>procedures</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> P</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
      </a:s>
                        <a:s r="147">
                           <a:s>sort by </a:s>
                           <a:s r="146">
                              <a:s r="145">
                                 <a:s>start of </a:s>
                                 <a:s r="144">
                                    <a:s r="142">
                                       <a:s>FC</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="144">
                                       <a:s>ToInterval(</a:s>
                                       <a:s r="143">
                                          <a:s>performed</a:s>
                                       </a:s>
                                       <a:s>)</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    )</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="149" locator="78:3-81:5" xsi:type="Last">
            <source localId="148" locator="79:5-80:47" xsi:type="Query">
               <source localId="141" locator="79:5-79:16" alias="P">
                  <expression localId="140" locator="79:5-79:14" name="procedures" xsi:type="OperandRef"/>
               </source>
               <sort localId="147" locator="80:7-80:47">
                  <by localId="146" locator="80:15-80:47" direction="asc" xsi:type="ByExpression">
                     <expression localId="145" locator="80:15-80:47" xsi:type="Start">
                        <operand localId="144" locator="80:24-80:47" name="ToInterval" libraryName="FC" xsi:type="FunctionRef">
                           <operand localId="143" locator="80:38-80:46" name="performed" xsi:type="IdentifierRef"/>
                        </operand>
                     </expression>
                  </by>
               </sort>
            </source>
         </expression>
         <operand name="procedures">
            <operandTypeSpecifier localId="139" locator="77:39-77:53" xsi:type="ListTypeSpecifier">
               <elementType localId="138" locator="77:44-77:52" name="fhir:Procedure" xsi:type="NamedTypeSpecifier"/>
            </operandTypeSpecifier>
         </operand>
      </def>
      <def localId="162" locator="83:1-87:3" name="Lowest" context="Patient" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="162">
               <a:s>define function Lowest(observations </a:s>
               <a:s r="152">
                  <a:s>List&lt;</a:s>
                  <a:s r="151">
                     <a:s>Observation</a:s>
                  </a:s>
                  <a:s>></a:s>
               </a:s>
               <a:s>):
  </a:s>
               <a:s r="161">
                  <a:s r="161">
                     <a:s>First(
    </a:s>
                     <a:s r="160">
                        <a:s>
                           <a:s r="154">
                              <a:s r="153">
                                 <a:s>
                                    <a:s>observations</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> O</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
      </a:s>
                        <a:s r="159">
                           <a:s>sort by </a:s>
                           <a:s r="158">
                              <a:s r="157">
                                 <a:s>(</a:s>
                                 <a:s r="157">
                                    <a:s r="155">
                                       <a:s>value</a:s>
                                    </a:s>
                                    <a:s> as </a:s>
                                    <a:s r="156">
                                       <a:s>FHIR.Quantity</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>
  )</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="161" locator="84:3-87:3" xsi:type="First">
            <source localId="160" locator="85:5-86:38" xsi:type="Query">
               <source localId="154" locator="85:5-85:18" alias="O">
                  <expression localId="153" locator="85:5-85:16" name="observations" xsi:type="OperandRef"/>
               </source>
               <sort localId="159" locator="86:7-86:38">
                  <by localId="158" locator="86:15-86:38" direction="asc" xsi:type="ByExpression">
                     <expression localId="157" locator="86:15-86:38" strict="false" xsi:type="As">
                        <operand localId="155" locator="86:16-86:20" name="value" xsi:type="IdentifierRef"/>
                        <asTypeSpecifier localId="156" locator="86:25-86:37" name="fhir:Quantity" xsi:type="NamedTypeSpecifier"/>
                     </expression>
                  </by>
               </sort>
            </source>
         </expression>
         <operand name="observations">
            <operandTypeSpecifier localId="152" locator="83:37-83:53" xsi:type="ListTypeSpecifier">
               <elementType localId="151" locator="83:42-83:52" name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
            </operandTypeSpecifier>
         </operand>
      </def>
      <def localId="174" locator="89:1-93:3" name="Highest" context="Patient" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="174">
               <a:s>define function Highest(observations </a:s>
               <a:s r="164">
                  <a:s>List&lt;</a:s>
                  <a:s r="163">
                     <a:s>Observation</a:s>
                  </a:s>
                  <a:s>></a:s>
               </a:s>
               <a:s>):
  </a:s>
               <a:s r="173">
                  <a:s r="173">
                     <a:s>Last(
    </a:s>
                     <a:s r="172">
                        <a:s>
                           <a:s r="166">
                              <a:s r="165">
                                 <a:s>
                                    <a:s>observations</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> O</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
      </a:s>
                        <a:s r="171">
                           <a:s>sort by </a:s>
                           <a:s r="170">
                              <a:s r="169">
                                 <a:s>(</a:s>
                                 <a:s r="169">
                                    <a:s r="167">
                                       <a:s>value</a:s>
                                    </a:s>
                                    <a:s> as </a:s>
                                    <a:s r="168">
                                       <a:s>FHIR.Quantity</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>
  )</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="173" locator="90:3-93:3" xsi:type="Last">
            <source localId="172" locator="91:5-92:38" xsi:type="Query">
               <source localId="166" locator="91:5-91:18" alias="O">
                  <expression localId="165" locator="91:5-91:16" name="observations" xsi:type="OperandRef"/>
               </source>
               <sort localId="171" locator="92:7-92:38">
                  <by localId="170" locator="92:15-92:38" direction="asc" xsi:type="ByExpression">
                     <expression localId="169" locator="92:15-92:38" strict="false" xsi:type="As">
                        <operand localId="167" locator="92:16-92:20" name="value" xsi:type="IdentifierRef"/>
                        <asTypeSpecifier localId="168" locator="92:25-92:37" name="fhir:Quantity" xsi:type="NamedTypeSpecifier"/>
                     </expression>
                  </by>
               </sort>
            </source>
         </expression>
         <operand name="observations">
            <operandTypeSpecifier localId="164" locator="89:38-89:54" xsi:type="ListTypeSpecifier">
               <elementType localId="163" locator="89:43-89:53" name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
            </operandTypeSpecifier>
         </operand>
      </def>
      <def localId="188" locator="101:1-104:10" name="Extensions" context="Patient" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="188">
               <a:s>/*
@description: Returns any WHO core extensions defined on the given resource with the specified id.
@comment: NOTE: Extensions are not the preferred approach, but are used as a way to access
content that is defined by extensions but not yet surfaced in the
CQL model info.
*/
define function Extensions(domainResource </a:s>
               <a:s r="175">
                  <a:s>DomainResource</a:s>
               </a:s>
               <a:s>, id </a:s>
               <a:s r="176">
                  <a:s>String</a:s>
               </a:s>
               <a:s>):
  </a:s>
               <a:s r="187">
                  <a:s r="187">
                     <a:s>
                        <a:s r="178">
                           <a:s r="177">
                              <a:s>
                                 <a:s>domainResource.extension</a:s>
                              </a:s>
                           </a:s>
                           <a:s> E</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
	  </a:s>
                     <a:s r="184">
                        <a:s>where </a:s>
                        <a:s r="184">
                           <a:s r="180">
                              <a:s r="179">
                                 <a:s>E</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="180">
                                 <a:s>url</a:s>
                              </a:s>
                           </a:s>
                           <a:s> = </a:s>
                           <a:s r="183">
                              <a:s>(</a:s>
                              <a:s r="183">
                                 <a:s r="181">
                                    <a:s>'http://fhir.org/guides/who/core/StructureDefinition/'</a:s>
                                 </a:s>
                                 <a:s> + </a:s>
                                 <a:s r="182">
                                    <a:s>id</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>
		</a:s>
                     <a:s r="186">
                        <a:s>return </a:s>
                        <a:s r="185">
                           <a:s>E</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="187" locator="102:3-104:10" xsi:type="Query">
            <source localId="178" locator="102:3-102:28" alias="E">
               <expression localId="177" locator="102:3-102:26" path="extension" xsi:type="Property">
                  <source name="domainResource" xsi:type="OperandRef"/>
               </expression>
            </source>
            <where localId="184" locator="103:4-103:78" xsi:type="Equal">
               <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                  <operand localId="180" locator="103:10-103:14" path="url" scope="E" xsi:type="Property"/>
               </operand>
               <operand localId="183" locator="103:18-103:78" xsi:type="Concatenate">
                  <operand localId="181" locator="103:19-103:72" valueType="t:String" value="http://fhir.org/guides/who/core/StructureDefinition/" xsi:type="Literal"/>
                  <operand localId="182" locator="103:76-103:77" name="id" xsi:type="OperandRef"/>
               </operand>
            </where>
            <return localId="186" locator="104:3-104:10">
               <expression localId="185" locator="104:10" name="E" xsi:type="AliasRef"/>
            </return>
         </expression>
         <operand name="domainResource">
            <operandTypeSpecifier localId="175" locator="101:43-101:56" name="fhir:DomainResource" xsi:type="NamedTypeSpecifier"/>
         </operand>
         <operand name="id">
            <operandTypeSpecifier localId="176" locator="101:62-101:67" name="t:String" xsi:type="NamedTypeSpecifier"/>
         </operand>
      </def>
      <def localId="195" locator="111:1-112:49" name="Extension" context="Patient" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="195">
               <a:s>/*
@description: Returns the single WHO core extension (if present) on the given resource with the specified id.
@comment: This function uses singleton from to ensure that a run-time exception is thrown if there
is more than one extension on the given resource with the specified id.
*/
define function Extension(domainResource </a:s>
               <a:s r="189">
                  <a:s>DomainResource</a:s>
               </a:s>
               <a:s>, id </a:s>
               <a:s r="190">
                  <a:s>String</a:s>
               </a:s>
               <a:s>):
  </a:s>
               <a:s r="194">
                  <a:s r="194">
                     <a:s>singleton from </a:s>
                     <a:s r="193">
                        <a:s>&quot;Extensions&quot;(</a:s>
                        <a:s r="191">
                           <a:s>domainResource</a:s>
                        </a:s>
                        <a:s>, </a:s>
                        <a:s r="192">
                           <a:s>id</a:s>
                        </a:s>
                        <a:s>)</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="194" locator="112:3-112:49" xsi:type="SingletonFrom">
            <operand localId="193" locator="112:18-112:49" name="Extensions" xsi:type="FunctionRef">
               <operand localId="191" locator="112:31-112:44" name="domainResource" xsi:type="OperandRef"/>
               <operand localId="192" locator="112:47-112:48" name="id" xsi:type="OperandRef"/>
            </operand>
         </expression>
         <operand name="domainResource">
            <operandTypeSpecifier localId="189" locator="111:42-111:55" name="fhir:DomainResource" xsi:type="NamedTypeSpecifier"/>
         </operand>
         <operand name="id">
            <operandTypeSpecifier localId="190" locator="111:61-111:66" name="t:String" xsi:type="NamedTypeSpecifier"/>
         </operand>
      </def>
      <def localId="209" locator="119:1-122:10" name="Extensions" context="Patient" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="209">
               <a:s>/*
@description: Returns any WHO core extensions defined on the given element with the specified id.
@comment: NOTE: Extensions are not the preferred approach, but are used as a way to access
content that is defined by extensions but not yet surfaced in the CQL model info.
*/
define function Extensions(element </a:s>
               <a:s r="196">
                  <a:s>Element</a:s>
               </a:s>
               <a:s>, id </a:s>
               <a:s r="197">
                  <a:s>String</a:s>
               </a:s>
               <a:s>):
  </a:s>
               <a:s r="208">
                  <a:s r="208">
                     <a:s>
                        <a:s r="199">
                           <a:s r="198">
                              <a:s>
                                 <a:s>element.extension</a:s>
                              </a:s>
                           </a:s>
                           <a:s> E</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
	  </a:s>
                     <a:s r="205">
                        <a:s>where </a:s>
                        <a:s r="205">
                           <a:s r="201">
                              <a:s r="200">
                                 <a:s>E</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="201">
                                 <a:s>url</a:s>
                              </a:s>
                           </a:s>
                           <a:s> = </a:s>
                           <a:s r="204">
                              <a:s>(</a:s>
                              <a:s r="204">
                                 <a:s r="202">
                                    <a:s>'http://fhir.org/guides/who/core/StructureDefinition/'</a:s>
                                 </a:s>
                                 <a:s> + </a:s>
                                 <a:s r="203">
                                    <a:s>id</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>
		</a:s>
                     <a:s r="207">
                        <a:s>return </a:s>
                        <a:s r="206">
                           <a:s>E</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="208" locator="120:3-122:10" xsi:type="Query">
            <source localId="199" locator="120:3-120:21" alias="E">
               <expression localId="198" locator="120:3-120:19" path="extension" xsi:type="Property">
                  <source name="element" xsi:type="OperandRef"/>
               </expression>
            </source>
            <where localId="205" locator="121:4-121:78" xsi:type="Equal">
               <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                  <operand localId="201" locator="121:10-121:14" path="url" scope="E" xsi:type="Property"/>
               </operand>
               <operand localId="204" locator="121:18-121:78" xsi:type="Concatenate">
                  <operand localId="202" locator="121:19-121:72" valueType="t:String" value="http://fhir.org/guides/who/core/StructureDefinition/" xsi:type="Literal"/>
                  <operand localId="203" locator="121:76-121:77" name="id" xsi:type="OperandRef"/>
               </operand>
            </where>
            <return localId="207" locator="122:3-122:10">
               <expression localId="206" locator="122:10" name="E" xsi:type="AliasRef"/>
            </return>
         </expression>
         <operand name="element">
            <operandTypeSpecifier localId="196" locator="119:36-119:42" name="fhir:Element" xsi:type="NamedTypeSpecifier"/>
         </operand>
         <operand name="id">
            <operandTypeSpecifier localId="197" locator="119:48-119:53" name="t:String" xsi:type="NamedTypeSpecifier"/>
         </operand>
      </def>
      <def localId="216" locator="129:1-130:40" name="Extension" context="Patient" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="216">
               <a:s>/*
@description: Returns the single WHO core extension (if present) on the given element with the specified id.
@comment: This function uses singleton from to ensure that a run-time exception is thrown if there
is more than one extension on the given resource with the specified url.
*/
define function Extension(element </a:s>
               <a:s r="210">
                  <a:s>Element</a:s>
               </a:s>
               <a:s>, id </a:s>
               <a:s r="211">
                  <a:s>String</a:s>
               </a:s>
               <a:s>):
  </a:s>
               <a:s r="215">
                  <a:s r="215">
                     <a:s>singleton from </a:s>
                     <a:s r="214">
                        <a:s>Extensions(</a:s>
                        <a:s r="212">
                           <a:s>element</a:s>
                        </a:s>
                        <a:s>, </a:s>
                        <a:s r="213">
                           <a:s>id</a:s>
                        </a:s>
                        <a:s>)</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="215" locator="130:3-130:40" xsi:type="SingletonFrom">
            <operand localId="214" locator="130:18-130:40" name="Extensions" xsi:type="FunctionRef">
               <operand localId="212" locator="130:29-130:35" name="element" xsi:type="OperandRef"/>
               <operand localId="213" locator="130:38-130:39" name="id" xsi:type="OperandRef"/>
            </operand>
         </expression>
         <operand name="element">
            <operandTypeSpecifier localId="210" locator="129:35-129:41" name="fhir:Element" xsi:type="NamedTypeSpecifier"/>
         </operand>
         <operand name="id">
            <operandTypeSpecifier localId="211" locator="129:47-129:52" name="t:String" xsi:type="NamedTypeSpecifier"/>
         </operand>
      </def>
      <def localId="230" locator="138:1-141:10" name="ModifierExtensions" context="Patient" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="230">
               <a:s>/*
@description: Returns any WHO core modifier extensions defined on the given resource with the specified id.
@comment: NOTE: Extensions are not the preferred approach, but are used as a way to access
content that is defined by extensions but not yet surfaced in the
CQL model info.
*/
define function ModifierExtensions(domainResource </a:s>
               <a:s r="217">
                  <a:s>DomainResource</a:s>
               </a:s>
               <a:s>, id </a:s>
               <a:s r="218">
                  <a:s>String</a:s>
               </a:s>
               <a:s>):
  </a:s>
               <a:s r="229">
                  <a:s r="229">
                     <a:s>
                        <a:s r="220">
                           <a:s r="219">
                              <a:s>
                                 <a:s>domainResource.modifierExtension</a:s>
                              </a:s>
                           </a:s>
                           <a:s> E</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
	  </a:s>
                     <a:s r="226">
                        <a:s>where </a:s>
                        <a:s r="226">
                           <a:s r="222">
                              <a:s r="221">
                                 <a:s>E</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="222">
                                 <a:s>url</a:s>
                              </a:s>
                           </a:s>
                           <a:s> = </a:s>
                           <a:s r="225">
                              <a:s>(</a:s>
                              <a:s r="225">
                                 <a:s r="223">
                                    <a:s>'http://fhir.org/guides/who/core/StructureDefinition/'</a:s>
                                 </a:s>
                                 <a:s> + </a:s>
                                 <a:s r="224">
                                    <a:s>id</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>
		</a:s>
                     <a:s r="228">
                        <a:s>return </a:s>
                        <a:s r="227">
                           <a:s>E</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="229" locator="139:3-141:10" xsi:type="Query">
            <source localId="220" locator="139:3-139:36" alias="E">
               <expression localId="219" locator="139:3-139:34" path="modifierExtension" xsi:type="Property">
                  <source name="domainResource" xsi:type="OperandRef"/>
               </expression>
            </source>
            <where localId="226" locator="140:4-140:78" xsi:type="Equal">
               <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                  <operand localId="222" locator="140:10-140:14" path="url" scope="E" xsi:type="Property"/>
               </operand>
               <operand localId="225" locator="140:18-140:78" xsi:type="Concatenate">
                  <operand localId="223" locator="140:19-140:72" valueType="t:String" value="http://fhir.org/guides/who/core/StructureDefinition/" xsi:type="Literal"/>
                  <operand localId="224" locator="140:76-140:77" name="id" xsi:type="OperandRef"/>
               </operand>
            </where>
            <return localId="228" locator="141:3-141:10">
               <expression localId="227" locator="141:10" name="E" xsi:type="AliasRef"/>
            </return>
         </expression>
         <operand name="domainResource">
            <operandTypeSpecifier localId="217" locator="138:51-138:64" name="fhir:DomainResource" xsi:type="NamedTypeSpecifier"/>
         </operand>
         <operand name="id">
            <operandTypeSpecifier localId="218" locator="138:70-138:75" name="t:String" xsi:type="NamedTypeSpecifier"/>
         </operand>
      </def>
      <def localId="237" locator="148:1-149:55" name="ModifierExtension" context="Patient" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="237">
               <a:s>/*
@description: Returns the single WHO core modifier extension (if present) on the given resource with the specified id.
@comment: This function uses singleton from to ensure that a run-time exception is thrown if there
is more than one extension on the given resource with the specified url.
*/
define function ModifierExtension(domainResource </a:s>
               <a:s r="231">
                  <a:s>DomainResource</a:s>
               </a:s>
               <a:s>, id </a:s>
               <a:s r="232">
                  <a:s>String</a:s>
               </a:s>
               <a:s>):
  </a:s>
               <a:s r="236">
                  <a:s r="236">
                     <a:s>singleton from </a:s>
                     <a:s r="235">
                        <a:s>ModifierExtensions(</a:s>
                        <a:s r="233">
                           <a:s>domainResource</a:s>
                        </a:s>
                        <a:s>, </a:s>
                        <a:s r="234">
                           <a:s>id</a:s>
                        </a:s>
                        <a:s>)</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="236" locator="149:3-149:55" xsi:type="SingletonFrom">
            <operand localId="235" locator="149:18-149:55" name="ModifierExtensions" xsi:type="FunctionRef">
               <operand localId="233" locator="149:37-149:50" name="domainResource" xsi:type="OperandRef"/>
               <operand localId="234" locator="149:53-149:54" name="id" xsi:type="OperandRef"/>
            </operand>
         </expression>
         <operand name="domainResource">
            <operandTypeSpecifier localId="231" locator="148:50-148:63" name="fhir:DomainResource" xsi:type="NamedTypeSpecifier"/>
         </operand>
         <operand name="id">
            <operandTypeSpecifier localId="232" locator="148:69-148:74" name="t:String" xsi:type="NamedTypeSpecifier"/>
         </operand>
      </def>
      <def localId="251" locator="156:1-159:10" name="ModifierExtensions" context="Patient" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="251">
               <a:s>/*
@description: Returns any WHO core modifier extensions defined on the given element with the specified id.
@comment: NOTE: Extensions are not the preferred approach, but are used as a way to access
content that is defined by extensions but not yet surfaced in the CQL model info.
*/
define function ModifierExtensions(element </a:s>
               <a:s r="238">
                  <a:s>BackboneElement</a:s>
               </a:s>
               <a:s>, id </a:s>
               <a:s r="239">
                  <a:s>String</a:s>
               </a:s>
               <a:s>):
  </a:s>
               <a:s r="250">
                  <a:s r="250">
                     <a:s>
                        <a:s r="241">
                           <a:s r="240">
                              <a:s>
                                 <a:s>element.modifierExtension</a:s>
                              </a:s>
                           </a:s>
                           <a:s> E</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
	  </a:s>
                     <a:s r="247">
                        <a:s>where </a:s>
                        <a:s r="247">
                           <a:s r="243">
                              <a:s r="242">
                                 <a:s>E</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="243">
                                 <a:s>url</a:s>
                              </a:s>
                           </a:s>
                           <a:s> = </a:s>
                           <a:s r="246">
                              <a:s>(</a:s>
                              <a:s r="246">
                                 <a:s r="244">
                                    <a:s>'http://fhir.org/guides/who/core/StructureDefinition/'</a:s>
                                 </a:s>
                                 <a:s> + </a:s>
                                 <a:s r="245">
                                    <a:s>id</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>
		</a:s>
                     <a:s r="249">
                        <a:s>return </a:s>
                        <a:s r="248">
                           <a:s>E</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="250" locator="157:3-159:10" xsi:type="Query">
            <source localId="241" locator="157:3-157:29" alias="E">
               <expression localId="240" locator="157:3-157:27" path="modifierExtension" xsi:type="Property">
                  <source name="element" xsi:type="OperandRef"/>
               </expression>
            </source>
            <where localId="247" locator="158:4-158:78" xsi:type="Equal">
               <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                  <operand localId="243" locator="158:10-158:14" path="url" scope="E" xsi:type="Property"/>
               </operand>
               <operand localId="246" locator="158:18-158:78" xsi:type="Concatenate">
                  <operand localId="244" locator="158:19-158:72" valueType="t:String" value="http://fhir.org/guides/who/core/StructureDefinition/" xsi:type="Literal"/>
                  <operand localId="245" locator="158:76-158:77" name="id" xsi:type="OperandRef"/>
               </operand>
            </where>
            <return localId="249" locator="159:3-159:10">
               <expression localId="248" locator="159:10" name="E" xsi:type="AliasRef"/>
            </return>
         </expression>
         <operand name="element">
            <operandTypeSpecifier localId="238" locator="156:44-156:58" name="fhir:BackboneElement" xsi:type="NamedTypeSpecifier"/>
         </operand>
         <operand name="id">
            <operandTypeSpecifier localId="239" locator="156:64-156:69" name="t:String" xsi:type="NamedTypeSpecifier"/>
         </operand>
      </def>
      <def localId="258" locator="166:1-167:48" name="ModifierExtension" context="Patient" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="258">
               <a:s>/*
@description: Returns the single WHO core modifier extension (if present) on the given element with the specified id.
@comment: This function uses singleton from to ensure that a run-time exception is thrown if there
is more than one extension on the given resource with the specified url.
*/
define function ModifierExtension(element </a:s>
               <a:s r="252">
                  <a:s>BackboneElement</a:s>
               </a:s>
               <a:s>, id </a:s>
               <a:s r="253">
                  <a:s>String</a:s>
               </a:s>
               <a:s>):
  </a:s>
               <a:s r="257">
                  <a:s r="257">
                     <a:s>singleton from </a:s>
                     <a:s r="256">
                        <a:s>ModifierExtensions(</a:s>
                        <a:s r="254">
                           <a:s>element</a:s>
                        </a:s>
                        <a:s>, </a:s>
                        <a:s r="255">
                           <a:s>id</a:s>
                        </a:s>
                        <a:s>)</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="257" locator="167:3-167:48" xsi:type="SingletonFrom">
            <operand localId="256" locator="167:18-167:48" name="ModifierExtensions" xsi:type="FunctionRef">
               <operand localId="254" locator="167:37-167:43" name="element" xsi:type="OperandRef"/>
               <operand localId="255" locator="167:46-167:47" name="id" xsi:type="OperandRef"/>
            </operand>
         </expression>
         <operand name="element">
            <operandTypeSpecifier localId="252" locator="166:43-166:57" name="fhir:BackboneElement" xsi:type="NamedTypeSpecifier"/>
         </operand>
         <operand name="id">
            <operandTypeSpecifier localId="253" locator="166:63-166:68" name="t:String" xsi:type="NamedTypeSpecifier"/>
         </operand>
      </def>
   </statements>
</library>
