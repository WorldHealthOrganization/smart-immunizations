<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE HTML>
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <title>WHO.FHIR.IMMUNIZATION\IMMZDT16 - FHIR v4.0.1</title>

    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta name="author" content="http://hl7.org/fhir"/>

    <link rel="stylesheet" href="fhir.css"/>

      <!-- Bootstrap core CSS -->
    <link rel="stylesheet" href="assets/css/bootstrap-fhir.css"/>

      <!-- Project extras -->
    <link rel="stylesheet" href="assets/css/project.css"/>
    <link rel="stylesheet" href="assets/css/pygments-manni.css"/>
    <link rel="stylesheet" href="assets/css/jquery-ui.css"/>
  	<link rel="stylesheet" href="assets/css/prism.css"/>
      <!-- Placeholder for child template CSS declarations -->
    <link rel="stylesheet" href="assets/css/who.css"/>
    <link rel="stylesheet" href="assets/css/lforms.min.css"/>

    <script src="fhir-table-scripts.js" type="text/javascript"> </script>

      <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
      <!-- [if lt IE 9]>
    <script src="assets/js/html5shiv.js"></script>
    <script src="assets/js/respond.min.js"></script>
    <![endif] -->

      <!-- Favicons -->
    <link sizes="144x144" rel="apple-touch-icon-precomposed" href="assets/ico/apple-touch-icon-144-precomposed.png"/>
    <link sizes="114x114" rel="apple-touch-icon-precomposed" href="assets/ico/apple-touch-icon-114-precomposed.png"/>
    <link sizes="72x72" rel="apple-touch-icon-precomposed" href="assets/ico/apple-touch-icon-72-precomposed.png"/>
    <link rel="apple-touch-icon-precomposed" href="assets/ico/apple-touch-icon-57-precomposed.png"/>
    <link rel="shortcut icon" href="assets/ico/favicon.png"/>
  </head>
  <body onload="document.body.style.opacity='1'">

	  <script src="assets/js/prism.js"></script>

    <style type="text/css">h2{--heading-prefix:"5.228"}
    h3,h4,h5,h6{--heading-prefix:"5.228"}</style>
    <div id="segment-header" class="segment">    <!-- segment-header -->
      <div class="container">    <!-- container -->
          <!-- Placeholder for child template header declarations -->


        <div id="ig-status">
          <p><span style="font-size:12pt;font-weight:bold">WHO Immunization Implementation Guide</span>
            <br/>
            <span style="display:inline-block;">0.1.0 - CI Build



  <img src="assets/images/001.svg" alt="International flag" title="International" height="16"/>


            </span>
          </p>
        </div>
      </div>   <!-- /container -->
    </div>    <!-- /segment-header -->

    <div id="segment-navbar" class="segment">    <!-- segment-navbar -->
      <div id="stripe"> </div>
      <div class="container">    <!-- container -->
          <!-- HEADER CONTENT -->

        <nav class="navbar navbar-inverse">
            <!-- status-bar -->
          <div class="container">
            <button data-target=".navbar-inverse-collapse" data-toggle="collapse" type="button" class="navbar-toggle">
              <span class="icon-bar"> </span>
              <span class="icon-bar"> </span>
              <span class="icon-bar"> </span>
            </button>
            <a href="http://hl7.org/fhir/R4/index.html" class="navbar-brand hidden">FHIR</a>
            <div class="nav-collapse collapse navbar-inverse-collapse">
              <ul class="nav navbar-nav">
  
  <li class="dropdown">
    <a data-toggle="dropdown" href="index.html" class="dropdown-toggle">Home<b class="caret"></b></a>
    <ul class="dropdown-menu">
      <li><a href="index.html">Summary</a></li>
      <li><a href="changes.html">Changes</a></li>
      <li><a href="dependencies.html">Dependencies</a></li>
      <li><a href="references.html">References</a></li>
      <li><a href="adapting.html">Adapting Guidelines for Country Use</a></li>
    </ul>
  </li>
 
 <li class="dropdown">
    <a data-toggle="dropdown" href="business-requirements.html" class="dropdown-toggle">Business Requirements<b class="caret"></b></a>
    <ul class="dropdown-menu">
      <li><a href="concepts.html">Concepts</a></li>
      <li><a href="personas.html">Generic Personas</a></li>
      <li><a href="scenarios.html">User Scenarios</a></li>
      <li><a href="business-processes.html">Business Processes</a></li>
      <li><a href="dictionary.html">Data Dictionary</a></li>
      <li><a href="decision-logic.html">Decision-support Logic</a></li>
      <li><a href="indicators.html">Indicator and Performance Metrics</a></li>
      <li><a href="functional-requirements.html">Functional Requirements</a></li>    
      <li><a href="non-functional-requirements.html">Non-functional Requirements</a></li>
    </ul>
  </li>

  <li class="dropdown">
    <a data-toggle="dropdown" href="data-models-and-exchange.html" class="dropdown-toggle">Data Models and Exchange<b class="caret"></b></a>
    <ul class="dropdown-menu">
      <li><a href="system-actors.html">System Actors</a></li>
      <li><a href="sequence-diagrams.html">Sequence Diagrams</a></li>
      <li><a href="transactions.html">Transactions</a></li>
      <li><a href="indicators-measures.html">Indicators and Measures</a></li>
      <li><a href="codings.html">Codings</a></li>
    </ul>
  </li>
  <li class="dropdown">
    <a data-toggle="dropdown" href="deployment.html" class="dropdown-toggle"> Deployment<b class="caret"></b></a>
    <ul class="dropdown-menu">
      <li><a href="security-privacy.html">Security and Privacy Considerations</a></li>
      <li><a href="testing.html">Testing</a></li>
      <li><a href="test-data.html">Test Data</a></li>
      <li><a href="reference-implementations.html">Reference Implementations</a></li>
      <li><a href="downloads.html">Downloads</a></li>
    </ul>
  </li>

  <li class="dropdown">
    <a data-toggle="dropdown" href="deployment.html" class="dropdown-toggle"> Indices<b class="caret"></b></a>
    <ul class="dropdown-menu">
      <li><a href="artifacts.html">Artifact Index</a></li>
        <!-- <li><a href="maps.html">Mappings</a></li> -->
    </ul>
  </li>
</ul>

            </div>    <!-- /.nav-collapse -->
          </div>    <!-- /.container -->
        </nav>    <!-- /.navbar -->
        <!-- /HEADER CONTENT -->
      </div>    <!-- /container -->
    </div>    <!-- /segment-navbar -->
      <!-- status-bar -->

    <div id="segment-breadcrumb" class="segment">    <!-- segment-breadcrumb -->
      <div class="container">    <!-- container -->
        <ul class="breadcrumb">
          <li><a href="toc.html"><b>Table of Contents</b></a></li><li><a href="artifacts.html"><b>Artifacts Summary</b></a></li><li><b>IMMZDT16</b></li>

        </ul>
      </div>    <!-- /container -->
    </div>    <!-- /segment-breadcrumb -->

    <a name="top"> </a>
    <div id="segment-content" class="segment">    <!-- segment-content -->
      <div class="container">    <!-- container -->
        <div class="row">
          <div class="inner-wrapper">

<div class="col-12">
    <!-- ReleaseHeader --><p id="publish-box">WHO Immunization Implementation Guide, published by World Health Organization (WHO). This is not an authorized publication; it is the continuous build for version 0.1.0). This version is based on the current content of <a href="https://github.com/WorldHealthOrganization/smart-immunizations">https://github.com/WorldHealthOrganization/smart-immunizations</a> and changes regularly. See the <a href="http://fhir.org/guides/who/smart-immunization/history.html">Directory of published versions</a></p>  <!-- EndReleaseHeader -->
  








<ul class="nav nav-tabs">

  <li class="active">
    <a href="#">Narrative Content</a>
  </li>



  
    <li>
      <a href="Library-library-IMMZDT16.xml.html">XML</a>
    </li>
  


  
    <li>
      <a href="Library-library-IMMZDT16.json.html">JSON</a>
    </li>
  


  
    <li>
      <a href="Library-library-IMMZDT16.ttl.html">TTL</a>
    </li>
  



</ul>

  <a name="root"> </a>

  <h2 id="root">Library: IMMZDT16

  </h2>

  <table class="colsd">

    <tr>
      <td colspan="4"><i>Official URL</i>: <span class="copy-text">http://fhir.org/guides/who/smart-immunization/Library/IMMZDT16<button data-clipboard-text="http://fhir.org/guides/who/smart-immunization/Library/IMMZDT16" title="Click to copy URL" class="btn-copy"/></span>
      </td>
      <td><i>Version</i>:
      <span class="copy-text">0.1.0<button data-clipboard-text="http://fhir.org/guides/who/smart-immunization/Library/IMMZDT16|0.1.0" title="Click to copy versioned URL" class="btn-copy"/></span>
      </td>
    </tr>

    <tr>







      <td colspan="4">
        
          Draft
          
            as of 2023-08-09
          
        
      </td>



      <td><i>Computable Name</i>: <span style="font-family: monospace;">IMMZDT16</span></td>
    </tr>




  </table>



    <!-- insert intro if present -->
  



  <!-- <p>
  Formats: <a href="Library-library-IMMZDT16.xml.html">XML</a>, <a href="Library-library-IMMZDT16.json.html">JSON</a>, <a href="Library-library-IMMZDT16.ttl.html">Turtle</a>
  </p> -->

  


  <div><h2>Related Artifacts</h2><table class="grid"><tr><td>depends-on</td><td>FHIR model information</td><td><code>http://fhir.org/guides/cqf/common/Library/FHIR-ModelInfo|4.0.1</code></td></tr><tr><td>depends-on</td><td>Library FHIRHelpers</td><td><code>http://fhir.org/guides/who/smart-immunization/Library/FHIRHelpers|4.0.1</code></td></tr><tr><td>depends-on</td><td>Library IMMZCom</td><td><a href="Library-IMMZCommon.html">IMMZCommon</a></td></tr><tr><td>depends-on</td><td>Library IMMZc</td><td><a href="Library-IMMZConcepts.html">IMMZConcepts</a></td></tr><tr><td>depends-on</td><td>Library IMMZCon</td><td><a href="Library-IMMZConfig.html">IMMZConfig</a></td></tr><tr><td>depends-on</td><td>Library IMMZvl</td><td><a href="Library-IMMZVaccineLibrary.html">IMMZVaccineLibrary</a></td></tr><tr><td>depends-on</td><td>Library FC</td><td><a href="Library-FHIRCommon.html">FHIRCommon</a></td></tr><tr><td>depends-on</td><td>Value set Meningococcal Vaccine</td><td><code>http://fhir.org/guides/who/smart-immunization/ValueSet/IMMZ.A1.DE10</code></td></tr><tr><td>depends-on</td><td>Value set MenA conjugate vaccine (5µg)</td><td><a href="ValueSet-MenAconjugatevaccine-values.html">MenA conjugate vaccine values</a></td></tr><tr><td>depends-on</td><td>Value set monovalent MenC conjugate</td><td><code>http://fhir.org/guides/who/smart-immunization/ValueSet/monovalentMenCconjugate-values</code></td></tr><tr><td>depends-on</td><td>Value set Quadrivalent conjugate</td><td><a href="ValueSet-Quadrivalentconjugate-values.html">Quadrivalent conjugate values</a></td></tr></table><h2>Parameters</h2><table class="grid"><tr><td>Individual has a continued high risk of exposure (including health workers)</td><td>in</td><td>0</td><td>1</td><td>boolean</td></tr><tr><td>Patient</td><td>out</td><td>0</td><td>1</td><td>Patient</td></tr><tr><td>Meningococcal vaccine immunization history</td><td>out</td><td>0</td><td>*</td><td>Immunization</td></tr><tr><td>No-doses</td><td>out</td><td>0</td><td>1</td><td>boolean</td></tr><tr><td>Current Patient Age in Months</td><td>out</td><td>0</td><td>1</td><td>integer</td></tr><tr><td>There is a compelling reason to vaccinate infants with Meningococcal between 3 to 9 months old</td><td>out</td><td>0</td><td>1</td><td>boolean</td></tr><tr><td>Should vaccinate patient with MenA conjugate vaccine (5µg) because no doses on 2 dose scheme</td><td>out</td><td>0</td><td>1</td><td>boolean</td></tr><tr><td>1 dose</td><td>out</td><td>0</td><td>1</td><td>boolean</td></tr><tr><td>Date last Meningococcal dose given &gt;= 8 weeks</td><td>out</td><td>0</td><td>1</td><td>boolean</td></tr><tr><td>Type of last Meningococcal dose</td><td>out</td><td>0</td><td>1</td><td>CodeableConcept</td></tr><tr><td>MenA conjugate vaccine (5µg)</td><td>out</td><td>0</td><td>*</td><td>Coding</td></tr><tr><td>Should vaccinate patient with MenA conjugate vaccine (5µg) because 1 dose on 2 dose scheme</td><td>out</td><td>0</td><td>1</td><td>boolean</td></tr><tr><td>Meningococcal vaccine immunization history = No-doses</td><td>out</td><td>0</td><td>1</td><td>boolean</td></tr><tr><td>Region recommends Meningococcal vaccination</td><td>out</td><td>0</td><td>1</td><td>boolean</td></tr><tr><td>Should vaccinate patient with MenA conjugate vaccine (5µg) on 1 dose scheme</td><td>out</td><td>0</td><td>1</td><td>boolean</td></tr><tr><td>Patient has completed MenA primary series</td><td>out</td><td>0</td><td>1</td><td>boolean</td></tr><tr><td>Date last Meningococcal dose given &gt;= 3 years</td><td>out</td><td>0</td><td>1</td><td>boolean</td></tr><tr><td>Date last Meningococcal dose given &lt;= 5 years</td><td>out</td><td>0</td><td>1</td><td>boolean</td></tr><tr><td>Age when patient received 1st dose</td><td>out</td><td>0</td><td>1</td><td>integer</td></tr><tr><td>Patient Has Not Received MenA Booster</td><td>out</td><td>0</td><td>1</td><td>boolean</td></tr><tr><td>Should vaccinate patient with MenA conjugate vaccine (5µg) non-recurring booster 3-5 years after last shot</td><td>out</td><td>0</td><td>1</td><td>boolean</td></tr><tr><td>Should vaccinate patient with monovalent MenC conjugate vaccine because no dose on 1 dose scheme</td><td>out</td><td>0</td><td>1</td><td>boolean</td></tr><tr><td>Should vaccinate patient with monovalent MenC conjugate vaccine because no dose on 2 dose scheme</td><td>out</td><td>0</td><td>1</td><td>boolean</td></tr><tr><td>monovalent MenC conjugate</td><td>out</td><td>0</td><td>*</td><td>Coding</td></tr><tr><td>Should vaccinate patient with monovalent MenC conjugate vaccine because 1 dose on 2 dose scheme</td><td>out</td><td>0</td><td>1</td><td>boolean</td></tr><tr><td>2 doses</td><td>out</td><td>0</td><td>1</td><td>boolean</td></tr><tr><td>Date last Meningococcal dose given &gt;= 1 year</td><td>out</td><td>0</td><td>1</td><td>boolean</td></tr><tr><td>2 months</td><td>out</td><td>0</td><td>1</td><td>Quantity</td></tr><tr><td>11 months</td><td>out</td><td>0</td><td>1</td><td>Quantity</td></tr><tr><td>Patient Has Not Received 1st MenC Booster</td><td>out</td><td>0</td><td>1</td><td>boolean</td></tr><tr><td>Patient has completed MenC primary series</td><td>out</td><td>0</td><td>1</td><td>boolean</td></tr><tr><td>Should vaccinate patient with monovalent MenC conjugate vaccine non-recurring booster because 1 year after last shot</td><td>out</td><td>0</td><td>1</td><td>boolean</td></tr><tr><td>Patient Has Not Received 2nd MenC Booster</td><td>out</td><td>0</td><td>1</td><td>boolean</td></tr><tr><td>Should vaccinate patient with monovalent MenC conjugate non-recurring booster 3-5 years after last shot</td><td>out</td><td>0</td><td>1</td><td>boolean</td></tr><tr><td>Current Patient Age in Years</td><td>out</td><td>0</td><td>1</td><td>integer</td></tr><tr><td>Should vaccinate patient with Quadrivalent conjugate vaccines (A,C,W135,Y-D and A,C,W135,Y-CRM) because no dose on 1 dose scheme</td><td>out</td><td>0</td><td>1</td><td>boolean</td></tr><tr><td>Should vaccinate patient with Quadrivalent conjugate vaccines (A,C,W135,Y-D) because no dose on 2 dose scheme</td><td>out</td><td>0</td><td>1</td><td>boolean</td></tr><tr><td>Date last Meningococcal dose given</td><td>out</td><td>0</td><td>1</td><td>date</td></tr><tr><td>12 weeks</td><td>out</td><td>0</td><td>1</td><td>Quantity</td></tr><tr><td>Date last Meningococcal dose given &gt;= 12 weeks</td><td>out</td><td>0</td><td>1</td><td>boolean</td></tr><tr><td>Quadrivalent conjugate</td><td>out</td><td>0</td><td>*</td><td>Coding</td></tr><tr><td>Should vaccinate patient with Quadrivalent conjugate vaccines (A,C,W135,Y-D) on 2 dose scheme</td><td>out</td><td>0</td><td>1</td><td>boolean</td></tr><tr><td>9 months</td><td>out</td><td>0</td><td>1</td><td>Quantity</td></tr><tr><td>23 months</td><td>out</td><td>0</td><td>1</td><td>Quantity</td></tr><tr><td>2 years</td><td>out</td><td>0</td><td>1</td><td>Quantity</td></tr><tr><td>Patient Has Not Received 1st Quadrivalent conjugate Booster</td><td>out</td><td>0</td><td>1</td><td>boolean</td></tr><tr><td>Patient has completed Quadrivalent conjugate primary series</td><td>out</td><td>0</td><td>1</td><td>boolean</td></tr><tr><td>Should vaccinate patient with Quadrivalent conjugate vaccines (A,C,W135,Y-D) non-recurring booster 3-5 years after last shot</td><td>out</td><td>0</td><td>1</td><td>boolean</td></tr></table><h2>Data Requirements</h2><table class="grid"><tr><td colspan="2"><b>Type</b>: <a href="http://hl7.org/fhir/R4/patient.html">Patient</a> (<a href="http://hl7.org/fhir/R4/patient.html">Patient</a>)</td></tr></table><table class="grid"><tr><td colspan="2"><b>Type</b>: <a href="http://hl7.org/fhir/R4/immunization.html">Immunization</a> (<a href="http://hl7.org/fhir/R4/immunization.html">Immunization</a>)</td></tr></table><h2>Contents</h2><p><code>text/cql</code></p><pre><code>/*
 * Library: IMMZDT16 (IMMZ.DT.16.Meningococcal)
 * Rule: If child or person has not been vaccinated, give Meningococcal vaccine according to the defined schedule 
 * Trigger: Patient has never received Meningococcal vaccination
 */
library IMMZDT16
// Start Skeleton CQL
using FHIR version '4.0.1'
include FHIRHelpers version '4.0.1'
include IMMZCommon called IMMZCom
include IMMZConcepts called IMMZc
include IMMZConfig called IMMZCon
include IMMZVaccineLibrary called IMMZvl
include FHIRCommon called FC
// End Skeleton CQL
parameter "Individual has a continued high risk of exposure (including health workers)" Boolean default false
context Patient


/* 
 * @dataElement Meningococcal vaccine immunization history
 */
define "Meningococcal vaccine immunization history":
	IMMZCom."Meningococcal Doses Administered to Patient"

/* 
 * @dataElement No-doses
 */
define "No-doses":
	not exists("Meningococcal vaccine immunization history")

/* 
 * @dataElement Current Patient Age in Months
 */
define "Current Patient Age in Months":
	IMMZCom."Current Patient Age In Months"

/* 
 * @dataElement There is a compelling reason to vaccinate infants with Meningococcal between 3 to 9 months old
 */
define "There is a compelling reason to vaccinate infants with Meningococcal between 3 to 9 months old":
	IMMZCon."There is a compelling reason to vaccinate infants with Meningococcal between 3 to 9 months old"
	//Seek clarity 

/*
 * Rule: Should vaccinate patient with MenA conjugate vaccine (5µg) because no doses on 2 dose scheme
 * Annotations:
 * 	 - Provide Meningococcal immunizations – using the "MenA conjugate vaccine (5µg) immunization – NO PREVIOUS" schedule (2 dose scheme)
 * Outputs:
 * 	 - Immunize Patient for Meningococcal - No Doses
 * References:
 * 	- WHO recommendations for routine immunization - summary tables: https://www.who.int/teams/immunization-vaccines-and-biologicals/policies/who-recommendations-for-routine-immunization---summary-tables
 * Logic:
 *	 (((("Meningococcal vaccine immunization history" = "No-doses") and ("Current Patient Age in Months" &gt;= 3)) and ("Current Patient Age in Months" &lt; 9)) and ("There is a compelling reason to vaccinate infants with Meningococcal between 3 to 9 months old" = true))
 */
define "Should vaccinate patient with MenA conjugate vaccine (5µg) because no doses on 2 dose scheme":
	(((("No-doses") and ("Current Patient Age in Months" &gt;= 3)) and ("Current Patient Age in Months" &lt; 9)) and ("There is a compelling reason to vaccinate infants with Meningococcal between 3 to 9 months old"))

/* 
 * @dataElement 1 dose
 */
define "1 dose":
	IMMZCom."Number of Meningococcal Doses Administered to Patient" = 1

/* 
 * @dataElement Date last Meningococcal dose given &gt;= 8 weeks
 */
define "Date last Meningococcal dose given &gt;= 8 weeks":
	 IMMZCom."Date last Meningococcal dose Administered to Patient" equal 8 'weeks' before Today()
	 or IMMZCom."Date last Meningococcal dose Administered to Patient" more than 8 'weeks' before Today()

/* 
 * @dataElement Type of last Meningococcal dose
 */
define "Type of last Meningococcal dose":
	IMMZCom."Type of last Meningococcal Dose Administered to Patient" 

/* 
 * @dataElement MenA conjugate vaccine (5µg)
 */
define "MenA conjugate vaccine (5µg)":
	IMMZc."MenA conjugate vaccine (5µg)"

/*
 * Rule: Should vaccinate patient with MenA conjugate vaccine (5µg) because 1 dose on 2 dose scheme
 * Annotations:
 * 	 - Provide Meningococcal immunizations – using the "MenA conjugate vaccine (5µg) immunization – 1 PREVIOUS" schedule (2 dose scheme)
 * Outputs:
 * 	 - Immunize Patient for Meningococcal - 1 Dose
 * References:
 * 	- WHO recommendations for routine immunization - summary tables: https://www.who.int/teams/immunization-vaccines-and-biologicals/policies/who-recommendations-for-routine-immunization---summary-tables
 * Logic:
 *	 (((((("Meningococcal vaccine immunization history" = "1 dose") and ("Current Patient Age in Months" &gt;= 3)) and ("Current Patient Age in Months" &lt; 9)) and ("Date last Meningococcal dose given" &gt;= "8 weeks" = true)) and ("Type of last Meningococcal dose" = "MenA conjugate vaccine (5µg)")) and ("There is a compelling reason to vaccinate infants with Meningococcal between 3 to 9 months old" = true))
 */
define "Should vaccinate patient with MenA conjugate vaccine (5µg) because 1 dose on 2 dose scheme":
	(((((("1 dose") and ("Current Patient Age in Months" &gt;= 3)) and ("Current Patient Age in Months" &lt; 9)) and ("Date last Meningococcal dose given &gt;= 8 weeks")) and ("Type of last Meningococcal dose" in IMMZc."MenA conjugate vaccine (5µg)")) and ("There is a compelling reason to vaccinate infants with Meningococcal between 3 to 9 months old" = true))

/* 
 * @dataElement Meningococcal vaccine immunization history = No-doses
 */
define "Meningococcal vaccine immunization history = No-doses":
	not exists("Meningococcal vaccine immunization history")

/* 
 * @dataElement Region recommends Meningococcal vaccination
 */
define "Region recommends Meningococcal vaccination":
	IMMZCon."Region recommends Meningococcal vaccination"

/*
 * Rule: Should vaccinate patient with MenA conjugate vaccine (5µg) on 1 dose scheme
 * Annotations:
 * 	 - Provide Meningococcal immunizations – using the "MenA conjugate vaccine (5µg) immunization – NO PREVIOUS" schedule (1 dose scheme)
 * Outputs:
 * 	 - Immunize Patient for Meningococcal - No Doses
 * References:
 * 	- WHO recommendations for routine immunization - summary tables: https://www.who.int/teams/immunization-vaccines-and-biologicals/policies/who-recommendations-for-routine-immunization---summary-tables
 * Logic:
 *	 (((("Meningococcal vaccine immunization history" = "No-doses" = true) and ("Current Patient Age in Months" &gt;= 9)) and ("Current Patient Age in Months" &lt;= 24)) and ("Region recommends Meningococcal vaccination" = true))
 */
define "Should vaccinate patient with MenA conjugate vaccine (5µg) on 1 dose scheme":
	(((("Meningococcal vaccine immunization history = No-doses") and ("Current Patient Age in Months" &gt;= 9)) and ("Current Patient Age in Months" &lt;= 24)) and ("Region recommends Meningococcal vaccination"))

/* 
 * @dataElement Patient has completed Meningococcal primary series
 * TODO: Update so that this is true if &lt; 9 months then doses &gt;= 2 otherwise &gt;= 1
 */
define "Patient has completed MenA primary series":
	Max(IMMZCom."Meningococcal Doses Administered to Patient" I where 
		I.vaccineCode in IMMZc."MenA conjugate vaccine (5µg)" 
	return (singleton from I.protocolApplied).doseNumber as FHIR.positiveInt) &gt;= 3

/* 
 * @dataElement Date last Meningococcal dose given &gt;= 3 years
 */
define "Date last Meningococcal dose given &gt;= 3 years":
	IMMZCom."Date last Meningococcal dose Administered to Patient" equal 3 'years' before Today()
	or IMMZCom."Date last Meningococcal dose Administered to Patient" more than 3 'years' before Today()

/* 
 * @dataElement Date last Meningococcal dose given &lt;= 5 years
 */
define "Date last Meningococcal dose given &lt;= 5 years":
	IMMZCom."Date last Meningococcal dose Administered to Patient" equal 5 'years' before Today()
	or IMMZCom."Date last Meningococcal dose Administered to Patient" less than 5 'years' before Today()

/** 
 * @dataElement Patient not received a MenA booster
 */
define "Patient Has Not Received MenA Booster":
	not exists(
		IMMZCom."Meningococcal Doses Administered to Patient" I 
		where I.vaccineCode in IMMZc."MenA conjugate vaccine (5µg)" 
		and exists(I.protocolApplied P 
			where ("Age when patient received 1st dose" &lt; 9 and P.doseNumber = 3) or
			("Age when patient received 1st dose" &gt;= 9 and P.doseNumber = 2)
			))



/*
 * Rule: Should vaccinate patient with MenA conjugate vaccine (5µg) non-recurring booster 3-5 years after last shot
 * Annotations:
 * 	 - Provide Meningococcal immunizations – using the "MenA conjugate vaccine (5µg) immunization – Single non-recurring BOOSTER" schedule (1 dose booster)
 * Outputs:
 * 	 - Immunize Patient for Meningococcal - Non-recurring Booster
 * References:
 * 	- WHO recommendations for routine immunization - summary tables: https://www.who.int/teams/immunization-vaccines-and-biologicals/policies/who-recommendations-for-routine-immunization---summary-tables
 * Logic:
 *	 (((((("Patient has completed Meningococcal primary series" = true) and ("Date last Meningococcal dose given" &gt;= "3 years" = true)) and ("Date last Meningococcal dose given" &lt;= "5 years" = true)) and ("Type of last Meningococcal dose" = "MenA conjugate vaccine (5µg)")) and ("Individual has a continued high risk of exposure (including health workers)" = true)) and ("Region recommends Meningococcal vaccination" = true))
 */
define "Should vaccinate patient with MenA conjugate vaccine (5µg) non-recurring booster 3-5 years after last shot":
	(((((("Patient has completed MenA primary series") and ("Date last Meningococcal dose given &gt;= 3 years")) and ("Date last Meningococcal dose given &lt;= 5 years")) and ("Type of last Meningococcal dose" in IMMZc."MenA conjugate vaccine (5µg)")) and ("Individual has a continued high risk of exposure (including health workers)")) and ("Region recommends Meningococcal vaccination"))
	and "Patient Has Not Received MenA Booster"

/*
 * Rule: Should vaccinate patient with monovalent MenC conjugate vaccine because no dose on 1 dose scheme
 * Annotations:
 * 	 - Provide Meningococcal immunizations – using the "monovalent MenC conjugate vaccine immunization – NO PREVIOUS" schedule (1 dose scheme)
 * Outputs:
 * 	 - Immunize Patient for Meningococcal - No Doses
 * References:
 * 	- WHO recommendations for routine immunization - summary tables: https://www.who.int/teams/immunization-vaccines-and-biologicals/policies/who-recommendations-for-routine-immunization---summary-tables
 * Logic:
 *	 ((("Meningococcal vaccine immunization history" = "No-doses") and ("Current Patient Age in Months" &gt;= 12)) and ("Region recommends Meningococcal vaccination" = true))
 */
define "Should vaccinate patient with monovalent MenC conjugate vaccine because no dose on 1 dose scheme":
	((("No-doses") and ("Current Patient Age in Months" &gt;= 12)) and ("Region recommends Meningococcal vaccination"))

/*
 * Rule: Should vaccinate patient with monovalent MenC conjugate vaccine because no dose on 2 dose scheme
 * Annotations:
 * 	 - Provide Meningococcal immunizations – using the "monovalent MenC conjugate vaccine immunization – NO PREVIOUS" schedule (2 dose scheme)
 * Outputs:
 * 	 - Immunize Patient for Meningococcal - No Doses
 * References:
 * 	- WHO recommendations for routine immunization - summary tables: https://www.who.int/teams/immunization-vaccines-and-biologicals/policies/who-recommendations-for-routine-immunization---summary-tables
 * Logic:
 *	 (((("Meningococcal vaccine immunization history" = "No-doses") and ("Current Patient Age in Months" &gt;= 2)) and ("Current Patient Age in Months" &lt;= 11)) and ("Region recommends Meningococcal vaccination" = true))
 */
define "Should vaccinate patient with monovalent MenC conjugate vaccine because no dose on 2 dose scheme":
	(((("No-doses") and ("Current Patient Age in Months" &gt;= 2)) and ("Current Patient Age in Months" &lt;= 11)) and ("Region recommends Meningococcal vaccination"))

/* 
 * @dataElement monovalent MenC conjugate
 */
define "monovalent MenC conjugate":
	IMMZc."monovalent MenC conjugate"


/*
 * Rule: Should vaccinate patient with monovalent MenC conjugate vaccine because 1 dose on 2 dose scheme
 * Annotations:
 * 	 - Provide Meningococcal immunizations – using the "monovalent MenC conjugate vaccine immunization – 1 PREVIOUS" schedule (2 dose scheme)
 * Outputs:
 * 	 - Immunize Patient for Meningococcal - 1 Dose
 * References:
 * 	- WHO recommendations for routine immunization - summary tables: https://www.who.int/teams/immunization-vaccines-and-biologicals/policies/who-recommendations-for-routine-immunization---summary-tables
 * Logic:
 *	 ((((("Meningococcal vaccine immunization history" = "1 dose") and ("Current Patient Age in Months" &gt;= 2)) and ("Current Patient Age in Months" &lt;= 11)) and ("Date last Meningococcal dose given" &gt;= "8 weeks" = true)) and ("Type of last Meningococcal dose" = "monovalent MenC conjugate"))
 */
define "Should vaccinate patient with monovalent MenC conjugate vaccine because 1 dose on 2 dose scheme":
	((((("1 dose") and ("Current Patient Age in Months" &gt;= 2)) and ("Current Patient Age in Months" &lt;= 11)) and ("Date last Meningococcal dose given &gt;= 8 weeks")) and ("Type of last Meningococcal dose" in IMMZc."monovalent MenC conjugate"))

/* 
 * @dataElement 2 doses
 */
define "2 doses":
	IMMZCom."Number of Meningococcal Doses Administered to Patient" = 2

/* 
 * @dataElement Date last Meningococcal dose given &gt;= 1 year
 */
define "Date last Meningococcal dose given &gt;= 1 year":
	IMMZCom."Date last Meningococcal dose Administered to Patient" equal 1 'years' before Today()
	or IMMZCom."Date last Meningococcal dose Administered to Patient" more than 1 'years' before Today()

/* 
 * @dataElement Age when patient received 1st dose
 */
define "Age when patient received 1st dose":
	AgeInMonthsAt(First(IMMZCom."Meningococcal Doses Administered to Patient" I
		where (singleton from I.protocolApplied).doseNumber = 1
		return I.occurrence)) // TODO: Define this

/* 
 * @dataElement 2 months
 */
define "2 months":
	2 'months'

/* 
 * @dataElement 11 months
 */
define "11 months":
	11 'months'

/**
 * @dataElement Patient has received dose 3 (booster) if beween 2 and 11 months or dose 2 (booster) if &gt; 12 months
 */
define "Patient Has Not Received 1st MenC Booster":
	not exists(
		IMMZCom."Meningococcal Doses Administered to Patient" I 
		where I.vaccineCode in IMMZc."monovalent MenC conjugate" 
		and exists(I.protocolApplied P 
			where ("Age when patient received 1st dose" between "2 months" and "11 months" and P.doseNumber = 3) or
			("Age when patient received 1st dose" &gt; "11 months" and P.doseNumber = 2)
			))


/**
 * @dataElement Patient has received dose 3 (booster) if beween 2 and 11 months or dose 2 (booster) if &gt; 12 months
 */
define "Patient has completed MenC primary series":
	not exists(
		IMMZCom."Meningococcal Doses Administered to Patient" I 
		where I.vaccineCode in IMMZc."monovalent MenC conjugate" 
		and exists(I.protocolApplied P 
			where ("Age when patient received 1st dose" between "2 months" and "11 months" and P.doseNumber = 2) or
			("Age when patient received 1st dose" &gt; "11 months" and P.doseNumber = 1)
			))

/*
 * Rule: Should vaccinate patient with monovalent MenC conjugate vaccine non-recurring booster because 1 year after last shot
 * Annotations:
 * 	 - Provide Meningococcal immunizations – using the "monovalent MenC conjugate vaccine immunization – Single non-recurring BOOSTER" schedule (1 dose booster)
 * Outputs:
 * 	 - Immunize Patient for Meningococcal - Non-recurring Booster
 * References:
 * 	- WHO recommendations for routine immunization - summary tables: https://www.who.int/teams/immunization-vaccines-and-biologicals/policies/who-recommendations-for-routine-immunization---summary-tables
 * Logic:
 *	 (((((("Meningococcal vaccine immunization history" = "2 doses") and ("Date last Meningococcal dose given" &gt;= "1 year" = true)) and ("Type of last Meningococcal dose" = "monovalent MenC conjugate")) and ("Age when patient received 1st dose" &gt;= "2 months")) and ("Age when patient received 1st dose" &lt;= "11 months")) and ("Region recommends Meningococcal vaccination" = true))
 */
define "Should vaccinate patient with monovalent MenC conjugate vaccine non-recurring booster because 1 year after last shot":
	(((((("2 doses") and ("Date last Meningococcal dose given &gt;= 1 year")) and ("Type of last Meningococcal dose" in IMMZc."monovalent MenC conjugate")) and ("Age when patient received 1st dose" &gt;= "2 months")) and ("Age when patient received 1st dose" &lt;= "11 months")) and ("Region recommends Meningococcal vaccination"))
	and "Patient Has Not Received 1st MenC Booster"

/**
 * @dataElement Patient has received dose 3 (booster) if beween 2 and 11 months or dose 2 (booster) if &gt; 12 months
 */
define "Patient Has Not Received 2nd MenC Booster":
	not exists(
		IMMZCom."Meningococcal Doses Administered to Patient" I 
		where I.vaccineCode in IMMZc."monovalent MenC conjugate" 
		and exists(I.protocolApplied P 
			where ("Age when patient received 1st dose" between "2 months" and "11 months" and P.doseNumber = 4) or
			("Age when patient received 1st dose" &gt; "11 months" and P.doseNumber = 3)
			))

/*
 * Rule: Should vaccinate patient with monovalent MenC conjugate non-recurring booster 3-5 years after last shot
 * Annotations:
 * 	 - Provide Meningococcal immunizations – using the "monovalent MenC conjugate immunization – Single non-recurring BOOSTER" schedule (1 dose booster)
 * Outputs:
 * 	 - Immunize Patient for Meningococcal - Non-recurring Booster
 * References:
 * 	- WHO recommendations for routine immunization - summary tables: https://www.who.int/teams/immunization-vaccines-and-biologicals/policies/who-recommendations-for-routine-immunization---summary-tables
 * Logic:
 *	 (((((("Patient has completed Meningococcal primary series" = true) and ("Date last Meningococcal dose given" &gt;= "3 years" = true)) and ("Date last Meningococcal dose given" &lt;= "5 years" = true)) and ("Type of last Meningococcal dose" = "monovalent MenC conjugate")) and ("Individual has a continued high risk of exposure (including health workers)" = true)) and ("Region recommends Meningococcal vaccination" = true))
 */
define "Should vaccinate patient with monovalent MenC conjugate non-recurring booster 3-5 years after last shot":
	(((((("Patient has completed MenC primary series" = true) and ("Date last Meningococcal dose given &gt;= 3 years")) and ("Date last Meningococcal dose given &lt;= 5 years")) and ("Type of last Meningococcal dose" in IMMZc."monovalent MenC conjugate")) and ("Individual has a continued high risk of exposure (including health workers)")) and ("Region recommends Meningococcal vaccination"))
	and "Patient Has Not Received 2nd MenC Booster"

/* 
 * @dataElement Current Patient Age in Years
 */
define "Current Patient Age in Years":
	IMMZCom."Current Patient Age In Years"

/*
 * Rule: Should vaccinate patient with Quadrivalent conjugate vaccines (A,C,W135,Y-D and A,C,W135,Y-CRM) because no dose on 1 dose scheme
 * Annotations:
 * 	 - Provide Meningococcal immunizations – using the "Quadrivalent conjugate vaccines (A,C,W135,Y-D and A,C,W135,Y-CRM) immunization – NO PREVIOUS" schedule (1 dose scheme)
 * Outputs:
 * 	 - Immunize Patient for Meningococcal - No Doses
 * References:
 * 	- WHO recommendations for routine immunization - summary tables: https://www.who.int/teams/immunization-vaccines-and-biologicals/policies/who-recommendations-for-routine-immunization---summary-tables
 * Logic:
 *	 ((("Meningococcal vaccine immunization history" = "No-doses") and ("Current Patient Age in Years" &gt;= 2)) and ("Region recommends Meningococcal vaccination" = true))
 */
define "Should vaccinate patient with Quadrivalent conjugate vaccines (A,C,W135,Y-D and A,C,W135,Y-CRM) because no dose on 1 dose scheme":
	((("No-doses") and ("Current Patient Age in Years" &gt;= 2)) and ("Region recommends Meningococcal vaccination"))

/*
 * Rule: Should vaccinate patient with Quadrivalent conjugate vaccines (A,C,W135,Y-D) because no dose on 2 dose scheme
 * Annotations:
 * 	 - Provide Meningococcal immunizations – using the "Quadrivalent conjugate vaccines (A,C,W135,Y-D) immunization – NO PREVIOUS" schedule (2 dose scheme)
 * Outputs:
 * 	 - Immunize Patient for Meningococcal - No Doses
 * References:
 * 	- WHO recommendations for routine immunization - summary tables: https://www.who.int/teams/immunization-vaccines-and-biologicals/policies/who-recommendations-for-routine-immunization---summary-tables
 * Logic:
 *	 (((("Meningococcal vaccine immunization history" = "No-doses") and ("Current Patient Age in Months" &gt;= 9)) and ("Current Patient Age in Months" &lt;= 23)) and ("Region recommends Meningococcal vaccination" = true))
 */
define "Should vaccinate patient with Quadrivalent conjugate vaccines (A,C,W135,Y-D) because no dose on 2 dose scheme":
	(((("No-doses") and ("Current Patient Age in Months" &gt;= 9)) and ("Current Patient Age in Months" &lt;= 23)) and ("Region recommends Meningococcal vaccination"))

/* 
 * @dataElement Date last Meningococcal dose given 
 */
define "Date last Meningococcal dose given":
	 IMMZCom."Date last Meningococcal dose Administered to Patient"

/* 
 * @dataElement 12 weeks
 */
define "12 weeks":
	12 'weeks'

/* 
 * @dataElement Date last Meningococcal dose given &gt;= 12 weeks
 */
define "Date last Meningococcal dose given &gt;= 12 weeks":
	IMMZCom."Date last Meningococcal dose Administered to Patient" equal 12 'weeks' before Today()
	or IMMZCom."Date last Meningococcal dose Administered to Patient" more than 12 'weeks' before Today()
/* 
 * @dataElement Quadrivalent conjugate
 */
define "Quadrivalent conjugate":
	IMMZc."Quadrivalent conjugate"

/*
 * Rule: Should vaccinate patient with Quadrivalent conjugate vaccines (A,C,W135,Y-D) on 2 dose scheme
 * Annotations:
 * 	 - Provide Meningococcal immunizations – using the "Quadrivalent conjugate vaccines (A,C,W135,Y-D) immunization – 1 PREVIOUS" schedule (2 dose scheme)
 * Outputs:
 * 	 - Immunize Patient for Meningococcal - 1 Dose
 * References:
 * 	- WHO recommendations for routine immunization - summary tables: https://www.who.int/teams/immunization-vaccines-and-biologicals/policies/who-recommendations-for-routine-immunization---summary-tables
 * Logic:
 *	 ((("Meningococcal vaccine immunization history" = "1 dose") and ("Date last Meningococcal dose given " &gt;= "12 weeks")) and ("Type of last Meningococcal dose" = "Quadrivalent conjugate"))
 */
define "Should vaccinate patient with Quadrivalent conjugate vaccines (A,C,W135,Y-D) on 2 dose scheme":
	((("1 dose") and ("Date last Meningococcal dose given &gt;= 12 weeks")) and ("Type of last Meningococcal dose" in IMMZc."Quadrivalent conjugate"))

/** 
 * @dataElement 9 months
*/
define "9 months":
	9 month

	
/** 
 * @dataElement 23 months
*/
define "23 months":
	23 month

/**
 * @dataElement 2 years
 */
define "2 years":
	2 year

/**
 * @dataElement Patient has received dose 3 (booster) if beween 2 and 11 months or dose 2 (booster) if &gt; 12 months
 */
define "Patient Has Not Received 1st Quadrivalent conjugate Booster":
	not exists(
		IMMZCom."Meningococcal Doses Administered to Patient" I 
		where I.vaccineCode in IMMZc."Quadrivalent conjugate" 
		and exists(I.protocolApplied P 
			where ("Age when patient received 1st dose" between "9 months" and "23 months" and P.doseNumber = 3) or
			("Age when patient received 1st dose" &gt;= "2 years" and P.doseNumber = 2)
			))


/**
 * @dataElement Patient has received dose 3 (booster) if beween 2 and 11 months or dose 2 (booster) if &gt; 12 months
 */
define "Patient has completed Quadrivalent conjugate primary series":
	not exists(
		IMMZCom."Meningococcal Doses Administered to Patient" I 
		where I.vaccineCode in IMMZc."Quadrivalent conjugate" 
		and exists(I.protocolApplied P 
			where ("Age when patient received 1st dose" between "9 months" and "23 months" and P.doseNumber = 2) or
			("Age when patient received 1st dose" &gt;= "2 years" and P.doseNumber = 1)
			))


/*
 * Rule: Should vaccinate patient with Quadrivalent conjugate vaccines (A,C,W135,Y-D) non-recurring booster 3-5 years after last shot
 * Annotations:
 * 	 - Provide Meningococcal immunizations – using the "Quadrivalent conjugate vaccines (A,C,W135,Y-D) immunization – Single non-recurring BOOSTER" schedule (1 dose booster)
 * Outputs:
 * 	 - Immunize Patient for Meningococcal - Non-recurring Booster
 * References:
 * 	- WHO recommendations for routine immunization - summary tables: https://www.who.int/teams/immunization-vaccines-and-biologicals/policies/who-recommendations-for-routine-immunization---summary-tables
 * Logic:
 *	 (((((("Patient has completed Meningococcal primary series" = true) and ("Date last Meningococcal dose given" &gt;= "3 years" = true)) and ("Date last Meningococcal dose given" &lt;= "5 years" = true)) and ("Type of last Meningococcal dose" = "Quadrivalent conjugate")) and ("Individual has a continued high risk of exposure (including health workers)" = true)) and ("Region recommends Meningococcal vaccination" = true))
 */
define "Should vaccinate patient with Quadrivalent conjugate vaccines (A,C,W135,Y-D) non-recurring booster 3-5 years after last shot":
	(((((("Patient has completed Quadrivalent conjugate primary series") and ("Date last Meningococcal dose given &gt;= 3 years")) and ("Date last Meningococcal dose given &lt;= 5 years")) and ("Type of last Meningococcal dose" in IMMZc."Quadrivalent conjugate")) and ("Individual has a continued high risk of exposure (including health workers)")) and ("Region recommends Meningococcal vaccination"))
	and "Patient Has Not Received 1st Quadrivalent conjugate Booster"
</code></pre><p><code>Content not shown - (</code><code>application/elm+xml</code>, size = 213Kb)</p><p><code>Content not shown - (</code><code>application/elm+json</code>, size = 1Mb)</p></div>

    <!-- insert notes if present -->
  



  

</div>
        </div>    <!-- /inner-wrapper -->
      </div>    <!-- /row -->
    </div>    <!-- /container -->
  </div>    <!-- /segment-content -->

  <script src="assets/js/jquery.js" type="text/javascript"> </script>       <!-- note keep space here, otherwise it will be transformed to empty tag -> fails -->
  <script src="assets/js/jquery-ui.min.js" type="text/javascript"> </script>

  <script type="text/javascript">
    $(document).ready(function(){
      if(window.location.hash != "") {
          $('a[href="' + window.location.hash + '"]').click()
      }
    });
  </script>
  <a name="bottom"> </a>
  <div igtool="footer" id="segment-footer" class="segment">    <!-- segment-footer -->
    <div class="container">    <!-- container -->

      <div class="inner-wrapper">
        <p>
          IG &copy; 2021+ <a style="color:var(--footer-hyperlink-text-color)" href="null">World Health Organization (WHO)</a>.  Package who.fhir.immunization#0.1.0 based on <a style="color: var(--footer-hyperlink-text-color)" href="http://hl7.org/fhir/R4/">FHIR 4.0.1</a>. Generated <span title="Wed, Aug 9, 2023 14:35+0000">2023-08-09</span>
          <br/>
          <span style="color: var(--footer-highlight-text-color)"><a name="l1159">​</a>
                      Links: <a style="color: var(--footer-hyperlink-text-color)" href="toc.html">Table of Contents</a> |
                 <a style="color: var(--footer-hyperlink-text-color)" href="qa.html">QA Report</a>
                 
                
| <a style="color: #81BEF7" href="http://fhir.org/guides/who/smart-immunization/history.html" target="_blank">Version History</a> | <a rel="license" style="color: #81BEF7" href="license.html">License</a>
          </span>
        </p>
      </div>    <!-- /inner-wrapper -->
    </div>    <!-- /container -->
  </div>    <!-- /segment-footer -->
  
  <div id="segment-post-footer" class="segment hidden">    <!-- segment-post-footer -->
    <div class="container">    <!-- container -->
    </div>    <!-- /container -->
  </div>    <!-- /segment-post-footer -->
  
    <!-- JS and analytics only. -->
    <!-- Bootstrap core JavaScript
  ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
  <script src="assets/js/bootstrap.min.js" type="text/javascript"> </script>
  <script src="assets/js/respond.min.js" type="text/javascript"> </script>
  <script src="assets/js/anchor.min.js" type="text/javascript"> </script>
  <script src="assets/js/clipboard.min.js" type="text/javascript"> </script>
  <script src="assets/js/clipboard-btn.js" type="text/javascript"> </script>
  <script>anchors.options.visible = 'hover'
anchors.add()</script>
  
  <!-- feedback form - Google forms -->
  <!-- v0.1, 2021-01-09 -->



  <!-- / feedback form -->

    <!-- Analytics Below
  ================================================== -->
  </body>
</html>