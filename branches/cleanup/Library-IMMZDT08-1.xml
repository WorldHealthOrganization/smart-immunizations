<?xml version="1.0" encoding="UTF-8"?>
<library xmlns="urn:hl7-org:elm:r1" xmlns:t="urn:hl7-org:elm-types:r1" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:fhir="http://hl7.org/fhir" xmlns:qdm43="urn:healthit-gov:qdm:v4_3" xmlns:qdm53="urn:healthit-gov:qdm:v5_3" xmlns:a="urn:hl7-org:cql-annotations:r1">
   <annotation translatorVersion="2.7.0" translatorOptions="EnableAnnotations,EnableLocators,DisableListDemotion,DisableListPromotion" xsi:type="a:CqlToElmInfo"/>
   <annotation xsi:type="a:Annotation">
      <a:s r="335">
         <a:s>/*
 * Library: IMMZDT08 (IMMZ.DT.08.Measles)
 * Rule: If the child or patient has not been given MCV1 (at 9 months) and MCV2 (between 15-18 months) vaccination 
 * Trigger: Patient has never received measles vaccination
 */
library IMMZDT08</a:s>
      </a:s>
   </annotation>
   <identifier id="IMMZDT08" system="http://fhir.org/guides/who/smart-immunization"/>
   <schemaIdentifier id="urn:hl7-org:elm" version="r1"/>
   <usings>
      <def localIdentifier="System" uri="urn:hl7-org:elm-types:r1"/>
      <def localId="1" locator="8:1-8:26" localIdentifier="FHIR" uri="http://hl7.org/fhir" version="4.0.1">
         <annotation xsi:type="a:Annotation">
            <a:s r="1">
               <a:s>// Start Skeleton CQL
using </a:s>
               <a:s>
                  <a:s>FHIR</a:s>
               </a:s>
               <a:s> version '4.0.1'</a:s>
            </a:s>
         </annotation>
      </def>
   </usings>
   <includes>
      <def localId="2" locator="9:1-9:35" localIdentifier="FHIRHelpers" path="http://fhir.org/guides/who/smart-immunization/FHIRHelpers" version="4.0.1">
         <annotation xsi:type="a:Annotation">
            <a:s r="2">
               <a:s>include </a:s>
               <a:s>
                  <a:s>FHIRHelpers</a:s>
               </a:s>
               <a:s> version '4.0.1'</a:s>
            </a:s>
         </annotation>
      </def>
      <def localId="3" locator="10:1-10:33" localIdentifier="IMMZCom" path="http://fhir.org/guides/who/smart-immunization/IMMZCommon">
         <annotation xsi:type="a:Annotation">
            <a:s r="3">
               <a:s>include </a:s>
               <a:s>
                  <a:s>IMMZCommon</a:s>
               </a:s>
               <a:s> called IMMZCom</a:s>
            </a:s>
         </annotation>
      </def>
      <def localId="4" locator="11:1-11:33" localIdentifier="IMMZc" path="http://fhir.org/guides/who/smart-immunization/IMMZConcepts">
         <annotation xsi:type="a:Annotation">
            <a:s r="4">
               <a:s>include </a:s>
               <a:s>
                  <a:s>IMMZConcepts</a:s>
               </a:s>
               <a:s> called IMMZc</a:s>
            </a:s>
         </annotation>
      </def>
      <def localId="5" locator="12:1-12:33" localIdentifier="IMMZCon" path="http://fhir.org/guides/who/smart-immunization/IMMZConfig">
         <annotation xsi:type="a:Annotation">
            <a:s r="5">
               <a:s>include </a:s>
               <a:s>
                  <a:s>IMMZConfig</a:s>
               </a:s>
               <a:s> called IMMZCon</a:s>
            </a:s>
         </annotation>
      </def>
      <def localId="6" locator="13:1-13:40" localIdentifier="IMMZvl" path="http://fhir.org/guides/who/smart-immunization/IMMZVaccineLibrary">
         <annotation xsi:type="a:Annotation">
            <a:s r="6">
               <a:s>include </a:s>
               <a:s>
                  <a:s>IMMZVaccineLibrary</a:s>
               </a:s>
               <a:s> called IMMZvl</a:s>
            </a:s>
         </annotation>
      </def>
      <def localId="7" locator="14:1-14:28" localIdentifier="FC" path="http://fhir.org/guides/who/smart-immunization/FHIRCommon">
         <annotation xsi:type="a:Annotation">
            <a:s r="7">
               <a:s>include </a:s>
               <a:s>
                  <a:s>FHIRCommon</a:s>
               </a:s>
               <a:s> called FC</a:s>
            </a:s>
         </annotation>
      </def>
   </includes>
   <parameters>
      <def localId="10" locator="16:1-16:83" name="Individual is at high risk of contracting measles" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="10">
               <a:s>parameter &quot;Individual is at high risk of contracting measles&quot; </a:s>
               <a:s r="9">
                  <a:s>Boolean</a:s>
               </a:s>
               <a:s r="8"> default false</a:s>
            </a:s>
         </annotation>
         <default localId="8" locator="16:79-16:83" valueType="t:Boolean" value="false" xsi:type="Literal"/>
         <parameterTypeSpecifier localId="9" locator="16:63-16:69" name="t:Boolean" xsi:type="NamedTypeSpecifier"/>
      </def>
      <def localId="13" locator="17:1-17:102" name="Individual is travelling to a country experiencing measles outbreaks" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="13">
               <a:s>parameter &quot;Individual is travelling to a country experiencing measles outbreaks&quot; </a:s>
               <a:s r="12">
                  <a:s>Boolean</a:s>
               </a:s>
               <a:s r="11"> default false</a:s>
            </a:s>
         </annotation>
         <default localId="11" locator="17:98-17:102" valueType="t:Boolean" value="false" xsi:type="Literal"/>
         <parameterTypeSpecifier localId="12" locator="17:82-17:88" name="t:Boolean" xsi:type="NamedTypeSpecifier"/>
      </def>
      <def localId="16" locator="18:1-18:83" name="Individual is known to be HIV-infected or exposed" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="16">
               <a:s>parameter &quot;Individual is known to be HIV-infected or exposed&quot; </a:s>
               <a:s r="15">
                  <a:s>Boolean</a:s>
               </a:s>
               <a:s r="14"> default false</a:s>
            </a:s>
         </annotation>
         <default localId="14" locator="18:79-18:83" valueType="t:Boolean" value="false" xsi:type="Literal"/>
         <parameterTypeSpecifier localId="15" locator="18:63-18:69" name="t:Boolean" xsi:type="NamedTypeSpecifier"/>
      </def>
      <def localId="19" locator="19:1-19:68" name="Immune reconstitution was achieved" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="19">
               <a:s>parameter &quot;Immune reconstitution was achieved&quot; </a:s>
               <a:s r="18">
                  <a:s>Boolean</a:s>
               </a:s>
               <a:s r="17"> default false</a:s>
            </a:s>
         </annotation>
         <default localId="17" locator="19:64-19:68" valueType="t:Boolean" value="false" xsi:type="Literal"/>
         <parameterTypeSpecifier localId="18" locator="19:48-19:54" name="t:Boolean" xsi:type="NamedTypeSpecifier"/>
      </def>
   </parameters>
   <statements>
      <def locator="22:1-22:15" name="Patient" context="Patient">
         <expression xsi:type="SingletonFrom">
            <operand locator="22:1-22:15" dataType="fhir:Patient" templateId="http://hl7.org/fhir/StructureDefinition/Patient" xsi:type="Retrieve"/>
         </expression>
      </def>
      <def localId="22" locator="101:1-102:19" name="MCV Dose Contraindicated" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="22">
               <a:s>define &quot;MCV Dose Contraindicated&quot;:
	</a:s>
               <a:s r="21">
                  <a:s r="20">
                     <a:s>IMMZCom</a:s>
                  </a:s>
                  <a:s>.</a:s>
                  <a:s r="21">
                     <a:s>&quot;Pregnant&quot;</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="21" locator="102:2-102:19" name="Pregnant" libraryName="IMMZCom" xsi:type="ExpressionRef"/>
      </def>
      <def localId="43" locator="107:1-110:40" name="MCV Doses Administered to Patient" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="43">
               <a:s>/**
 * @dataElement MCV containing Doses Administered to Patient
 */
define &quot;MCV Doses Administered to Patient&quot;:
  </a:s>
               <a:s r="42">
                  <a:s>
                     <a:s r="36">
                        <a:s r="35">
                           <a:s>
                              <a:s>IMMZCom.&quot;Doses Administered to Patient&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s> I</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
  </a:s>
                  <a:s r="41">
                     <a:s>where
    </a:s>
                     <a:s r="41">
                        <a:s r="38">
                           <a:s r="37">
                              <a:s>I</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="38">
                              <a:s>vaccineCode</a:s>
                           </a:s>
                        </a:s>
                        <a:s> in </a:s>
                        <a:s r="40">
                           <a:s r="39">
                              <a:s>IMMZc</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="40">
                              <a:s>&quot;MCV Vaccine&quot;</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="42" locator="108:3-110:40" xsi:type="Query">
            <source localId="36" locator="108:3-108:43" alias="I">
               <expression localId="35" locator="108:3-108:41" name="Doses Administered to Patient" libraryName="IMMZCom" xsi:type="ExpressionRef"/>
            </source>
            <where localId="41" locator="109:3-110:40" xsi:type="InValueSet">
               <code name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                  <operand localId="38" locator="110:5-110:17" path="vaccineCode" scope="I" xsi:type="Property"/>
               </code>
               <valueset localId="40" locator="110:22-110:40" name="MCV Vaccine" libraryName="IMMZc"/>
            </where>
         </expression>
      </def>
      <def localId="62" locator="131:1-139:2" name="High Transmission Setting" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="62">
               <a:s>define &quot;High Transmission Setting&quot;:
	</a:s>
               <a:s r="61">
                  <a:s>(
		</a:s>
                  <a:s r="61">
                     <a:s r="59">
                        <a:s r="57">
                           <a:s r="55">
                              <a:s r="52">
                                 <a:s r="49">
                                    <a:s r="48">
                                       <a:s>IMMZCon</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="49">
                                       <a:s>&quot;Country currently has a measles outbreak&quot;</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> or
		</a:s>
                                 <a:s r="51">
                                    <a:s r="50">
                                       <a:s>IMMZCon</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="51">
                                       <a:s>&quot;In a setting where the risk of measles among infants &lt; 9 months of age remains high&quot;</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s> or
		</a:s>
                              <a:s r="54">
                                 <a:s r="53">
                                    <a:s>IMMZCon</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="54">
                                    <a:s>&quot;Population is in conflict zones internally displaced populations and refugees&quot;</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                           <a:s> or 
		</a:s>
                           <a:s r="56">
                              <a:s>&quot;Individual is at high risk of contracting measles&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s> or
		</a:s>
                        <a:s r="58">
                           <a:s>&quot;Individual is travelling to a country experiencing measles outbreaks&quot;</a:s>
                        </a:s>
                     </a:s>
                     <a:s> or
		</a:s>
                     <a:s r="60">
                        <a:s>&quot;Individual is known to be HIV-infected or exposed&quot;</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
	)</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="61" locator="132:2-139:2" xsi:type="Or">
            <operand localId="59" locator="133:3-137:72" xsi:type="Or">
               <operand localId="57" locator="133:3-136:53" xsi:type="Or">
                  <operand localId="55" locator="133:3-135:89" xsi:type="Or">
                     <operand localId="52" locator="133:3-134:95" xsi:type="Or">
                        <operand localId="49" locator="133:3-133:52" name="Country currently has a measles outbreak" libraryName="IMMZCon" xsi:type="ExpressionRef"/>
                        <operand localId="51" locator="134:3-134:95" name="In a setting where the risk of measles among infants &lt; 9 months of age remains high" libraryName="IMMZCon" xsi:type="ExpressionRef"/>
                     </operand>
                     <operand localId="54" locator="135:3-135:89" name="Population is in conflict zones internally displaced populations and refugees" libraryName="IMMZCon" xsi:type="ExpressionRef"/>
                  </operand>
                  <operand localId="56" locator="136:3-136:53" name="Individual is at high risk of contracting measles" xsi:type="ParameterRef"/>
               </operand>
               <operand localId="58" locator="137:3-137:72" name="Individual is travelling to a country experiencing measles outbreaks" xsi:type="ParameterRef"/>
            </operand>
            <operand localId="60" locator="138:3-138:53" name="Individual is known to be HIV-infected or exposed" xsi:type="ParameterRef"/>
         </expression>
      </def>
      <def localId="87" locator="185:1-188:104" name="First MCV Dose Administered to Patient" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="87">
               <a:s>/**
 * @dataElement First MCV dose given to Patient
 */
define &quot;First MCV Dose Administered to Patient&quot;:
	</a:s>
               <a:s r="86">
                  <a:s>if </a:s>
                  <a:s r="63">
                     <a:s>&quot;High Transmission Setting&quot;</a:s>
                  </a:s>
                  <a:s>
	then </a:s>
                  <a:s r="74">
                     <a:s>Last(</a:s>
                     <a:s r="73">
                        <a:s>
                           <a:s r="65">
                              <a:s r="64">
                                 <a:s>
                                    <a:s>&quot;MCV Doses Administered to Patient&quot;</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> I</a:s>
                           </a:s>
                        </a:s>
                        <a:s> </a:s>
                        <a:s r="72">
                           <a:s>where </a:s>
                           <a:s r="72">
                              <a:s r="67">
                                 <a:s r="66">
                                    <a:s>I</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="67">
                                    <a:s>occurrence</a:s>
                                 </a:s>
                              </a:s>
                              <a:s r="72"> after </a:s>
                              <a:s r="71">
                                 <a:s r="69">
                                    <a:s r="68">
                                       <a:s>Patient</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="69">
                                       <a:s>birthDate</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> + </a:s>
                                 <a:s r="70">
                                    <a:s>9 months</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>)</a:s>
                  </a:s>
                  <a:s>
	else </a:s>
                  <a:s r="85">
                     <a:s>Last(</a:s>
                     <a:s r="84">
                        <a:s>
                           <a:s r="76">
                              <a:s r="75">
                                 <a:s>
                                    <a:s>&quot;MCV Doses Administered to Patient&quot;</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> I</a:s>
                           </a:s>
                        </a:s>
                        <a:s> </a:s>
                        <a:s r="83">
                           <a:s>where </a:s>
                           <a:s r="83">
                              <a:s r="78">
                                 <a:s r="77">
                                    <a:s>I</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="78">
                                    <a:s>occurrence</a:s>
                                 </a:s>
                              </a:s>
                              <a:s r="83"> after </a:s>
                              <a:s r="82">
                                 <a:s r="80">
                                    <a:s r="79">
                                       <a:s>Patient</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="80">
                                       <a:s>birthDate</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> + </a:s>
                                 <a:s r="81">
                                    <a:s>12 months</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>)</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="86" locator="186:2-188:104" xsi:type="If">
            <condition localId="63" locator="186:5-186:31" name="High Transmission Setting" xsi:type="ExpressionRef"/>
            <then localId="74" locator="187:7-187:103" xsi:type="Last">
               <source localId="73" locator="187:12-187:102" xsi:type="Query">
                  <source localId="65" locator="187:12-187:48" alias="I">
                     <expression localId="64" locator="187:12-187:46" name="MCV Doses Administered to Patient" xsi:type="ExpressionRef"/>
                  </source>
                  <where localId="72" locator="187:50-187:102" xsi:type="After">
                     <operand name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand asType="fhir:dateTime" xsi:type="As">
                           <operand localId="67" locator="187:56-187:67" path="occurrence" scope="I" xsi:type="Property"/>
                        </operand>
                     </operand>
                     <operand xsi:type="ToDateTime">
                        <operand localId="71" locator="187:75-187:102" xsi:type="Add">
                           <operand name="ToDate" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                              <operand localId="69" locator="187:75-187:91" path="birthDate" xsi:type="Property">
                                 <source localId="68" locator="187:75-187:81" name="Patient" xsi:type="ExpressionRef"/>
                              </operand>
                           </operand>
                           <operand localId="70" locator="187:95-187:102" value="9" unit="months" xsi:type="Quantity"/>
                        </operand>
                     </operand>
                  </where>
               </source>
            </then>
            <else localId="85" locator="188:7-188:104" xsi:type="Last">
               <source localId="84" locator="188:12-188:103" xsi:type="Query">
                  <source localId="76" locator="188:12-188:48" alias="I">
                     <expression localId="75" locator="188:12-188:46" name="MCV Doses Administered to Patient" xsi:type="ExpressionRef"/>
                  </source>
                  <where localId="83" locator="188:50-188:103" xsi:type="After">
                     <operand name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand asType="fhir:dateTime" xsi:type="As">
                           <operand localId="78" locator="188:56-188:67" path="occurrence" scope="I" xsi:type="Property"/>
                        </operand>
                     </operand>
                     <operand xsi:type="ToDateTime">
                        <operand localId="82" locator="188:75-188:103" xsi:type="Add">
                           <operand name="ToDate" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                              <operand localId="80" locator="188:75-188:91" path="birthDate" xsi:type="Property">
                                 <source localId="79" locator="188:75-188:81" name="Patient" xsi:type="ExpressionRef"/>
                              </operand>
                           </operand>
                           <operand localId="81" locator="188:95-188:103" value="12" unit="months" xsi:type="Quantity"/>
                        </operand>
                     </operand>
                  </where>
               </source>
            </else>
         </expression>
      </def>
      <def localId="93" locator="192:1-193:82" name="Date First MCV Dose Administered to Patient" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="93">
               <a:s>/**
 * @dataElement Date first MCV dose administered
 */
define &quot;Date First MCV Dose Administered to Patient&quot;:
  </a:s>
               <a:s r="92">
                  <a:s>date from </a:s>
                  <a:s r="91">
                     <a:s>(</a:s>
                     <a:s r="91">
                        <a:s r="89">
                           <a:s r="88">
                              <a:s>&quot;First MCV Dose Administered to Patient&quot;</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="89">
                              <a:s>occurrence</a:s>
                           </a:s>
                        </a:s>
                        <a:s> as </a:s>
                        <a:s r="90">
                           <a:s>FHIR.dateTime</a:s>
                        </a:s>
                     </a:s>
                     <a:s>)</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="92" locator="193:3-193:82" xsi:type="DateFrom">
            <operand name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
               <operand localId="91" locator="193:13-193:82" strict="false" xsi:type="As">
                  <operand localId="89" locator="193:14-193:64" path="occurrence" xsi:type="Property">
                     <source localId="88" locator="193:14-193:53" name="First MCV Dose Administered to Patient" xsi:type="ExpressionRef"/>
                  </operand>
                  <asTypeSpecifier localId="90" locator="193:69-193:81" name="fhir:dateTime" xsi:type="NamedTypeSpecifier"/>
               </operand>
            </operand>
         </expression>
      </def>
      <def localId="108" locator="199:1-202:56" name="Second MCV Dose Administered to Patient" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="108">
               <a:s>/**
 * @dataElement &quot;Second MCV Dose Administered to Patient&quot;
 * only valid if 4 weeks after first dose
 */
define &quot;Second MCV Dose Administered to Patient&quot;:
  </a:s>
               <a:s r="107">
                  <a:s>Last(</a:s>
                  <a:s r="106">
                     <a:s>
                        <a:s r="45">
                           <a:s r="44">
                              <a:s>
                                 <a:s>&quot;MCV Doses Administered to Patient&quot;</a:s>
                              </a:s>
                           </a:s>
                           <a:s> I</a:s>
                        </a:s>
                     </a:s>
                     <a:s> 
		</a:s>
                     <a:s r="105">
                        <a:s>where </a:s>
                        <a:s r="105">
                           <a:s r="97">
                              <a:s r="47">
                                 <a:s r="46">
                                    <a:s>I</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="47">
                                    <a:s>occurrence</a:s>
                                 </a:s>
                              </a:s>
                              <a:s r="97"> after </a:s>
                              <a:s r="96">
                                 <a:s r="94">
                                    <a:s>&quot;Date First MCV Dose Administered to Patient&quot;</a:s>
                                 </a:s>
                                 <a:s> + </a:s>
                                 <a:s r="95">
                                    <a:s>4 weeks</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                           <a:s> 
			and </a:s>
                           <a:s r="104">
                              <a:s r="99">
                                 <a:s r="98">
                                    <a:s>I</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="99">
                                    <a:s>occurrence</a:s>
                                 </a:s>
                              </a:s>
                              <a:s r="104"> after </a:s>
                              <a:s r="103">
                                 <a:s r="101">
                                    <a:s r="100">
                                       <a:s>Patient</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="101">
                                       <a:s>birthDate</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> + </a:s>
                                 <a:s r="102">
                                    <a:s>15 months</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>)</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="107" locator="200:3-202:56" xsi:type="Last">
            <source localId="106" locator="200:8-202:55" xsi:type="Query">
               <source localId="45" locator="200:8-200:44" alias="I">
                  <expression localId="44" locator="200:8-200:42" name="MCV Doses Administered to Patient" xsi:type="ExpressionRef"/>
               </source>
               <where localId="105" locator="201:3-202:55" xsi:type="And">
                  <operand localId="97" locator="201:9-201:82" xsi:type="After">
                     <operand name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand asType="fhir:dateTime" xsi:type="As">
                           <operand localId="47" locator="201:9-201:20" path="occurrence" scope="I" xsi:type="Property"/>
                        </operand>
                     </operand>
                     <operand xsi:type="ToDateTime">
                        <operand localId="96" locator="201:28-201:82" xsi:type="Add">
                           <operand localId="94" locator="201:28-201:72" name="Date First MCV Dose Administered to Patient" xsi:type="ExpressionRef"/>
                           <operand localId="95" locator="201:76-201:82" value="4" unit="weeks" xsi:type="Quantity"/>
                        </operand>
                     </operand>
                  </operand>
                  <operand localId="104" locator="202:8-202:55" xsi:type="After">
                     <operand name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand asType="fhir:dateTime" xsi:type="As">
                           <operand localId="99" locator="202:8-202:19" path="occurrence" scope="I" xsi:type="Property"/>
                        </operand>
                     </operand>
                     <operand xsi:type="ToDateTime">
                        <operand localId="103" locator="202:27-202:55" xsi:type="Add">
                           <operand name="ToDate" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                              <operand localId="101" locator="202:27-202:43" path="birthDate" xsi:type="Property">
                                 <source localId="100" locator="202:27-202:33" name="Patient" xsi:type="ExpressionRef"/>
                              </operand>
                           </operand>
                           <operand localId="102" locator="202:47-202:55" value="15" unit="months" xsi:type="Quantity"/>
                        </operand>
                     </operand>
                  </operand>
               </where>
            </source>
         </expression>
      </def>
      <def localId="135" locator="207:1-208:83" name="Date Second MCV Dose Administered to Patient" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="135">
               <a:s>/**
 * @dataElement Date second MCV dose administered
 */
define &quot;Date Second MCV Dose Administered to Patient&quot;:
  </a:s>
               <a:s r="134">
                  <a:s>date from </a:s>
                  <a:s r="133">
                     <a:s>(</a:s>
                     <a:s r="133">
                        <a:s r="131">
                           <a:s r="130">
                              <a:s>&quot;Second MCV Dose Administered to Patient&quot;</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="131">
                              <a:s>occurrence</a:s>
                           </a:s>
                        </a:s>
                        <a:s> as </a:s>
                        <a:s r="132">
                           <a:s>FHIR.dateTime</a:s>
                        </a:s>
                     </a:s>
                     <a:s>)</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="134" locator="208:3-208:83" xsi:type="DateFrom">
            <operand name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
               <operand localId="133" locator="208:13-208:83" strict="false" xsi:type="As">
                  <operand localId="131" locator="208:14-208:65" path="occurrence" xsi:type="Property">
                     <source localId="130" locator="208:14-208:54" name="Second MCV Dose Administered to Patient" xsi:type="ExpressionRef"/>
                  </operand>
                  <asTypeSpecifier localId="132" locator="208:70-208:82" name="fhir:dateTime" xsi:type="NamedTypeSpecifier"/>
               </operand>
            </operand>
         </expression>
      </def>
      <def localId="140" locator="214:1-215:117" name="Supplementary MCV Dose Administered to Patient" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="140">
               <a:s>/**
 * @dataElement &quot;Second MCV Dose Administered to Patient&quot;
 * only valid if 4 weeks after first dose
 */
define &quot;Supplementary MCV Dose Administered to Patient&quot;:
  </a:s>
               <a:s r="139">
                  <a:s>Last(</a:s>
                  <a:s r="138">
                     <a:s>
                        <a:s r="127">
                           <a:s r="126">
                              <a:s>
                                 <a:s>&quot;MCV Doses Administered to Patient&quot;</a:s>
                              </a:s>
                           </a:s>
                           <a:s> I</a:s>
                        </a:s>
                     </a:s>
                     <a:s> </a:s>
                     <a:s r="137">
                        <a:s>where </a:s>
                        <a:s r="137">
                           <a:s r="129">
                              <a:s r="128">
                                 <a:s>I</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="129">
                                 <a:s>occurrence</a:s>
                              </a:s>
                           </a:s>
                           <a:s r="137"> after </a:s>
                           <a:s r="136">
                              <a:s>&quot;Date Second MCV Dose Administered to Patient&quot;</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>)</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="139" locator="215:3-215:117" xsi:type="Last">
            <source localId="138" locator="215:8-215:116" xsi:type="Query">
               <source localId="127" locator="215:8-215:44" alias="I">
                  <expression localId="126" locator="215:8-215:42" name="MCV Doses Administered to Patient" xsi:type="ExpressionRef"/>
               </source>
               <where localId="137" locator="215:46-215:116" xsi:type="After">
                  <operand name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <operand asType="fhir:dateTime" xsi:type="As">
                        <operand localId="129" locator="215:52-215:63" path="occurrence" scope="I" xsi:type="Property"/>
                     </operand>
                  </operand>
                  <operand xsi:type="ToDateTime">
                     <operand localId="136" locator="215:71-215:116" name="Date Second MCV Dose Administered to Patient" xsi:type="ExpressionRef"/>
                  </operand>
               </where>
            </source>
         </expression>
      </def>
      <def localId="151" locator="161:1-167:71" name="Needs Supplementary MCV Dose" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="151">
               <a:s>define &quot;Needs Supplementary MCV Dose&quot;:
	</a:s>
               <a:s r="150">
                  <a:s r="143">
                     <a:s r="125">
                        <a:s r="123">
                           <a:s r="120">
                              <a:s r="115">
                                 <a:s r="112">
                                    <a:s r="111">
                                       <a:s>IMMZCom</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="112">
                                       <a:s>&quot;HIV Status&quot;</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> in </a:s>
                                 <a:s r="114">
                                    <a:s r="113">
                                       <a:s>IMMZc</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="114">
                                       <a:s>&quot;HIV status - HIV positive Choices&quot;</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s> 
	and </a:s>
                              <a:s r="119">
                                 <a:s r="117">
                                    <a:s r="116">
                                       <a:s>IMMZCom</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="117">
                                       <a:s>&quot;Current Patient Age In Years&quot;</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s r="118"> &lt; 15</a:s>
                              </a:s>
                           </a:s>
                           <a:s>
	and </a:s>
                           <a:s r="122">
                              <a:s r="121">
                                 <a:s>IMMZCom</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="122">
                                 <a:s>&quot;Patient is receiving HAART&quot;</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>
	and </a:s>
                        <a:s r="124">
                           <a:s>&quot;Immune reconstitution was achieved&quot;</a:s>
                        </a:s>
                     </a:s>
                     <a:s> 
	and </a:s>
                     <a:s r="142">
                        <a:s r="141">
                           <a:s>&quot;Supplementary MCV Dose Administered to Patient&quot;</a:s>
                        </a:s>
                        <a:s> is null</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
	and </a:s>
                  <a:s r="149">
                     <a:s r="147">
                        <a:s r="145">
                           <a:s r="144">
                              <a:s>IMMZCom</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="145">
                              <a:s>&quot;Date of Latest Live Attenuated Vaccine&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s> +</a:s>
                        <a:s r="146">
                           <a:s>4 weeks</a:s>
                        </a:s>
                     </a:s>
                     <a:s> &lt;= </a:s>
                     <a:s r="148">
                        <a:s>Now()</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="150" locator="162:2-167:71" xsi:type="And">
            <operand localId="143" locator="162:2-166:61" xsi:type="And">
               <operand localId="125" locator="162:2-165:41" xsi:type="And">
                  <operand localId="123" locator="162:2-164:41" xsi:type="And">
                     <operand localId="120" locator="162:2-163:48" xsi:type="And">
                        <operand localId="115" locator="162:2-162:66" xsi:type="AnyInValueSet">
                           <codes xsi:type="Query">
                              <source alias="X">
                                 <expression localId="112" locator="162:2-162:21" name="HIV Status" libraryName="IMMZCom" xsi:type="ExpressionRef"/>
                              </source>
                              <return distinct="false">
                                 <expression name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                    <operand name="X" xsi:type="AliasRef"/>
                                 </expression>
                              </return>
                           </codes>
                           <valueset localId="114" locator="162:26-162:66" name="HIV status - HIV positive Choices" libraryName="IMMZc"/>
                        </operand>
                        <operand localId="119" locator="163:6-163:48" xsi:type="Less">
                           <operand localId="117" locator="163:6-163:43" name="Current Patient Age In Years" libraryName="IMMZCom" xsi:type="ExpressionRef"/>
                           <operand localId="118" locator="163:47-163:48" valueType="t:Integer" value="15" xsi:type="Literal"/>
                        </operand>
                     </operand>
                     <operand localId="122" locator="164:6-164:41" name="Patient is receiving HAART" libraryName="IMMZCom" xsi:type="ExpressionRef"/>
                  </operand>
                  <operand localId="124" locator="165:6-165:41" name="Immune reconstitution was achieved" xsi:type="ParameterRef"/>
               </operand>
               <operand localId="142" locator="166:6-166:61" xsi:type="IsNull">
                  <operand localId="141" locator="166:6-166:53" name="Supplementary MCV Dose Administered to Patient" xsi:type="ExpressionRef"/>
               </operand>
            </operand>
            <operand localId="149" locator="167:6-167:71" xsi:type="LessOrEqual">
               <operand localId="147" locator="167:6-167:62" xsi:type="Add">
                  <operand name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <operand localId="145" locator="167:6-167:53" name="Date of Latest Live Attenuated Vaccine" libraryName="IMMZCom" xsi:type="ExpressionRef"/>
                  </operand>
                  <operand localId="146" locator="167:56-167:62" value="4" unit="weeks" xsi:type="Quantity"/>
               </operand>
               <operand localId="148" locator="167:67-167:71" xsi:type="Now"/>
            </operand>
         </expression>
      </def>
      <def localId="165" locator="28:1-37:48" name="Provision of the MCV dose" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="165">
               <a:s>/**
 * @dataElement Should provision MCV Dose
 */
define &quot;Provision of the MCV dose&quot;:
	</a:s>
               <a:s r="164">
                  <a:s r="24">
                     <a:s>not</a:s>
                     <a:s r="23">
                        <a:s>(</a:s>
                        <a:s r="23">
                           <a:s>&quot;MCV Dose Contraindicated&quot;</a:s>
                        </a:s>
                        <a:s>)</a:s>
                     </a:s>
                  </a:s>
                  <a:s> 
  and </a:s>
                  <a:s r="163">
                     <a:s>if </a:s>
                     <a:s r="27">
                        <a:s>exists</a:s>
                        <a:s r="26">
                           <a:s>(</a:s>
                           <a:s r="26">
                              <a:s r="25">
                                 <a:s>IMMZCom</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="26">
                                 <a:s>&quot;Live Attenuated Vaccines&quot;</a:s>
                              </a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="33">
                        <a:s r="31">
                           <a:s r="29">
                              <a:s r="28">
                                 <a:s>IMMZCom</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="29">
                                 <a:s>&quot;Date of Latest Live Attenuated Vaccine&quot;</a:s>
                              </a:s>
                           </a:s>
                           <a:s> + </a:s>
                           <a:s r="30">
                              <a:s>4 weeks</a:s>
                           </a:s>
                        </a:s>
                        <a:s> &lt;= </a:s>
                        <a:s r="32">
                           <a:s>Now()</a:s>
                        </a:s>
                     </a:s>
                     <a:s> else </a:s>
                     <a:s r="162">
                        <a:s r="157">
                           <a:s r="34">true
	and </a:s>
                           <a:s r="156">
                              <a:s>(
		</a:s>
                              <a:s r="156">
                                 <a:s r="110">
                                    <a:s r="109">
                                       <a:s>&quot;Second MCV Dose Administered to Patient&quot;</a:s>
                                    </a:s>
                                    <a:s> is null</a:s>
                                 </a:s>
                                 <a:s> or
		</a:s>
                                 <a:s r="155">
                                    <a:s>(
			</a:s>
                                    <a:s r="155">
                                       <a:s r="152">
                                          <a:s>&quot;Needs Supplementary MCV Dose&quot;</a:s>
                                       </a:s>
                                       <a:s> and </a:s>
                                       <a:s r="154">
                                          <a:s r="153">
                                             <a:s>&quot;Supplementary MCV Dose Administered to Patient&quot;</a:s>
                                          </a:s>
                                          <a:s> is null</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>
		)</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>
	)</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
	and </a:s>
                        <a:s r="161">
                           <a:s r="159">
                              <a:s r="158">
                                 <a:s>IMMZCom</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="159">
                                 <a:s>&quot;Current Patient Age In Years&quot;</a:s>
                              </a:s>
                           </a:s>
                           <a:s r="160"> &lt; 15</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="164" locator="29:2-37:48" xsi:type="And">
            <operand localId="24" locator="29:2-29:32" xsi:type="Not">
               <operand localId="23" locator="29:5-29:32" name="MCV Dose Contraindicated" xsi:type="ExpressionRef"/>
            </operand>
            <operand localId="163" locator="30:7-37:48" xsi:type="If">
               <condition localId="27" locator="30:10-30:51" xsi:type="Exists">
                  <operand localId="26" locator="30:16-30:51" name="Live Attenuated Vaccines" libraryName="IMMZCom" xsi:type="ExpressionRef"/>
               </condition>
               <then localId="33" locator="30:58-30:124" xsi:type="LessOrEqual">
                  <operand localId="31" locator="30:58-30:115" xsi:type="Add">
                     <operand name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand localId="29" locator="30:58-30:105" name="Date of Latest Live Attenuated Vaccine" libraryName="IMMZCom" xsi:type="ExpressionRef"/>
                     </operand>
                     <operand localId="30" locator="30:109-30:115" value="4" unit="weeks" xsi:type="Quantity"/>
                  </operand>
                  <operand localId="32" locator="30:120-30:124" xsi:type="Now"/>
               </then>
               <else localId="162" locator="30:131-37:48" xsi:type="And">
                  <operand localId="157" locator="30:131-36:2" xsi:type="And">
                     <operand localId="34" locator="30:131-30:134" valueType="t:Boolean" value="true" xsi:type="Literal"/>
                     <operand localId="156" locator="31:6-36:2" xsi:type="Or">
                        <operand localId="110" locator="32:3-32:51" xsi:type="IsNull">
                           <operand localId="109" locator="32:3-32:43" name="Second MCV Dose Administered to Patient" xsi:type="ExpressionRef"/>
                        </operand>
                        <operand localId="155" locator="33:3-35:3" xsi:type="And">
                           <operand localId="152" locator="34:4-34:33" name="Needs Supplementary MCV Dose" xsi:type="ExpressionRef"/>
                           <operand localId="154" locator="34:39-34:94" xsi:type="IsNull">
                              <operand localId="153" locator="34:39-34:86" name="Supplementary MCV Dose Administered to Patient" xsi:type="ExpressionRef"/>
                           </operand>
                        </operand>
                     </operand>
                  </operand>
                  <operand localId="161" locator="37:6-37:48" xsi:type="Less">
                     <operand localId="159" locator="37:6-37:43" name="Current Patient Age In Years" libraryName="IMMZCom" xsi:type="ExpressionRef"/>
                     <operand localId="160" locator="37:47-37:48" valueType="t:Integer" value="15" xsi:type="Literal"/>
                  </operand>
               </else>
            </operand>
         </expression>
      </def>
      <def localId="172" locator="115:1-116:49" name="No MCV Doses Administered to Patient" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="172">
               <a:s>/**
 * @define The patient has no MCV doses administered
 */
define &quot;No MCV Doses Administered to Patient&quot;:
  </a:s>
               <a:s r="171">
                  <a:s>not </a:s>
                  <a:s r="170">
                     <a:s>exists</a:s>
                     <a:s r="169">
                        <a:s>(</a:s>
                        <a:s r="169">
                           <a:s>&quot;MCV Doses Administered to Patient&quot;</a:s>
                        </a:s>
                        <a:s>)</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="171" locator="116:3-116:49" xsi:type="Not">
            <operand localId="170" locator="116:7-116:49" xsi:type="Exists">
               <operand localId="169" locator="116:13-116:49" name="MCV Doses Administered to Patient" xsi:type="ExpressionRef"/>
            </operand>
         </expression>
      </def>
      <def localId="208" locator="141:1-159:4" name="Needs Birth MCV Dose" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="208">
               <a:s>define &quot;Needs Birth MCV Dose&quot;:
	</a:s>
               <a:s r="207">
                  <a:s r="193">
                     <a:s r="186">
                        <a:s r="173">
                           <a:s>&quot;No MCV Doses Administered to Patient&quot;</a:s>
                        </a:s>
                        <a:s> 
	  and </a:s>
                        <a:s r="185">
                           <a:s>(
			</a:s>
                           <a:s r="185">
                              <a:s>if </a:s>
                              <a:s r="174">
                                 <a:s>&quot;High Transmission Setting&quot;</a:s>
                              </a:s>
                              <a:s> 
			then </a:s>
                              <a:s r="179">
                                 <a:s r="176">
                                    <a:s r="175">
                                       <a:s>IMMZCom</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="176">
                                       <a:s>&quot;Current Patient Age In Months&quot;</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s r="177"> between 6 and 9</a:s>
                              </a:s>
                              <a:s> 
			else </a:s>
                              <a:s r="184">
                                 <a:s r="181">
                                    <a:s r="180">
                                       <a:s>IMMZCom</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="181">
                                       <a:s>&quot;Current Patient Age In Months&quot;</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s r="182"> between 6 and 12</a:s>
                              </a:s>
                           </a:s>
                           <a:s>
		)</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
		and </a:s>
                     <a:s r="192">
                        <a:s r="190">
                           <a:s r="188">
                              <a:s r="187">
                                 <a:s>IMMZCom</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="188">
                                 <a:s>&quot;Date of Latest Live Attenuated Vaccine&quot;</a:s>
                              </a:s>
                           </a:s>
                           <a:s> +</a:s>
                           <a:s r="189">
                              <a:s>4 weeks</a:s>
                           </a:s>
                        </a:s>
                        <a:s> &lt;= </a:s>
                        <a:s r="191">
                           <a:s>Now()</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>
		and 
			</a:s>
                  <a:s r="206">
                     <a:s>(
				</a:s>
                     <a:s r="206">
                        <a:s r="204">
                           <a:s>(
					</a:s>
                           <a:s r="204">
                              <a:s r="198">
                                 <a:s r="195">
                                    <a:s r="194">
                                       <a:s>IMMZCom</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="195">
                                       <a:s>&quot;HIV Status&quot;</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> in </a:s>
                                 <a:s r="197">
                                    <a:s r="196">
                                       <a:s>IMMZc</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="197">
                                       <a:s>&quot;HIV status - HIV positive Choices&quot;</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s> 
					  and </a:s>
                              <a:s r="203">
                                 <a:s>(
					    </a:s>
                                 <a:s r="203">
                                    <a:s r="201">
                                       <a:s>not</a:s>
                                       <a:s r="200">
                                          <a:s>(</a:s>
                                          <a:s r="200">
                                             <a:s r="199">
                                                <a:s>IMMZCom</a:s>
                                             </a:s>
                                             <a:s>.</a:s>
                                             <a:s r="200">
                                                <a:s>&quot;Patient is receiving HAART&quot;</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s>)</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>
							or </a:s>
                                    <a:s r="202">
                                       <a:s>&quot;Immune reconstitution was achieved&quot;</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>
						)</a:s>
                              </a:s>
                           </a:s>
                           <a:s>
				)</a:s>
                        </a:s>
                        <a:s>
				or </a:s>
                        <a:s r="205">
                           <a:s>&quot;Individual is known to be HIV-infected or exposed&quot;</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
			)</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="207" locator="142:2-159:4" xsi:type="And">
            <operand localId="193" locator="142:2-148:72" xsi:type="And">
               <operand localId="186" locator="142:2-147:3" xsi:type="And">
                  <operand localId="173" locator="142:2-142:39" name="No MCV Doses Administered to Patient" xsi:type="ExpressionRef"/>
                  <operand localId="185" locator="143:8-147:3" xsi:type="If">
                     <condition localId="174" locator="144:7-144:33" name="High Transmission Setting" xsi:type="ExpressionRef"/>
                     <then localId="179" locator="145:9-145:63" xsi:type="And">
                        <operand xsi:type="GreaterOrEqual">
                           <operand localId="176" locator="145:9-145:47" name="Current Patient Age In Months" libraryName="IMMZCom" xsi:type="ExpressionRef"/>
                           <operand localId="177" locator="145:57" valueType="t:Integer" value="6" xsi:type="Literal"/>
                        </operand>
                        <operand xsi:type="LessOrEqual">
                           <operand localId="176" locator="145:9-145:47" name="Current Patient Age In Months" libraryName="IMMZCom" xsi:type="ExpressionRef"/>
                           <operand localId="178" locator="145:63" valueType="t:Integer" value="9" xsi:type="Literal"/>
                        </operand>
                     </then>
                     <else localId="184" locator="146:9-146:64" xsi:type="And">
                        <operand xsi:type="GreaterOrEqual">
                           <operand localId="181" locator="146:9-146:47" name="Current Patient Age In Months" libraryName="IMMZCom" xsi:type="ExpressionRef"/>
                           <operand localId="182" locator="146:57" valueType="t:Integer" value="6" xsi:type="Literal"/>
                        </operand>
                        <operand xsi:type="LessOrEqual">
                           <operand localId="181" locator="146:9-146:47" name="Current Patient Age In Months" libraryName="IMMZCom" xsi:type="ExpressionRef"/>
                           <operand localId="183" locator="146:63-146:64" valueType="t:Integer" value="12" xsi:type="Literal"/>
                        </operand>
                     </else>
                  </operand>
               </operand>
               <operand localId="192" locator="148:7-148:72" xsi:type="LessOrEqual">
                  <operand localId="190" locator="148:7-148:63" xsi:type="Add">
                     <operand name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand localId="188" locator="148:7-148:54" name="Date of Latest Live Attenuated Vaccine" libraryName="IMMZCom" xsi:type="ExpressionRef"/>
                     </operand>
                     <operand localId="189" locator="148:57-148:63" value="4" unit="weeks" xsi:type="Quantity"/>
                  </operand>
                  <operand localId="191" locator="148:68-148:72" xsi:type="Now"/>
               </operand>
            </operand>
            <operand localId="206" locator="150:4-159:4" xsi:type="Or">
               <operand localId="204" locator="151:5-157:5" xsi:type="And">
                  <operand localId="198" locator="152:6-152:70" xsi:type="AnyInValueSet">
                     <codes xsi:type="Query">
                        <source alias="X">
                           <expression localId="195" locator="152:6-152:25" name="HIV Status" libraryName="IMMZCom" xsi:type="ExpressionRef"/>
                        </source>
                        <return distinct="false">
                           <expression name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                              <operand name="X" xsi:type="AliasRef"/>
                           </expression>
                        </return>
                     </codes>
                     <valueset localId="197" locator="152:30-152:70" name="HIV status - HIV positive Choices" libraryName="IMMZc"/>
                  </operand>
                  <operand localId="203" locator="153:12-156:7" xsi:type="Or">
                     <operand localId="201" locator="154:10-154:50" xsi:type="Not">
                        <operand localId="200" locator="154:13-154:50" name="Patient is receiving HAART" libraryName="IMMZCom" xsi:type="ExpressionRef"/>
                     </operand>
                     <operand localId="202" locator="155:11-155:46" name="Immune reconstitution was achieved" xsi:type="ParameterRef"/>
                  </operand>
               </operand>
               <operand localId="205" locator="158:8-158:58" name="Individual is known to be HIV-infected or exposed" xsi:type="ParameterRef"/>
            </operand>
         </expression>
      </def>
      <def localId="244" locator="44:1-55:4" name="Expected Due Date for MCV dose" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="244">
               <a:s>define &quot;Expected Due Date for MCV dose&quot;:
	</a:s>
               <a:s r="243">
                  <a:s>case 
	</a:s>
                  <a:s r="214">
                     <a:s>when </a:s>
                     <a:s r="209">
                        <a:s>&quot;Needs Birth MCV Dose&quot;</a:s>
                     </a:s>
                     <a:s>
		then </a:s>
                     <a:s r="213">
                        <a:s r="211">
                           <a:s r="210">
                              <a:s>Patient</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="211">
                              <a:s>birthDate</a:s>
                           </a:s>
                        </a:s>
                        <a:s> + </a:s>
                        <a:s r="212">
                           <a:s>6 months</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>
	</a:s>
                  <a:s r="226">
                     <a:s>when </a:s>
                     <a:s r="215">
                        <a:s>&quot;No MCV Doses Administered to Patient&quot;</a:s>
                     </a:s>
                     <a:s>
		then </a:s>
                     <a:s r="225">
                        <a:s>if </a:s>
                        <a:s r="216">
                           <a:s>&quot;High Transmission Setting&quot;</a:s>
                        </a:s>
                        <a:s> then </a:s>
                        <a:s r="220">
                           <a:s r="218">
                              <a:s r="217">
                                 <a:s>Patient</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="218">
                                 <a:s>birthDate</a:s>
                              </a:s>
                           </a:s>
                           <a:s> + </a:s>
                           <a:s r="219">
                              <a:s>9 months</a:s>
                           </a:s>
                        </a:s>
                        <a:s> else </a:s>
                        <a:s r="224">
                           <a:s r="222">
                              <a:s r="221">
                                 <a:s>Patient</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="222">
                                 <a:s>birthDate</a:s>
                              </a:s>
                           </a:s>
                           <a:s> + </a:s>
                           <a:s r="223">
                              <a:s>12 months</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>
	</a:s>
                  <a:s r="234">
                     <a:s>when </a:s>
                     <a:s r="230">
                        <a:s r="228">
                           <a:s r="227">
                              <a:s>&quot;Second MCV Dose Administered to Patient&quot;</a:s>
                           </a:s>
                           <a:s> is not null</a:s>
                        </a:s>
                        <a:s> and </a:s>
                        <a:s r="229">
                           <a:s>&quot;Needs Supplementary MCV Dose&quot;</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
		then </a:s>
                     <a:s r="233">
                        <a:s r="231">
                           <a:s>&quot;Date Second MCV Dose Administered to Patient&quot;</a:s>
                        </a:s>
                        <a:s> + </a:s>
                        <a:s r="232">
                           <a:s>4 weeks</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>
	</a:s>
                  <a:s r="241">
                     <a:s>when </a:s>
                     <a:s r="236">
                        <a:s r="235">
                           <a:s>&quot;First MCV Dose Administered to Patient&quot;</a:s>
                        </a:s>
                        <a:s> is not null</a:s>
                     </a:s>
                     <a:s>
		then </a:s>
                     <a:s r="240">
                        <a:s r="238">
                           <a:s r="237">
                              <a:s>Patient</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="238">
                              <a:s>birthDate</a:s>
                           </a:s>
                        </a:s>
                        <a:s> + </a:s>
                        <a:s r="239">
                           <a:s>15 months</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s r="242">
	else null
	end</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="243" locator="45:2-55:4" xsi:type="Case">
            <caseItem localId="214" locator="46:2-47:35">
               <when localId="209" locator="46:7-46:28" name="Needs Birth MCV Dose" xsi:type="ExpressionRef"/>
               <then localId="213" locator="47:8-47:35" xsi:type="Add">
                  <operand name="ToDate" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <operand localId="211" locator="47:8-47:24" path="birthDate" xsi:type="Property">
                        <source localId="210" locator="47:8-47:14" name="Patient" xsi:type="ExpressionRef"/>
                     </operand>
                  </operand>
                  <operand localId="212" locator="47:28-47:35" value="6" unit="months" xsi:type="Quantity"/>
               </then>
            </caseItem>
            <caseItem localId="226" locator="48:2-49:106">
               <when localId="215" locator="48:7-48:44" name="No MCV Doses Administered to Patient" xsi:type="ExpressionRef"/>
               <then localId="225" locator="49:8-49:106" xsi:type="If">
                  <condition localId="216" locator="49:11-49:37" name="High Transmission Setting" xsi:type="ExpressionRef"/>
                  <then localId="220" locator="49:44-49:71" xsi:type="Add">
                     <operand name="ToDate" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand localId="218" locator="49:44-49:60" path="birthDate" xsi:type="Property">
                           <source localId="217" locator="49:44-49:50" name="Patient" xsi:type="ExpressionRef"/>
                        </operand>
                     </operand>
                     <operand localId="219" locator="49:64-49:71" value="9" unit="months" xsi:type="Quantity"/>
                  </then>
                  <else localId="224" locator="49:78-49:106" xsi:type="Add">
                     <operand name="ToDate" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand localId="222" locator="49:78-49:94" path="birthDate" xsi:type="Property">
                           <source localId="221" locator="49:78-49:84" name="Patient" xsi:type="ExpressionRef"/>
                        </operand>
                     </operand>
                     <operand localId="223" locator="49:98-49:106" value="12" unit="months" xsi:type="Quantity"/>
                  </else>
               </then>
            </caseItem>
            <caseItem localId="234" locator="50:2-51:63">
               <when localId="230" locator="50:7-50:94" xsi:type="And">
                  <operand localId="228" locator="50:7-50:59" xsi:type="Not">
                     <operand locator="50:7-50:59" xsi:type="IsNull">
                        <operand localId="227" locator="50:7-50:47" name="Second MCV Dose Administered to Patient" xsi:type="ExpressionRef"/>
                     </operand>
                  </operand>
                  <operand localId="229" locator="50:65-50:94" name="Needs Supplementary MCV Dose" xsi:type="ExpressionRef"/>
               </when>
               <then localId="233" locator="51:8-51:63" xsi:type="Add">
                  <operand localId="231" locator="51:8-51:53" name="Date Second MCV Dose Administered to Patient" xsi:type="ExpressionRef"/>
                  <operand localId="232" locator="51:57-51:63" value="4" unit="weeks" xsi:type="Quantity"/>
               </then>
            </caseItem>
            <caseItem localId="241" locator="52:2-53:36">
               <when localId="236" locator="52:7-52:58" xsi:type="Not">
                  <operand locator="52:7-52:58" xsi:type="IsNull">
                     <operand localId="235" locator="52:7-52:46" name="First MCV Dose Administered to Patient" xsi:type="ExpressionRef"/>
                  </operand>
               </when>
               <then localId="240" locator="53:8-53:36" xsi:type="Add">
                  <operand name="ToDate" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <operand localId="238" locator="53:8-53:24" path="birthDate" xsi:type="Property">
                        <source localId="237" locator="53:8-53:14" name="Patient" xsi:type="ExpressionRef"/>
                     </operand>
                  </operand>
                  <operand localId="239" locator="53:28-53:36" value="15" unit="months" xsi:type="Quantity"/>
               </then>
            </caseItem>
            <else asType="t:Date" xsi:type="As">
               <operand localId="242" locator="54:7-54:10" xsi:type="Null"/>
            </else>
         </expression>
      </def>
      <def localId="258" locator="39:1-42:64" name="Schedule Due Date for MCV dose" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="258">
               <a:s>define &quot;Schedule Due Date for MCV dose&quot;:
	</a:s>
               <a:s r="257">
                  <a:s>if </a:s>
                  <a:s r="251">
                     <a:s r="168">
                        <a:s r="167">
                           <a:s r="166">
                              <a:s>IMMZCom</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="167">
                              <a:s>&quot;Date of Latest Live Attenuated Vaccine&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s> is null</a:s>
                     </a:s>
                     <a:s> or </a:s>
                     <a:s r="250">
                        <a:s r="245">
                           <a:s>&quot;Expected Due Date for MCV dose&quot;</a:s>
                        </a:s>
                        <a:s> > </a:s>
                        <a:s r="249">
                           <a:s r="247">
                              <a:s r="246">
                                 <a:s>IMMZCom</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="247">
                                 <a:s>&quot;Date of Latest Live Attenuated Vaccine&quot;</a:s>
                              </a:s>
                           </a:s>
                           <a:s> + </a:s>
                           <a:s r="248">
                              <a:s>4 weeks</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>
	then </a:s>
                  <a:s r="252">
                     <a:s>&quot;Expected Due Date for MCV dose&quot;</a:s>
                  </a:s>
                  <a:s>
	else </a:s>
                  <a:s r="256">
                     <a:s r="254">
                        <a:s r="253">
                           <a:s>IMMZCom</a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="254">
                           <a:s>&quot;Date of Latest Live Attenuated Vaccine&quot;</a:s>
                        </a:s>
                     </a:s>
                     <a:s> + </a:s>
                     <a:s r="255">
                        <a:s>4 weeks</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="257" locator="40:2-42:64" xsi:type="If">
            <condition localId="251" locator="40:5-40:157" xsi:type="Or">
               <operand localId="168" locator="40:5-40:60" xsi:type="IsNull">
                  <operand localId="167" locator="40:5-40:52" name="Date of Latest Live Attenuated Vaccine" libraryName="IMMZCom" xsi:type="ExpressionRef"/>
               </operand>
               <operand localId="250" locator="40:65-40:157" xsi:type="Greater">
                  <operand xsi:type="ToDateTime">
                     <operand localId="245" locator="40:65-40:96" name="Expected Due Date for MCV dose" xsi:type="ExpressionRef"/>
                  </operand>
                  <operand localId="249" locator="40:100-40:157" xsi:type="Add">
                     <operand name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand localId="247" locator="40:100-40:147" name="Date of Latest Live Attenuated Vaccine" libraryName="IMMZCom" xsi:type="ExpressionRef"/>
                     </operand>
                     <operand localId="248" locator="40:151-40:157" value="4" unit="weeks" xsi:type="Quantity"/>
                  </operand>
               </operand>
            </condition>
            <then xsi:type="ToDateTime">
               <operand localId="252" locator="41:7-41:38" name="Expected Due Date for MCV dose" xsi:type="ExpressionRef"/>
            </then>
            <else localId="256" locator="42:7-42:64" xsi:type="Add">
               <operand name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                  <operand localId="254" locator="42:7-42:54" name="Date of Latest Live Attenuated Vaccine" libraryName="IMMZCom" xsi:type="ExpressionRef"/>
               </operand>
               <operand localId="255" locator="42:58-42:64" value="4" unit="weeks" xsi:type="Quantity"/>
            </else>
         </expression>
      </def>
      <def localId="275" locator="173:1-174:133" name="Birth MCV Dose Administered to Patient" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="275">
               <a:s>/**
 * @dataElement Birth MCV dose given to Patient
 */
define &quot;Birth MCV Dose Administered to Patient&quot;:
	</a:s>
               <a:s r="274">
                  <a:s>Last(</a:s>
                  <a:s r="273">
                     <a:s>
                        <a:s r="261">
                           <a:s r="260">
                              <a:s>
                                 <a:s>&quot;MCV Doses Administered to Patient&quot;</a:s>
                              </a:s>
                           </a:s>
                           <a:s> I</a:s>
                        </a:s>
                     </a:s>
                     <a:s> </a:s>
                     <a:s r="272">
                        <a:s>where </a:s>
                        <a:s r="272">
                           <a:s r="263">
                              <a:s r="262">
                                 <a:s>I</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="263">
                                 <a:s>occurrence</a:s>
                              </a:s>
                           </a:s>
                           <a:s> between </a:s>
                           <a:s r="267">
                              <a:s r="265">
                                 <a:s r="264">
                                    <a:s>Patient</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="265">
                                    <a:s>birthDate</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> + </a:s>
                              <a:s r="266">
                                 <a:s>6 months</a:s>
                              </a:s>
                           </a:s>
                           <a:s> and </a:s>
                           <a:s r="271">
                              <a:s r="269">
                                 <a:s r="268">
                                    <a:s>Patient</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="269">
                                    <a:s>birthDate</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> + </a:s>
                              <a:s r="270">
                                 <a:s>9 months</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>)</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="274" locator="174:2-174:133" xsi:type="Last">
            <source localId="273" locator="174:7-174:132" xsi:type="Query">
               <source localId="261" locator="174:7-174:43" alias="I">
                  <expression localId="260" locator="174:7-174:41" name="MCV Doses Administered to Patient" xsi:type="ExpressionRef"/>
               </source>
               <where localId="272" locator="174:45-174:132" xsi:type="And">
                  <operand xsi:type="GreaterOrEqual">
                     <operand name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand asType="fhir:dateTime" xsi:type="As">
                           <operand localId="263" locator="174:51-174:62" path="occurrence" scope="I" xsi:type="Property"/>
                        </operand>
                     </operand>
                     <operand xsi:type="ToDateTime">
                        <operand localId="267" locator="174:72-174:99" xsi:type="Add">
                           <operand name="ToDate" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                              <operand localId="265" locator="174:72-174:88" path="birthDate" xsi:type="Property">
                                 <source localId="264" locator="174:72-174:78" name="Patient" xsi:type="ExpressionRef"/>
                              </operand>
                           </operand>
                           <operand localId="266" locator="174:92-174:99" value="6" unit="months" xsi:type="Quantity"/>
                        </operand>
                     </operand>
                  </operand>
                  <operand xsi:type="LessOrEqual">
                     <operand name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand asType="fhir:dateTime" xsi:type="As">
                           <operand localId="263" locator="174:51-174:62" path="occurrence" scope="I" xsi:type="Property"/>
                        </operand>
                     </operand>
                     <operand xsi:type="ToDateTime">
                        <operand localId="271" locator="174:105-174:132" xsi:type="Add">
                           <operand name="ToDate" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                              <operand localId="269" locator="174:105-174:121" path="birthDate" xsi:type="Property">
                                 <source localId="268" locator="174:105-174:111" name="Patient" xsi:type="ExpressionRef"/>
                              </operand>
                           </operand>
                           <operand localId="270" locator="174:125-174:132" value="9" unit="months" xsi:type="Quantity"/>
                        </operand>
                     </operand>
                  </operand>
               </where>
            </source>
         </expression>
      </def>
      <def localId="308" locator="58:1-72:5" name="MCV Next Dose Number" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="308">
               <a:s>define &quot;MCV Next Dose Number&quot;:
	</a:s>
               <a:s r="307">
                  <a:s>if </a:s>
                  <a:s r="278">
                     <a:s r="259">
                        <a:s>&quot;Needs Birth MCV Dose&quot;</a:s>
                     </a:s>
                     <a:s> or </a:s>
                     <a:s r="277">
                        <a:s r="276">
                           <a:s>&quot;Birth MCV Dose Administered to Patient&quot;</a:s>
                        </a:s>
                        <a:s> is not null</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
	then 
		</a:s>
                  <a:s r="294">
                     <a:s>case 
		</a:s>
                     <a:s r="284">
                        <a:s>when </a:s>
                        <a:s r="282">
                           <a:s r="280">
                              <a:s r="279">
                                 <a:s>&quot;Second MCV Dose Administered to Patient&quot;</a:s>
                              </a:s>
                              <a:s> is not null</a:s>
                           </a:s>
                           <a:s> and </a:s>
                           <a:s r="281">
                              <a:s>&quot;Needs Supplementary MCV Dose&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s> then </a:s>
                        <a:s r="283">
                           <a:s>'booster'</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
		</a:s>
                     <a:s r="288">
                        <a:s>when </a:s>
                        <a:s r="286">
                           <a:s r="285">
                              <a:s>&quot;First MCV Dose Administered to Patient&quot;</a:s>
                           </a:s>
                           <a:s> is not null</a:s>
                        </a:s>
                        <a:s r="287"> then 3</a:s>
                     </a:s>
                     <a:s>
		</a:s>
                     <a:s r="292">
                        <a:s>when </a:s>
                        <a:s r="290">
                           <a:s r="289">
                              <a:s>&quot;Birth MCV Dose Administered to Patient&quot;</a:s>
                           </a:s>
                           <a:s> is not null</a:s>
                        </a:s>
                        <a:s r="291"> then 2</a:s>
                     </a:s>
                     <a:s r="293">
		else 1
		end</a:s>
                  </a:s>
                  <a:s>
	else
		</a:s>
                  <a:s r="306">
                     <a:s>case 
		</a:s>
                     <a:s r="300">
                        <a:s>when </a:s>
                        <a:s r="298">
                           <a:s r="296">
                              <a:s r="295">
                                 <a:s>&quot;Second MCV Dose Administered to Patient&quot;</a:s>
                              </a:s>
                              <a:s> is not null</a:s>
                           </a:s>
                           <a:s> and </a:s>
                           <a:s r="297">
                              <a:s>&quot;Needs Supplementary MCV Dose&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s> then </a:s>
                        <a:s r="299">
                           <a:s>'booster'</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
		</a:s>
                     <a:s r="304">
                        <a:s>when </a:s>
                        <a:s r="302">
                           <a:s r="301">
                              <a:s>&quot;First MCV Dose Administered to Patient&quot;</a:s>
                           </a:s>
                           <a:s> is not null</a:s>
                        </a:s>
                        <a:s r="303"> then 2</a:s>
                     </a:s>
                     <a:s r="305">
		else 1
		end</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="307" locator="59:2-72:5" xsi:type="If">
            <condition localId="278" locator="59:5-59:82" xsi:type="Or">
               <operand localId="259" locator="59:5-59:26" name="Needs Birth MCV Dose" xsi:type="ExpressionRef"/>
               <operand localId="277" locator="59:31-59:82" xsi:type="Not">
                  <operand locator="59:31-59:82" xsi:type="IsNull">
                     <operand localId="276" locator="59:31-59:70" name="Birth MCV Dose Administered to Patient" xsi:type="ExpressionRef"/>
                  </operand>
               </operand>
            </condition>
            <then localId="294" locator="61:3-66:5" xsi:type="Case">
               <caseItem localId="284" locator="62:3-62:110">
                  <when localId="282" locator="62:8-62:95" xsi:type="And">
                     <operand localId="280" locator="62:8-62:60" xsi:type="Not">
                        <operand locator="62:8-62:60" xsi:type="IsNull">
                           <operand localId="279" locator="62:8-62:48" name="Second MCV Dose Administered to Patient" xsi:type="ExpressionRef"/>
                        </operand>
                     </operand>
                     <operand localId="281" locator="62:66-62:95" name="Needs Supplementary MCV Dose" xsi:type="ExpressionRef"/>
                  </when>
                  <then xsi:type="As">
                     <operand localId="283" locator="62:102-62:110" valueType="t:String" value="booster" xsi:type="Literal"/>
                     <asTypeSpecifier xsi:type="ChoiceTypeSpecifier">
                        <choice name="t:String" xsi:type="NamedTypeSpecifier"/>
                        <choice name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                     </asTypeSpecifier>
                  </then>
               </caseItem>
               <caseItem localId="288" locator="63:3-63:66">
                  <when localId="286" locator="63:8-63:59" xsi:type="Not">
                     <operand locator="63:8-63:59" xsi:type="IsNull">
                        <operand localId="285" locator="63:8-63:47" name="First MCV Dose Administered to Patient" xsi:type="ExpressionRef"/>
                     </operand>
                  </when>
                  <then xsi:type="As">
                     <operand localId="287" locator="63:66" valueType="t:Integer" value="3" xsi:type="Literal"/>
                     <asTypeSpecifier xsi:type="ChoiceTypeSpecifier">
                        <choice name="t:String" xsi:type="NamedTypeSpecifier"/>
                        <choice name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                     </asTypeSpecifier>
                  </then>
               </caseItem>
               <caseItem localId="292" locator="64:3-64:66">
                  <when localId="290" locator="64:8-64:59" xsi:type="Not">
                     <operand locator="64:8-64:59" xsi:type="IsNull">
                        <operand localId="289" locator="64:8-64:47" name="Birth MCV Dose Administered to Patient" xsi:type="ExpressionRef"/>
                     </operand>
                  </when>
                  <then xsi:type="As">
                     <operand localId="291" locator="64:66" valueType="t:Integer" value="2" xsi:type="Literal"/>
                     <asTypeSpecifier xsi:type="ChoiceTypeSpecifier">
                        <choice name="t:String" xsi:type="NamedTypeSpecifier"/>
                        <choice name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                     </asTypeSpecifier>
                  </then>
               </caseItem>
               <else xsi:type="As">
                  <operand localId="293" locator="65:8" valueType="t:Integer" value="1" xsi:type="Literal"/>
                  <asTypeSpecifier xsi:type="ChoiceTypeSpecifier">
                     <choice name="t:String" xsi:type="NamedTypeSpecifier"/>
                     <choice name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                  </asTypeSpecifier>
               </else>
            </then>
            <else localId="306" locator="68:3-72:5" xsi:type="Case">
               <caseItem localId="300" locator="69:3-69:110">
                  <when localId="298" locator="69:8-69:95" xsi:type="And">
                     <operand localId="296" locator="69:8-69:60" xsi:type="Not">
                        <operand locator="69:8-69:60" xsi:type="IsNull">
                           <operand localId="295" locator="69:8-69:48" name="Second MCV Dose Administered to Patient" xsi:type="ExpressionRef"/>
                        </operand>
                     </operand>
                     <operand localId="297" locator="69:66-69:95" name="Needs Supplementary MCV Dose" xsi:type="ExpressionRef"/>
                  </when>
                  <then xsi:type="As">
                     <operand localId="299" locator="69:102-69:110" valueType="t:String" value="booster" xsi:type="Literal"/>
                     <asTypeSpecifier xsi:type="ChoiceTypeSpecifier">
                        <choice name="t:String" xsi:type="NamedTypeSpecifier"/>
                        <choice name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                     </asTypeSpecifier>
                  </then>
               </caseItem>
               <caseItem localId="304" locator="70:3-70:66">
                  <when localId="302" locator="70:8-70:59" xsi:type="Not">
                     <operand locator="70:8-70:59" xsi:type="IsNull">
                        <operand localId="301" locator="70:8-70:47" name="First MCV Dose Administered to Patient" xsi:type="ExpressionRef"/>
                     </operand>
                  </when>
                  <then xsi:type="As">
                     <operand localId="303" locator="70:66" valueType="t:Integer" value="2" xsi:type="Literal"/>
                     <asTypeSpecifier xsi:type="ChoiceTypeSpecifier">
                        <choice name="t:String" xsi:type="NamedTypeSpecifier"/>
                        <choice name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                     </asTypeSpecifier>
                  </then>
               </caseItem>
               <else xsi:type="As">
                  <operand localId="305" locator="71:8" valueType="t:Integer" value="1" xsi:type="Literal"/>
                  <asTypeSpecifier xsi:type="ChoiceTypeSpecifier">
                     <choice name="t:String" xsi:type="NamedTypeSpecifier"/>
                     <choice name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                  </asTypeSpecifier>
               </else>
            </else>
         </expression>
      </def>
      <def localId="316" locator="74:1-77:7" name="Number of Required MCV Doses" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="316">
               <a:s>define &quot;Number of Required MCV Doses&quot;:
	</a:s>
               <a:s r="315">
                  <a:s>if </a:s>
                  <a:s r="312">
                     <a:s r="309">
                        <a:s>&quot;Needs Birth MCV Dose&quot;</a:s>
                     </a:s>
                     <a:s> or </a:s>
                     <a:s r="311">
                        <a:s r="310">
                           <a:s>&quot;Birth MCV Dose Administered to Patient&quot;</a:s>
                        </a:s>
                        <a:s> is not null</a:s>
                     </a:s>
                  </a:s>
                  <a:s r="313">
	then 3
	else 2</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="315" locator="75:2-77:7" xsi:type="If">
            <condition localId="312" locator="75:5-75:82" xsi:type="Or">
               <operand localId="309" locator="75:5-75:26" name="Needs Birth MCV Dose" xsi:type="ExpressionRef"/>
               <operand localId="311" locator="75:31-75:82" xsi:type="Not">
                  <operand locator="75:31-75:82" xsi:type="IsNull">
                     <operand localId="310" locator="75:31-75:70" name="Birth MCV Dose Administered to Patient" xsi:type="ExpressionRef"/>
                  </operand>
               </operand>
            </condition>
            <then localId="313" locator="76:7" valueType="t:Integer" value="3" xsi:type="Literal"/>
            <else localId="314" locator="77:7" valueType="t:Integer" value="2" xsi:type="Literal"/>
         </expression>
      </def>
      <def localId="325" locator="79:1-84:4" name="Expiration Date for MCV dose" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="325">
               <a:s>define &quot;Expiration Date for MCV dose&quot;:
	</a:s>
               <a:s r="324">
                  <a:s>case
	</a:s>
                  <a:s r="322">
                     <a:s>when </a:s>
                     <a:s r="317">
                        <a:s>&quot;Needs Birth MCV Dose&quot;</a:s>
                     </a:s>
                     <a:s>
		then </a:s>
                     <a:s r="321">
                        <a:s r="319">
                           <a:s r="318">
                              <a:s>Patient</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="319">
                              <a:s>birthDate</a:s>
                           </a:s>
                        </a:s>
                        <a:s> + </a:s>
                        <a:s r="320">
                           <a:s>9 months</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s r="323">
	else null
	end</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="324" locator="80:2-84:4" xsi:type="Case">
            <caseItem localId="322" locator="81:2-82:35">
               <when localId="317" locator="81:7-81:28" name="Needs Birth MCV Dose" xsi:type="ExpressionRef"/>
               <then localId="321" locator="82:8-82:35" xsi:type="Add">
                  <operand name="ToDate" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <operand localId="319" locator="82:8-82:24" path="birthDate" xsi:type="Property">
                        <source localId="318" locator="82:8-82:14" name="Patient" xsi:type="ExpressionRef"/>
                     </operand>
                  </operand>
                  <operand localId="320" locator="82:28-82:35" value="9" unit="months" xsi:type="Quantity"/>
               </then>
            </caseItem>
            <else asType="t:Date" xsi:type="As">
               <operand localId="323" locator="83:7-83:10" xsi:type="Null"/>
            </else>
         </expression>
      </def>
      <def localId="327" locator="86:1-87:5" name="Overdue Date for MCV dose" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="327">
               <a:s r="326">define &quot;Overdue Date for MCV dose&quot;:
	null</a:s>
            </a:s>
         </annotation>
         <expression localId="326" locator="87:2-87:5" xsi:type="Null"/>
      </def>
      <def localId="335" locator="220:1-221:90" name="Date Supplementary MCV Dose Administered to Patient" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="335">
               <a:s>/**
 * @dataElement Date second MCV dose administered
 */
define &quot;Date Supplementary MCV Dose Administered to Patient&quot;:
  </a:s>
               <a:s r="334">
                  <a:s>date from </a:s>
                  <a:s r="333">
                     <a:s>(</a:s>
                     <a:s r="333">
                        <a:s r="331">
                           <a:s r="330">
                              <a:s>&quot;Supplementary MCV Dose Administered to Patient&quot;</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="331">
                              <a:s>occurrence</a:s>
                           </a:s>
                        </a:s>
                        <a:s> as </a:s>
                        <a:s r="332">
                           <a:s>FHIR.dateTime</a:s>
                        </a:s>
                     </a:s>
                     <a:s>)</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="334" locator="221:3-221:90" xsi:type="DateFrom">
            <operand name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
               <operand localId="333" locator="221:13-221:90" strict="false" xsi:type="As">
                  <operand localId="331" locator="221:14-221:72" path="occurrence" xsi:type="Property">
                     <source localId="330" locator="221:14-221:61" name="Supplementary MCV Dose Administered to Patient" xsi:type="ExpressionRef"/>
                  </operand>
                  <asTypeSpecifier localId="332" locator="221:77-221:89" name="fhir:dateTime" xsi:type="NamedTypeSpecifier"/>
               </operand>
            </operand>
         </expression>
      </def>
      <def localId="353" locator="179:1-180:82" name="Date Birth MCV Dose Administered to Patient" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="353">
               <a:s>/**
 * @dataElement Date Birth MCV dose administered
 */
define &quot;Date Birth MCV Dose Administered to Patient&quot;:
  </a:s>
               <a:s r="352">
                  <a:s>date from </a:s>
                  <a:s r="351">
                     <a:s>(</a:s>
                     <a:s r="351">
                        <a:s r="349">
                           <a:s r="348">
                              <a:s>&quot;Birth MCV Dose Administered to Patient&quot;</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="349">
                              <a:s>occurrence</a:s>
                           </a:s>
                        </a:s>
                        <a:s> as </a:s>
                        <a:s r="350">
                           <a:s>FHIR.dateTime</a:s>
                        </a:s>
                     </a:s>
                     <a:s>)</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="352" locator="180:3-180:82" xsi:type="DateFrom">
            <operand name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
               <operand localId="351" locator="180:13-180:82" strict="false" xsi:type="As">
                  <operand localId="349" locator="180:14-180:64" path="occurrence" xsi:type="Property">
                     <source localId="348" locator="180:14-180:53" name="Birth MCV Dose Administered to Patient" xsi:type="ExpressionRef"/>
                  </operand>
                  <asTypeSpecifier localId="350" locator="180:69-180:81" name="fhir:dateTime" xsi:type="NamedTypeSpecifier"/>
               </operand>
            </operand>
         </expression>
      </def>
      <def localId="358" locator="89:1-96:4" name="Date Last Valid MCV Dose" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="358">
               <a:s>define &quot;Date Last Valid MCV Dose&quot;:
	</a:s>
               <a:s r="357">
                  <a:s>case 
	</a:s>
                  <a:s r="337">
                     <a:s>when </a:s>
                     <a:s r="329">
                        <a:s r="328">
                           <a:s>&quot;Supplementary MCV Dose Administered to Patient&quot;</a:s>
                        </a:s>
                        <a:s> is not null</a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="336">
                        <a:s>&quot;Date Supplementary MCV Dose Administered to Patient&quot;</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
	</a:s>
                  <a:s r="341">
                     <a:s>when </a:s>
                     <a:s r="339">
                        <a:s r="338">
                           <a:s>&quot;Second MCV Dose Administered to Patient&quot;</a:s>
                        </a:s>
                        <a:s> is not null</a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="340">
                        <a:s>&quot;Date Second MCV Dose Administered to Patient&quot;</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
	</a:s>
                  <a:s r="345">
                     <a:s>when </a:s>
                     <a:s r="343">
                        <a:s r="342">
                           <a:s>&quot;First MCV Dose Administered to Patient&quot;</a:s>
                        </a:s>
                        <a:s> is not null</a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="344">
                        <a:s>&quot;Date First MCV Dose Administered to Patient&quot;</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
	</a:s>
                  <a:s r="355">
                     <a:s>when </a:s>
                     <a:s r="347">
                        <a:s r="346">
                           <a:s>&quot;Birth MCV Dose Administered to Patient&quot;</a:s>
                        </a:s>
                        <a:s> is not null</a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="354">
                        <a:s>&quot;Date Birth MCV Dose Administered to Patient&quot;</a:s>
                     </a:s>
                  </a:s>
                  <a:s r="356">
	else null
	end</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="357" locator="90:2-96:4" xsi:type="Case">
            <caseItem localId="337" locator="91:2-91:125">
               <when localId="329" locator="91:7-91:66" xsi:type="Not">
                  <operand locator="91:7-91:66" xsi:type="IsNull">
                     <operand localId="328" locator="91:7-91:54" name="Supplementary MCV Dose Administered to Patient" xsi:type="ExpressionRef"/>
                  </operand>
               </when>
               <then localId="336" locator="91:73-91:125" name="Date Supplementary MCV Dose Administered to Patient" xsi:type="ExpressionRef"/>
            </caseItem>
            <caseItem localId="341" locator="92:2-92:111">
               <when localId="339" locator="92:7-92:59" xsi:type="Not">
                  <operand locator="92:7-92:59" xsi:type="IsNull">
                     <operand localId="338" locator="92:7-92:47" name="Second MCV Dose Administered to Patient" xsi:type="ExpressionRef"/>
                  </operand>
               </when>
               <then localId="340" locator="92:66-92:111" name="Date Second MCV Dose Administered to Patient" xsi:type="ExpressionRef"/>
            </caseItem>
            <caseItem localId="345" locator="93:2-93:109">
               <when localId="343" locator="93:7-93:58" xsi:type="Not">
                  <operand locator="93:7-93:58" xsi:type="IsNull">
                     <operand localId="342" locator="93:7-93:46" name="First MCV Dose Administered to Patient" xsi:type="ExpressionRef"/>
                  </operand>
               </when>
               <then localId="344" locator="93:65-93:109" name="Date First MCV Dose Administered to Patient" xsi:type="ExpressionRef"/>
            </caseItem>
            <caseItem localId="355" locator="94:2-94:109">
               <when localId="347" locator="94:7-94:58" xsi:type="Not">
                  <operand locator="94:7-94:58" xsi:type="IsNull">
                     <operand localId="346" locator="94:7-94:46" name="Birth MCV Dose Administered to Patient" xsi:type="ExpressionRef"/>
                  </operand>
               </when>
               <then localId="354" locator="94:65-94:109" name="Date Birth MCV Dose Administered to Patient" xsi:type="ExpressionRef"/>
            </caseItem>
            <else asType="t:Date" xsi:type="As">
               <operand localId="356" locator="95:7-95:10" xsi:type="Null"/>
            </else>
         </expression>
      </def>
      <def localId="364" locator="98:1-99:78" name="Should vaccinate patient for MCV" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="364">
               <a:s>define &quot;Should vaccinate patient for MCV&quot;:
	</a:s>
               <a:s r="363">
                  <a:s r="359">
                     <a:s>&quot;Provision of the MCV dose&quot;</a:s>
                  </a:s>
                  <a:s> and </a:s>
                  <a:s r="362">
                     <a:s>(</a:s>
                     <a:s r="362">
                        <a:s r="360">
                           <a:s>&quot;Schedule Due Date for MCV dose&quot;</a:s>
                        </a:s>
                        <a:s> &lt;= </a:s>
                        <a:s r="361">
                           <a:s>(</a:s>
                           <a:s r="361">
                              <a:s>Now()</a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                     </a:s>
                     <a:s>)</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="363" locator="99:2-99:78" xsi:type="And">
            <operand localId="359" locator="99:2-99:28" name="Provision of the MCV dose" xsi:type="ExpressionRef"/>
            <operand localId="362" locator="99:34-99:78" xsi:type="LessOrEqual">
               <operand localId="360" locator="99:35-99:66" name="Schedule Due Date for MCV dose" xsi:type="ExpressionRef"/>
               <operand localId="361" locator="99:71-99:77" xsi:type="Now"/>
            </operand>
         </expression>
      </def>
      <def localId="371" locator="122:1-123:84" name="Date Last MCV Dose Administered to Patient" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="371">
               <a:s>/** 
 * @dataElement Date of last MCV dose administration
 */
define &quot;Date Last MCV Dose Administered to Patient&quot;:
  </a:s>
               <a:s r="370">
                  <a:s>date from </a:s>
                  <a:s r="369">
                     <a:s>(</a:s>
                     <a:s r="369">
                        <a:s r="367">
                           <a:s r="366">
                              <a:s>First(</a:s>
                              <a:s r="365">
                                 <a:s>&quot;MCV Doses Administered to Patient&quot;</a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="367">
                              <a:s>occurrence</a:s>
                           </a:s>
                        </a:s>
                        <a:s> as </a:s>
                        <a:s r="368">
                           <a:s>FHIR.dateTime</a:s>
                        </a:s>
                     </a:s>
                     <a:s>)</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="370" locator="123:3-123:84" xsi:type="DateFrom">
            <operand name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
               <operand localId="369" locator="123:13-123:84" strict="false" xsi:type="As">
                  <operand localId="367" locator="123:14-123:66" path="occurrence" xsi:type="Property">
                     <source localId="366" locator="123:14-123:55" xsi:type="First">
                        <source localId="365" locator="123:20-123:54" name="MCV Doses Administered to Patient" xsi:type="ExpressionRef"/>
                     </source>
                  </operand>
                  <asTypeSpecifier localId="368" locator="123:71-123:83" name="fhir:dateTime" xsi:type="NamedTypeSpecifier"/>
               </operand>
            </operand>
         </expression>
      </def>
      <def localId="374" locator="128:1-129:44" name="Number of MCV Doses Administered to Patient" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="374">
               <a:s>/**
 * @define The number of MCV doses administerd to the patient
 */
define &quot;Number of MCV Doses Administered to Patient&quot;:
  </a:s>
               <a:s r="373">
                  <a:s>Count(</a:s>
                  <a:s r="372">
                     <a:s>&quot;MCV Doses Administered to Patient&quot;</a:s>
                  </a:s>
                  <a:s>)</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="373" locator="129:3-129:44" xsi:type="Count">
            <source localId="372" locator="129:9-129:43" name="MCV Doses Administered to Patient" xsi:type="ExpressionRef"/>
         </expression>
      </def>
   </statements>
</library>
