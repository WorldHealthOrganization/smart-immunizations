<?xml version="1.0" encoding="UTF-8"?>
<library xmlns="urn:hl7-org:elm:r1" xmlns:t="urn:hl7-org:elm-types:r1" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:fhir="http://hl7.org/fhir" xmlns:qdm43="urn:healthit-gov:qdm:v4_3" xmlns:qdm53="urn:healthit-gov:qdm:v5_3" xmlns:a="urn:hl7-org:cql-annotations:r1">
   <annotation translatorVersion="2.7.0" translatorOptions="EnableAnnotations,EnableLocators,DisableListDemotion,DisableListPromotion" xsi:type="a:CqlToElmInfo"/>
   <annotation xsi:type="a:Annotation">
      <a:s r="184">
         <a:s>/*
 * Library: IMMZD2DTHepatitisBInput (IMMZ.D2.DT.HepatitisBInput)					
 */
library IMMZD2DTHepatitisBInput</a:s>
      </a:s>
   </annotation>
   <identifier id="IMMZD2DTHepatitisBInput" system="http://smart.who.int/ig/smart-immunizations"/>
   <schemaIdentifier id="urn:hl7-org:elm" version="r1"/>
   <usings>
      <def localIdentifier="System" uri="urn:hl7-org:elm-types:r1"/>
      <def localId="1" locator="6:1-6:26" localIdentifier="FHIR" uri="http://hl7.org/fhir" version="4.0.1">
         <annotation xsi:type="a:Annotation">
            <a:s r="1">
               <a:s>// Start Skeleton CQL
using </a:s>
               <a:s>
                  <a:s>FHIR</a:s>
               </a:s>
               <a:s> version '4.0.1'</a:s>
            </a:s>
         </annotation>
      </def>
   </usings>
   <includes>
      <def localId="2" locator="7:1-7:35" localIdentifier="FHIRHelpers" path="http://smart.who.int/ig/smart-immunizations/FHIRHelpers" version="4.0.1">
         <annotation xsi:type="a:Annotation">
            <a:s r="2">
               <a:s>include </a:s>
               <a:s>
                  <a:s>FHIRHelpers</a:s>
               </a:s>
               <a:s> version '4.0.1'</a:s>
            </a:s>
         </annotation>
      </def>
      <def localId="3" locator="8:1-8:33" localIdentifier="IMMZCom" path="http://smart.who.int/ig/smart-immunizations/IMMZCommon">
         <annotation xsi:type="a:Annotation">
            <a:s r="3">
               <a:s>include </a:s>
               <a:s>
                  <a:s>IMMZCommon</a:s>
               </a:s>
               <a:s> called IMMZCom</a:s>
            </a:s>
         </annotation>
      </def>
      <def localId="4" locator="9:1-9:33" localIdentifier="IMMZc" path="http://smart.who.int/ig/smart-immunizations/IMMZConcepts">
         <annotation xsi:type="a:Annotation">
            <a:s r="4">
               <a:s>include </a:s>
               <a:s>
                  <a:s>IMMZConcepts</a:s>
               </a:s>
               <a:s> called IMMZc</a:s>
            </a:s>
         </annotation>
      </def>
      <def localId="5" locator="10:1-10:33" localIdentifier="IMMZCon" path="http://smart.who.int/ig/smart-immunizations/IMMZConfig">
         <annotation xsi:type="a:Annotation">
            <a:s r="5">
               <a:s>include </a:s>
               <a:s>
                  <a:s>IMMZConfig</a:s>
               </a:s>
               <a:s> called IMMZCon</a:s>
            </a:s>
         </annotation>
      </def>
      <def localId="6" locator="11:1-11:40" localIdentifier="IMMZvl" path="http://smart.who.int/ig/smart-immunizations/IMMZVaccineLibrary">
         <annotation xsi:type="a:Annotation">
            <a:s r="6">
               <a:s>include </a:s>
               <a:s>
                  <a:s>IMMZVaccineLibrary</a:s>
               </a:s>
               <a:s> called IMMZvl</a:s>
            </a:s>
         </annotation>
      </def>
      <def localId="7" locator="12:1-12:28" localIdentifier="FC" path="http://smart.who.int/ig/smart-immunizations/FHIRCommon">
         <annotation xsi:type="a:Annotation">
            <a:s r="7">
               <a:s>include </a:s>
               <a:s>
                  <a:s>FHIRCommon</a:s>
               </a:s>
               <a:s> called FC</a:s>
            </a:s>
         </annotation>
      </def>
   </includes>
   <statements>
      <def locator="15:1-15:15" name="Patient" context="Patient">
         <expression xsi:type="SingletonFrom">
            <operand locator="15:1-15:15" dataType="fhir:Patient" templateId="http://hl7.org/fhir/StructureDefinition/Patient" xsi:type="Retrieve"/>
         </expression>
      </def>
      <def localId="13" locator="20:1-21:40" name="MemberStatesPrecision" context="Patient" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="13">
               <a:s>/*
@function: compare 2 dates against the defined upper limit in the required precision
*/
define function MemberStatesPrecision( start </a:s>
               <a:s r="8">
                  <a:s>Date</a:s>
               </a:s>
               <a:s>, end </a:s>
               <a:s r="9">
                  <a:s>Date</a:s>
               </a:s>
               <a:s>):
	</a:s>
               <a:s r="12">
                  <a:s r="12">
                     <a:s>duration in weeks between </a:s>
                     <a:s r="10">
                        <a:s>start</a:s>
                     </a:s>
                     <a:s> and </a:s>
                     <a:s r="11">
                        <a:s>end</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="12" locator="21:2-21:40" precision="Week" xsi:type="DurationBetween">
            <signature name="t:Date" xsi:type="NamedTypeSpecifier"/>
            <signature name="t:Date" xsi:type="NamedTypeSpecifier"/>
            <operand localId="10" locator="21:28-21:32" name="start" xsi:type="OperandRef"/>
            <operand localId="11" locator="21:38-21:40" name="end" xsi:type="OperandRef"/>
         </expression>
         <operand name="start">
            <operandTypeSpecifier localId="8" locator="20:46-20:49" name="t:Date" xsi:type="NamedTypeSpecifier"/>
         </operand>
         <operand name="end">
            <operandTypeSpecifier localId="9" locator="20:56-20:59" name="t:Date" xsi:type="NamedTypeSpecifier"/>
         </operand>
      </def>
      <def localId="15" locator="26:1-27:3" name="Member States defined upper limit" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="15">
               <a:s r="14">/*
@parameter: Member States defined upper limit
*/
define &quot;Member States defined upper limit&quot;:
  4</a:s>
            </a:s>
         </annotation>
         <expression localId="14" locator="27:3" valueType="t:Integer" value="4" xsi:type="Literal"/>
      </def>
      <def localId="17" locator="32:1-33:3" name="Member States defined lower limit" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="17">
               <a:s r="16">/*
@parameter: Member States defined lower limit
*/
define &quot;Member States defined lower limit&quot;:
  4</a:s>
            </a:s>
         </annotation>
         <expression localId="16" locator="33:3" valueType="t:Integer" value="4" xsi:type="Literal"/>
      </def>
      <def localId="26" locator="39:1-42:48" name="Hepatitis B Doses Administered to Patient" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="26">
               <a:s>/*
@internal: Hepatitis B containing Doses Administered to Patient
*/
define &quot;Hepatitis B Doses Administered to Patient&quot;:
  </a:s>
               <a:s r="25">
                  <a:s>
                     <a:s r="19">
                        <a:s r="18">
                           <a:s>
                              <a:s>IMMZCom.&quot;Doses Administered to Patient&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s> I</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
  </a:s>
                  <a:s r="24">
                     <a:s>where
    </a:s>
                     <a:s r="24">
                        <a:s r="21">
                           <a:s r="20">
                              <a:s>I</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="21">
                              <a:s>vaccineCode</a:s>
                           </a:s>
                        </a:s>
                        <a:s> in </a:s>
                        <a:s r="23">
                           <a:s r="22">
                              <a:s>IMMZc</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="23">
                              <a:s>&quot;Hepatitis B Vaccine&quot;</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="25" locator="40:3-42:48" xsi:type="Query">
            <source localId="19" locator="40:3-40:43" alias="I">
               <expression localId="18" locator="40:3-40:41" name="Doses Administered to Patient" libraryName="IMMZCom" xsi:type="ExpressionRef"/>
            </source>
            <where localId="24" locator="41:3-42:48" xsi:type="InValueSet">
               <signature name="t:Concept" xsi:type="NamedTypeSpecifier"/>
               <code name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                  <signature name="fhir:CodeableConcept" xsi:type="NamedTypeSpecifier"/>
                  <operand localId="21" locator="42:5-42:17" path="vaccineCode" scope="I" xsi:type="Property"/>
               </code>
               <valueset localId="23" locator="42:22-42:48" name="Hepatitis B Vaccine" libraryName="IMMZc"/>
            </where>
         </expression>
      </def>
      <def localId="40" locator="47:1-48:168" name="Hepatitis B Primary Series Doses Administered to Patient" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="40">
               <a:s>/*
@internal: Hepatitis B Primary Series Doses Administered to Patient
*/
define &quot;Hepatitis B Primary Series Doses Administered to Patient&quot;:
	</a:s>
               <a:s r="39">
                  <a:s>
                     <a:s r="28">
                        <a:s r="27">
                           <a:s>
                              <a:s>&quot;Hepatitis B Doses Administered to Patient&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s> I</a:s>
                     </a:s>
                  </a:s>
                  <a:s> </a:s>
                  <a:s r="38">
                     <a:s>where </a:s>
                     <a:s r="38">
                        <a:s r="36">
                           <a:s>MemberStatesPrecision( </a:s>
                           <a:s r="30">
                              <a:s r="29">
                                 <a:s>Patient</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="30">
                                 <a:s>birthDate</a:s>
                              </a:s>
                           </a:s>
                           <a:s>, </a:s>
                           <a:s r="35">
                              <a:s>ToDate(</a:s>
                              <a:s r="34">
                                 <a:s r="32">
                                    <a:s r="31">
                                       <a:s>I</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="32">
                                       <a:s>occurrence</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> as </a:s>
                                 <a:s r="33">
                                    <a:s>dateTime</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                           <a:s> )</a:s>
                        </a:s>
                        <a:s> >= </a:s>
                        <a:s r="37">
                           <a:s>&quot;Member States defined upper limit&quot;</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="39" locator="48:2-48:168" xsi:type="Query">
            <source localId="28" locator="48:2-48:46" alias="I">
               <expression localId="27" locator="48:2-48:44" name="Hepatitis B Doses Administered to Patient" xsi:type="ExpressionRef"/>
            </source>
            <where localId="38" locator="48:48-48:168" xsi:type="GreaterOrEqual">
               <signature name="t:Integer" xsi:type="NamedTypeSpecifier"/>
               <signature name="t:Integer" xsi:type="NamedTypeSpecifier"/>
               <operand localId="36" locator="48:54-48:129" name="MemberStatesPrecision" xsi:type="FunctionRef">
                  <signature name="t:Date" xsi:type="NamedTypeSpecifier"/>
                  <signature name="t:Date" xsi:type="NamedTypeSpecifier"/>
                  <operand name="ToDate" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <signature name="fhir:date" xsi:type="NamedTypeSpecifier"/>
                     <operand localId="30" locator="48:77-48:93" path="birthDate" xsi:type="Property">
                        <source localId="29" locator="48:77-48:83" name="Patient" xsi:type="ExpressionRef"/>
                     </operand>
                  </operand>
                  <operand localId="35" locator="48:96-48:127" xsi:type="ToDate">
                     <signature name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                     <operand name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <signature name="fhir:dateTime" xsi:type="NamedTypeSpecifier"/>
                        <operand localId="34" locator="48:103-48:126" strict="false" xsi:type="As">
                           <operand localId="32" locator="48:103-48:114" path="occurrence" scope="I" xsi:type="Property"/>
                           <asTypeSpecifier localId="33" locator="48:119-48:126" name="fhir:dateTime" xsi:type="NamedTypeSpecifier"/>
                        </operand>
                     </operand>
                  </operand>
               </operand>
               <operand localId="37" locator="48:134-48:168" name="Member States defined upper limit" xsi:type="ExpressionRef"/>
            </where>
         </expression>
      </def>
      <def localId="46" locator="53:1-54:74" name="Date of latest Hepatitis B Vaccine" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="46">
               <a:s>/*
@internal: Date of latest Hepatitis B Vaccine
*/
define &quot;Date of latest Hepatitis B Vaccine&quot;:
	</a:s>
               <a:s r="45">
                  <a:s r="43">
                     <a:s r="42">
                        <a:s>First(</a:s>
                        <a:s r="41">
                           <a:s>&quot;Hepatitis B Doses Administered to Patient&quot;</a:s>
                        </a:s>
                        <a:s>)</a:s>
                     </a:s>
                     <a:s>.</a:s>
                     <a:s r="43">
                        <a:s>occurrence</a:s>
                     </a:s>
                  </a:s>
                  <a:s> as </a:s>
                  <a:s r="44">
                     <a:s>dateTime</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="45" locator="54:2-54:74" strict="false" xsi:type="As">
            <operand localId="43" locator="54:2-54:62" path="occurrence" xsi:type="Property">
               <source localId="42" locator="54:2-54:51" xsi:type="First">
                  <signature xsi:type="ListTypeSpecifier">
                     <elementType name="fhir:Immunization" xsi:type="NamedTypeSpecifier"/>
                  </signature>
                  <source localId="41" locator="54:8-54:50" name="Hepatitis B Doses Administered to Patient" xsi:type="ExpressionRef"/>
               </source>
            </operand>
            <asTypeSpecifier localId="44" locator="54:67-54:74" name="fhir:dateTime" xsi:type="NamedTypeSpecifier"/>
         </expression>
      </def>
      <def localId="52" locator="59:1-60:73" name="Date of first Hepatitis B Vaccine" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="52">
               <a:s>/*
@internal: Date of first Hepatitis B Vaccine
*/
define &quot;Date of first Hepatitis B Vaccine&quot;:
	</a:s>
               <a:s r="51">
                  <a:s r="49">
                     <a:s r="48">
                        <a:s>Last(</a:s>
                        <a:s r="47">
                           <a:s>&quot;Hepatitis B Doses Administered to Patient&quot;</a:s>
                        </a:s>
                        <a:s>)</a:s>
                     </a:s>
                     <a:s>.</a:s>
                     <a:s r="49">
                        <a:s>occurrence</a:s>
                     </a:s>
                  </a:s>
                  <a:s> as </a:s>
                  <a:s r="50">
                     <a:s>dateTime</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="51" locator="60:2-60:73" strict="false" xsi:type="As">
            <operand localId="49" locator="60:2-60:61" path="occurrence" xsi:type="Property">
               <source localId="48" locator="60:2-60:50" xsi:type="Last">
                  <signature xsi:type="ListTypeSpecifier">
                     <elementType name="fhir:Immunization" xsi:type="NamedTypeSpecifier"/>
                  </signature>
                  <source localId="47" locator="60:7-60:49" name="Hepatitis B Doses Administered to Patient" xsi:type="ExpressionRef"/>
               </source>
            </operand>
            <asTypeSpecifier localId="50" locator="60:66-60:73" name="fhir:dateTime" xsi:type="NamedTypeSpecifier"/>
         </expression>
      </def>
      <def localId="67" locator="73:1-74:175" name="Hepatitis B birth dose was administered" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="67">
               <a:s>/*
@input: Hepatitis B birth dose was administered
@pseudocode: Count of vaccines administered (where &quot;Vaccine type&quot; = 'Hepatitis B containing vaccines' and &quot;Birth Dose&quot; = TRUE) = 1
*/
define &quot;Hepatitis B birth dose was administered&quot;:
	</a:s>
               <a:s r="66">
                  <a:s>exists</a:s>
                  <a:s r="65">
                     <a:s>(</a:s>
                     <a:s r="65">
                        <a:s>
                           <a:s r="54">
                              <a:s r="53">
                                 <a:s>
                                    <a:s>&quot;Hepatitis B Doses Administered to Patient&quot;</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> I</a:s>
                           </a:s>
                        </a:s>
                        <a:s> </a:s>
                        <a:s r="64">
                           <a:s>where </a:s>
                           <a:s r="64">
                              <a:s r="62">
                                 <a:s>MemberStatesPrecision( </a:s>
                                 <a:s r="56">
                                    <a:s r="55">
                                       <a:s>Patient</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="56">
                                       <a:s>birthDate</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>, </a:s>
                                 <a:s r="61">
                                    <a:s>ToDate(</a:s>
                                    <a:s r="60">
                                       <a:s r="58">
                                          <a:s r="57">
                                             <a:s>I</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="58">
                                             <a:s>occurrence</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s> as </a:s>
                                       <a:s r="59">
                                          <a:s>dateTime</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>)</a:s>
                                 </a:s>
                                 <a:s> )</a:s>
                              </a:s>
                              <a:s> &lt; </a:s>
                              <a:s r="63">
                                 <a:s>&quot;Member States defined upper limit&quot;</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>)</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="66" locator="74:2-74:175" xsi:type="Exists">
            <signature xsi:type="ListTypeSpecifier">
               <elementType name="fhir:Immunization" xsi:type="NamedTypeSpecifier"/>
            </signature>
            <operand localId="65" locator="74:8-74:175" xsi:type="Query">
               <source localId="54" locator="74:9-74:53" alias="I">
                  <expression localId="53" locator="74:9-74:51" name="Hepatitis B Doses Administered to Patient" xsi:type="ExpressionRef"/>
               </source>
               <where localId="64" locator="74:55-74:174" xsi:type="Less">
                  <signature name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                  <signature name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                  <operand localId="62" locator="74:61-74:136" name="MemberStatesPrecision" xsi:type="FunctionRef">
                     <signature name="t:Date" xsi:type="NamedTypeSpecifier"/>
                     <signature name="t:Date" xsi:type="NamedTypeSpecifier"/>
                     <operand name="ToDate" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <signature name="fhir:date" xsi:type="NamedTypeSpecifier"/>
                        <operand localId="56" locator="74:84-74:100" path="birthDate" xsi:type="Property">
                           <source localId="55" locator="74:84-74:90" name="Patient" xsi:type="ExpressionRef"/>
                        </operand>
                     </operand>
                     <operand localId="61" locator="74:103-74:134" xsi:type="ToDate">
                        <signature name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                        <operand name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <signature name="fhir:dateTime" xsi:type="NamedTypeSpecifier"/>
                           <operand localId="60" locator="74:110-74:133" strict="false" xsi:type="As">
                              <operand localId="58" locator="74:110-74:121" path="occurrence" scope="I" xsi:type="Property"/>
                              <asTypeSpecifier localId="59" locator="74:126-74:133" name="fhir:dateTime" xsi:type="NamedTypeSpecifier"/>
                           </operand>
                        </operand>
                     </operand>
                  </operand>
                  <operand localId="63" locator="74:140-74:174" name="Member States defined upper limit" xsi:type="ExpressionRef"/>
               </where>
            </operand>
         </expression>
      </def>
      <def localId="70" locator="66:1-67:49" name="Hepatitis B birth dose was not administered" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="70">
               <a:s>/*
@input: Hepatitis B birth dose was not administered
@pseudocode: Count of vaccines administered (where &quot;Vaccine type&quot; = 'Hepatitis B containing vaccines' and &quot;Birth Dose&quot; = TRUE) = 0
*/
define &quot;Hepatitis B birth dose was not administered&quot;:
	</a:s>
               <a:s r="69">
                  <a:s>not</a:s>
                  <a:s r="68">
                     <a:s>( </a:s>
                     <a:s r="68">
                        <a:s>&quot;Hepatitis B birth dose was administered&quot;</a:s>
                     </a:s>
                     <a:s> )</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="69" locator="67:2-67:49" xsi:type="Not">
            <signature name="t:Boolean" xsi:type="NamedTypeSpecifier"/>
            <operand localId="68" locator="67:5-67:49" name="Hepatitis B birth dose was administered" xsi:type="ExpressionRef"/>
         </expression>
      </def>
      <def localId="75" locator="80:1-81:55" name="No hepatitis B doses were administered" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="75">
               <a:s>/*
@input: No hepatitis B doses were administered
@pseudocode: Count of vaccines administered (where &quot;Vaccine type&quot; = 'Hepatitis B containing vaccines') = 0
*/
define &quot;No hepatitis B doses were administered&quot;:
	</a:s>
               <a:s r="74">
                  <a:s r="72">
                     <a:s>Count(</a:s>
                     <a:s r="71">
                        <a:s>&quot;Hepatitis B Doses Administered to Patient&quot;</a:s>
                     </a:s>
                     <a:s>)</a:s>
                  </a:s>
                  <a:s r="73"> = 0</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="74" locator="81:2-81:55" xsi:type="Equal">
            <signature name="t:Integer" xsi:type="NamedTypeSpecifier"/>
            <signature name="t:Integer" xsi:type="NamedTypeSpecifier"/>
            <operand localId="72" locator="81:2-81:51" xsi:type="Count">
               <signature xsi:type="ListTypeSpecifier">
                  <elementType name="fhir:Immunization" xsi:type="NamedTypeSpecifier"/>
               </signature>
               <source localId="71" locator="81:8-81:50" name="Hepatitis B Doses Administered to Patient" xsi:type="ExpressionRef"/>
            </operand>
            <operand localId="73" locator="81:55" valueType="t:Integer" value="0" xsi:type="Literal"/>
         </expression>
      </def>
      <def localId="80" locator="87:1-88:55" name="One hepatitis B dose was administered" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="80">
               <a:s>/*
@input: One hepatitis B dose was administered
@pseudocode: Count of vaccines administered (where &quot;Vaccine type&quot; = 'Hepatitis B containing vaccines') = 1
*/
define &quot;One hepatitis B dose was administered&quot;:
	</a:s>
               <a:s r="79">
                  <a:s r="77">
                     <a:s>Count(</a:s>
                     <a:s r="76">
                        <a:s>&quot;Hepatitis B Doses Administered to Patient&quot;</a:s>
                     </a:s>
                     <a:s>)</a:s>
                  </a:s>
                  <a:s r="78"> = 1</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="79" locator="88:2-88:55" xsi:type="Equal">
            <signature name="t:Integer" xsi:type="NamedTypeSpecifier"/>
            <signature name="t:Integer" xsi:type="NamedTypeSpecifier"/>
            <operand localId="77" locator="88:2-88:51" xsi:type="Count">
               <signature xsi:type="ListTypeSpecifier">
                  <elementType name="fhir:Immunization" xsi:type="NamedTypeSpecifier"/>
               </signature>
               <source localId="76" locator="88:8-88:50" name="Hepatitis B Doses Administered to Patient" xsi:type="ExpressionRef"/>
            </operand>
            <operand localId="78" locator="88:55" valueType="t:Integer" value="1" xsi:type="Literal"/>
         </expression>
      </def>
      <def localId="85" locator="94:1-95:55" name="Two hepatitis B doses were administered" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="85">
               <a:s>/*
@input: Two hepatitis B doses were administered
@pseudocode: Count of vaccines administered (where &quot;Vaccine type&quot; = 'Hepatitis B containing vaccines') = 2
*/
define &quot;Two hepatitis B doses were administered&quot;:
	</a:s>
               <a:s r="84">
                  <a:s r="82">
                     <a:s>Count(</a:s>
                     <a:s r="81">
                        <a:s>&quot;Hepatitis B Doses Administered to Patient&quot;</a:s>
                     </a:s>
                     <a:s>)</a:s>
                  </a:s>
                  <a:s r="83"> = 2</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="84" locator="95:2-95:55" xsi:type="Equal">
            <signature name="t:Integer" xsi:type="NamedTypeSpecifier"/>
            <signature name="t:Integer" xsi:type="NamedTypeSpecifier"/>
            <operand localId="82" locator="95:2-95:51" xsi:type="Count">
               <signature xsi:type="ListTypeSpecifier">
                  <elementType name="fhir:Immunization" xsi:type="NamedTypeSpecifier"/>
               </signature>
               <source localId="81" locator="95:8-95:50" name="Hepatitis B Doses Administered to Patient" xsi:type="ExpressionRef"/>
            </operand>
            <operand localId="83" locator="95:55" valueType="t:Integer" value="2" xsi:type="Literal"/>
         </expression>
      </def>
      <def localId="90" locator="101:1-102:55" name="Three hepatitis B doses were administered" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="90">
               <a:s>/*
@input: Three hepatitis B doses were administered
@pseudocode: Count of vaccines administered (where &quot;Vaccine type&quot; = 'Hepatitis B containing vaccines') = 3
*/
define &quot;Three hepatitis B doses were administered&quot;:
	</a:s>
               <a:s r="89">
                  <a:s r="87">
                     <a:s>Count(</a:s>
                     <a:s r="86">
                        <a:s>&quot;Hepatitis B Doses Administered to Patient&quot;</a:s>
                     </a:s>
                     <a:s>)</a:s>
                  </a:s>
                  <a:s r="88"> = 3</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="89" locator="102:2-102:55" xsi:type="Equal">
            <signature name="t:Integer" xsi:type="NamedTypeSpecifier"/>
            <signature name="t:Integer" xsi:type="NamedTypeSpecifier"/>
            <operand localId="87" locator="102:2-102:51" xsi:type="Count">
               <signature xsi:type="ListTypeSpecifier">
                  <elementType name="fhir:Immunization" xsi:type="NamedTypeSpecifier"/>
               </signature>
               <source localId="86" locator="102:8-102:50" name="Hepatitis B Doses Administered to Patient" xsi:type="ExpressionRef"/>
            </operand>
            <operand localId="88" locator="102:55" valueType="t:Integer" value="3" xsi:type="Literal"/>
         </expression>
      </def>
      <def localId="95" locator="108:1-109:70" name="No hepatitis B primary series doses were administered" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="95">
               <a:s>/*
@input: No hepatitis B primary series doses were administered
@pseudocode: Count of vaccines administered (where &quot;Vaccine type&quot; = 'Hepatitis B containing vaccines' and &quot;Type of dose&quot; = 'Primary series') = 0
*/
define &quot;No hepatitis B primary series doses were administered&quot;:
	</a:s>
               <a:s r="94">
                  <a:s r="92">
                     <a:s>Count(</a:s>
                     <a:s r="91">
                        <a:s>&quot;Hepatitis B Primary Series Doses Administered to Patient&quot;</a:s>
                     </a:s>
                     <a:s>)</a:s>
                  </a:s>
                  <a:s r="93"> = 0</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="94" locator="109:2-109:70" xsi:type="Equal">
            <signature name="t:Integer" xsi:type="NamedTypeSpecifier"/>
            <signature name="t:Integer" xsi:type="NamedTypeSpecifier"/>
            <operand localId="92" locator="109:2-109:66" xsi:type="Count">
               <signature xsi:type="ListTypeSpecifier">
                  <elementType name="fhir:Immunization" xsi:type="NamedTypeSpecifier"/>
               </signature>
               <source localId="91" locator="109:8-109:65" name="Hepatitis B Primary Series Doses Administered to Patient" xsi:type="ExpressionRef"/>
            </operand>
            <operand localId="93" locator="109:70" valueType="t:Integer" value="0" xsi:type="Literal"/>
         </expression>
      </def>
      <def localId="100" locator="115:1-116:70" name="One hepatitis B primary series dose was administered" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="100">
               <a:s>/*
@input: One hepatitis B primary series dose was administered
@pseudocode: Count of vaccines administered (where &quot;Vaccine type&quot; = 'Hepatitis B containing vaccines' and &quot;Type of dose&quot; = 'Primary series') = 1
*/
define &quot;One hepatitis B primary series dose was administered&quot;:
	</a:s>
               <a:s r="99">
                  <a:s r="97">
                     <a:s>Count(</a:s>
                     <a:s r="96">
                        <a:s>&quot;Hepatitis B Primary Series Doses Administered to Patient&quot;</a:s>
                     </a:s>
                     <a:s>)</a:s>
                  </a:s>
                  <a:s r="98"> = 1</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="99" locator="116:2-116:70" xsi:type="Equal">
            <signature name="t:Integer" xsi:type="NamedTypeSpecifier"/>
            <signature name="t:Integer" xsi:type="NamedTypeSpecifier"/>
            <operand localId="97" locator="116:2-116:66" xsi:type="Count">
               <signature xsi:type="ListTypeSpecifier">
                  <elementType name="fhir:Immunization" xsi:type="NamedTypeSpecifier"/>
               </signature>
               <source localId="96" locator="116:8-116:65" name="Hepatitis B Primary Series Doses Administered to Patient" xsi:type="ExpressionRef"/>
            </operand>
            <operand localId="98" locator="116:70" valueType="t:Integer" value="1" xsi:type="Literal"/>
         </expression>
      </def>
      <def localId="105" locator="122:1-123:70" name="Two hepatitis B primary series doses were administered" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="105">
               <a:s>/*
@input: Two hepatitis B primary series doses were administered
@pseudocode: Count of vaccines administered (where &quot;Vaccine type&quot; = 'Hepatitis B containing vaccines' and &quot;Type of dose&quot; = 'Primary series') = 2
*/
define &quot;Two hepatitis B primary series doses were administered&quot;:
	</a:s>
               <a:s r="104">
                  <a:s r="102">
                     <a:s>Count(</a:s>
                     <a:s r="101">
                        <a:s>&quot;Hepatitis B Primary Series Doses Administered to Patient&quot;</a:s>
                     </a:s>
                     <a:s>)</a:s>
                  </a:s>
                  <a:s r="103"> = 2</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="104" locator="123:2-123:70" xsi:type="Equal">
            <signature name="t:Integer" xsi:type="NamedTypeSpecifier"/>
            <signature name="t:Integer" xsi:type="NamedTypeSpecifier"/>
            <operand localId="102" locator="123:2-123:66" xsi:type="Count">
               <signature xsi:type="ListTypeSpecifier">
                  <elementType name="fhir:Immunization" xsi:type="NamedTypeSpecifier"/>
               </signature>
               <source localId="101" locator="123:8-123:65" name="Hepatitis B Primary Series Doses Administered to Patient" xsi:type="ExpressionRef"/>
            </operand>
            <operand localId="103" locator="123:70" valueType="t:Integer" value="2" xsi:type="Literal"/>
         </expression>
      </def>
      <def localId="110" locator="129:1-130:70" name="Three hepatitis B primary series doses were administered" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="110">
               <a:s>/*
@input: Three hepatitis B primary series doses were administered
@pseudocode: Count of vaccines administered (where &quot;Vaccine type&quot; = 'Hepatitis B containing vaccines' and &quot;Type of dose&quot; = 'Primary series') = 3
*/
define &quot;Three hepatitis B primary series doses were administered&quot;:
	</a:s>
               <a:s r="109">
                  <a:s r="107">
                     <a:s>Count(</a:s>
                     <a:s r="106">
                        <a:s>&quot;Hepatitis B Primary Series Doses Administered to Patient&quot;</a:s>
                     </a:s>
                     <a:s>)</a:s>
                  </a:s>
                  <a:s r="108"> = 3</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="109" locator="130:2-130:70" xsi:type="Equal">
            <signature name="t:Integer" xsi:type="NamedTypeSpecifier"/>
            <signature name="t:Integer" xsi:type="NamedTypeSpecifier"/>
            <operand localId="107" locator="130:2-130:66" xsi:type="Count">
               <signature xsi:type="ListTypeSpecifier">
                  <elementType name="fhir:Immunization" xsi:type="NamedTypeSpecifier"/>
               </signature>
               <source localId="106" locator="130:8-130:65" name="Hepatitis B Primary Series Doses Administered to Patient" xsi:type="ExpressionRef"/>
            </operand>
            <operand localId="108" locator="130:70" valueType="t:Integer" value="3" xsi:type="Literal"/>
         </expression>
      </def>
      <def localId="117" locator="136:1-137:88" name="Client's age is less than {Member States defined upper limit}" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="117">
               <a:s>/*
@input: Client's age is less than {Member States defined upper limit}
@pseudocode: Today's date - &quot;Date of birth&quot;  &lt; Member states defined uper limit
*/
define &quot;Client's age is less than {Member States defined upper limit}&quot;:
	</a:s>
               <a:s r="116">
                  <a:s r="114">
                     <a:s>MemberStatesPrecision(</a:s>
                     <a:s r="112">
                        <a:s r="111">
                           <a:s>Patient</a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="112">
                           <a:s>birthDate</a:s>
                        </a:s>
                     </a:s>
                     <a:s>, </a:s>
                     <a:s r="113">
                        <a:s>Today()</a:s>
                     </a:s>
                     <a:s>)</a:s>
                  </a:s>
                  <a:s> &lt; </a:s>
                  <a:s r="115">
                     <a:s>&quot;Member States defined upper limit&quot;</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="116" locator="137:2-137:88" xsi:type="Less">
            <signature name="t:Integer" xsi:type="NamedTypeSpecifier"/>
            <signature name="t:Integer" xsi:type="NamedTypeSpecifier"/>
            <operand localId="114" locator="137:2-137:50" name="MemberStatesPrecision" xsi:type="FunctionRef">
               <signature name="t:Date" xsi:type="NamedTypeSpecifier"/>
               <signature name="t:Date" xsi:type="NamedTypeSpecifier"/>
               <operand name="ToDate" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                  <signature name="fhir:date" xsi:type="NamedTypeSpecifier"/>
                  <operand localId="112" locator="137:24-137:40" path="birthDate" xsi:type="Property">
                     <source localId="111" locator="137:24-137:30" name="Patient" xsi:type="ExpressionRef"/>
                  </operand>
               </operand>
               <operand localId="113" locator="137:43-137:49" xsi:type="Today"/>
            </operand>
            <operand localId="115" locator="137:54-137:88" name="Member States defined upper limit" xsi:type="ExpressionRef"/>
         </expression>
      </def>
      <def localId="120" locator="143:1-144:71" name="Client's age is more than {Member States defined upper limit}" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="120">
               <a:s>/*
@input: Client's age is more than {Member States defined upper limit}
@pseudocode: Today's date - &quot;Date of birth&quot;  > Member states defined upper limit
*/
define &quot;Client's age is more than {Member States defined upper limit}&quot;:
	</a:s>
               <a:s r="119">
                  <a:s>not</a:s>
                  <a:s r="118">
                     <a:s>( </a:s>
                     <a:s r="118">
                        <a:s>&quot;Client's age is less than {Member States defined upper limit}&quot;</a:s>
                     </a:s>
                     <a:s> )</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="119" locator="144:2-144:71" xsi:type="Not">
            <signature name="t:Boolean" xsi:type="NamedTypeSpecifier"/>
            <operand localId="118" locator="144:5-144:71" name="Client's age is less than {Member States defined upper limit}" xsi:type="ExpressionRef"/>
         </expression>
      </def>
      <def localId="127" locator="150:1-151:88" name="Client's age is less than {Member States defined lower limit}" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="127">
               <a:s>/*
@input: Client's age is less than {Member States defined lower limit}
@pseudocode: Today's date - &quot;Date of birth&quot;  &lt; Member states defined lower limit
*/
define &quot;Client's age is less than {Member States defined lower limit}&quot;:
	</a:s>
               <a:s r="126">
                  <a:s r="124">
                     <a:s>MemberStatesPrecision(</a:s>
                     <a:s r="122">
                        <a:s r="121">
                           <a:s>Patient</a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="122">
                           <a:s>birthDate</a:s>
                        </a:s>
                     </a:s>
                     <a:s>, </a:s>
                     <a:s r="123">
                        <a:s>Today()</a:s>
                     </a:s>
                     <a:s>)</a:s>
                  </a:s>
                  <a:s> &lt; </a:s>
                  <a:s r="125">
                     <a:s>&quot;Member States defined lower limit&quot;</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="126" locator="151:2-151:88" xsi:type="Less">
            <signature name="t:Integer" xsi:type="NamedTypeSpecifier"/>
            <signature name="t:Integer" xsi:type="NamedTypeSpecifier"/>
            <operand localId="124" locator="151:2-151:50" name="MemberStatesPrecision" xsi:type="FunctionRef">
               <signature name="t:Date" xsi:type="NamedTypeSpecifier"/>
               <signature name="t:Date" xsi:type="NamedTypeSpecifier"/>
               <operand name="ToDate" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                  <signature name="fhir:date" xsi:type="NamedTypeSpecifier"/>
                  <operand localId="122" locator="151:24-151:40" path="birthDate" xsi:type="Property">
                     <source localId="121" locator="151:24-151:30" name="Patient" xsi:type="ExpressionRef"/>
                  </operand>
               </operand>
               <operand localId="123" locator="151:43-151:49" xsi:type="Today"/>
            </operand>
            <operand localId="125" locator="151:54-151:88" name="Member States defined lower limit" xsi:type="ExpressionRef"/>
         </expression>
      </def>
      <def localId="130" locator="157:1-158:71" name="Client's age is more than or equal to {Member States defined lower limit}" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="130">
               <a:s>/*
@input: Client's age is more than or equal to {Member States defined lower limit}
@pseudocode: Today's date - &quot;Date of birth&quot;  >= Member states defined lower limit
*/
define &quot;Client's age is more than or equal to {Member States defined lower limit}&quot;:
	</a:s>
               <a:s r="129">
                  <a:s>not</a:s>
                  <a:s r="128">
                     <a:s>( </a:s>
                     <a:s r="128">
                        <a:s>&quot;Client's age is less than {Member States defined lower limit}&quot;</a:s>
                     </a:s>
                     <a:s> )</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="129" locator="158:2-158:71" xsi:type="Not">
            <signature name="t:Boolean" xsi:type="NamedTypeSpecifier"/>
            <operand localId="128" locator="158:5-158:71" name="Client's age is less than {Member States defined lower limit}" xsi:type="ExpressionRef"/>
         </expression>
      </def>
      <def localId="135" locator="170:1-171:47" name="Client's weight at birth was below 2000g" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="135">
               <a:s>/*
@input: Client's weight at birth was below 2000g
@pseudocode: &quot;Birth weight in grams&quot; &lt; 2000
*/
define &quot;Client's weight at birth was below 2000g&quot;:
	</a:s>
               <a:s r="134">
                  <a:s r="132">
                     <a:s r="131">
                        <a:s>IMMZCom</a:s>
                     </a:s>
                     <a:s>.</a:s>
                     <a:s r="132">
                        <a:s>&quot;Patient birth weight in grams&quot;</a:s>
                     </a:s>
                  </a:s>
                  <a:s r="133"> &lt; 2000</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="134" locator="171:2-171:47" xsi:type="Less">
            <signature name="t:Integer" xsi:type="NamedTypeSpecifier"/>
            <signature name="t:Integer" xsi:type="NamedTypeSpecifier"/>
            <operand name="ToInteger" libraryName="FHIRHelpers" xsi:type="FunctionRef">
               <signature name="fhir:integer" xsi:type="NamedTypeSpecifier"/>
               <operand localId="132" locator="171:2-171:40" name="Patient birth weight in grams" libraryName="IMMZCom" xsi:type="ExpressionRef"/>
            </operand>
            <operand localId="133" locator="171:44-171:47" valueType="t:Integer" value="2000" xsi:type="Literal"/>
         </expression>
      </def>
      <def localId="138" locator="164:1-165:48" name="Client's weight at birth was over 2000g" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="138">
               <a:s>/*
@input: Client's weight at birth was over 2000g
@pseudocode: &quot;Birth weight in grams&quot;  ≥ 2000
*/
define &quot;Client's weight at birth was over 2000g&quot;:
	</a:s>
               <a:s r="137">
                  <a:s>not</a:s>
                  <a:s r="136">
                     <a:s>(</a:s>
                     <a:s r="136">
                        <a:s>&quot;Client's weight at birth was below 2000g&quot;</a:s>
                     </a:s>
                     <a:s>)</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="137" locator="165:2-165:48" xsi:type="Not">
            <signature name="t:Boolean" xsi:type="NamedTypeSpecifier"/>
            <operand localId="136" locator="165:5-165:48" name="Client's weight at birth was below 2000g" xsi:type="ExpressionRef"/>
         </expression>
      </def>
      <def localId="141" locator="183:1-184:24" name="Client was a premature infant at birth" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="141">
               <a:s>/*
@input: Client was a premature infant at birth
@pseudocode: &quot;Preterm birth&quot; =  TRUE
*/
define &quot;Client was a premature infant at birth&quot;:
	</a:s>
               <a:s r="140">
                  <a:s r="139">
                     <a:s>IMMZCom</a:s>
                  </a:s>
                  <a:s>.</a:s>
                  <a:s r="140">
                     <a:s>&quot;Preterm Birth&quot;</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="140" locator="184:2-184:24" name="Preterm Birth" libraryName="IMMZCom" xsi:type="ExpressionRef"/>
      </def>
      <def localId="144" locator="176:1-177:46" name="Client was not a premature infant at birth" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="144">
               <a:s>/*
@input: Client was not a premature infant at birth
@pseudocode: &quot;Preterm birth&quot; ≠  TRUE
*/
define &quot;Client was not a premature infant at birth&quot;:
	</a:s>
               <a:s r="143">
                  <a:s>not</a:s>
                  <a:s r="142">
                     <a:s>(</a:s>
                     <a:s r="142">
                        <a:s>&quot;Client was a premature infant at birth&quot;</a:s>
                     </a:s>
                     <a:s>)</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="143" locator="177:2-177:46" xsi:type="Not">
            <signature name="t:Boolean" xsi:type="NamedTypeSpecifier"/>
            <operand localId="142" locator="177:5-177:46" name="Client was a premature infant at birth" xsi:type="ExpressionRef"/>
         </expression>
      </def>
      <def localId="153" locator="190:1-191:130" name="The latest hepatitis B dose was administered less than 4 weeks ago" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="153">
               <a:s>/*
@input: The latest hepatitis B dose was administered less than 4 weeks ago
@pseudocode: Today's date - latest &quot;Date and time of vaccination&quot; (where &quot;Vaccine type&quot; = 'Hepatitis B containing vaccines') &lt; 4 'week'
*/
define &quot;The latest hepatitis B dose was administered less than 4 weeks ago&quot;:
	</a:s>
               <a:s r="152">
                  <a:s r="146">
                     <a:s r="145">
                        <a:s>&quot;Date of latest Hepatitis B Vaccine&quot;</a:s>
                     </a:s>
                     <a:s> is not null</a:s>
                  </a:s>
                  <a:s> and </a:s>
                  <a:s r="151">
                     <a:s r="149">
                        <a:s>duration in weeks between </a:s>
                        <a:s r="147">
                           <a:s>&quot;Date of latest Hepatitis B Vaccine&quot;</a:s>
                        </a:s>
                        <a:s> and </a:s>
                        <a:s r="148">
                           <a:s>Now()</a:s>
                        </a:s>
                     </a:s>
                     <a:s r="150"> &lt; 4</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="152" locator="191:2-191:130" xsi:type="And">
            <signature name="t:Boolean" xsi:type="NamedTypeSpecifier"/>
            <signature name="t:Boolean" xsi:type="NamedTypeSpecifier"/>
            <operand localId="146" locator="191:2-191:49" xsi:type="Not">
               <signature name="t:Boolean" xsi:type="NamedTypeSpecifier"/>
               <operand locator="191:2-191:49" xsi:type="IsNull">
                  <signature name="t:Any" xsi:type="NamedTypeSpecifier"/>
                  <operand localId="145" locator="191:2-191:37" name="Date of latest Hepatitis B Vaccine" xsi:type="ExpressionRef"/>
               </operand>
            </operand>
            <operand localId="151" locator="191:55-191:130" xsi:type="Less">
               <signature name="t:Integer" xsi:type="NamedTypeSpecifier"/>
               <signature name="t:Integer" xsi:type="NamedTypeSpecifier"/>
               <operand localId="149" locator="191:55-191:126" precision="Week" xsi:type="DurationBetween">
                  <signature name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                  <signature name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                  <operand name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <signature name="fhir:dateTime" xsi:type="NamedTypeSpecifier"/>
                     <operand localId="147" locator="191:81-191:116" name="Date of latest Hepatitis B Vaccine" xsi:type="ExpressionRef"/>
                  </operand>
                  <operand localId="148" locator="191:122-191:126" xsi:type="Now"/>
               </operand>
               <operand localId="150" locator="191:130" valueType="t:Integer" value="4" xsi:type="Literal"/>
            </operand>
         </expression>
      </def>
      <def localId="162" locator="197:1-198:131" name="The latest hepatitis B dose was administered more than 4 weeks ago" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="162">
               <a:s>/*
@input: The latest hepatitis B dose was administered more than 4 weeks ago
@pseudocode: Today's date - latest &quot;Date and time of vaccination&quot; (where &quot;Vaccine type&quot; = 'Hepatitis B containing vaccines') ≥ 4 'week'
*/
define &quot;The latest hepatitis B dose was administered more than 4 weeks ago&quot;:
	</a:s>
               <a:s r="161">
                  <a:s r="155">
                     <a:s r="154">
                        <a:s>&quot;Date of latest Hepatitis B Vaccine&quot;</a:s>
                     </a:s>
                     <a:s> is not null</a:s>
                  </a:s>
                  <a:s> and </a:s>
                  <a:s r="160">
                     <a:s r="158">
                        <a:s>duration in weeks between </a:s>
                        <a:s r="156">
                           <a:s>&quot;Date of latest Hepatitis B Vaccine&quot;</a:s>
                        </a:s>
                        <a:s> and </a:s>
                        <a:s r="157">
                           <a:s>Now()</a:s>
                        </a:s>
                     </a:s>
                     <a:s r="159"> >= 4</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="161" locator="198:2-198:131" xsi:type="And">
            <signature name="t:Boolean" xsi:type="NamedTypeSpecifier"/>
            <signature name="t:Boolean" xsi:type="NamedTypeSpecifier"/>
            <operand localId="155" locator="198:2-198:49" xsi:type="Not">
               <signature name="t:Boolean" xsi:type="NamedTypeSpecifier"/>
               <operand locator="198:2-198:49" xsi:type="IsNull">
                  <signature name="t:Any" xsi:type="NamedTypeSpecifier"/>
                  <operand localId="154" locator="198:2-198:37" name="Date of latest Hepatitis B Vaccine" xsi:type="ExpressionRef"/>
               </operand>
            </operand>
            <operand localId="160" locator="198:55-198:131" xsi:type="GreaterOrEqual">
               <signature name="t:Integer" xsi:type="NamedTypeSpecifier"/>
               <signature name="t:Integer" xsi:type="NamedTypeSpecifier"/>
               <operand localId="158" locator="198:55-198:126" precision="Week" xsi:type="DurationBetween">
                  <signature name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                  <signature name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                  <operand name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <signature name="fhir:dateTime" xsi:type="NamedTypeSpecifier"/>
                     <operand localId="156" locator="198:81-198:116" name="Date of latest Hepatitis B Vaccine" xsi:type="ExpressionRef"/>
                  </operand>
                  <operand localId="157" locator="198:122-198:126" xsi:type="Now"/>
               </operand>
               <operand localId="159" locator="198:131" valueType="t:Integer" value="4" xsi:type="Literal"/>
            </operand>
         </expression>
      </def>
      <def localId="171" locator="204:1-205:129" name="The first hepatitis B dose was administered less than 6 months ago" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="171">
               <a:s>/*
@input: The first hepatitis B dose was administered less than 6 months ago
@pseudocode: Today's date - &quot;Date and time of vaccination&quot; (where &quot;Vaccine type&quot; = 'Hepatitis B containing vaccines' and &quot;Dose number&quot; = 1) &lt; 6 'month'
*/
define &quot;The first hepatitis B dose was administered less than 6 months ago&quot;:
	</a:s>
               <a:s r="170">
                  <a:s r="164">
                     <a:s r="163">
                        <a:s>&quot;Date of first Hepatitis B Vaccine&quot;</a:s>
                     </a:s>
                     <a:s> is not null</a:s>
                  </a:s>
                  <a:s> and </a:s>
                  <a:s r="169">
                     <a:s r="167">
                        <a:s>duration in months between </a:s>
                        <a:s r="165">
                           <a:s>&quot;Date of first Hepatitis B Vaccine&quot;</a:s>
                        </a:s>
                        <a:s> and </a:s>
                        <a:s r="166">
                           <a:s>Now()</a:s>
                        </a:s>
                     </a:s>
                     <a:s r="168"> &lt; 6</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="170" locator="205:2-205:129" xsi:type="And">
            <signature name="t:Boolean" xsi:type="NamedTypeSpecifier"/>
            <signature name="t:Boolean" xsi:type="NamedTypeSpecifier"/>
            <operand localId="164" locator="205:2-205:48" xsi:type="Not">
               <signature name="t:Boolean" xsi:type="NamedTypeSpecifier"/>
               <operand locator="205:2-205:48" xsi:type="IsNull">
                  <signature name="t:Any" xsi:type="NamedTypeSpecifier"/>
                  <operand localId="163" locator="205:2-205:36" name="Date of first Hepatitis B Vaccine" xsi:type="ExpressionRef"/>
               </operand>
            </operand>
            <operand localId="169" locator="205:54-205:129" xsi:type="Less">
               <signature name="t:Integer" xsi:type="NamedTypeSpecifier"/>
               <signature name="t:Integer" xsi:type="NamedTypeSpecifier"/>
               <operand localId="167" locator="205:54-205:125" precision="Month" xsi:type="DurationBetween">
                  <signature name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                  <signature name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                  <operand name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <signature name="fhir:dateTime" xsi:type="NamedTypeSpecifier"/>
                     <operand localId="165" locator="205:81-205:115" name="Date of first Hepatitis B Vaccine" xsi:type="ExpressionRef"/>
                  </operand>
                  <operand localId="166" locator="205:121-205:125" xsi:type="Now"/>
               </operand>
               <operand localId="168" locator="205:129" valueType="t:Integer" value="6" xsi:type="Literal"/>
            </operand>
         </expression>
      </def>
      <def localId="180" locator="211:1-212:130" name="The first hepatitis B dose was administered more than 6 months ago" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="180">
               <a:s>/*
@input: The first hepatitis B dose was administered more than 6 months ago
@pseudocode: Today's date - &quot;Date and time of vaccination&quot; (where &quot;Vaccine type&quot; = 'Hepatitis B containing vaccines' and &quot;Dose number&quot; = 1) ≥ 6 'month'
*/
define &quot;The first hepatitis B dose was administered more than 6 months ago&quot;:
	</a:s>
               <a:s r="179">
                  <a:s r="173">
                     <a:s r="172">
                        <a:s>&quot;Date of first Hepatitis B Vaccine&quot;</a:s>
                     </a:s>
                     <a:s> is not null</a:s>
                  </a:s>
                  <a:s> and </a:s>
                  <a:s r="178">
                     <a:s r="176">
                        <a:s>duration in months between </a:s>
                        <a:s r="174">
                           <a:s>&quot;Date of first Hepatitis B Vaccine&quot;</a:s>
                        </a:s>
                        <a:s> and </a:s>
                        <a:s r="175">
                           <a:s>Now()</a:s>
                        </a:s>
                     </a:s>
                     <a:s r="177"> >= 6</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="179" locator="212:2-212:130" xsi:type="And">
            <signature name="t:Boolean" xsi:type="NamedTypeSpecifier"/>
            <signature name="t:Boolean" xsi:type="NamedTypeSpecifier"/>
            <operand localId="173" locator="212:2-212:48" xsi:type="Not">
               <signature name="t:Boolean" xsi:type="NamedTypeSpecifier"/>
               <operand locator="212:2-212:48" xsi:type="IsNull">
                  <signature name="t:Any" xsi:type="NamedTypeSpecifier"/>
                  <operand localId="172" locator="212:2-212:36" name="Date of first Hepatitis B Vaccine" xsi:type="ExpressionRef"/>
               </operand>
            </operand>
            <operand localId="178" locator="212:54-212:130" xsi:type="GreaterOrEqual">
               <signature name="t:Integer" xsi:type="NamedTypeSpecifier"/>
               <signature name="t:Integer" xsi:type="NamedTypeSpecifier"/>
               <operand localId="176" locator="212:54-212:125" precision="Month" xsi:type="DurationBetween">
                  <signature name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                  <signature name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                  <operand name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <signature name="fhir:dateTime" xsi:type="NamedTypeSpecifier"/>
                     <operand localId="174" locator="212:81-212:115" name="Date of first Hepatitis B Vaccine" xsi:type="ExpressionRef"/>
                  </operand>
                  <operand localId="175" locator="212:121-212:125" xsi:type="Now"/>
               </operand>
               <operand localId="177" locator="212:130" valueType="t:Integer" value="6" xsi:type="Literal"/>
            </operand>
         </expression>
      </def>
      <def localId="184" locator="218:1-219:55" name="The client has history of severe allergic reactions" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="184">
               <a:s>/*
@input: The client has history of severe allergic reactions
@pseudocode: &quot;Potential contraindications&quot; = 'Severe allergic reactions'
*/
define &quot;The client has history of severe allergic reactions&quot;:
		</a:s>
               <a:s r="183">
                  <a:s>exists</a:s>
                  <a:s r="182">
                     <a:s>(</a:s>
                     <a:s r="182">
                        <a:s r="181">
                           <a:s>IMMZCom</a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="182">
                           <a:s>&quot;Severe Allergic Reactions Condition&quot;</a:s>
                        </a:s>
                     </a:s>
                     <a:s>)</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="183" locator="219:3-219:55" xsi:type="Exists">
            <signature xsi:type="ListTypeSpecifier">
               <elementType name="fhir:Condition" xsi:type="NamedTypeSpecifier"/>
            </signature>
            <operand localId="182" locator="219:9-219:55" name="Severe Allergic Reactions Condition" libraryName="IMMZCom" xsi:type="ExpressionRef"/>
         </expression>
      </def>
   </statements>
</library>
