@prefix fhir: <http://hl7.org/fhir/> .
@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .

# - resource -------------------------------------------------------------------

<http://smart.who.int/immunizations/StructureMap/IMMZ.Helpers> a fhir:StructureMap ;
  fhir:nodeRole fhir:treeRoot ;
  fhir:id [ fhir:v "IMMZ.Helpers"] ; # 
  fhir:text [
     fhir:status [ fhir:v "generated" ] ;
     fhir:div "<div xmlns=\"http://www.w3.org/1999/xhtml\"><p class=\"res-header-id\"><b>Generated Narrative: StructureMap IMMZ.Helpers</b></p><a name=\"IMMZ.Helpers\"> </a><a name=\"hcIMMZ.Helpers\"> </a><pre class=\"fml\">\r\n<b>map</b><span style=\"color: navy\"> &quot;</span>http://smart.who.int/immunizations/StructureMap/IMMZ.Helpers<span style=\"color: navy\">&quot; = &quot;</span>IMMZ.Helpers<span style=\"color: navy\">&quot;\r\n\r\n</span><span style=\"color: navy\">// </span><span style=\"color: green\">Immunization - Transform QuestionnaireResponse to Logical Model Helper groups</span>\r\n\r\n<b>uses</b><span style=\"color: navy\"> &quot;</span><a href=\"http://hl7.org/fhir/R4/questionnaireresponse.html\" title=\"QuestionnaireResponse\">http://hl7.org/fhir/StructureDefinition/QuestionnaireResponse</a><span style=\"color: navy\">&quot; </span><b>alias </b>QResp <b>as </b><b>source</b>\r\n<b>uses</b><span style=\"color: navy\"> &quot;</span><a href=\"http://hl7.org/fhir/R4/bundle.html\" title=\"Bundle\">http://hl7.org/fhir/StructureDefinition/Bundle</a><span style=\"color: navy\">&quot; </span><b>alias </b>Bundle <b>as </b><b>target</b>\r\n\r\n<b>group </b>ItemToValue<span style=\"color: navy\">(</span><b>source</b> <span style=\"color: maroon\">item</span>, <b>target</b> <span style=\"color: maroon\">field</span><span style=\"color: navy\">)</span><span style=\"color: navy\"> {\r\n</span>  item.answer first<b> as </b><span style=\"color: maroon\">answer</span><b> then</b><span style=\"color: navy\"> {\r\n</span>    answer.value<b> as </b><span style=\"color: maroon\">content</span><span style=\"color: navy\"><b> -&gt; </b></span>field.value = <span style=\"color: maroon\">content</span> <i>&quot;SetValue&quot;</i><span style=\"color: navy\">;</span>\r\n  <span style=\"color: navy\">}</span> <i>&quot;FirstAnswer&quot;</i><span style=\"color: navy\">;</span>\r\n<span style=\"color: navy\">}\r\n\r\n</span><b>group </b>ItemToCode<span style=\"color: navy\">(</span><b>source</b> <span style=\"color: maroon\">item</span>, <b>target</b> <span style=\"color: maroon\">field</span><span style=\"color: navy\">)</span><span style=\"color: navy\"> {\r\n</span>  item.answer first<b> as </b><span style=\"color: maroon\">answer</span><b> then</b><span style=\"color: navy\"> {\r\n</span>    answer.value<b> as </b><span style=\"color: maroon\">coding</span><b> then</b><span style=\"color: navy\"> {\r\n</span>      coding.code<b> as </b><span style=\"color: maroon\">content</span><span style=\"color: navy\"><b> -&gt; </b></span>field.value = <span style=\"color: maroon\">content</span> <i>&quot;SetCode&quot;</i><span style=\"color: navy\">;</span>\r\n    <span style=\"color: navy\">}</span> <i>&quot;Coding&quot;</i><span style=\"color: navy\">;</span>\r\n  <span style=\"color: navy\">}</span> <i>&quot;FirstAnswer&quot;</i><span style=\"color: navy\">;</span>\r\n<span style=\"color: navy\">}\r\n\r\n</span><b>group </b>ItemToCoding<span style=\"color: navy\">(</span><b>source</b> <span style=\"color: maroon\">item</span>, <b>target</b> <span style=\"color: maroon\">field</span><span style=\"color: navy\">)</span><span style=\"color: navy\"> {\r\n</span>  item.answer first<b> as </b><span style=\"color: maroon\">answer</span><b> then</b><span style=\"color: navy\"> {\r\n</span>    answer.value<b> as </b><span style=\"color: maroon\">coding</span><b> then</b><span style=\"color: navy\"> {\r\n</span>      coding.code<b> as </b><span style=\"color: maroon\">code</span><span style=\"color: navy\"><b> -&gt; </b></span>field.code = <span style=\"color: maroon\">code</span> <i>&quot;SetCode&quot;</i><span style=\"color: navy\">;</span>\r\n      coding.system<b> as </b><span style=\"color: maroon\">system</span><span style=\"color: navy\"><b> -&gt; </b></span>field.system = <span style=\"color: maroon\">system</span> <i>&quot;SetSystem&quot;</i><span style=\"color: navy\">;</span>\r\n      coding.display<b> as </b><span style=\"color: maroon\">display</span><span style=\"color: navy\"><b> -&gt; </b></span>field.display = <span style=\"color: maroon\">display</span> <i>&quot;SetDisplay&quot;</i><span style=\"color: navy\">;</span>\r\n    <span style=\"color: navy\">}</span> <i>&quot;Coding&quot;</i><span style=\"color: navy\">;</span>\r\n  <span style=\"color: navy\">}</span> <i>&quot;FirstAnswer&quot;</i><span style=\"color: navy\">;</span>\r\n<span style=\"color: navy\">}\r\n\r\n</span><b>group </b>D1andD13Questions<span style=\"color: navy\">(</span><b>source</b> <span style=\"color: maroon\">qr</span><span style=\"color: navy\"> : </span>QResp, <b>target</b> <span style=\"color: maroon\">immz</span><span style=\"color: navy\">)</span><span style=\"color: navy\"> {\r\n</span>  qr.item<b> as </b><span style=\"color: maroon\">item</span><b> where </b>item.linkId = 'birthDose'<span style=\"color: navy\"><b> -&gt; </b></span>immz.birthDose<b> as </b><span style=\"color: maroon\">field</span><b> then </b>ItemToValue<span style=\"color: navy\">(</span><span style=\"color: maroon\">item</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">field</span><span style=\"color: navy\">)</span> <i>&quot;birthDose&quot;</i><span style=\"color: navy\">;</span>\r\n  qr.item<b> as </b><span style=\"color: maroon\">item</span><b> where </b>item.linkId = 'typeOfDose'<span style=\"color: navy\"><b> -&gt; </b></span>immz.typeOfDose<b> as </b><span style=\"color: maroon\">field</span><b> then </b>ItemToCoding<span style=\"color: navy\">(</span><span style=\"color: maroon\">item</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">field</span><span style=\"color: navy\">)</span> <i>&quot;typeOfDose&quot;</i><span style=\"color: navy\">;</span>\r\n  qr.item<b> as </b><span style=\"color: maroon\">item</span><b> where </b>item.linkId = 'completedThePrimaryVaccinationSeries'<span style=\"color: navy\"><b> -&gt; </b></span>immz.completedThePrimaryVaccinationSeries<b> as </b><span style=\"color: maroon\">field</span><b> then </b>ItemToValue<span style=\"color: navy\">(</span><span style=\"color: maroon\">item</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">field</span><span style=\"color: navy\">)</span> <i>&quot;completedThePrimaryVaccinationSeries&quot;</i><span style=\"color: navy\">;</span>\r\n  qr.item<b> as </b><span style=\"color: maroon\">item</span><b> where </b>item.linkId = 'completedTheBoosterSeries'<span style=\"color: navy\"><b> -&gt; </b></span>immz.completedTheBoosterSeries<b> as </b><span style=\"color: maroon\">field</span><b> then </b>ItemToValue<span style=\"color: navy\">(</span><span style=\"color: maroon\">item</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">field</span><span style=\"color: navy\">)</span> <i>&quot;completedTheBoosterSeries&quot;</i><span style=\"color: navy\">;</span>\r\n  qr.item<b> as </b><span style=\"color: maroon\">item</span><b> where </b>item.linkId = 'dateWhenPrimaryVaccinationSeriesWasCompleted'<span style=\"color: navy\"><b> -&gt; </b></span>immz.dateWhenPrimaryVaccinationSeriesWasCompleted<b> as </b><span style=\"color: maroon\">field</span><b> then </b>ItemToValue<span style=\"color: navy\">(</span><span style=\"color: maroon\">item</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">field</span><span style=\"color: navy\">)</span> <i>&quot;dateWhenPrimaryVaccinationSeriesWasCompleted&quot;</i><span style=\"color: navy\">;</span>\r\n  qr.item<b> as </b><span style=\"color: maroon\">item</span><b> where </b>item.linkId = 'hivStatus'<span style=\"color: navy\"><b> -&gt; </b></span>immz.hivStatus<b> as </b><span style=\"color: maroon\">field</span><b> then </b>ItemToCoding<span style=\"color: navy\">(</span><span style=\"color: maroon\">item</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">field</span><span style=\"color: navy\">)</span> <i>&quot;hivStatus&quot;</i><span style=\"color: navy\">;</span>\r\n  qr.item<b> as </b><span style=\"color: maroon\">item</span><b> where </b>item.linkId = 'typeOfPoliovirusDose'<span style=\"color: navy\"><b> -&gt; </b></span>immz.typeOfPoliovirusDose<b> as </b><span style=\"color: maroon\">field</span><b> then </b>ItemToCoding<span style=\"color: navy\">(</span><span style=\"color: maroon\">item</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">field</span><span style=\"color: navy\">)</span> <i>&quot;typeOfPoliovirusDose&quot;</i><span style=\"color: navy\">;</span>\r\n  qr.item<b> as </b><span style=\"color: maroon\">item</span><b> where </b>item.linkId = 'typeOfJeDose'<span style=\"color: navy\"><b> -&gt; </b></span>immz.typeOfJeDose<b> as </b><span style=\"color: maroon\">field</span><b> then </b>ItemToCoding<span style=\"color: navy\">(</span><span style=\"color: maroon\">item</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">field</span><span style=\"color: navy\">)</span> <i>&quot;typeOfJeDose&quot;</i><span style=\"color: navy\">;</span>\r\n  qr.item<b> as </b><span style=\"color: maroon\">item</span><b> where </b>item.linkId = 'typeOfTbeDose'<span style=\"color: navy\"><b> -&gt; </b></span>immz.typeOfTbeDose<b> as </b><span style=\"color: maroon\">field</span><b> then </b>ItemToCoding<span style=\"color: navy\">(</span><span style=\"color: maroon\">item</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">field</span><span style=\"color: navy\">)</span> <i>&quot;typeOfTbeDose&quot;</i><span style=\"color: navy\">;</span>\r\n  qr.item<b> as </b><span style=\"color: maroon\">item</span><b> where </b>item.linkId = 'typeOfTyphoidDose'<span style=\"color: navy\"><b> -&gt; </b></span>immz.typeOfTyphoidDose<b> as </b><span style=\"color: maroon\">field</span><b> then </b>ItemToCoding<span style=\"color: navy\">(</span><span style=\"color: maroon\">item</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">field</span><span style=\"color: navy\">)</span> <i>&quot;typeOfTyphoidDose&quot;</i><span style=\"color: navy\">;</span>\r\n  qr.item<b> as </b><span style=\"color: maroon\">item</span><b> where </b>item.linkId = 'typeOfCholeraDose'<span style=\"color: navy\"><b> -&gt; </b></span>immz.typeOfCholeraDose<b> as </b><span style=\"color: maroon\">field</span><b> then </b>ItemToCoding<span style=\"color: navy\">(</span><span style=\"color: maroon\">item</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">field</span><span style=\"color: navy\">)</span> <i>&quot;typeOfCholeraDose&quot;</i><span style=\"color: navy\">;</span>\r\n  qr.item<b> as </b><span style=\"color: maroon\">item</span><b> where </b>item.linkId = 'typeOfMeningococcalDose'<span style=\"color: navy\"><b> -&gt; </b></span>immz.typeOfMeningococcalDose<b> as </b><span style=\"color: maroon\">field</span><b> then </b>ItemToCoding<span style=\"color: navy\">(</span><span style=\"color: maroon\">item</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">field</span><span style=\"color: navy\">)</span> <i>&quot;typeOfMeningococcalDose&quot;</i><span style=\"color: navy\">;</span>\r\n  qr.item<b> as </b><span style=\"color: maroon\">item</span><b> where </b>item.linkId = 'typeOfHepatitisADose'<span style=\"color: navy\"><b> -&gt; </b></span>immz.typeOfHepatitisADose<b> as </b><span style=\"color: maroon\">field</span><b> then </b>ItemToCoding<span style=\"color: navy\">(</span><span style=\"color: maroon\">item</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">field</span><span style=\"color: navy\">)</span> <i>&quot;typeOfHepatitisADose&quot;</i><span style=\"color: navy\">;</span>\r\n  qr.item<b> as </b><span style=\"color: maroon\">item</span><b> where </b>item.linkId = 'typeOfHepatitisBDose'<span style=\"color: navy\"><b> -&gt; </b></span>immz.typeOfHepatitisBDose<b> as </b><span style=\"color: maroon\">field</span><b> then </b>ItemToCoding<span style=\"color: navy\">(</span><span style=\"color: maroon\">item</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">field</span><span style=\"color: navy\">)</span> <i>&quot;typeOfHepatitisBDose&quot;</i><span style=\"color: navy\">;</span>\r\n  qr.item<b> as </b><span style=\"color: maroon\">item</span><b> where </b>item.linkId = 'vaccineType'<span style=\"color: navy\"><b> -&gt; </b></span>immz.vaccineType<b> as </b><span style=\"color: maroon\">field</span><b> then </b>ItemToCoding<span style=\"color: navy\">(</span><span style=\"color: maroon\">item</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">field</span><span style=\"color: navy\">)</span> <i>&quot;vaccineType&quot;</i><span style=\"color: navy\">;</span>\r\n  qr.item<b> as </b><span style=\"color: maroon\">item</span><b> where </b>item.linkId = 'dateAndTimeOfVaccination'<span style=\"color: navy\"><b> -&gt; </b></span>immz.dateAndTimeOfVaccination<b> as </b><span style=\"color: maroon\">field</span><b> then </b>ItemToValue<span style=\"color: navy\">(</span><span style=\"color: maroon\">item</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">field</span><span style=\"color: navy\">)</span> <i>&quot;dateAndTimeOfVaccination&quot;</i><span style=\"color: navy\">;</span>\r\n  qr.item<b> as </b><span style=\"color: maroon\">item</span><b> where </b>item.linkId = 'contactDate'<span style=\"color: navy\"><b> -&gt; </b></span>immz.contactDate<b> as </b><span style=\"color: maroon\">field</span><b> then </b>ItemToValue<span style=\"color: navy\">(</span><span style=\"color: maroon\">item</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">field</span><span style=\"color: navy\">)</span> <i>&quot;contactDate&quot;</i><span style=\"color: navy\">;</span>\r\n  qr.item<b> as </b><span style=\"color: maroon\">item</span><b> where </b>item.linkId = 'ancContactNumber'<span style=\"color: navy\"><b> -&gt; </b></span>immz.ancContactNumber<b> as </b><span style=\"color: maroon\">field</span><b> then </b>ItemToValue<span style=\"color: navy\">(</span><span style=\"color: maroon\">item</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">field</span><span style=\"color: navy\">)</span> <i>&quot;ancContactNumber&quot;</i><span style=\"color: navy\">;</span>\r\n  qr.item<b> as </b><span style=\"color: maroon\">item</span><b> where </b>item.linkId = 'doseNumber'<span style=\"color: navy\"><b> -&gt; </b></span>immz.doseNumber<b> as </b><span style=\"color: maroon\">field</span><b> then </b>ItemToValue<span style=\"color: navy\">(</span><span style=\"color: maroon\">item</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">field</span><span style=\"color: navy\">)</span> <i>&quot;doseNumber&quot;</i><span style=\"color: navy\">;</span>\r\n<span style=\"color: navy\">}\r\n\r\n</span><b>group </b>D1Questions<span style=\"color: navy\">(</span><b>source</b> <span style=\"color: maroon\">qr</span><span style=\"color: navy\"> : </span>QResp, <b>target</b> <span style=\"color: maroon\">immz</span><span style=\"color: navy\">)</span><span style=\"color: navy\"> {\r\n</span>  qr.item<b> as </b><span style=\"color: maroon\">item</span><b> where </b>item.linkId = 'pretermBirth'<span style=\"color: navy\"><b> -&gt; </b></span>immz.pretermBirth<b> as </b><span style=\"color: maroon\">field</span><b> then </b>ItemToValue<span style=\"color: navy\">(</span><span style=\"color: maroon\">item</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">field</span><span style=\"color: navy\">)</span> <i>&quot;pretermBirth&quot;</i><span style=\"color: navy\">;</span>\r\n  qr.item<b> as </b><span style=\"color: maroon\">item</span><b> where </b>item.linkId = 'immunocompromised'<span style=\"color: navy\"><b> -&gt; </b></span>immz.immunocompromised<b> as </b><span style=\"color: maroon\">field</span><b> then </b>ItemToValue<span style=\"color: navy\">(</span><span style=\"color: maroon\">item</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">field</span><span style=\"color: navy\">)</span> <i>&quot;immunocompromised&quot;</i><span style=\"color: navy\">;</span>\r\n  qr.item<b> as </b><span style=\"color: maroon\">item</span><b> where </b>item.linkId = 'currentlyOnArt'<span style=\"color: navy\"><b> -&gt; </b></span>immz.currentlyOnArt<b> as </b><span style=\"color: maroon\">field</span><b> then </b>ItemToValue<span style=\"color: navy\">(</span><span style=\"color: maroon\">item</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">field</span><span style=\"color: navy\">)</span> <i>&quot;currentlyOnArt&quot;</i><span style=\"color: navy\">;</span>\r\n  qr.item<b> as </b><span style=\"color: maroon\">item</span><b> where </b>item.linkId = 'currentlyOnArt'<span style=\"color: navy\"><b> -&gt; </b></span>immz.currentlyOnArt<b> as </b><span style=\"color: maroon\">field</span><b> then </b>ItemToValue<span style=\"color: navy\">(</span><span style=\"color: maroon\">item</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">field</span><span style=\"color: navy\">)</span> <i>&quot;currentlyOnArt&quot;</i><span style=\"color: navy\">;</span>\r\n  qr.item<b> as </b><span style=\"color: maroon\">item</span><b> where </b>item.linkId = 'typeOfTbInfectionTestPerformed'<span style=\"color: navy\"><b> -&gt; </b></span>immz.typeOfTbInfectionTestPerformed<b> as </b><span style=\"color: maroon\">field</span><b> then </b>ItemToCoding<span style=\"color: navy\">(</span><span style=\"color: maroon\">item</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">field</span><span style=\"color: navy\">)</span> <i>&quot;typeOfTbInfectionTestPerformed&quot;</i><span style=\"color: navy\">;</span>\r\n  qr.item<b> as </b><span style=\"color: maroon\">item</span><b> where </b>item.linkId = 'tbInfectionTestResult'<span style=\"color: navy\"><b> -&gt; </b></span>immz.tbInfectionTestResult<b> as </b><span style=\"color: maroon\">field</span><b> then </b>ItemToCoding<span style=\"color: navy\">(</span><span style=\"color: maroon\">item</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">field</span><span style=\"color: navy\">)</span> <i>&quot;tbInfectionTestResult&quot;</i><span style=\"color: navy\">;</span>\r\n  qr.item<b> as </b><span style=\"color: maroon\">item</span><b> where </b>item.linkId = 'immunologicallyStable'<span style=\"color: navy\"><b> -&gt; </b></span>immz.immunologicallyStable<b> as </b><span style=\"color: maroon\">field</span><b> then </b>ItemToValue<span style=\"color: navy\">(</span><span style=\"color: maroon\">item</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">field</span><span style=\"color: navy\">)</span> <i>&quot;immunologicallyStable&quot;</i><span style=\"color: navy\">;</span>\r\n  qr.item<b> as </b><span style=\"color: maroon\">item</span><b> where </b>item.linkId = 'clinicallyWell'<span style=\"color: navy\"><b> -&gt; </b></span>immz.clinicallyWell<b> as </b><span style=\"color: maroon\">field</span><b> then </b>ItemToValue<span style=\"color: navy\">(</span><span style=\"color: maroon\">item</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">field</span><span style=\"color: navy\">)</span> <i>&quot;clinicallyWell&quot;</i><span style=\"color: navy\">;</span>\r\n  qr.item<b> as </b><span style=\"color: maroon\">item</span><b> where </b>item.linkId = 'birthWeightInGrams'<span style=\"color: navy\"><b> -&gt; </b></span>immz.birthWeightInGrams<b> as </b><span style=\"color: maroon\">field</span><b> then </b>ItemToValue<span style=\"color: navy\">(</span><span style=\"color: maroon\">item</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">field</span><span style=\"color: navy\">)</span> <i>&quot;birthWeightInGrams&quot;</i><span style=\"color: navy\">;</span>\r\n  qr.item<b> as </b><span style=\"color: maroon\">item</span><b> where </b>item.linkId = 'artStartDate'<span style=\"color: navy\"><b> -&gt; </b></span>immz.artStartDate<b> as </b><span style=\"color: maroon\">field</span><b> then </b>ItemToValue<span style=\"color: navy\">(</span><span style=\"color: maroon\">item</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">field</span><span style=\"color: navy\">)</span> <i>&quot;artStartDate&quot;</i><span style=\"color: navy\">;</span>\r\n  qr.item<b> as </b><span style=\"color: maroon\">item</span><b> where </b>item.linkId = 'highRiskOfPneumococcalInfection'<span style=\"color: navy\"><b> -&gt; </b></span>immz.highRiskOfPneumococcalInfection<b> as </b><span style=\"color: maroon\">field</span><b> then </b>ItemToValue<span style=\"color: navy\">(</span><span style=\"color: maroon\">item</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">field</span><span style=\"color: navy\">)</span> <i>&quot;highRiskOfPneumococcalInfection&quot;</i><span style=\"color: navy\">;</span>\r\n  qr.item<b> as </b><span style=\"color: maroon\">item</span><b> where </b>item.linkId = 'ageInMonthsWhenClientReceivedFirstMeningococcalDose'<span style=\"color: navy\"><b> -&gt; </b></span>immz.ageInMonthsWhenClientReceivedFirstMeningococcalDose<b> as </b><span style=\"color: maroon\">field</span><b> then </b>ItemToValue<span style=\"color: navy\">(</span><span style=\"color: maroon\">item</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">field</span><span style=\"color: navy\">)</span> <i>&quot;ageInMonthsWhenClientReceivedFirstMeningococcalDose&quot;</i><span style=\"color: navy\">;</span>\r\n  qr.item<b> as </b><span style=\"color: maroon\">item</span><b> where </b>item.linkId = 'vnaLevel'<span style=\"color: navy\"><b> -&gt; </b></span>immz.vnaLevel<b> as </b><span style=\"color: maroon\">field</span><b> then </b>ItemToValue<span style=\"color: navy\">(</span><span style=\"color: maroon\">item</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">field</span><span style=\"color: navy\">)</span> <i>&quot;vnaLevel&quot;</i><span style=\"color: navy\">;</span>\r\n  qr.item<b> as </b><span style=\"color: maroon\">item</span><b> where </b>item.linkId = 'riskOfOccupationalExposureToRabiesVirus'<span style=\"color: navy\"><b> -&gt; </b></span>immz.riskOfOccupationalExposureToRabiesVirus<b> as </b><span style=\"color: maroon\">field</span><b> then </b>ItemToValue<span style=\"color: navy\">(</span><span style=\"color: maroon\">item</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">field</span><span style=\"color: navy\">)</span> <i>&quot;riskOfOccupationalExposureToRabiesVirus&quot;</i><span style=\"color: navy\">;</span>\r\n  qr.item<b> as </b><span style=\"color: maroon\">item</span><b> where </b>item.linkId = 'dengueSerostatus'<span style=\"color: navy\"><b> -&gt; </b></span>immz.dengueSerostatus<b> as </b><span style=\"color: maroon\">field</span><b> then </b>ItemToCoding<span style=\"color: navy\">(</span><span style=\"color: maroon\">item</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">field</span><span style=\"color: navy\">)</span> <i>&quot;dengueSerostatus&quot;</i><span style=\"color: navy\">;</span>\r\n<span style=\"color: navy\">}\r\n\r\n</span><b>group </b>D13Questions<span style=\"color: navy\">(</span><b>source</b> <span style=\"color: maroon\">qr</span><span style=\"color: navy\"> : </span>QResp, <b>target</b> <span style=\"color: maroon\">immz</span><span style=\"color: navy\">)</span><span style=\"color: navy\"> {\r\n</span>  qr.item<b> as </b><span style=\"color: maroon\">item</span><b> where </b>item.linkId = 'immunizationEventStatus'<span style=\"color: navy\"><b> -&gt; </b></span>immz.immunizationEventStatus<b> as </b><span style=\"color: maroon\">field</span><b> then </b>ItemToCoding<span style=\"color: navy\">(</span><span style=\"color: maroon\">item</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">field</span><span style=\"color: navy\">)</span> <i>&quot;immunizationEventStatus&quot;</i><span style=\"color: navy\">;</span>\r\n  qr.item<b> as </b><span style=\"color: maroon\">item</span><b> where </b>item.linkId = 'reasonVaccineWasNotAdministered'<span style=\"color: navy\"><b> -&gt; </b></span>immz.reasonVaccineWasNotAdministered<b> as </b><span style=\"color: maroon\">field</span><b> then </b>ItemToCoding<span style=\"color: navy\">(</span><span style=\"color: maroon\">item</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">field</span><span style=\"color: navy\">)</span> <i>&quot;reasonVaccineWasNotAdministered&quot;</i><span style=\"color: navy\">;</span>\r\n  qr.item<b> as </b><span style=\"color: maroon\">item</span><b> where </b>item.linkId = 'vaccineBrand'<span style=\"color: navy\"><b> -&gt; </b></span>immz.vaccineBrand<b> as </b><span style=\"color: maroon\">field</span><b> then </b>ItemToCoding<span style=\"color: navy\">(</span><span style=\"color: maroon\">item</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">field</span><span style=\"color: navy\">)</span> <i>&quot;vaccineBrand&quot;</i><span style=\"color: navy\">;</span>\r\n  qr.item<b> as </b><span style=\"color: maroon\">item</span><b> where </b>item.linkId = 'liveVaccine'<span style=\"color: navy\"><b> -&gt; </b></span>immz.liveVaccine<b> as </b><span style=\"color: maroon\">field</span><b> then </b>ItemToValue<span style=\"color: navy\">(</span><span style=\"color: maroon\">item</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">field</span><span style=\"color: navy\">)</span> <i>&quot;liveVaccine&quot;</i><span style=\"color: navy\">;</span>\r\n  qr.item<b> as </b><span style=\"color: maroon\">item</span><b> where </b>item.linkId = 'countryOfVaccination'<span style=\"color: navy\"><b> -&gt; </b></span>immz.countryOfVaccination<b> as </b><span style=\"color: maroon\">field</span><b> then </b>ItemToCoding<span style=\"color: navy\">(</span><span style=\"color: maroon\">item</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">field</span><span style=\"color: navy\">)</span> <i>&quot;countryOfVaccination&quot;</i><span style=\"color: navy\">;</span>\r\n  qr.item<b> as </b><span style=\"color: maroon\">item</span><b> where </b>item.linkId = 'administrativeArea'<span style=\"color: navy\"><b> -&gt; </b></span>immz.administrativeArea<b> as </b><span style=\"color: maroon\">field</span><b> then </b>ItemToCoding<span style=\"color: navy\">(</span><span style=\"color: maroon\">item</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">field</span><span style=\"color: navy\">)</span> <i>&quot;administrativeArea&quot;</i><span style=\"color: navy\">;</span>\r\n  qr.item<b> as </b><span style=\"color: maroon\">item</span><b> where </b>item.linkId = 'vaccineManufacturer'<span style=\"color: navy\"><b> -&gt; </b></span>immz.vaccineManufacturer<b> as </b><span style=\"color: maroon\">field</span><b> then </b>ItemToCoding<span style=\"color: navy\">(</span><span style=\"color: maroon\">item</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">field</span><span style=\"color: navy\">)</span> <i>&quot;vaccineManufacturer&quot;</i><span style=\"color: navy\">;</span>\r\n  qr.item<b> as </b><span style=\"color: maroon\">item</span><b> where </b>item.linkId = 'vaccineBatchNumber'<span style=\"color: navy\"><b> -&gt; </b></span>immz.vaccineBatchNumber<b> as </b><span style=\"color: maroon\">field</span><b> then </b>ItemToValue<span style=\"color: navy\">(</span><span style=\"color: maroon\">item</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">field</span><span style=\"color: navy\">)</span> <i>&quot;vaccineBatchNumber&quot;</i><span style=\"color: navy\">;</span>\r\n  qr.item<b> as </b><span style=\"color: maroon\">item</span><b> where </b>item.linkId = 'vaccineMarketAuthorizationHolder'<span style=\"color: navy\"><b> -&gt; </b></span>immz.vaccineMarketAuthorizationHolder<b> as </b><span style=\"color: maroon\">field</span><b> then </b>ItemToCoding<span style=\"color: navy\">(</span><span style=\"color: maroon\">item</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">field</span><span style=\"color: navy\">)</span> <i>&quot;vaccineMarketAuthorizationHolder&quot;</i><span style=\"color: navy\">;</span>\r\n  qr.item<b> as </b><span style=\"color: maroon\">item</span><b> where </b>item.linkId = 'expirationDate'<span style=\"color: navy\"><b> -&gt; </b></span>immz.expirationDate<b> as </b><span style=\"color: maroon\">field</span><b> then </b>ItemToValue<span style=\"color: navy\">(</span><span style=\"color: maroon\">item</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">field</span><span style=\"color: navy\">)</span> <i>&quot;expirationDate&quot;</i><span style=\"color: navy\">;</span>\r\n  qr.item<b> as </b><span style=\"color: maroon\">item</span><b> where </b>item.linkId = 'doseQuantity'<span style=\"color: navy\"><b> -&gt; </b></span>immz.doseQuantity<b> as </b><span style=\"color: maroon\">field</span><b> then </b>ItemToValue<span style=\"color: navy\">(</span><span style=\"color: maroon\">item</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">field</span><span style=\"color: navy\">)</span> <i>&quot;doseQuantity&quot;</i><span style=\"color: navy\">;</span>\r\n  qr.item<b> as </b><span style=\"color: maroon\">item</span><b> where </b>item.linkId = 'healthWorkerIdentifier'<span style=\"color: navy\"><b> -&gt; </b></span>immz.healthWorkerIdentifier<b> as </b><span style=\"color: maroon\">field</span><b> then </b>ItemToValue<span style=\"color: navy\">(</span><span style=\"color: maroon\">item</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">field</span><span style=\"color: navy\">)</span> <i>&quot;healthWorkerIdentifier&quot;</i><span style=\"color: navy\">;</span>\r\n  qr.item<b> as </b><span style=\"color: maroon\">item</span><b> where </b>item.linkId = 'totalDosesInSeries'<span style=\"color: navy\"><b> -&gt; </b></span>immz.totalDosesInSeries<b> as </b><span style=\"color: maroon\">field</span><b> then </b>ItemToValue<span style=\"color: navy\">(</span><span style=\"color: maroon\">item</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">field</span><span style=\"color: navy\">)</span> <i>&quot;totalDosesInSeries&quot;</i><span style=\"color: navy\">;</span>\r\n  qr.item<b> as </b><span style=\"color: maroon\">item</span><b> where </b>item.linkId = 'diseaseTargeted'<span style=\"color: navy\"><b> -&gt; </b></span>immz.diseaseTargeted<b> as </b><span style=\"color: maroon\">field</span><b> then </b>ItemToCoding<span style=\"color: navy\">(</span><span style=\"color: maroon\">item</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">field</span><span style=\"color: navy\">)</span> <i>&quot;diseaseTargeted&quot;</i><span style=\"color: navy\">;</span>\r\n  qr.item<b> as </b><span style=\"color: maroon\">item</span><b> where </b>item.linkId = 'dueDateOfNextDose'<span style=\"color: navy\"><b> -&gt; </b></span>immz.dueDateOfNextDose<b> as </b><span style=\"color: maroon\">field</span><b> then </b>ItemToValue<span style=\"color: navy\">(</span><span style=\"color: maroon\">item</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">field</span><span style=\"color: navy\">)</span> <i>&quot;dueDateOfNextDose&quot;</i><span style=\"color: navy\">;</span>\r\n<span style=\"color: navy\">}\r\n\r\n</span><b>group </b>MakeImmzObservation<span style=\"color: navy\">(</span><b>source</b> <span style=\"color: maroon\">patient</span><span style=\"color: navy\"> : </span>Reference, <b>source</b> <span style=\"color: maroon\">immid</span>, <b>source</b> <span style=\"color: maroon\">code</span><span style=\"color: navy\"> : </span>Coding, <b>source</b> <span style=\"color: maroon\">cat</span><span style=\"color: navy\"> : </span>Coding, <b>source</b> <span style=\"color: maroon\">value</span>, <b>target</b> <span style=\"color: maroon\">bundle</span><span style=\"color: navy\"> : </span>Bundle<span style=\"color: navy\">)</span><span style=\"color: navy\"> {\r\n</span>  value<span style=\"color: navy\"><b> -&gt; </b></span> <b>uuid</b><span style=\"color: navy\">(</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">oid</span><span style=\"color: navy\">, </span> bundle.entry<b> as </b><span style=\"color: maroon\">entry</span><span style=\"color: navy\">, </span> entry.fullUrl = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'urn:uuid:'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">oid</span><span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> entry.request<b> as </b><span style=\"color: maroon\">request</span><span style=\"color: navy\">, </span> request.method = <span style=\"color: blue\">'PUT'</span><span style=\"color: navy\">, </span> request.url = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Observation/'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">oid</span><span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> entry.resource = <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Observation'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">obs</span><b> then</b><span style=\"color: navy\"> {\r\n</span>    value<span style=\"color: navy\"><b> -&gt; </b></span>obs.id = <span style=\"color: maroon\">oid</span> <i>&quot;SetId&quot;</i><span style=\"color: navy\">;</span>\r\n    immid<span style=\"color: navy\"><b> -&gt; </b></span> obs.partOf<b> as </b><span style=\"color: maroon\">partOf</span><span style=\"color: navy\">, </span> partOf.reference = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'urn:uuid:'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">immid</span><span style=\"color: navy\">)</span> <i>&quot;SetPartOf&quot;</i><span style=\"color: navy\">;</span>\r\n    patient<span style=\"color: navy\"><b> -&gt; </b></span>obs.subject = <span style=\"color: maroon\">patient</span> <i>&quot;SetSubject&quot;</i><span style=\"color: navy\">;</span>\r\n    code<span style=\"color: navy\"><b> -&gt; </b></span>obs.code = <span style=\"color: maroon\">code</span> <i>&quot;SetCode&quot;</i><span style=\"color: navy\">;</span>\r\n    value<span style=\"color: navy\"><b> -&gt; </b></span>obs.value = <span style=\"color: maroon\">value</span> <i>&quot;SetValue&quot;</i><span style=\"color: navy\">;</span>\r\n    cat<span style=\"color: navy\"><b> -&gt; </b></span>obs.category = <span style=\"color: maroon\">cat</span> <i>&quot;SetCategory&quot;</i><span style=\"color: navy\">;</span>\r\n  <span style=\"color: navy\">}</span> <i>&quot;CreateObservation&quot;</i><span style=\"color: navy\">;</span>\r\n<span style=\"color: navy\">}\r\n\r\n</span><b>group </b>MakeObservation<span style=\"color: navy\">(</span><b>source</b> <span style=\"color: maroon\">patient</span><span style=\"color: navy\"> : </span>Reference, <b>source</b> <span style=\"color: maroon\">code</span><span style=\"color: navy\"> : </span>Coding, <b>source</b> <span style=\"color: maroon\">cat</span><span style=\"color: navy\"> : </span>Coding, <b>source</b> <span style=\"color: maroon\">value</span>, <b>target</b> <span style=\"color: maroon\">bundle</span><span style=\"color: navy\"> : </span>Bundle<span style=\"color: navy\">)</span><span style=\"color: navy\"> {\r\n</span>  value<span style=\"color: navy\"><b> -&gt; </b></span> <b>uuid</b><span style=\"color: navy\">(</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">oid</span><span style=\"color: navy\">, </span> bundle.entry<b> as </b><span style=\"color: maroon\">entry</span><span style=\"color: navy\">, </span> entry.fullUrl = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'urn:uuid:'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">oid</span><span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> entry.request<b> as </b><span style=\"color: maroon\">request</span><span style=\"color: navy\">, </span> request.method = <span style=\"color: blue\">'PUT'</span><span style=\"color: navy\">, </span> request.url = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Observation/'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">oid</span><span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> entry.resource = <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Observation'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">obs</span><b> then</b><span style=\"color: navy\"> {\r\n</span>    value<span style=\"color: navy\"><b> -&gt; </b></span>obs.id = <span style=\"color: maroon\">oid</span> <i>&quot;SetId&quot;</i><span style=\"color: navy\">;</span>\r\n    patient<span style=\"color: navy\"><b> -&gt; </b></span>obs.subject = <span style=\"color: maroon\">patient</span> <i>&quot;SetSubject&quot;</i><span style=\"color: navy\">;</span>\r\n    code<span style=\"color: navy\"><b> -&gt; </b></span>obs.code = <span style=\"color: maroon\">code</span> <i>&quot;SetCode&quot;</i><span style=\"color: navy\">;</span>\r\n    value<span style=\"color: navy\"><b> -&gt; </b></span>obs.value = <span style=\"color: maroon\">value</span> <i>&quot;SetValue&quot;</i><span style=\"color: navy\">;</span>\r\n    cat<span style=\"color: navy\"><b> -&gt; </b></span>obs.category = <span style=\"color: maroon\">cat</span> <i>&quot;SetCategory&quot;</i><span style=\"color: navy\">;</span>\r\n  <span style=\"color: navy\">}</span> <i>&quot;CreateObservation&quot;</i><span style=\"color: navy\">;</span>\r\n<span style=\"color: navy\">}\r\n\r\n</span><b>group </b>TypeOfVaccineDose<span style=\"color: navy\">(</span><b>source</b> <span style=\"color: maroon\">typeof</span><span style=\"color: navy\"> : </span>Coding, <b>target</b> <span style=\"color: maroon\">ext</span><span style=\"color: navy\"> : </span>Extension<span style=\"color: navy\">)</span><span style=\"color: navy\"> {\r\n</span>  typeof<span style=\"color: navy\"><b> -&gt; </b></span>ext.url = <span style=\"color: blue\">'http://smart.who.int/immunizations/StructureDefinition/IMMZTypeOfDose'</span> <i>&quot;SetURL&quot;</i><span style=\"color: navy\">;</span>\r\n  typeof<span style=\"color: navy\"><b> -&gt; </b></span>ext.value = <span style=\"color: maroon\">typeof</span> <i>&quot;SetValue&quot;</i><span style=\"color: navy\">;</span>\r\n<span style=\"color: navy\">}\r\n\r\n</span><b>group </b>MakeImmunization<span style=\"color: navy\">(</span><b>source</b> <span style=\"color: maroon\">patient</span><span style=\"color: navy\"> : </span>Reference, <b>source</b> <span style=\"color: maroon\">immid</span>, <b>source</b> <span style=\"color: maroon\">immz</span>, <b>target</b> <span style=\"color: maroon\">bundle</span><span style=\"color: navy\"> : </span>Bundle<span style=\"color: navy\">)</span><span style=\"color: navy\"> {\r\n</span>  immz.vaccineType<b> as </b><span style=\"color: maroon\">vaccineCode</span><span style=\"color: navy\"><b> -&gt; </b></span> bundle.entry<b> as </b><span style=\"color: maroon\">entry</span><span style=\"color: navy\">, </span> entry.fullUrl = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'urn:uuid:'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">immid</span><span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> entry.request<b> as </b><span style=\"color: maroon\">request</span><span style=\"color: navy\">, </span> request.method = <span style=\"color: blue\">'PUT'</span><span style=\"color: navy\">, </span> request.url = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Immunization/'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">immid</span><span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> entry.resource = <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Immunization'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">imm</span><b> then</b><span style=\"color: navy\"> {\r\n</span>    <span style=\"color: navy\">// </span><span style=\"color: green\">D1 and D13</span>\r\n    immid<span style=\"color: navy\"><b> -&gt; </b></span>imm.id = <span style=\"color: maroon\">immid</span> <i>&quot;SetId&quot;</i><span style=\"color: navy\">;</span>\r\n    patient<span style=\"color: navy\"><b> -&gt; </b></span>imm.patient = <span style=\"color: maroon\">patient</span> <i>&quot;SetPatient&quot;</i><span style=\"color: navy\">;</span>\r\n    vaccineCode<span style=\"color: navy\"><b> -&gt; </b></span>imm.vaccineCode = <span style=\"color: maroon\">vaccineCode</span> <i>&quot;vaccineCode&quot;</i><span style=\"color: navy\">;</span>\r\n    immz.typeOfDose<b> as </b><span style=\"color: maroon\">typeOfDose</span><span style=\"color: navy\"><b> -&gt; </b></span>imm.protocolApplied<b> as </b><span style=\"color: maroon\">pa</span><b> then</b><span style=\"color: navy\"> {\r\n</span>      typeOfDose.code<b> as </b><span style=\"color: maroon\">code</span><span style=\"color: navy\"><b> -&gt; </b></span>pa.series = <span style=\"color: maroon\">code</span> <i>&quot;SetSeriesToCode&quot;</i><span style=\"color: navy\">;</span> <span style=\"color: navy\">// </span><span style=\"color: green\">if display is missing</span>\r\n      typeOfDose.display<b> as </b><span style=\"color: maroon\">display</span><span style=\"color: navy\"><b> -&gt; </b></span>pa.series = <span style=\"color: maroon\">display</span> <i>&quot;SetSeriesToDisplay&quot;</i><span style=\"color: navy\">;</span>\r\n      immz.doseNumber<b> as </b><span style=\"color: maroon\">doseNumber</span><span style=\"color: navy\"><b> -&gt; </b></span>pa.doseNumber = <span style=\"color: maroon\">doseNumber</span> <i>&quot;SetDoseNumber&quot;</i><span style=\"color: navy\">;</span>\r\n      immz.totalDosesInSeries<b> as </b><span style=\"color: maroon\">totalDoses</span><span style=\"color: navy\"><b> -&gt; </b></span>pa.seriesDoses = <span style=\"color: maroon\">totalDoses</span><span style=\"color: navy\">;</span>\r\n      immz.diseaseTargeted<b> as </b><span style=\"color: maroon\">disease</span><span style=\"color: navy\"><b> -&gt; </b></span>pa.targetDisease = <span style=\"color: maroon\">disease</span><span style=\"color: navy\">;</span>\r\n      immz.dueDateOfNextDose<b> as </b><span style=\"color: maroon\">duedate</span><span style=\"color: navy\"><b> -&gt; </b></span> pa.extension<b> as </b><span style=\"color: maroon\">ext</span><span style=\"color: navy\">, </span> ext.url = <span style=\"color: blue\">'http://smart.who.int/immunizations/StructureDefinition/IMMZDueDateOfNextDose'</span><span style=\"color: navy\">, </span> ext.value = <span style=\"color: maroon\">duedate</span><span style=\"color: navy\">;</span>\r\n    <span style=\"color: navy\">}</span> <i>&quot;protocolApplied&quot;</i><span style=\"color: navy\">;</span>\r\n    immz.dateAndTimeOfVaccination<b> as </b><span style=\"color: maroon\">occurrence</span><span style=\"color: navy\"><b> -&gt; </b></span>imm.occurrence = <span style=\"color: maroon\">occurrence</span><span style=\"color: navy\">;</span>\r\n    immz.typeOfPoliovirusDose<b> as </b><span style=\"color: maroon\">typeof</span><span style=\"color: navy\"><b> -&gt; </b></span>imm.extension<b> as </b><span style=\"color: maroon\">ext</span><b> then </b>TypeOfVaccineDose<span style=\"color: navy\">(</span><span style=\"color: maroon\">typeof</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">ext</span><span style=\"color: navy\">)</span><span style=\"color: navy\">;</span>\r\n    immz.typeOfJeDose<b> as </b><span style=\"color: maroon\">typeof</span><span style=\"color: navy\"><b> -&gt; </b></span>imm.extension<b> as </b><span style=\"color: maroon\">ext</span><b> then </b>TypeOfVaccineDose<span style=\"color: navy\">(</span><span style=\"color: maroon\">typeof</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">ext</span><span style=\"color: navy\">)</span><span style=\"color: navy\">;</span>\r\n    immz.typeOfTbeDose<b> as </b><span style=\"color: maroon\">typeof</span><span style=\"color: navy\"><b> -&gt; </b></span>imm.extension<b> as </b><span style=\"color: maroon\">ext</span><b> then </b>TypeOfVaccineDose<span style=\"color: navy\">(</span><span style=\"color: maroon\">typeof</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">ext</span><span style=\"color: navy\">)</span><span style=\"color: navy\">;</span>\r\n    immz.typeOfTyphoidDose<b> as </b><span style=\"color: maroon\">typeof</span><span style=\"color: navy\"><b> -&gt; </b></span>imm.extension<b> as </b><span style=\"color: maroon\">ext</span><b> then </b>TypeOfVaccineDose<span style=\"color: navy\">(</span><span style=\"color: maroon\">typeof</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">ext</span><span style=\"color: navy\">)</span><span style=\"color: navy\">;</span>\r\n    immz.typeOfCholeraDose<b> as </b><span style=\"color: maroon\">typeof</span><span style=\"color: navy\"><b> -&gt; </b></span>imm.extension<b> as </b><span style=\"color: maroon\">ext</span><b> then </b>TypeOfVaccineDose<span style=\"color: navy\">(</span><span style=\"color: maroon\">typeof</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">ext</span><span style=\"color: navy\">)</span><span style=\"color: navy\">;</span>\r\n    immz.typeOfMeningococcalDose<b> as </b><span style=\"color: maroon\">typeof</span><span style=\"color: navy\"><b> -&gt; </b></span>imm.extension<b> as </b><span style=\"color: maroon\">ext</span><b> then </b>TypeOfVaccineDose<span style=\"color: navy\">(</span><span style=\"color: maroon\">typeof</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">ext</span><span style=\"color: navy\">)</span><span style=\"color: navy\">;</span>\r\n    immz.typeOfHepatitisADose<b> as </b><span style=\"color: maroon\">typeof</span><span style=\"color: navy\"><b> -&gt; </b></span>imm.extension<b> as </b><span style=\"color: maroon\">ext</span><b> then </b>TypeOfVaccineDose<span style=\"color: navy\">(</span><span style=\"color: maroon\">typeof</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">ext</span><span style=\"color: navy\">)</span><span style=\"color: navy\">;</span>\r\n    immz.typeOfHepatitisBDose<b> as </b><span style=\"color: maroon\">typeof</span><span style=\"color: navy\"><b> -&gt; </b></span>imm.extension<b> as </b><span style=\"color: maroon\">ext</span><b> then </b>TypeOfVaccineDose<span style=\"color: navy\">(</span><span style=\"color: maroon\">typeof</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">ext</span><span style=\"color: navy\">)</span><span style=\"color: navy\">;</span>\r\n    <span style=\"color: navy\">// </span><span style=\"color: green\">D1</span>\r\n    immz<span style=\"color: navy\"><b> -&gt; </b></span>imm.status = <span style=\"color: blue\">'completed'</span> <i>&quot;SetDefaultStatus&quot;</i><span style=\"color: navy\">;</span>\r\n    <span style=\"color: navy\">// </span><span style=\"color: green\">D13</span>\r\n    immz.immunizationEventStatus<b> as </b><span style=\"color: maroon\">status</span><span style=\"color: navy\"><b> -&gt; </b></span>imm.status = <b>translate</b><span style=\"color: navy\">(</span><span style=\"color: maroon\">status</span><span style=\"color: navy\">, </span><span style=\"color: blue\">'http://smart.who.int/immunizations/ConceptMap/IMMZ.D.ConceptMap'</span><span style=\"color: navy\">, </span><span style=\"color: blue\">'code'</span><span style=\"color: navy\">)</span><span style=\"color: navy\">;</span>\r\n    immz.reasonVaccineWasNotAdministered<b> as </b><span style=\"color: maroon\">reason</span><span style=\"color: navy\"><b> -&gt; </b></span>imm.statusReason = <span style=\"color: maroon\">reason</span><span style=\"color: navy\">;</span>\r\n    immz.vaccineBrand<b> as </b><span style=\"color: maroon\">brand</span><span style=\"color: navy\"><b> -&gt; </b></span> imm.extension<b> as </b><span style=\"color: maroon\">ext</span><span style=\"color: navy\">, </span> ext.url = <span style=\"color: blue\">'http://smart.who.int/immunizations/StructureDefinition/IMMZVaccineBrand'</span><span style=\"color: navy\">, </span> ext.value = <span style=\"color: maroon\">brand</span><span style=\"color: navy\">;</span>\r\n    immz.liveVaccine<b> as </b><span style=\"color: maroon\">live</span><span style=\"color: navy\"><b> -&gt; </b></span> imm.extension<b> as </b><span style=\"color: maroon\">ext</span><span style=\"color: navy\">, </span> ext.url = <span style=\"color: blue\">'http://smart.who.int/immunizations/StructureDefinition/IMMZLiveVaccine'</span><span style=\"color: navy\">, </span> ext.value = <span style=\"color: maroon\">live</span><span style=\"color: navy\">;</span>\r\n    immz.countryOfVaccination<b> as </b><span style=\"color: maroon\">country</span><span style=\"color: navy\"><b> -&gt; </b></span> imm.extension<b> as </b><span style=\"color: maroon\">ext</span><span style=\"color: navy\">, </span> ext.url = <span style=\"color: blue\">'http://smart.who.int/immunizations/StructureDefinition/IMMZCountryOfVaccination'</span><span style=\"color: navy\">, </span> ext.value = <span style=\"color: maroon\">country</span><span style=\"color: navy\">;</span>\r\n    immz.administrativeArea<b> as </b><span style=\"color: maroon\">area</span><span style=\"color: navy\"><b> -&gt; </b></span> imm.extension<b> as </b><span style=\"color: maroon\">ext</span><span style=\"color: navy\">, </span> ext.url = <span style=\"color: blue\">'http://smart.who.int/immunizations/StructureDefinition/IMMZAdministrativeArea'</span><span style=\"color: navy\">, </span> ext.value = <span style=\"color: maroon\">area</span><span style=\"color: navy\">;</span>\r\n    immz.vaccineManufacturer<b> as </b><span style=\"color: maroon\">vman</span><span style=\"color: navy\"><b> -&gt; </b></span> imm.manufacturer<b> as </b><span style=\"color: maroon\">manufacturer</span><span style=\"color: navy\">, </span> manufacturer.identifier<b> as </b><span style=\"color: maroon\">identifier</span><b> then</b><span style=\"color: navy\"> {\r\n</span>      vman.system<b> as </b><span style=\"color: maroon\">system</span><span style=\"color: navy\"><b> -&gt; </b></span>identifier.system = <span style=\"color: maroon\">system</span> <i>&quot;SetSystem&quot;</i><span style=\"color: navy\">;</span>\r\n      vman.code<b> as </b><span style=\"color: maroon\">code</span><span style=\"color: navy\"><b> -&gt; </b></span>identifier.value = <span style=\"color: maroon\">code</span> <i>&quot;SetValue&quot;</i><span style=\"color: navy\">;</span>\r\n    <span style=\"color: navy\">}</span><span style=\"color: navy\">;</span>\r\n    immz.vaccineBatchNumber<b> as </b><span style=\"color: maroon\">batch</span><span style=\"color: navy\"><b> -&gt; </b></span>imm.lotNumber = <span style=\"color: maroon\">batch</span><span style=\"color: navy\">;</span>\r\n    immz.vaccineMarketAuthorizationHolder<b> as </b><span style=\"color: maroon\">market</span><span style=\"color: navy\"><b> -&gt; </b></span> imm.extension<b> as </b><span style=\"color: maroon\">ext</span><span style=\"color: navy\">, </span> ext.url = <span style=\"color: blue\">'http://smart.who.int/immunizations/StructureDefinition/IMMZMarketAuthorization'</span><span style=\"color: navy\">, </span> ext.value = <span style=\"color: maroon\">market</span><span style=\"color: navy\">;</span>\r\n    immz.expirationDate<b> as </b><span style=\"color: maroon\">expiration</span><span style=\"color: navy\"><b> -&gt; </b></span>imm.expirationDate = <span style=\"color: maroon\">expiration</span><span style=\"color: navy\">;</span>\r\n    immz.doseQuantity<b> as </b><span style=\"color: maroon\">dosequantity</span><span style=\"color: navy\"><b> -&gt; </b></span>imm.doseQuantity = <span style=\"color: maroon\">dosequantity</span><span style=\"color: navy\">;</span>\r\n    immz.healthWorkerIdentifier<b> as </b><span style=\"color: maroon\">hw</span><span style=\"color: navy\"><b> -&gt; </b></span> imm.performer<b> as </b><span style=\"color: maroon\">performer</span><span style=\"color: navy\">, </span> performer.actor<b> as </b><span style=\"color: maroon\">actor</span><span style=\"color: navy\">, </span> actor.identifier<b> as </b><span style=\"color: maroon\">identifier</span><span style=\"color: navy\">, </span> identifier.value = <span style=\"color: maroon\">hw</span><span style=\"color: navy\">;</span>\r\n  <span style=\"color: navy\">}</span> <i>&quot;MakeImmunization&quot;</i><span style=\"color: navy\">;</span>\r\n<span style=\"color: navy\">}\r\n\r\n</span><b>group </b>D1andD13Observations<span style=\"color: navy\">(</span><b>source</b> <span style=\"color: maroon\">patient</span><span style=\"color: navy\"> : </span>Reference, <b>source</b> <span style=\"color: maroon\">immid</span>, <b>source</b> <span style=\"color: maroon\">immz</span>, <b>target</b> <span style=\"color: maroon\">bundle</span><span style=\"color: navy\"> : </span>Bundle<span style=\"color: navy\">)</span><span style=\"color: navy\"> {\r\n</span>  immz<span style=\"color: navy\"><b> -&gt; </b></span><b>c</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'http://terminology.hl7.org/CodeSystem/observation-category'</span><span style=\"color: navy\">, </span><span style=\"color: blue\">'survey'</span><span style=\"color: navy\">, </span><span style=\"color: blue\">'Survey'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">survey</span><b> then</b><span style=\"color: navy\"> {\r\n</span>    immz.birthDose<b> as </b><span style=\"color: maroon\">content</span><span style=\"color: navy\"><b> -&gt; </b></span><b>c</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'http://smart.who.int/immunizations/CodeSystem/IMMZ.D'</span><span style=\"color: navy\">, </span><span style=\"color: blue\">'DE263'</span><span style=\"color: navy\">, </span><span style=\"color: blue\">'Birth dose'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">code</span><b> then </b>MakeImmzObservation<span style=\"color: navy\">(</span><span style=\"color: maroon\">patient</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">immid</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">code</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">survey</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">content</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">bundle</span><span style=\"color: navy\">)</span><span style=\"color: navy\">;</span>\r\n    immz.completedThePrimaryVaccinationSeries<b> as </b><span style=\"color: maroon\">content</span><span style=\"color: navy\"><b> -&gt; </b></span><b>c</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'http://smart.who.int/immunizations/CodeSystem/IMMZ.D'</span><span style=\"color: navy\">, </span><span style=\"color: blue\">'DE203'</span><span style=\"color: navy\">, </span><span style=\"color: blue\">'Completed the primary vaccination series'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">code</span><b> then </b>MakeImmzObservation<span style=\"color: navy\">(</span><span style=\"color: maroon\">patient</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">immid</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">code</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">survey</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">content</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">bundle</span><span style=\"color: navy\">)</span><span style=\"color: navy\">;</span>\r\n    immz.completedTheBoosterSeries<b> as </b><span style=\"color: maroon\">content</span><span style=\"color: navy\"><b> -&gt; </b></span><b>c</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'http://smart.who.int/immunizations/CodeSystem/IMMZ.D'</span><span style=\"color: navy\">, </span><span style=\"color: blue\">'DE257'</span><span style=\"color: navy\">, </span><span style=\"color: blue\">'Completed the booster series'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">code</span><b> then </b>MakeImmzObservation<span style=\"color: navy\">(</span><span style=\"color: maroon\">patient</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">immid</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">code</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">survey</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">content</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">bundle</span><span style=\"color: navy\">)</span><span style=\"color: navy\">;</span>\r\n    immz.dateWhenPrimaryVaccinationSeriesWasCompleted<b> as </b><span style=\"color: maroon\">content</span><span style=\"color: navy\"><b> -&gt; </b></span><b>c</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'http://smart.who.int/immunizations/CodeSystem/IMMZ.D'</span><span style=\"color: navy\">, </span><span style=\"color: blue\">'DE242'</span><span style=\"color: navy\">, </span><span style=\"color: blue\">'Date when primary vaccination series was completed'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">code</span><b> then </b>MakeImmzObservation<span style=\"color: navy\">(</span><span style=\"color: maroon\">patient</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">immid</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">code</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">survey</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">content</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">bundle</span><span style=\"color: navy\">)</span><span style=\"color: navy\">;</span>\r\n    immz.hivStatus<b> as </b><span style=\"color: maroon\">content</span><span style=\"color: navy\"><b> -&gt; </b></span><b>c</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'http://smart.who.int/immunizations/CodeSystem/IMMZ.D'</span><span style=\"color: navy\">, </span><span style=\"color: blue\">'DE204'</span><span style=\"color: navy\">, </span><span style=\"color: blue\">'HIV status'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">code</span><b> then </b>MakeImmzObservation<span style=\"color: navy\">(</span><span style=\"color: maroon\">patient</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">immid</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">code</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">survey</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">content</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">bundle</span><span style=\"color: navy\">)</span><span style=\"color: navy\">;</span>\r\n    immz.contactDate<b> as </b><span style=\"color: maroon\">content</span><span style=\"color: navy\"><b> -&gt; </b></span><b>c</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'http://smart.who.int/immunizations/CodeSystem/IMMZ.D'</span><span style=\"color: navy\">, </span><span style=\"color: blue\">'DE201'</span><span style=\"color: navy\">, </span><span style=\"color: blue\">'Contact date'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">code</span><b> then </b>MakeImmzObservation<span style=\"color: navy\">(</span><span style=\"color: maroon\">patient</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">immid</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">code</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">survey</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">content</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">bundle</span><span style=\"color: navy\">)</span><span style=\"color: navy\">;</span>\r\n    immz.ancContactNumber<b> as </b><span style=\"color: maroon\">content</span><span style=\"color: navy\"><b> -&gt; </b></span><b>c</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'http://smart.who.int/immunizations/CodeSystem/IMMZ.D'</span><span style=\"color: navy\">, </span><span style=\"color: blue\">'DE202'</span><span style=\"color: navy\">, </span><span style=\"color: blue\">'ANC contact number'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">code</span><b> then </b>MakeImmzObservation<span style=\"color: navy\">(</span><span style=\"color: maroon\">patient</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">immid</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">code</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">survey</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">content</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">bundle</span><span style=\"color: navy\">)</span><span style=\"color: navy\">;</span>\r\n  <span style=\"color: navy\">}</span> <i>&quot;DefineCategory&quot;</i><span style=\"color: navy\">;</span>\r\n<span style=\"color: navy\">}\r\n\r\n</span><b>group </b>D1Observations<span style=\"color: navy\">(</span><b>source</b> <span style=\"color: maroon\">patient</span><span style=\"color: navy\"> : </span>Reference, <b>source</b> <span style=\"color: maroon\">immid</span>, <b>source</b> <span style=\"color: maroon\">immz</span>, <b>target</b> <span style=\"color: maroon\">bundle</span><span style=\"color: navy\"> : </span>Bundle<span style=\"color: navy\">)</span><span style=\"color: navy\"> {\r\n</span>  immz<span style=\"color: navy\"><b> -&gt; </b></span><b>c</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'http://terminology.hl7.org/CodeSystem/observation-category'</span><span style=\"color: navy\">, </span><span style=\"color: blue\">'survey'</span><span style=\"color: navy\">, </span><span style=\"color: blue\">'Survey'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">survey</span><b> then</b><span style=\"color: navy\"> {\r\n</span>    immz.pretermBirth<b> as </b><span style=\"color: maroon\">content</span><span style=\"color: navy\"><b> -&gt; </b></span><b>c</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'http://smart.who.int/immunizations/CodeSystem/IMMZ.D'</span><span style=\"color: navy\">, </span><span style=\"color: blue\">'DE208'</span><span style=\"color: navy\">, </span><span style=\"color: blue\">'Preterm birth'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">code</span><b> then </b>MakeImmzObservation<span style=\"color: navy\">(</span><span style=\"color: maroon\">patient</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">immid</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">code</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">survey</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">content</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">bundle</span><span style=\"color: navy\">)</span><span style=\"color: navy\">;</span>\r\n    immz.immunocompromised<b> as </b><span style=\"color: maroon\">content</span><span style=\"color: navy\"><b> -&gt; </b></span><b>c</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'http://smart.who.int/immunizations/CodeSystem/IMMZ.D'</span><span style=\"color: navy\">, </span><span style=\"color: blue\">'DE209'</span><span style=\"color: navy\">, </span><span style=\"color: blue\">'Immunocompromised'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">code</span><b> then </b>MakeImmzObservation<span style=\"color: navy\">(</span><span style=\"color: maroon\">patient</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">immid</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">code</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">survey</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">content</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">bundle</span><span style=\"color: navy\">)</span><span style=\"color: navy\">;</span>\r\n    immz.currentlyOnArt<b> as </b><span style=\"color: maroon\">content</span><span style=\"color: navy\"><b> -&gt; </b></span><b>c</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'http://smart.who.int/immunizations/CodeSystem/IMMZ.D'</span><span style=\"color: navy\">, </span><span style=\"color: blue\">'DE210'</span><span style=\"color: navy\">, </span><span style=\"color: blue\">'Currently on ART'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">code</span><b> then </b>MakeImmzObservation<span style=\"color: navy\">(</span><span style=\"color: maroon\">patient</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">immid</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">code</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">survey</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">content</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">bundle</span><span style=\"color: navy\">)</span><span style=\"color: navy\">;</span>\r\n    immz.typeOfTbInfectionTestPerformed<b> as </b><span style=\"color: maroon\">content</span><span style=\"color: navy\"><b> -&gt; </b></span><b>c</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'http://smart.who.int/immunizations/CodeSystem/IMMZ.D'</span><span style=\"color: navy\">, </span><span style=\"color: blue\">'DE243'</span><span style=\"color: navy\">, </span><span style=\"color: blue\">'Type of TB infection test performed'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">code</span><b> then </b>MakeImmzObservation<span style=\"color: navy\">(</span><span style=\"color: maroon\">patient</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">immid</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">code</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">survey</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">content</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">bundle</span><span style=\"color: navy\">)</span><span style=\"color: navy\">;</span>\r\n    immz.tbInfectionTestResult<b> as </b><span style=\"color: maroon\">content</span><span style=\"color: navy\"><b> -&gt; </b></span><b>c</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'http://smart.who.int/immunizations/CodeSystem/IMMZ.D'</span><span style=\"color: navy\">, </span><span style=\"color: blue\">'DE246'</span><span style=\"color: navy\">, </span><span style=\"color: blue\">'TB infection test result'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">code</span><b> then </b>MakeImmzObservation<span style=\"color: navy\">(</span><span style=\"color: maroon\">patient</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">immid</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">code</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">survey</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">content</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">bundle</span><span style=\"color: navy\">)</span><span style=\"color: navy\">;</span>\r\n    immz.immunologicallyStable<b> as </b><span style=\"color: maroon\">content</span><span style=\"color: navy\"><b> -&gt; </b></span><b>c</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'http://smart.who.int/immunizations/CodeSystem/IMMZ.D'</span><span style=\"color: navy\">, </span><span style=\"color: blue\">'DE249'</span><span style=\"color: navy\">, </span><span style=\"color: blue\">'Immunologically stable'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">code</span><b> then </b>MakeImmzObservation<span style=\"color: navy\">(</span><span style=\"color: maroon\">patient</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">immid</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">code</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">survey</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">content</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">bundle</span><span style=\"color: navy\">)</span><span style=\"color: navy\">;</span>\r\n    immz.clinicallyWell<b> as </b><span style=\"color: maroon\">content</span><span style=\"color: navy\"><b> -&gt; </b></span><b>c</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'http://smart.who.int/immunizations/CodeSystem/IMMZ.D'</span><span style=\"color: navy\">, </span><span style=\"color: blue\">'DE250'</span><span style=\"color: navy\">, </span><span style=\"color: blue\">'Clinically well'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">code</span><b> then </b>MakeImmzObservation<span style=\"color: navy\">(</span><span style=\"color: maroon\">patient</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">immid</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">code</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">survey</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">content</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">bundle</span><span style=\"color: navy\">)</span><span style=\"color: navy\">;</span>\r\n    immz.birthWeightInGrams<b> as </b><span style=\"color: maroon\">value</span><span style=\"color: navy\"><b> -&gt; </b></span> <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Quantity'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">content</span><span style=\"color: navy\">, </span> content.system = <span style=\"color: blue\">'http://unitsofmeasure.org'</span><span style=\"color: navy\">, </span> content.code = <span style=\"color: blue\">'g'</span><span style=\"color: navy\">, </span> content.unit = <span style=\"color: blue\">'g'</span><span style=\"color: navy\">, </span> content.value = <span style=\"color: maroon\">value</span><span style=\"color: navy\">, </span> <b>c</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'http://loinc.org'</span><span style=\"color: navy\">, </span><span style=\"color: blue\">'8339-4'</span><span style=\"color: navy\">, </span><span style=\"color: blue\">'Birth weight Measured'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">bwloinc</span><span style=\"color: navy\">, </span> <b>c</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'http://smart.who.int/immunizations/CodeSystem/IMMZ.D'</span><span style=\"color: navy\">, </span><span style=\"color: blue\">'DE211'</span><span style=\"color: navy\">, </span><span style=\"color: blue\">'Birth weight in grams'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">bwdak</span><span style=\"color: navy\">, </span> <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'CodeableConcept'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">code</span><span style=\"color: navy\">, </span> code.coding = <span style=\"color: maroon\">bwloinc</span><span style=\"color: navy\">, </span> code.coding = <span style=\"color: maroon\">bwdak</span><span style=\"color: navy\">, </span> <b>c</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'http://terminology.hl7.org/CodeSystem/observation-category'</span><span style=\"color: navy\">, </span><span style=\"color: blue\">'vital-signs'</span><span style=\"color: navy\">, </span><span style=\"color: blue\">'Vital Signs'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">vital</span><b> then </b>MakeImmzObservation<span style=\"color: navy\">(</span><span style=\"color: maroon\">patient</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">immid</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">code</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">vital</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">content</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">bundle</span><span style=\"color: navy\">)</span><span style=\"color: navy\">;</span>\r\n    immz.artStartDate<b> as </b><span style=\"color: maroon\">content</span><span style=\"color: navy\"><b> -&gt; </b></span><b>c</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'http://smart.who.int/immunizations/CodeSystem/IMMZ.D'</span><span style=\"color: navy\">, </span><span style=\"color: blue\">'DE215'</span><span style=\"color: navy\">, </span><span style=\"color: blue\">'ART start date'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">code</span><b> then </b>MakeImmzObservation<span style=\"color: navy\">(</span><span style=\"color: maroon\">patient</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">immid</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">code</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">survey</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">content</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">bundle</span><span style=\"color: navy\">)</span><span style=\"color: navy\">;</span>\r\n    immz.highRiskOfPneumococcalInfection<b> as </b><span style=\"color: maroon\">content</span><span style=\"color: navy\"><b> -&gt; </b></span><b>c</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'http://smart.who.int/immunizations/CodeSystem/IMMZ.D'</span><span style=\"color: navy\">, </span><span style=\"color: blue\">'DE251'</span><span style=\"color: navy\">, </span><span style=\"color: blue\">'High risk of pneumococcal infection'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">code</span><b> then </b>MakeImmzObservation<span style=\"color: navy\">(</span><span style=\"color: maroon\">patient</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">immid</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">code</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">survey</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">content</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">bundle</span><span style=\"color: navy\">)</span><span style=\"color: navy\">;</span>\r\n    immz.ageInMonthsWhenClientReceivedFirstMeningococcalDose<b> as </b><span style=\"color: maroon\">value</span><span style=\"color: navy\"><b> -&gt; </b></span> <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Quantity'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">content</span><span style=\"color: navy\">, </span> content.unit = <span style=\"color: blue\">'mo'</span><span style=\"color: navy\">, </span> content.value = <span style=\"color: maroon\">value</span><span style=\"color: navy\">, </span> <b>c</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'http://smart.who.int/immunizations/CodeSystem/IMMZ.D'</span><span style=\"color: navy\">, </span><span style=\"color: blue\">'DE236'</span><span style=\"color: navy\">, </span><span style=\"color: blue\">'Age in months when client received first meningococcal dose'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">code</span><b> then </b>MakeImmzObservation<span style=\"color: navy\">(</span><span style=\"color: maroon\">patient</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">immid</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">code</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">survey</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">content</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">bundle</span><span style=\"color: navy\">)</span><span style=\"color: navy\">;</span>\r\n    immz.vnaLevel<b> as </b><span style=\"color: maroon\">value</span><span style=\"color: navy\"><b> -&gt; </b></span> <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Quantity'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">content</span><span style=\"color: navy\">, </span> content.system = <span style=\"color: blue\">'http://unitsofmeasure.org'</span><span style=\"color: navy\">, </span> content.code = <span style=\"color: blue\">'[IU]/mL'</span><span style=\"color: navy\">, </span> content.unit = <span style=\"color: blue\">'[IU]/mL'</span><span style=\"color: navy\">, </span> content.value = <span style=\"color: maroon\">value</span><span style=\"color: navy\">, </span> <b>c</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'http://smart.who.int/immunizations/CodeSystem/IMMZ.D'</span><span style=\"color: navy\">, </span><span style=\"color: blue\">'DE240'</span><span style=\"color: navy\">, </span><span style=\"color: blue\">'VNA level'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">code</span><b> then </b>MakeImmzObservation<span style=\"color: navy\">(</span><span style=\"color: maroon\">patient</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">immid</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">code</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">survey</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">content</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">bundle</span><span style=\"color: navy\">)</span><span style=\"color: navy\">;</span>\r\n    immz.riskOfOccupationalExposureToRabiesVirus<b> as </b><span style=\"color: maroon\">content</span><span style=\"color: navy\"><b> -&gt; </b></span><b>c</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'http://smart.who.int/immunizations/CodeSystem/IMMZ.D'</span><span style=\"color: navy\">, </span><span style=\"color: blue\">'DE253'</span><span style=\"color: navy\">, </span><span style=\"color: blue\">'Risk of occupational exposure to rabies virus'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">code</span><b> then </b>MakeImmzObservation<span style=\"color: navy\">(</span><span style=\"color: maroon\">patient</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">immid</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">code</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">survey</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">content</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">bundle</span><span style=\"color: navy\">)</span><span style=\"color: navy\">;</span>\r\n    immz.dengueSerostatus<b> as </b><span style=\"color: maroon\">content</span><span style=\"color: navy\"><b> -&gt; </b></span><b>c</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'http://smart.who.int/immunizations/CodeSystem/IMMZ.D'</span><span style=\"color: navy\">, </span><span style=\"color: blue\">'DE241'</span><span style=\"color: navy\">, </span><span style=\"color: blue\">'Dengue serostatus'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">code</span><b> then </b>MakeImmzObservation<span style=\"color: navy\">(</span><span style=\"color: maroon\">patient</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">immid</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">code</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">survey</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">content</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">bundle</span><span style=\"color: navy\">)</span><span style=\"color: navy\">;</span>\r\n  <span style=\"color: navy\">}</span> <i>&quot;DefineCategory&quot;</i><span style=\"color: navy\">;</span>\r\n<span style=\"color: navy\">}\r\n\r\n</span></pre></div>"^^rdf:XMLLiteral
  ] ; # 
  fhir:url [ fhir:v "http://smart.who.int/immunizations/StructureMap/IMMZ.Helpers"^^xsd:anyURI] ; # 
  fhir:version [ fhir:v "0.2.0"] ; # 
  fhir:name [ fhir:v "IMMZ.Helpers"] ; # 
  fhir:status [ fhir:v "draft"] ; # 
  fhir:date [ fhir:v "2025-06-25T20:08:00+00:00"^^xsd:dateTime] ; # 
  fhir:publisher [ fhir:v "WHO"] ; # 
  fhir:contact ( [
     fhir:name [ fhir:v "WHO" ] ;
     fhir:telecom ( [
       fhir:system [ fhir:v "url" ] ;
       fhir:value [ fhir:v "http://who.int" ]
     ] )
  ] ) ; # 
  fhir:description [ fhir:v "Immunization - Transform QuestionnaireResponse to Logical Model Helper groups"] ; # 
  fhir:structure ( [
     fhir:url [
       fhir:v "http://hl7.org/fhir/StructureDefinition/QuestionnaireResponse"^^xsd:anyURI ;
       fhir:link <http://hl7.org/fhir/StructureDefinition/QuestionnaireResponse>
     ] ;
     fhir:mode [ fhir:v "source" ] ;
     fhir:alias [ fhir:v "QResp" ]
  ] [
     fhir:url [
       fhir:v "http://hl7.org/fhir/StructureDefinition/Bundle"^^xsd:anyURI ;
       fhir:link <http://hl7.org/fhir/StructureDefinition/Bundle>
     ] ;
     fhir:mode [ fhir:v "target" ] ;
     fhir:alias [ fhir:v "Bundle" ]
  ] ) ; # 
  fhir:group ( [
     fhir:name [ fhir:v "ItemToValue" ] ;
     fhir:typeMode [ fhir:v "none" ] ;
     fhir:input ( [
       fhir:name [ fhir:v "item" ] ;
       fhir:mode [ fhir:v "source" ]
     ] [
       fhir:name [ fhir:v "field" ] ;
       fhir:mode [ fhir:v "target" ]
     ] ) ;
     fhir:rule ( [
       fhir:name [ fhir:v "FirstAnswer" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "item" ] ;
         fhir:element [ fhir:v "answer" ] ;
         fhir:listMode [ fhir:v "first" ] ;
         fhir:variable [ fhir:v "answer" ]
       ] ) ;
       fhir:rule ( [
         fhir:name [ fhir:v "SetValue" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "answer" ] ;
           fhir:element [ fhir:v "value" ] ;
           fhir:variable [ fhir:v "content" ]
         ] ) ;
         fhir:target ( [
           fhir:context [ fhir:v "field" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "value" ] ;
           fhir:transform [ fhir:v "copy" ] ;
           fhir:parameter ( [
             fhir:value [
               a fhir:id ;
               fhir:v "content"
             ]
           ] )
         ] )
       ] )
     ] )
  ] [
     fhir:name [ fhir:v "ItemToCode" ] ;
     fhir:typeMode [ fhir:v "none" ] ;
     fhir:input ( [
       fhir:name [ fhir:v "item" ] ;
       fhir:mode [ fhir:v "source" ]
     ] [
       fhir:name [ fhir:v "field" ] ;
       fhir:mode [ fhir:v "target" ]
     ] ) ;
     fhir:rule ( [
       fhir:name [ fhir:v "FirstAnswer" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "item" ] ;
         fhir:element [ fhir:v "answer" ] ;
         fhir:listMode [ fhir:v "first" ] ;
         fhir:variable [ fhir:v "answer" ]
       ] ) ;
       fhir:rule ( [
         fhir:name [ fhir:v "Coding" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "answer" ] ;
           fhir:element [ fhir:v "value" ] ;
           fhir:variable [ fhir:v "coding" ]
         ] ) ;
         fhir:rule ( [
           fhir:name [ fhir:v "SetCode" ] ;
           fhir:source ( [
             fhir:context [ fhir:v "coding" ] ;
             fhir:element [ fhir:v "code" ] ;
             fhir:variable [ fhir:v "content" ]
           ] ) ;
           fhir:target ( [
             fhir:context [ fhir:v "field" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "value" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:id ;
                 fhir:v "content"
               ]
             ] )
           ] )
         ] )
       ] )
     ] )
  ] [
     fhir:name [ fhir:v "ItemToCoding" ] ;
     fhir:typeMode [ fhir:v "none" ] ;
     fhir:input ( [
       fhir:name [ fhir:v "item" ] ;
       fhir:mode [ fhir:v "source" ]
     ] [
       fhir:name [ fhir:v "field" ] ;
       fhir:mode [ fhir:v "target" ]
     ] ) ;
     fhir:rule ( [
       fhir:name [ fhir:v "FirstAnswer" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "item" ] ;
         fhir:element [ fhir:v "answer" ] ;
         fhir:listMode [ fhir:v "first" ] ;
         fhir:variable [ fhir:v "answer" ]
       ] ) ;
       fhir:rule ( [
         fhir:name [ fhir:v "Coding" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "answer" ] ;
           fhir:element [ fhir:v "value" ] ;
           fhir:variable [ fhir:v "coding" ]
         ] ) ;
         fhir:rule ( [
           fhir:name [ fhir:v "SetCode" ] ;
           fhir:source ( [
             fhir:context [ fhir:v "coding" ] ;
             fhir:element [ fhir:v "code" ] ;
             fhir:variable [ fhir:v "code" ]
           ] ) ;
           fhir:target ( [
             fhir:context [ fhir:v "field" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "code" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:id ;
                 fhir:v "code"
               ]
             ] )
           ] )
         ] [
           fhir:name [ fhir:v "SetSystem" ] ;
           fhir:source ( [
             fhir:context [ fhir:v "coding" ] ;
             fhir:element [ fhir:v "system" ] ;
             fhir:variable [ fhir:v "system" ]
           ] ) ;
           fhir:target ( [
             fhir:context [ fhir:v "field" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "system" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:id ;
                 fhir:v "system"
               ]
             ] )
           ] )
         ] [
           fhir:name [ fhir:v "SetDisplay" ] ;
           fhir:source ( [
             fhir:context [ fhir:v "coding" ] ;
             fhir:element [ fhir:v "display" ] ;
             fhir:variable [ fhir:v "display" ]
           ] ) ;
           fhir:target ( [
             fhir:context [ fhir:v "field" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "display" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:id ;
                 fhir:v "display"
               ]
             ] )
           ] )
         ] )
       ] )
     ] )
  ] [
     fhir:name [ fhir:v "D1andD13Questions" ] ;
     fhir:typeMode [ fhir:v "none" ] ;
     fhir:input ( [
       fhir:name [ fhir:v "qr" ] ;
       fhir:type [ fhir:v "QResp" ] ;
       fhir:mode [ fhir:v "source" ]
     ] [
       fhir:name [ fhir:v "immz" ] ;
       fhir:mode [ fhir:v "target" ]
     ] ) ;
     fhir:rule ( [
       fhir:name [ fhir:v "birthDose" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "qr" ] ;
         fhir:element [ fhir:v "item" ] ;
         fhir:variable [ fhir:v "item" ] ;
         fhir:condition [ fhir:v "item.linkId = 'birthDose'" ]
       ] ) ;
       fhir:target ( [
         fhir:context [ fhir:v "immz" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "birthDose" ] ;
         fhir:variable [ fhir:v "field" ]
       ] ) ;
       fhir:dependent ( [
         fhir:name [ fhir:v "ItemToValue" ] ;
         fhir:variable ( [ fhir:v "item" ] [ fhir:v "field" ] )
       ] )
     ] [
       fhir:name [ fhir:v "typeOfDose" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "qr" ] ;
         fhir:element [ fhir:v "item" ] ;
         fhir:variable [ fhir:v "item" ] ;
         fhir:condition [ fhir:v "item.linkId = 'typeOfDose'" ]
       ] ) ;
       fhir:target ( [
         fhir:context [ fhir:v "immz" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "typeOfDose" ] ;
         fhir:variable [ fhir:v "field" ]
       ] ) ;
       fhir:dependent ( [
         fhir:name [ fhir:v "ItemToCoding" ] ;
         fhir:variable ( [ fhir:v "item" ] [ fhir:v "field" ] )
       ] )
     ] [
       fhir:name [ fhir:v "completedThePrimaryVaccinationSeries" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "qr" ] ;
         fhir:element [ fhir:v "item" ] ;
         fhir:variable [ fhir:v "item" ] ;
         fhir:condition [ fhir:v "item.linkId = 'completedThePrimaryVaccinationSeries'" ]
       ] ) ;
       fhir:target ( [
         fhir:context [ fhir:v "immz" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "completedThePrimaryVaccinationSeries" ] ;
         fhir:variable [ fhir:v "field" ]
       ] ) ;
       fhir:dependent ( [
         fhir:name [ fhir:v "ItemToValue" ] ;
         fhir:variable ( [ fhir:v "item" ] [ fhir:v "field" ] )
       ] )
     ] [
       fhir:name [ fhir:v "completedTheBoosterSeries" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "qr" ] ;
         fhir:element [ fhir:v "item" ] ;
         fhir:variable [ fhir:v "item" ] ;
         fhir:condition [ fhir:v "item.linkId = 'completedTheBoosterSeries'" ]
       ] ) ;
       fhir:target ( [
         fhir:context [ fhir:v "immz" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "completedTheBoosterSeries" ] ;
         fhir:variable [ fhir:v "field" ]
       ] ) ;
       fhir:dependent ( [
         fhir:name [ fhir:v "ItemToValue" ] ;
         fhir:variable ( [ fhir:v "item" ] [ fhir:v "field" ] )
       ] )
     ] [
       fhir:name [ fhir:v "dateWhenPrimaryVaccinationSeriesWasCompleted" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "qr" ] ;
         fhir:element [ fhir:v "item" ] ;
         fhir:variable [ fhir:v "item" ] ;
         fhir:condition [ fhir:v "item.linkId = 'dateWhenPrimaryVaccinationSeriesWasCompleted'" ]
       ] ) ;
       fhir:target ( [
         fhir:context [ fhir:v "immz" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "dateWhenPrimaryVaccinationSeriesWasCompleted" ] ;
         fhir:variable [ fhir:v "field" ]
       ] ) ;
       fhir:dependent ( [
         fhir:name [ fhir:v "ItemToValue" ] ;
         fhir:variable ( [ fhir:v "item" ] [ fhir:v "field" ] )
       ] )
     ] [
       fhir:name [ fhir:v "hivStatus" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "qr" ] ;
         fhir:element [ fhir:v "item" ] ;
         fhir:variable [ fhir:v "item" ] ;
         fhir:condition [ fhir:v "item.linkId = 'hivStatus'" ]
       ] ) ;
       fhir:target ( [
         fhir:context [ fhir:v "immz" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "hivStatus" ] ;
         fhir:variable [ fhir:v "field" ]
       ] ) ;
       fhir:dependent ( [
         fhir:name [ fhir:v "ItemToCoding" ] ;
         fhir:variable ( [ fhir:v "item" ] [ fhir:v "field" ] )
       ] )
     ] [
       fhir:name [ fhir:v "typeOfPoliovirusDose" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "qr" ] ;
         fhir:element [ fhir:v "item" ] ;
         fhir:variable [ fhir:v "item" ] ;
         fhir:condition [ fhir:v "item.linkId = 'typeOfPoliovirusDose'" ]
       ] ) ;
       fhir:target ( [
         fhir:context [ fhir:v "immz" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "typeOfPoliovirusDose" ] ;
         fhir:variable [ fhir:v "field" ]
       ] ) ;
       fhir:dependent ( [
         fhir:name [ fhir:v "ItemToCoding" ] ;
         fhir:variable ( [ fhir:v "item" ] [ fhir:v "field" ] )
       ] )
     ] [
       fhir:name [ fhir:v "typeOfJeDose" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "qr" ] ;
         fhir:element [ fhir:v "item" ] ;
         fhir:variable [ fhir:v "item" ] ;
         fhir:condition [ fhir:v "item.linkId = 'typeOfJeDose'" ]
       ] ) ;
       fhir:target ( [
         fhir:context [ fhir:v "immz" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "typeOfJeDose" ] ;
         fhir:variable [ fhir:v "field" ]
       ] ) ;
       fhir:dependent ( [
         fhir:name [ fhir:v "ItemToCoding" ] ;
         fhir:variable ( [ fhir:v "item" ] [ fhir:v "field" ] )
       ] )
     ] [
       fhir:name [ fhir:v "typeOfTbeDose" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "qr" ] ;
         fhir:element [ fhir:v "item" ] ;
         fhir:variable [ fhir:v "item" ] ;
         fhir:condition [ fhir:v "item.linkId = 'typeOfTbeDose'" ]
       ] ) ;
       fhir:target ( [
         fhir:context [ fhir:v "immz" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "typeOfTbeDose" ] ;
         fhir:variable [ fhir:v "field" ]
       ] ) ;
       fhir:dependent ( [
         fhir:name [ fhir:v "ItemToCoding" ] ;
         fhir:variable ( [ fhir:v "item" ] [ fhir:v "field" ] )
       ] )
     ] [
       fhir:name [ fhir:v "typeOfTyphoidDose" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "qr" ] ;
         fhir:element [ fhir:v "item" ] ;
         fhir:variable [ fhir:v "item" ] ;
         fhir:condition [ fhir:v "item.linkId = 'typeOfTyphoidDose'" ]
       ] ) ;
       fhir:target ( [
         fhir:context [ fhir:v "immz" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "typeOfTyphoidDose" ] ;
         fhir:variable [ fhir:v "field" ]
       ] ) ;
       fhir:dependent ( [
         fhir:name [ fhir:v "ItemToCoding" ] ;
         fhir:variable ( [ fhir:v "item" ] [ fhir:v "field" ] )
       ] )
     ] [
       fhir:name [ fhir:v "typeOfCholeraDose" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "qr" ] ;
         fhir:element [ fhir:v "item" ] ;
         fhir:variable [ fhir:v "item" ] ;
         fhir:condition [ fhir:v "item.linkId = 'typeOfCholeraDose'" ]
       ] ) ;
       fhir:target ( [
         fhir:context [ fhir:v "immz" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "typeOfCholeraDose" ] ;
         fhir:variable [ fhir:v "field" ]
       ] ) ;
       fhir:dependent ( [
         fhir:name [ fhir:v "ItemToCoding" ] ;
         fhir:variable ( [ fhir:v "item" ] [ fhir:v "field" ] )
       ] )
     ] [
       fhir:name [ fhir:v "typeOfMeningococcalDose" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "qr" ] ;
         fhir:element [ fhir:v "item" ] ;
         fhir:variable [ fhir:v "item" ] ;
         fhir:condition [ fhir:v "item.linkId = 'typeOfMeningococcalDose'" ]
       ] ) ;
       fhir:target ( [
         fhir:context [ fhir:v "immz" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "typeOfMeningococcalDose" ] ;
         fhir:variable [ fhir:v "field" ]
       ] ) ;
       fhir:dependent ( [
         fhir:name [ fhir:v "ItemToCoding" ] ;
         fhir:variable ( [ fhir:v "item" ] [ fhir:v "field" ] )
       ] )
     ] [
       fhir:name [ fhir:v "typeOfHepatitisADose" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "qr" ] ;
         fhir:element [ fhir:v "item" ] ;
         fhir:variable [ fhir:v "item" ] ;
         fhir:condition [ fhir:v "item.linkId = 'typeOfHepatitisADose'" ]
       ] ) ;
       fhir:target ( [
         fhir:context [ fhir:v "immz" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "typeOfHepatitisADose" ] ;
         fhir:variable [ fhir:v "field" ]
       ] ) ;
       fhir:dependent ( [
         fhir:name [ fhir:v "ItemToCoding" ] ;
         fhir:variable ( [ fhir:v "item" ] [ fhir:v "field" ] )
       ] )
     ] [
       fhir:name [ fhir:v "typeOfHepatitisBDose" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "qr" ] ;
         fhir:element [ fhir:v "item" ] ;
         fhir:variable [ fhir:v "item" ] ;
         fhir:condition [ fhir:v "item.linkId = 'typeOfHepatitisBDose'" ]
       ] ) ;
       fhir:target ( [
         fhir:context [ fhir:v "immz" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "typeOfHepatitisBDose" ] ;
         fhir:variable [ fhir:v "field" ]
       ] ) ;
       fhir:dependent ( [
         fhir:name [ fhir:v "ItemToCoding" ] ;
         fhir:variable ( [ fhir:v "item" ] [ fhir:v "field" ] )
       ] )
     ] [
       fhir:name [ fhir:v "vaccineType" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "qr" ] ;
         fhir:element [ fhir:v "item" ] ;
         fhir:variable [ fhir:v "item" ] ;
         fhir:condition [ fhir:v "item.linkId = 'vaccineType'" ]
       ] ) ;
       fhir:target ( [
         fhir:context [ fhir:v "immz" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "vaccineType" ] ;
         fhir:variable [ fhir:v "field" ]
       ] ) ;
       fhir:dependent ( [
         fhir:name [ fhir:v "ItemToCoding" ] ;
         fhir:variable ( [ fhir:v "item" ] [ fhir:v "field" ] )
       ] )
     ] [
       fhir:name [ fhir:v "dateAndTimeOfVaccination" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "qr" ] ;
         fhir:element [ fhir:v "item" ] ;
         fhir:variable [ fhir:v "item" ] ;
         fhir:condition [ fhir:v "item.linkId = 'dateAndTimeOfVaccination'" ]
       ] ) ;
       fhir:target ( [
         fhir:context [ fhir:v "immz" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "dateAndTimeOfVaccination" ] ;
         fhir:variable [ fhir:v "field" ]
       ] ) ;
       fhir:dependent ( [
         fhir:name [ fhir:v "ItemToValue" ] ;
         fhir:variable ( [ fhir:v "item" ] [ fhir:v "field" ] )
       ] )
     ] [
       fhir:name [ fhir:v "contactDate" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "qr" ] ;
         fhir:element [ fhir:v "item" ] ;
         fhir:variable [ fhir:v "item" ] ;
         fhir:condition [ fhir:v "item.linkId = 'contactDate'" ]
       ] ) ;
       fhir:target ( [
         fhir:context [ fhir:v "immz" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "contactDate" ] ;
         fhir:variable [ fhir:v "field" ]
       ] ) ;
       fhir:dependent ( [
         fhir:name [ fhir:v "ItemToValue" ] ;
         fhir:variable ( [ fhir:v "item" ] [ fhir:v "field" ] )
       ] )
     ] [
       fhir:name [ fhir:v "ancContactNumber" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "qr" ] ;
         fhir:element [ fhir:v "item" ] ;
         fhir:variable [ fhir:v "item" ] ;
         fhir:condition [ fhir:v "item.linkId = 'ancContactNumber'" ]
       ] ) ;
       fhir:target ( [
         fhir:context [ fhir:v "immz" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "ancContactNumber" ] ;
         fhir:variable [ fhir:v "field" ]
       ] ) ;
       fhir:dependent ( [
         fhir:name [ fhir:v "ItemToValue" ] ;
         fhir:variable ( [ fhir:v "item" ] [ fhir:v "field" ] )
       ] )
     ] [
       fhir:name [ fhir:v "doseNumber" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "qr" ] ;
         fhir:element [ fhir:v "item" ] ;
         fhir:variable [ fhir:v "item" ] ;
         fhir:condition [ fhir:v "item.linkId = 'doseNumber'" ]
       ] ) ;
       fhir:target ( [
         fhir:context [ fhir:v "immz" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "doseNumber" ] ;
         fhir:variable [ fhir:v "field" ]
       ] ) ;
       fhir:dependent ( [
         fhir:name [ fhir:v "ItemToValue" ] ;
         fhir:variable ( [ fhir:v "item" ] [ fhir:v "field" ] )
       ] )
     ] )
  ] [
     fhir:name [ fhir:v "D1Questions" ] ;
     fhir:typeMode [ fhir:v "none" ] ;
     fhir:input ( [
       fhir:name [ fhir:v "qr" ] ;
       fhir:type [ fhir:v "QResp" ] ;
       fhir:mode [ fhir:v "source" ]
     ] [
       fhir:name [ fhir:v "immz" ] ;
       fhir:mode [ fhir:v "target" ]
     ] ) ;
     fhir:rule ( [
       fhir:name [ fhir:v "pretermBirth" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "qr" ] ;
         fhir:element [ fhir:v "item" ] ;
         fhir:variable [ fhir:v "item" ] ;
         fhir:condition [ fhir:v "item.linkId = 'pretermBirth'" ]
       ] ) ;
       fhir:target ( [
         fhir:context [ fhir:v "immz" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "pretermBirth" ] ;
         fhir:variable [ fhir:v "field" ]
       ] ) ;
       fhir:dependent ( [
         fhir:name [ fhir:v "ItemToValue" ] ;
         fhir:variable ( [ fhir:v "item" ] [ fhir:v "field" ] )
       ] )
     ] [
       fhir:name [ fhir:v "immunocompromised" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "qr" ] ;
         fhir:element [ fhir:v "item" ] ;
         fhir:variable [ fhir:v "item" ] ;
         fhir:condition [ fhir:v "item.linkId = 'immunocompromised'" ]
       ] ) ;
       fhir:target ( [
         fhir:context [ fhir:v "immz" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "immunocompromised" ] ;
         fhir:variable [ fhir:v "field" ]
       ] ) ;
       fhir:dependent ( [
         fhir:name [ fhir:v "ItemToValue" ] ;
         fhir:variable ( [ fhir:v "item" ] [ fhir:v "field" ] )
       ] )
     ] [
       fhir:name [ fhir:v "currentlyOnArt" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "qr" ] ;
         fhir:element [ fhir:v "item" ] ;
         fhir:variable [ fhir:v "item" ] ;
         fhir:condition [ fhir:v "item.linkId = 'currentlyOnArt'" ]
       ] ) ;
       fhir:target ( [
         fhir:context [ fhir:v "immz" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "currentlyOnArt" ] ;
         fhir:variable [ fhir:v "field" ]
       ] ) ;
       fhir:dependent ( [
         fhir:name [ fhir:v "ItemToValue" ] ;
         fhir:variable ( [ fhir:v "item" ] [ fhir:v "field" ] )
       ] )
     ] [
       fhir:name [ fhir:v "currentlyOnArt" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "qr" ] ;
         fhir:element [ fhir:v "item" ] ;
         fhir:variable [ fhir:v "item" ] ;
         fhir:condition [ fhir:v "item.linkId = 'currentlyOnArt'" ]
       ] ) ;
       fhir:target ( [
         fhir:context [ fhir:v "immz" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "currentlyOnArt" ] ;
         fhir:variable [ fhir:v "field" ]
       ] ) ;
       fhir:dependent ( [
         fhir:name [ fhir:v "ItemToValue" ] ;
         fhir:variable ( [ fhir:v "item" ] [ fhir:v "field" ] )
       ] )
     ] [
       fhir:name [ fhir:v "typeOfTbInfectionTestPerformed" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "qr" ] ;
         fhir:element [ fhir:v "item" ] ;
         fhir:variable [ fhir:v "item" ] ;
         fhir:condition [ fhir:v "item.linkId = 'typeOfTbInfectionTestPerformed'" ]
       ] ) ;
       fhir:target ( [
         fhir:context [ fhir:v "immz" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "typeOfTbInfectionTestPerformed" ] ;
         fhir:variable [ fhir:v "field" ]
       ] ) ;
       fhir:dependent ( [
         fhir:name [ fhir:v "ItemToCoding" ] ;
         fhir:variable ( [ fhir:v "item" ] [ fhir:v "field" ] )
       ] )
     ] [
       fhir:name [ fhir:v "tbInfectionTestResult" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "qr" ] ;
         fhir:element [ fhir:v "item" ] ;
         fhir:variable [ fhir:v "item" ] ;
         fhir:condition [ fhir:v "item.linkId = 'tbInfectionTestResult'" ]
       ] ) ;
       fhir:target ( [
         fhir:context [ fhir:v "immz" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "tbInfectionTestResult" ] ;
         fhir:variable [ fhir:v "field" ]
       ] ) ;
       fhir:dependent ( [
         fhir:name [ fhir:v "ItemToCoding" ] ;
         fhir:variable ( [ fhir:v "item" ] [ fhir:v "field" ] )
       ] )
     ] [
       fhir:name [ fhir:v "immunologicallyStable" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "qr" ] ;
         fhir:element [ fhir:v "item" ] ;
         fhir:variable [ fhir:v "item" ] ;
         fhir:condition [ fhir:v "item.linkId = 'immunologicallyStable'" ]
       ] ) ;
       fhir:target ( [
         fhir:context [ fhir:v "immz" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "immunologicallyStable" ] ;
         fhir:variable [ fhir:v "field" ]
       ] ) ;
       fhir:dependent ( [
         fhir:name [ fhir:v "ItemToValue" ] ;
         fhir:variable ( [ fhir:v "item" ] [ fhir:v "field" ] )
       ] )
     ] [
       fhir:name [ fhir:v "clinicallyWell" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "qr" ] ;
         fhir:element [ fhir:v "item" ] ;
         fhir:variable [ fhir:v "item" ] ;
         fhir:condition [ fhir:v "item.linkId = 'clinicallyWell'" ]
       ] ) ;
       fhir:target ( [
         fhir:context [ fhir:v "immz" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "clinicallyWell" ] ;
         fhir:variable [ fhir:v "field" ]
       ] ) ;
       fhir:dependent ( [
         fhir:name [ fhir:v "ItemToValue" ] ;
         fhir:variable ( [ fhir:v "item" ] [ fhir:v "field" ] )
       ] )
     ] [
       fhir:name [ fhir:v "birthWeightInGrams" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "qr" ] ;
         fhir:element [ fhir:v "item" ] ;
         fhir:variable [ fhir:v "item" ] ;
         fhir:condition [ fhir:v "item.linkId = 'birthWeightInGrams'" ]
       ] ) ;
       fhir:target ( [
         fhir:context [ fhir:v "immz" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "birthWeightInGrams" ] ;
         fhir:variable [ fhir:v "field" ]
       ] ) ;
       fhir:dependent ( [
         fhir:name [ fhir:v "ItemToValue" ] ;
         fhir:variable ( [ fhir:v "item" ] [ fhir:v "field" ] )
       ] )
     ] [
       fhir:name [ fhir:v "artStartDate" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "qr" ] ;
         fhir:element [ fhir:v "item" ] ;
         fhir:variable [ fhir:v "item" ] ;
         fhir:condition [ fhir:v "item.linkId = 'artStartDate'" ]
       ] ) ;
       fhir:target ( [
         fhir:context [ fhir:v "immz" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "artStartDate" ] ;
         fhir:variable [ fhir:v "field" ]
       ] ) ;
       fhir:dependent ( [
         fhir:name [ fhir:v "ItemToValue" ] ;
         fhir:variable ( [ fhir:v "item" ] [ fhir:v "field" ] )
       ] )
     ] [
       fhir:name [ fhir:v "highRiskOfPneumococcalInfection" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "qr" ] ;
         fhir:element [ fhir:v "item" ] ;
         fhir:variable [ fhir:v "item" ] ;
         fhir:condition [ fhir:v "item.linkId = 'highRiskOfPneumococcalInfection'" ]
       ] ) ;
       fhir:target ( [
         fhir:context [ fhir:v "immz" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "highRiskOfPneumococcalInfection" ] ;
         fhir:variable [ fhir:v "field" ]
       ] ) ;
       fhir:dependent ( [
         fhir:name [ fhir:v "ItemToValue" ] ;
         fhir:variable ( [ fhir:v "item" ] [ fhir:v "field" ] )
       ] )
     ] [
       fhir:name [ fhir:v "ageInMonthsWhenClientReceivedFirstMeningococcalDose" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "qr" ] ;
         fhir:element [ fhir:v "item" ] ;
         fhir:variable [ fhir:v "item" ] ;
         fhir:condition [ fhir:v "item.linkId = 'ageInMonthsWhenClientReceivedFirstMeningococcalDose'" ]
       ] ) ;
       fhir:target ( [
         fhir:context [ fhir:v "immz" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "ageInMonthsWhenClientReceivedFirstMeningococcalDose" ] ;
         fhir:variable [ fhir:v "field" ]
       ] ) ;
       fhir:dependent ( [
         fhir:name [ fhir:v "ItemToValue" ] ;
         fhir:variable ( [ fhir:v "item" ] [ fhir:v "field" ] )
       ] )
     ] [
       fhir:name [ fhir:v "vnaLevel" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "qr" ] ;
         fhir:element [ fhir:v "item" ] ;
         fhir:variable [ fhir:v "item" ] ;
         fhir:condition [ fhir:v "item.linkId = 'vnaLevel'" ]
       ] ) ;
       fhir:target ( [
         fhir:context [ fhir:v "immz" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "vnaLevel" ] ;
         fhir:variable [ fhir:v "field" ]
       ] ) ;
       fhir:dependent ( [
         fhir:name [ fhir:v "ItemToValue" ] ;
         fhir:variable ( [ fhir:v "item" ] [ fhir:v "field" ] )
       ] )
     ] [
       fhir:name [ fhir:v "riskOfOccupationalExposureToRabiesVirus" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "qr" ] ;
         fhir:element [ fhir:v "item" ] ;
         fhir:variable [ fhir:v "item" ] ;
         fhir:condition [ fhir:v "item.linkId = 'riskOfOccupationalExposureToRabiesVirus'" ]
       ] ) ;
       fhir:target ( [
         fhir:context [ fhir:v "immz" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "riskOfOccupationalExposureToRabiesVirus" ] ;
         fhir:variable [ fhir:v "field" ]
       ] ) ;
       fhir:dependent ( [
         fhir:name [ fhir:v "ItemToValue" ] ;
         fhir:variable ( [ fhir:v "item" ] [ fhir:v "field" ] )
       ] )
     ] [
       fhir:name [ fhir:v "dengueSerostatus" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "qr" ] ;
         fhir:element [ fhir:v "item" ] ;
         fhir:variable [ fhir:v "item" ] ;
         fhir:condition [ fhir:v "item.linkId = 'dengueSerostatus'" ]
       ] ) ;
       fhir:target ( [
         fhir:context [ fhir:v "immz" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "dengueSerostatus" ] ;
         fhir:variable [ fhir:v "field" ]
       ] ) ;
       fhir:dependent ( [
         fhir:name [ fhir:v "ItemToCoding" ] ;
         fhir:variable ( [ fhir:v "item" ] [ fhir:v "field" ] )
       ] )
     ] )
  ] [
     fhir:name [ fhir:v "D13Questions" ] ;
     fhir:typeMode [ fhir:v "none" ] ;
     fhir:input ( [
       fhir:name [ fhir:v "qr" ] ;
       fhir:type [ fhir:v "QResp" ] ;
       fhir:mode [ fhir:v "source" ]
     ] [
       fhir:name [ fhir:v "immz" ] ;
       fhir:mode [ fhir:v "target" ]
     ] ) ;
     fhir:rule ( [
       fhir:name [ fhir:v "immunizationEventStatus" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "qr" ] ;
         fhir:element [ fhir:v "item" ] ;
         fhir:variable [ fhir:v "item" ] ;
         fhir:condition [ fhir:v "item.linkId = 'immunizationEventStatus'" ]
       ] ) ;
       fhir:target ( [
         fhir:context [ fhir:v "immz" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "immunizationEventStatus" ] ;
         fhir:variable [ fhir:v "field" ]
       ] ) ;
       fhir:dependent ( [
         fhir:name [ fhir:v "ItemToCoding" ] ;
         fhir:variable ( [ fhir:v "item" ] [ fhir:v "field" ] )
       ] )
     ] [
       fhir:name [ fhir:v "reasonVaccineWasNotAdministered" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "qr" ] ;
         fhir:element [ fhir:v "item" ] ;
         fhir:variable [ fhir:v "item" ] ;
         fhir:condition [ fhir:v "item.linkId = 'reasonVaccineWasNotAdministered'" ]
       ] ) ;
       fhir:target ( [
         fhir:context [ fhir:v "immz" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "reasonVaccineWasNotAdministered" ] ;
         fhir:variable [ fhir:v "field" ]
       ] ) ;
       fhir:dependent ( [
         fhir:name [ fhir:v "ItemToCoding" ] ;
         fhir:variable ( [ fhir:v "item" ] [ fhir:v "field" ] )
       ] )
     ] [
       fhir:name [ fhir:v "vaccineBrand" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "qr" ] ;
         fhir:element [ fhir:v "item" ] ;
         fhir:variable [ fhir:v "item" ] ;
         fhir:condition [ fhir:v "item.linkId = 'vaccineBrand'" ]
       ] ) ;
       fhir:target ( [
         fhir:context [ fhir:v "immz" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "vaccineBrand" ] ;
         fhir:variable [ fhir:v "field" ]
       ] ) ;
       fhir:dependent ( [
         fhir:name [ fhir:v "ItemToCoding" ] ;
         fhir:variable ( [ fhir:v "item" ] [ fhir:v "field" ] )
       ] )
     ] [
       fhir:name [ fhir:v "liveVaccine" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "qr" ] ;
         fhir:element [ fhir:v "item" ] ;
         fhir:variable [ fhir:v "item" ] ;
         fhir:condition [ fhir:v "item.linkId = 'liveVaccine'" ]
       ] ) ;
       fhir:target ( [
         fhir:context [ fhir:v "immz" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "liveVaccine" ] ;
         fhir:variable [ fhir:v "field" ]
       ] ) ;
       fhir:dependent ( [
         fhir:name [ fhir:v "ItemToValue" ] ;
         fhir:variable ( [ fhir:v "item" ] [ fhir:v "field" ] )
       ] )
     ] [
       fhir:name [ fhir:v "countryOfVaccination" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "qr" ] ;
         fhir:element [ fhir:v "item" ] ;
         fhir:variable [ fhir:v "item" ] ;
         fhir:condition [ fhir:v "item.linkId = 'countryOfVaccination'" ]
       ] ) ;
       fhir:target ( [
         fhir:context [ fhir:v "immz" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "countryOfVaccination" ] ;
         fhir:variable [ fhir:v "field" ]
       ] ) ;
       fhir:dependent ( [
         fhir:name [ fhir:v "ItemToCoding" ] ;
         fhir:variable ( [ fhir:v "item" ] [ fhir:v "field" ] )
       ] )
     ] [
       fhir:name [ fhir:v "administrativeArea" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "qr" ] ;
         fhir:element [ fhir:v "item" ] ;
         fhir:variable [ fhir:v "item" ] ;
         fhir:condition [ fhir:v "item.linkId = 'administrativeArea'" ]
       ] ) ;
       fhir:target ( [
         fhir:context [ fhir:v "immz" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "administrativeArea" ] ;
         fhir:variable [ fhir:v "field" ]
       ] ) ;
       fhir:dependent ( [
         fhir:name [ fhir:v "ItemToCoding" ] ;
         fhir:variable ( [ fhir:v "item" ] [ fhir:v "field" ] )
       ] )
     ] [
       fhir:name [ fhir:v "vaccineManufacturer" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "qr" ] ;
         fhir:element [ fhir:v "item" ] ;
         fhir:variable [ fhir:v "item" ] ;
         fhir:condition [ fhir:v "item.linkId = 'vaccineManufacturer'" ]
       ] ) ;
       fhir:target ( [
         fhir:context [ fhir:v "immz" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "vaccineManufacturer" ] ;
         fhir:variable [ fhir:v "field" ]
       ] ) ;
       fhir:dependent ( [
         fhir:name [ fhir:v "ItemToCoding" ] ;
         fhir:variable ( [ fhir:v "item" ] [ fhir:v "field" ] )
       ] )
     ] [
       fhir:name [ fhir:v "vaccineBatchNumber" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "qr" ] ;
         fhir:element [ fhir:v "item" ] ;
         fhir:variable [ fhir:v "item" ] ;
         fhir:condition [ fhir:v "item.linkId = 'vaccineBatchNumber'" ]
       ] ) ;
       fhir:target ( [
         fhir:context [ fhir:v "immz" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "vaccineBatchNumber" ] ;
         fhir:variable [ fhir:v "field" ]
       ] ) ;
       fhir:dependent ( [
         fhir:name [ fhir:v "ItemToValue" ] ;
         fhir:variable ( [ fhir:v "item" ] [ fhir:v "field" ] )
       ] )
     ] [
       fhir:name [ fhir:v "vaccineMarketAuthorizationHolder" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "qr" ] ;
         fhir:element [ fhir:v "item" ] ;
         fhir:variable [ fhir:v "item" ] ;
         fhir:condition [ fhir:v "item.linkId = 'vaccineMarketAuthorizationHolder'" ]
       ] ) ;
       fhir:target ( [
         fhir:context [ fhir:v "immz" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "vaccineMarketAuthorizationHolder" ] ;
         fhir:variable [ fhir:v "field" ]
       ] ) ;
       fhir:dependent ( [
         fhir:name [ fhir:v "ItemToCoding" ] ;
         fhir:variable ( [ fhir:v "item" ] [ fhir:v "field" ] )
       ] )
     ] [
       fhir:name [ fhir:v "expirationDate" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "qr" ] ;
         fhir:element [ fhir:v "item" ] ;
         fhir:variable [ fhir:v "item" ] ;
         fhir:condition [ fhir:v "item.linkId = 'expirationDate'" ]
       ] ) ;
       fhir:target ( [
         fhir:context [ fhir:v "immz" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "expirationDate" ] ;
         fhir:variable [ fhir:v "field" ]
       ] ) ;
       fhir:dependent ( [
         fhir:name [ fhir:v "ItemToValue" ] ;
         fhir:variable ( [ fhir:v "item" ] [ fhir:v "field" ] )
       ] )
     ] [
       fhir:name [ fhir:v "doseQuantity" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "qr" ] ;
         fhir:element [ fhir:v "item" ] ;
         fhir:variable [ fhir:v "item" ] ;
         fhir:condition [ fhir:v "item.linkId = 'doseQuantity'" ]
       ] ) ;
       fhir:target ( [
         fhir:context [ fhir:v "immz" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "doseQuantity" ] ;
         fhir:variable [ fhir:v "field" ]
       ] ) ;
       fhir:dependent ( [
         fhir:name [ fhir:v "ItemToValue" ] ;
         fhir:variable ( [ fhir:v "item" ] [ fhir:v "field" ] )
       ] )
     ] [
       fhir:name [ fhir:v "healthWorkerIdentifier" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "qr" ] ;
         fhir:element [ fhir:v "item" ] ;
         fhir:variable [ fhir:v "item" ] ;
         fhir:condition [ fhir:v "item.linkId = 'healthWorkerIdentifier'" ]
       ] ) ;
       fhir:target ( [
         fhir:context [ fhir:v "immz" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "healthWorkerIdentifier" ] ;
         fhir:variable [ fhir:v "field" ]
       ] ) ;
       fhir:dependent ( [
         fhir:name [ fhir:v "ItemToValue" ] ;
         fhir:variable ( [ fhir:v "item" ] [ fhir:v "field" ] )
       ] )
     ] [
       fhir:name [ fhir:v "totalDosesInSeries" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "qr" ] ;
         fhir:element [ fhir:v "item" ] ;
         fhir:variable [ fhir:v "item" ] ;
         fhir:condition [ fhir:v "item.linkId = 'totalDosesInSeries'" ]
       ] ) ;
       fhir:target ( [
         fhir:context [ fhir:v "immz" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "totalDosesInSeries" ] ;
         fhir:variable [ fhir:v "field" ]
       ] ) ;
       fhir:dependent ( [
         fhir:name [ fhir:v "ItemToValue" ] ;
         fhir:variable ( [ fhir:v "item" ] [ fhir:v "field" ] )
       ] )
     ] [
       fhir:name [ fhir:v "diseaseTargeted" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "qr" ] ;
         fhir:element [ fhir:v "item" ] ;
         fhir:variable [ fhir:v "item" ] ;
         fhir:condition [ fhir:v "item.linkId = 'diseaseTargeted'" ]
       ] ) ;
       fhir:target ( [
         fhir:context [ fhir:v "immz" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "diseaseTargeted" ] ;
         fhir:variable [ fhir:v "field" ]
       ] ) ;
       fhir:dependent ( [
         fhir:name [ fhir:v "ItemToCoding" ] ;
         fhir:variable ( [ fhir:v "item" ] [ fhir:v "field" ] )
       ] )
     ] [
       fhir:name [ fhir:v "dueDateOfNextDose" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "qr" ] ;
         fhir:element [ fhir:v "item" ] ;
         fhir:variable [ fhir:v "item" ] ;
         fhir:condition [ fhir:v "item.linkId = 'dueDateOfNextDose'" ]
       ] ) ;
       fhir:target ( [
         fhir:context [ fhir:v "immz" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "dueDateOfNextDose" ] ;
         fhir:variable [ fhir:v "field" ]
       ] ) ;
       fhir:dependent ( [
         fhir:name [ fhir:v "ItemToValue" ] ;
         fhir:variable ( [ fhir:v "item" ] [ fhir:v "field" ] )
       ] )
     ] )
  ] [
     fhir:name [ fhir:v "MakeImmzObservation" ] ;
     fhir:typeMode [ fhir:v "none" ] ;
     fhir:input ( [
       fhir:name [ fhir:v "patient" ] ;
       fhir:type [ fhir:v "Reference" ] ;
       fhir:mode [ fhir:v "source" ]
     ] [
       fhir:name [ fhir:v "immid" ] ;
       fhir:mode [ fhir:v "source" ]
     ] [
       fhir:name [ fhir:v "code" ] ;
       fhir:type [ fhir:v "Coding" ] ;
       fhir:mode [ fhir:v "source" ]
     ] [
       fhir:name [ fhir:v "cat" ] ;
       fhir:type [ fhir:v "Coding" ] ;
       fhir:mode [ fhir:v "source" ]
     ] [
       fhir:name [ fhir:v "value" ] ;
       fhir:mode [ fhir:v "source" ]
     ] [
       fhir:name [ fhir:v "bundle" ] ;
       fhir:type [ fhir:v "Bundle" ] ;
       fhir:mode [ fhir:v "target" ]
     ] ) ;
     fhir:rule ( [
       fhir:name [ fhir:v "CreateObservation" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "value" ]
       ] ) ;
       fhir:target ( [
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:variable [ fhir:v "oid" ] ;
         fhir:transform [ fhir:v "uuid" ]
       ] [
         fhir:context [ fhir:v "bundle" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "entry" ] ;
         fhir:variable [ fhir:v "entry" ]
       ] [
         fhir:context [ fhir:v "entry" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "fullUrl" ] ;
         fhir:transform [ fhir:v "append" ] ;
         fhir:parameter ( [
           fhir:value [
             a fhir:string ;
             fhir:v "urn:uuid:"
           ]
         ] [
           fhir:value [
             a fhir:id ;
             fhir:v "oid"
           ]
         ] )
       ] [
         fhir:context [ fhir:v "entry" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "request" ] ;
         fhir:variable [ fhir:v "request" ]
       ] [
         fhir:context [ fhir:v "request" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "method" ] ;
         fhir:transform [ fhir:v "copy" ] ;
         fhir:parameter ( [
           fhir:value [
             a fhir:string ;
             fhir:v "PUT"
           ]
         ] )
       ] [
         fhir:context [ fhir:v "request" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "url" ] ;
         fhir:transform [ fhir:v "append" ] ;
         fhir:parameter ( [
           fhir:value [
             a fhir:string ;
             fhir:v "Observation/"
           ]
         ] [
           fhir:value [
             a fhir:id ;
             fhir:v "oid"
           ]
         ] )
       ] [
         fhir:context [ fhir:v "entry" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "resource" ] ;
         fhir:variable [ fhir:v "obs" ] ;
         fhir:transform [ fhir:v "create" ] ;
         fhir:parameter ( [
           fhir:value [
             a fhir:string ;
             fhir:v "Observation"
           ]
         ] )
       ] ) ;
       fhir:rule ( [
         fhir:name [ fhir:v "SetId" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "value" ]
         ] ) ;
         fhir:target ( [
           fhir:context [ fhir:v "obs" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "id" ] ;
           fhir:transform [ fhir:v "copy" ] ;
           fhir:parameter ( [
             fhir:value [
               a fhir:id ;
               fhir:v "oid"
             ]
           ] )
         ] )
       ] [
         fhir:name [ fhir:v "SetPartOf" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "immid" ]
         ] ) ;
         fhir:target ( [
           fhir:context [ fhir:v "obs" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "partOf" ] ;
           fhir:variable [ fhir:v "partOf" ]
         ] [
           fhir:context [ fhir:v "partOf" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "reference" ] ;
           fhir:transform [ fhir:v "append" ] ;
           fhir:parameter ( [
             fhir:value [
               a fhir:string ;
               fhir:v "urn:uuid:"
             ]
           ] [
             fhir:value [
               a fhir:id ;
               fhir:v "immid"
             ]
           ] )
         ] )
       ] [
         fhir:name [ fhir:v "SetSubject" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "patient" ]
         ] ) ;
         fhir:target ( [
           fhir:context [ fhir:v "obs" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "subject" ] ;
           fhir:transform [ fhir:v "copy" ] ;
           fhir:parameter ( [
             fhir:value [
               a fhir:id ;
               fhir:v "patient"
             ]
           ] )
         ] )
       ] [
         fhir:name [ fhir:v "SetCode" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "code" ]
         ] ) ;
         fhir:target ( [
           fhir:context [ fhir:v "obs" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "code" ] ;
           fhir:transform [ fhir:v "copy" ] ;
           fhir:parameter ( [
             fhir:value [
               a fhir:id ;
               fhir:v "code"
             ]
           ] )
         ] )
       ] [
         fhir:name [ fhir:v "SetValue" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "value" ]
         ] ) ;
         fhir:target ( [
           fhir:context [ fhir:v "obs" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "value" ] ;
           fhir:transform [ fhir:v "copy" ] ;
           fhir:parameter ( [
             fhir:value [
               a fhir:id ;
               fhir:v "value"
             ]
           ] )
         ] )
       ] [
         fhir:name [ fhir:v "SetCategory" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "cat" ]
         ] ) ;
         fhir:target ( [
           fhir:context [ fhir:v "obs" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "category" ] ;
           fhir:transform [ fhir:v "copy" ] ;
           fhir:parameter ( [
             fhir:value [
               a fhir:id ;
               fhir:v "cat"
             ]
           ] )
         ] )
       ] )
     ] )
  ] [
     fhir:name [ fhir:v "MakeObservation" ] ;
     fhir:typeMode [ fhir:v "none" ] ;
     fhir:input ( [
       fhir:name [ fhir:v "patient" ] ;
       fhir:type [ fhir:v "Reference" ] ;
       fhir:mode [ fhir:v "source" ]
     ] [
       fhir:name [ fhir:v "code" ] ;
       fhir:type [ fhir:v "Coding" ] ;
       fhir:mode [ fhir:v "source" ]
     ] [
       fhir:name [ fhir:v "cat" ] ;
       fhir:type [ fhir:v "Coding" ] ;
       fhir:mode [ fhir:v "source" ]
     ] [
       fhir:name [ fhir:v "value" ] ;
       fhir:mode [ fhir:v "source" ]
     ] [
       fhir:name [ fhir:v "bundle" ] ;
       fhir:type [ fhir:v "Bundle" ] ;
       fhir:mode [ fhir:v "target" ]
     ] ) ;
     fhir:rule ( [
       fhir:name [ fhir:v "CreateObservation" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "value" ]
       ] ) ;
       fhir:target ( [
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:variable [ fhir:v "oid" ] ;
         fhir:transform [ fhir:v "uuid" ]
       ] [
         fhir:context [ fhir:v "bundle" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "entry" ] ;
         fhir:variable [ fhir:v "entry" ]
       ] [
         fhir:context [ fhir:v "entry" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "fullUrl" ] ;
         fhir:transform [ fhir:v "append" ] ;
         fhir:parameter ( [
           fhir:value [
             a fhir:string ;
             fhir:v "urn:uuid:"
           ]
         ] [
           fhir:value [
             a fhir:id ;
             fhir:v "oid"
           ]
         ] )
       ] [
         fhir:context [ fhir:v "entry" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "request" ] ;
         fhir:variable [ fhir:v "request" ]
       ] [
         fhir:context [ fhir:v "request" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "method" ] ;
         fhir:transform [ fhir:v "copy" ] ;
         fhir:parameter ( [
           fhir:value [
             a fhir:string ;
             fhir:v "PUT"
           ]
         ] )
       ] [
         fhir:context [ fhir:v "request" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "url" ] ;
         fhir:transform [ fhir:v "append" ] ;
         fhir:parameter ( [
           fhir:value [
             a fhir:string ;
             fhir:v "Observation/"
           ]
         ] [
           fhir:value [
             a fhir:id ;
             fhir:v "oid"
           ]
         ] )
       ] [
         fhir:context [ fhir:v "entry" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "resource" ] ;
         fhir:variable [ fhir:v "obs" ] ;
         fhir:transform [ fhir:v "create" ] ;
         fhir:parameter ( [
           fhir:value [
             a fhir:string ;
             fhir:v "Observation"
           ]
         ] )
       ] ) ;
       fhir:rule ( [
         fhir:name [ fhir:v "SetId" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "value" ]
         ] ) ;
         fhir:target ( [
           fhir:context [ fhir:v "obs" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "id" ] ;
           fhir:transform [ fhir:v "copy" ] ;
           fhir:parameter ( [
             fhir:value [
               a fhir:id ;
               fhir:v "oid"
             ]
           ] )
         ] )
       ] [
         fhir:name [ fhir:v "SetSubject" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "patient" ]
         ] ) ;
         fhir:target ( [
           fhir:context [ fhir:v "obs" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "subject" ] ;
           fhir:transform [ fhir:v "copy" ] ;
           fhir:parameter ( [
             fhir:value [
               a fhir:id ;
               fhir:v "patient"
             ]
           ] )
         ] )
       ] [
         fhir:name [ fhir:v "SetCode" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "code" ]
         ] ) ;
         fhir:target ( [
           fhir:context [ fhir:v "obs" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "code" ] ;
           fhir:transform [ fhir:v "copy" ] ;
           fhir:parameter ( [
             fhir:value [
               a fhir:id ;
               fhir:v "code"
             ]
           ] )
         ] )
       ] [
         fhir:name [ fhir:v "SetValue" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "value" ]
         ] ) ;
         fhir:target ( [
           fhir:context [ fhir:v "obs" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "value" ] ;
           fhir:transform [ fhir:v "copy" ] ;
           fhir:parameter ( [
             fhir:value [
               a fhir:id ;
               fhir:v "value"
             ]
           ] )
         ] )
       ] [
         fhir:name [ fhir:v "SetCategory" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "cat" ]
         ] ) ;
         fhir:target ( [
           fhir:context [ fhir:v "obs" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "category" ] ;
           fhir:transform [ fhir:v "copy" ] ;
           fhir:parameter ( [
             fhir:value [
               a fhir:id ;
               fhir:v "cat"
             ]
           ] )
         ] )
       ] )
     ] )
  ] [
     fhir:name [ fhir:v "TypeOfVaccineDose" ] ;
     fhir:typeMode [ fhir:v "none" ] ;
     fhir:input ( [
       fhir:name [ fhir:v "typeof" ] ;
       fhir:type [ fhir:v "Coding" ] ;
       fhir:mode [ fhir:v "source" ]
     ] [
       fhir:name [ fhir:v "ext" ] ;
       fhir:type [ fhir:v "Extension" ] ;
       fhir:mode [ fhir:v "target" ]
     ] ) ;
     fhir:rule ( [
       fhir:name [ fhir:v "SetURL" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "typeof" ]
       ] ) ;
       fhir:target ( [
         fhir:context [ fhir:v "ext" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "url" ] ;
         fhir:transform [ fhir:v "copy" ] ;
         fhir:parameter ( [
           fhir:value [
             a fhir:string ;
             fhir:v "http://smart.who.int/immunizations/StructureDefinition/IMMZTypeOfDose"
           ]
         ] )
       ] )
     ] [
       fhir:name [ fhir:v "SetValue" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "typeof" ]
       ] ) ;
       fhir:target ( [
         fhir:context [ fhir:v "ext" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "value" ] ;
         fhir:transform [ fhir:v "copy" ] ;
         fhir:parameter ( [
           fhir:value [
             a fhir:id ;
             fhir:v "typeof"
           ]
         ] )
       ] )
     ] )
  ] [
     fhir:name [ fhir:v "MakeImmunization" ] ;
     fhir:typeMode [ fhir:v "none" ] ;
     fhir:input ( [
       fhir:name [ fhir:v "patient" ] ;
       fhir:type [ fhir:v "Reference" ] ;
       fhir:mode [ fhir:v "source" ]
     ] [
       fhir:name [ fhir:v "immid" ] ;
       fhir:mode [ fhir:v "source" ]
     ] [
       fhir:name [ fhir:v "immz" ] ;
       fhir:mode [ fhir:v "source" ]
     ] [
       fhir:name [ fhir:v "bundle" ] ;
       fhir:type [ fhir:v "Bundle" ] ;
       fhir:mode [ fhir:v "target" ]
     ] ) ;
     fhir:rule ( [
       fhir:name [ fhir:v "MakeImmunization" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "immz" ] ;
         fhir:element [ fhir:v "vaccineType" ] ;
         fhir:variable [ fhir:v "vaccineCode" ]
       ] ) ;
       fhir:target ( [
         fhir:context [ fhir:v "bundle" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "entry" ] ;
         fhir:variable [ fhir:v "entry" ]
       ] [
         fhir:context [ fhir:v "entry" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "fullUrl" ] ;
         fhir:transform [ fhir:v "append" ] ;
         fhir:parameter ( [
           fhir:value [
             a fhir:string ;
             fhir:v "urn:uuid:"
           ]
         ] [
           fhir:value [
             a fhir:id ;
             fhir:v "immid"
           ]
         ] )
       ] [
         fhir:context [ fhir:v "entry" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "request" ] ;
         fhir:variable [ fhir:v "request" ]
       ] [
         fhir:context [ fhir:v "request" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "method" ] ;
         fhir:transform [ fhir:v "copy" ] ;
         fhir:parameter ( [
           fhir:value [
             a fhir:string ;
             fhir:v "PUT"
           ]
         ] )
       ] [
         fhir:context [ fhir:v "request" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "url" ] ;
         fhir:transform [ fhir:v "append" ] ;
         fhir:parameter ( [
           fhir:value [
             a fhir:string ;
             fhir:v "Immunization/"
           ]
         ] [
           fhir:value [
             a fhir:id ;
             fhir:v "immid"
           ]
         ] )
       ] [
         fhir:context [ fhir:v "entry" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "resource" ] ;
         fhir:variable [ fhir:v "imm" ] ;
         fhir:transform [ fhir:v "create" ] ;
         fhir:parameter ( [
           fhir:value [
             a fhir:string ;
             fhir:v "Immunization"
           ]
         ] )
       ] ) ;
       fhir:rule ( [
         fhir:name [ fhir:v "SetId" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "immid" ]
         ] ) ;
         fhir:target ( [
           fhir:context [ fhir:v "imm" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "id" ] ;
           fhir:transform [ fhir:v "copy" ] ;
           fhir:parameter ( [
             fhir:value [
               a fhir:id ;
               fhir:v "immid"
             ]
           ] )
         ] )
       ] [
         fhir:name [ fhir:v "SetPatient" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "patient" ]
         ] ) ;
         fhir:target ( [
           fhir:context [ fhir:v "imm" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "patient" ] ;
           fhir:transform [ fhir:v "copy" ] ;
           fhir:parameter ( [
             fhir:value [
               a fhir:id ;
               fhir:v "patient"
             ]
           ] )
         ] )
       ] [
         fhir:name [ fhir:v "vaccineCode" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "vaccineCode" ]
         ] ) ;
         fhir:target ( [
           fhir:context [ fhir:v "imm" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "vaccineCode" ] ;
           fhir:transform [ fhir:v "copy" ] ;
           fhir:parameter ( [
             fhir:value [
               a fhir:id ;
               fhir:v "vaccineCode"
             ]
           ] )
         ] )
       ] [
         fhir:name [ fhir:v "protocolApplied" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "immz" ] ;
           fhir:element [ fhir:v "typeOfDose" ] ;
           fhir:variable [ fhir:v "typeOfDose" ]
         ] ) ;
         fhir:target ( [
           fhir:context [ fhir:v "imm" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "protocolApplied" ] ;
           fhir:variable [ fhir:v "pa" ]
         ] ) ;
         fhir:rule ( [
           fhir:name [ fhir:v "SetSeriesToCode" ] ;
           fhir:source ( [
             fhir:context [ fhir:v "typeOfDose" ] ;
             fhir:element [ fhir:v "code" ] ;
             fhir:variable [ fhir:v "code" ]
           ] ) ;
           fhir:target ( [
             fhir:context [ fhir:v "pa" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "series" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:id ;
                 fhir:v "code"
               ]
             ] )
           ] ) ;
           fhir:documentation [ fhir:v "if display is missing" ]
         ] [
           fhir:name [ fhir:v "SetSeriesToDisplay" ] ;
           fhir:source ( [
             fhir:context [ fhir:v "typeOfDose" ] ;
             fhir:element [ fhir:v "display" ] ;
             fhir:variable [ fhir:v "display" ]
           ] ) ;
           fhir:target ( [
             fhir:context [ fhir:v "pa" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "series" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:id ;
                 fhir:v "display"
               ]
             ] )
           ] )
         ] [
           fhir:name [ fhir:v "SetDoseNumber" ] ;
           fhir:source ( [
             fhir:context [ fhir:v "immz" ] ;
             fhir:element [ fhir:v "doseNumber" ] ;
             fhir:variable [ fhir:v "doseNumber" ]
           ] ) ;
           fhir:target ( [
             fhir:context [ fhir:v "pa" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "doseNumber" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:id ;
                 fhir:v "doseNumber"
               ]
             ] )
           ] )
         ] [
           fhir:name [ fhir:v "totalDosesInSeries" ] ;
           fhir:source ( [
             fhir:context [ fhir:v "immz" ] ;
             fhir:element [ fhir:v "totalDosesInSeries" ] ;
             fhir:variable [ fhir:v "totalDoses" ]
           ] ) ;
           fhir:target ( [
             fhir:context [ fhir:v "pa" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "seriesDoses" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:id ;
                 fhir:v "totalDoses"
               ]
             ] )
           ] )
         ] [
           fhir:name [ fhir:v "diseaseTargeted" ] ;
           fhir:source ( [
             fhir:context [ fhir:v "immz" ] ;
             fhir:element [ fhir:v "diseaseTargeted" ] ;
             fhir:variable [ fhir:v "disease" ]
           ] ) ;
           fhir:target ( [
             fhir:context [ fhir:v "pa" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "targetDisease" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:id ;
                 fhir:v "disease"
               ]
             ] )
           ] )
         ] [
           fhir:name [ fhir:v "dueDateOfNextDose" ] ;
           fhir:source ( [
             fhir:context [ fhir:v "immz" ] ;
             fhir:element [ fhir:v "dueDateOfNextDose" ] ;
             fhir:variable [ fhir:v "duedate" ]
           ] ) ;
           fhir:target ( [
             fhir:context [ fhir:v "pa" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "extension" ] ;
             fhir:variable [ fhir:v "ext" ]
           ] [
             fhir:context [ fhir:v "ext" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "url" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:string ;
                 fhir:v "http://smart.who.int/immunizations/StructureDefinition/IMMZDueDateOfNextDose"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "ext" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "value" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:id ;
                 fhir:v "duedate"
               ]
             ] )
           ] )
         ] )
       ] [
         fhir:name [ fhir:v "dateAndTimeOfVaccination" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "immz" ] ;
           fhir:element [ fhir:v "dateAndTimeOfVaccination" ] ;
           fhir:variable [ fhir:v "occurrence" ]
         ] ) ;
         fhir:target ( [
           fhir:context [ fhir:v "imm" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "occurrence" ] ;
           fhir:transform [ fhir:v "copy" ] ;
           fhir:parameter ( [
             fhir:value [
               a fhir:id ;
               fhir:v "occurrence"
             ]
           ] )
         ] )
       ] [
         fhir:name [ fhir:v "typeOfPoliovirusDose" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "immz" ] ;
           fhir:element [ fhir:v "typeOfPoliovirusDose" ] ;
           fhir:variable [ fhir:v "typeof" ]
         ] ) ;
         fhir:target ( [
           fhir:context [ fhir:v "imm" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "extension" ] ;
           fhir:variable [ fhir:v "ext" ]
         ] ) ;
         fhir:dependent ( [
           fhir:name [ fhir:v "TypeOfVaccineDose" ] ;
           fhir:variable ( [ fhir:v "typeof" ] [ fhir:v "ext" ] )
         ] )
       ] [
         fhir:name [ fhir:v "typeOfJeDose" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "immz" ] ;
           fhir:element [ fhir:v "typeOfJeDose" ] ;
           fhir:variable [ fhir:v "typeof" ]
         ] ) ;
         fhir:target ( [
           fhir:context [ fhir:v "imm" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "extension" ] ;
           fhir:variable [ fhir:v "ext" ]
         ] ) ;
         fhir:dependent ( [
           fhir:name [ fhir:v "TypeOfVaccineDose" ] ;
           fhir:variable ( [ fhir:v "typeof" ] [ fhir:v "ext" ] )
         ] )
       ] [
         fhir:name [ fhir:v "typeOfTbeDose" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "immz" ] ;
           fhir:element [ fhir:v "typeOfTbeDose" ] ;
           fhir:variable [ fhir:v "typeof" ]
         ] ) ;
         fhir:target ( [
           fhir:context [ fhir:v "imm" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "extension" ] ;
           fhir:variable [ fhir:v "ext" ]
         ] ) ;
         fhir:dependent ( [
           fhir:name [ fhir:v "TypeOfVaccineDose" ] ;
           fhir:variable ( [ fhir:v "typeof" ] [ fhir:v "ext" ] )
         ] )
       ] [
         fhir:name [ fhir:v "typeOfTyphoidDose" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "immz" ] ;
           fhir:element [ fhir:v "typeOfTyphoidDose" ] ;
           fhir:variable [ fhir:v "typeof" ]
         ] ) ;
         fhir:target ( [
           fhir:context [ fhir:v "imm" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "extension" ] ;
           fhir:variable [ fhir:v "ext" ]
         ] ) ;
         fhir:dependent ( [
           fhir:name [ fhir:v "TypeOfVaccineDose" ] ;
           fhir:variable ( [ fhir:v "typeof" ] [ fhir:v "ext" ] )
         ] )
       ] [
         fhir:name [ fhir:v "typeOfCholeraDose" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "immz" ] ;
           fhir:element [ fhir:v "typeOfCholeraDose" ] ;
           fhir:variable [ fhir:v "typeof" ]
         ] ) ;
         fhir:target ( [
           fhir:context [ fhir:v "imm" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "extension" ] ;
           fhir:variable [ fhir:v "ext" ]
         ] ) ;
         fhir:dependent ( [
           fhir:name [ fhir:v "TypeOfVaccineDose" ] ;
           fhir:variable ( [ fhir:v "typeof" ] [ fhir:v "ext" ] )
         ] )
       ] [
         fhir:name [ fhir:v "typeOfMeningococcalDose" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "immz" ] ;
           fhir:element [ fhir:v "typeOfMeningococcalDose" ] ;
           fhir:variable [ fhir:v "typeof" ]
         ] ) ;
         fhir:target ( [
           fhir:context [ fhir:v "imm" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "extension" ] ;
           fhir:variable [ fhir:v "ext" ]
         ] ) ;
         fhir:dependent ( [
           fhir:name [ fhir:v "TypeOfVaccineDose" ] ;
           fhir:variable ( [ fhir:v "typeof" ] [ fhir:v "ext" ] )
         ] )
       ] [
         fhir:name [ fhir:v "typeOfHepatitisADose" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "immz" ] ;
           fhir:element [ fhir:v "typeOfHepatitisADose" ] ;
           fhir:variable [ fhir:v "typeof" ]
         ] ) ;
         fhir:target ( [
           fhir:context [ fhir:v "imm" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "extension" ] ;
           fhir:variable [ fhir:v "ext" ]
         ] ) ;
         fhir:dependent ( [
           fhir:name [ fhir:v "TypeOfVaccineDose" ] ;
           fhir:variable ( [ fhir:v "typeof" ] [ fhir:v "ext" ] )
         ] )
       ] [
         fhir:name [ fhir:v "typeOfHepatitisBDose" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "immz" ] ;
           fhir:element [ fhir:v "typeOfHepatitisBDose" ] ;
           fhir:variable [ fhir:v "typeof" ]
         ] ) ;
         fhir:target ( [
           fhir:context [ fhir:v "imm" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "extension" ] ;
           fhir:variable [ fhir:v "ext" ]
         ] ) ;
         fhir:dependent ( [
           fhir:name [ fhir:v "TypeOfVaccineDose" ] ;
           fhir:variable ( [ fhir:v "typeof" ] [ fhir:v "ext" ] )
         ] )
       ] [
         fhir:name [ fhir:v "SetDefaultStatus" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "immz" ]
         ] ) ;
         fhir:target ( [
           fhir:context [ fhir:v "imm" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "status" ] ;
           fhir:transform [ fhir:v "copy" ] ;
           fhir:parameter ( [
             fhir:value [
               a fhir:string ;
               fhir:v "completed"
             ]
           ] )
         ] )
       ] [
         fhir:name [ fhir:v "immunizationEventStatus" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "immz" ] ;
           fhir:element [ fhir:v "immunizationEventStatus" ] ;
           fhir:variable [ fhir:v "status" ]
         ] ) ;
         fhir:target ( [
           fhir:context [ fhir:v "imm" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "status" ] ;
           fhir:transform [ fhir:v "translate" ] ;
           fhir:parameter ( [
             fhir:value [
               a fhir:id ;
               fhir:v "status"
             ]
           ] [
             fhir:value [
               a fhir:string ;
               fhir:v "http://smart.who.int/immunizations/ConceptMap/IMMZ.D.ConceptMap"
             ]
           ] [
             fhir:value [
               a fhir:string ;
               fhir:v "code"
             ]
           ] )
         ] )
       ] [
         fhir:name [ fhir:v "reasonVaccineWasNotAdministered" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "immz" ] ;
           fhir:element [ fhir:v "reasonVaccineWasNotAdministered" ] ;
           fhir:variable [ fhir:v "reason" ]
         ] ) ;
         fhir:target ( [
           fhir:context [ fhir:v "imm" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "statusReason" ] ;
           fhir:transform [ fhir:v "copy" ] ;
           fhir:parameter ( [
             fhir:value [
               a fhir:id ;
               fhir:v "reason"
             ]
           ] )
         ] )
       ] [
         fhir:name [ fhir:v "vaccineBrand" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "immz" ] ;
           fhir:element [ fhir:v "vaccineBrand" ] ;
           fhir:variable [ fhir:v "brand" ]
         ] ) ;
         fhir:target ( [
           fhir:context [ fhir:v "imm" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "extension" ] ;
           fhir:variable [ fhir:v "ext" ]
         ] [
           fhir:context [ fhir:v "ext" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "url" ] ;
           fhir:transform [ fhir:v "copy" ] ;
           fhir:parameter ( [
             fhir:value [
               a fhir:string ;
               fhir:v "http://smart.who.int/immunizations/StructureDefinition/IMMZVaccineBrand"
             ]
           ] )
         ] [
           fhir:context [ fhir:v "ext" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "value" ] ;
           fhir:transform [ fhir:v "copy" ] ;
           fhir:parameter ( [
             fhir:value [
               a fhir:id ;
               fhir:v "brand"
             ]
           ] )
         ] )
       ] [
         fhir:name [ fhir:v "liveVaccine" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "immz" ] ;
           fhir:element [ fhir:v "liveVaccine" ] ;
           fhir:variable [ fhir:v "live" ]
         ] ) ;
         fhir:target ( [
           fhir:context [ fhir:v "imm" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "extension" ] ;
           fhir:variable [ fhir:v "ext" ]
         ] [
           fhir:context [ fhir:v "ext" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "url" ] ;
           fhir:transform [ fhir:v "copy" ] ;
           fhir:parameter ( [
             fhir:value [
               a fhir:string ;
               fhir:v "http://smart.who.int/immunizations/StructureDefinition/IMMZLiveVaccine"
             ]
           ] )
         ] [
           fhir:context [ fhir:v "ext" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "value" ] ;
           fhir:transform [ fhir:v "copy" ] ;
           fhir:parameter ( [
             fhir:value [
               a fhir:id ;
               fhir:v "live"
             ]
           ] )
         ] )
       ] [
         fhir:name [ fhir:v "countryOfVaccination" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "immz" ] ;
           fhir:element [ fhir:v "countryOfVaccination" ] ;
           fhir:variable [ fhir:v "country" ]
         ] ) ;
         fhir:target ( [
           fhir:context [ fhir:v "imm" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "extension" ] ;
           fhir:variable [ fhir:v "ext" ]
         ] [
           fhir:context [ fhir:v "ext" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "url" ] ;
           fhir:transform [ fhir:v "copy" ] ;
           fhir:parameter ( [
             fhir:value [
               a fhir:string ;
               fhir:v "http://smart.who.int/immunizations/StructureDefinition/IMMZCountryOfVaccination"
             ]
           ] )
         ] [
           fhir:context [ fhir:v "ext" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "value" ] ;
           fhir:transform [ fhir:v "copy" ] ;
           fhir:parameter ( [
             fhir:value [
               a fhir:id ;
               fhir:v "country"
             ]
           ] )
         ] )
       ] [
         fhir:name [ fhir:v "administrativeArea" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "immz" ] ;
           fhir:element [ fhir:v "administrativeArea" ] ;
           fhir:variable [ fhir:v "area" ]
         ] ) ;
         fhir:target ( [
           fhir:context [ fhir:v "imm" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "extension" ] ;
           fhir:variable [ fhir:v "ext" ]
         ] [
           fhir:context [ fhir:v "ext" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "url" ] ;
           fhir:transform [ fhir:v "copy" ] ;
           fhir:parameter ( [
             fhir:value [
               a fhir:string ;
               fhir:v "http://smart.who.int/immunizations/StructureDefinition/IMMZAdministrativeArea"
             ]
           ] )
         ] [
           fhir:context [ fhir:v "ext" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "value" ] ;
           fhir:transform [ fhir:v "copy" ] ;
           fhir:parameter ( [
             fhir:value [
               a fhir:id ;
               fhir:v "area"
             ]
           ] )
         ] )
       ] [
         fhir:name [ fhir:v "vaccineManufacturer" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "immz" ] ;
           fhir:element [ fhir:v "vaccineManufacturer" ] ;
           fhir:variable [ fhir:v "vman" ]
         ] ) ;
         fhir:target ( [
           fhir:context [ fhir:v "imm" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "manufacturer" ] ;
           fhir:variable [ fhir:v "manufacturer" ]
         ] [
           fhir:context [ fhir:v "manufacturer" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "identifier" ] ;
           fhir:variable [ fhir:v "identifier" ]
         ] ) ;
         fhir:rule ( [
           fhir:name [ fhir:v "SetSystem" ] ;
           fhir:source ( [
             fhir:context [ fhir:v "vman" ] ;
             fhir:element [ fhir:v "system" ] ;
             fhir:variable [ fhir:v "system" ]
           ] ) ;
           fhir:target ( [
             fhir:context [ fhir:v "identifier" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "system" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:id ;
                 fhir:v "system"
               ]
             ] )
           ] )
         ] [
           fhir:name [ fhir:v "SetValue" ] ;
           fhir:source ( [
             fhir:context [ fhir:v "vman" ] ;
             fhir:element [ fhir:v "code" ] ;
             fhir:variable [ fhir:v "code" ]
           ] ) ;
           fhir:target ( [
             fhir:context [ fhir:v "identifier" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "value" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:id ;
                 fhir:v "code"
               ]
             ] )
           ] )
         ] )
       ] [
         fhir:name [ fhir:v "vaccineBatchNumber" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "immz" ] ;
           fhir:element [ fhir:v "vaccineBatchNumber" ] ;
           fhir:variable [ fhir:v "batch" ]
         ] ) ;
         fhir:target ( [
           fhir:context [ fhir:v "imm" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "lotNumber" ] ;
           fhir:transform [ fhir:v "copy" ] ;
           fhir:parameter ( [
             fhir:value [
               a fhir:id ;
               fhir:v "batch"
             ]
           ] )
         ] )
       ] [
         fhir:name [ fhir:v "vaccineMarketAuthorizationHolder" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "immz" ] ;
           fhir:element [ fhir:v "vaccineMarketAuthorizationHolder" ] ;
           fhir:variable [ fhir:v "market" ]
         ] ) ;
         fhir:target ( [
           fhir:context [ fhir:v "imm" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "extension" ] ;
           fhir:variable [ fhir:v "ext" ]
         ] [
           fhir:context [ fhir:v "ext" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "url" ] ;
           fhir:transform [ fhir:v "copy" ] ;
           fhir:parameter ( [
             fhir:value [
               a fhir:string ;
               fhir:v "http://smart.who.int/immunizations/StructureDefinition/IMMZMarketAuthorization"
             ]
           ] )
         ] [
           fhir:context [ fhir:v "ext" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "value" ] ;
           fhir:transform [ fhir:v "copy" ] ;
           fhir:parameter ( [
             fhir:value [
               a fhir:id ;
               fhir:v "market"
             ]
           ] )
         ] )
       ] [
         fhir:name [ fhir:v "expirationDate" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "immz" ] ;
           fhir:element [ fhir:v "expirationDate" ] ;
           fhir:variable [ fhir:v "expiration" ]
         ] ) ;
         fhir:target ( [
           fhir:context [ fhir:v "imm" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "expirationDate" ] ;
           fhir:transform [ fhir:v "copy" ] ;
           fhir:parameter ( [
             fhir:value [
               a fhir:id ;
               fhir:v "expiration"
             ]
           ] )
         ] )
       ] [
         fhir:name [ fhir:v "doseQuantity" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "immz" ] ;
           fhir:element [ fhir:v "doseQuantity" ] ;
           fhir:variable [ fhir:v "dosequantity" ]
         ] ) ;
         fhir:target ( [
           fhir:context [ fhir:v "imm" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "doseQuantity" ] ;
           fhir:transform [ fhir:v "copy" ] ;
           fhir:parameter ( [
             fhir:value [
               a fhir:id ;
               fhir:v "dosequantity"
             ]
           ] )
         ] )
       ] [
         fhir:name [ fhir:v "healthWorkerIdentifier" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "immz" ] ;
           fhir:element [ fhir:v "healthWorkerIdentifier" ] ;
           fhir:variable [ fhir:v "hw" ]
         ] ) ;
         fhir:target ( [
           fhir:context [ fhir:v "imm" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "performer" ] ;
           fhir:variable [ fhir:v "performer" ]
         ] [
           fhir:context [ fhir:v "performer" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "actor" ] ;
           fhir:variable [ fhir:v "actor" ]
         ] [
           fhir:context [ fhir:v "actor" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "identifier" ] ;
           fhir:variable [ fhir:v "identifier" ]
         ] [
           fhir:context [ fhir:v "identifier" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "value" ] ;
           fhir:transform [ fhir:v "copy" ] ;
           fhir:parameter ( [
             fhir:value [
               a fhir:id ;
               fhir:v "hw"
             ]
           ] )
         ] )
       ] )
     ] )
  ] [
     fhir:name [ fhir:v "D1andD13Observations" ] ;
     fhir:typeMode [ fhir:v "none" ] ;
     fhir:input ( [
       fhir:name [ fhir:v "patient" ] ;
       fhir:type [ fhir:v "Reference" ] ;
       fhir:mode [ fhir:v "source" ]
     ] [
       fhir:name [ fhir:v "immid" ] ;
       fhir:mode [ fhir:v "source" ]
     ] [
       fhir:name [ fhir:v "immz" ] ;
       fhir:mode [ fhir:v "source" ]
     ] [
       fhir:name [ fhir:v "bundle" ] ;
       fhir:type [ fhir:v "Bundle" ] ;
       fhir:mode [ fhir:v "target" ]
     ] ) ;
     fhir:rule ( [
       fhir:name [ fhir:v "DefineCategory" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "immz" ]
       ] ) ;
       fhir:target ( [
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:variable [ fhir:v "survey" ] ;
         fhir:transform [ fhir:v "c" ] ;
         fhir:parameter ( [
           fhir:value [
             a fhir:string ;
             fhir:v "http://terminology.hl7.org/CodeSystem/observation-category"
           ]
         ] [
           fhir:value [
             a fhir:string ;
             fhir:v "survey"
           ]
         ] [
           fhir:value [
             a fhir:string ;
             fhir:v "Survey"
           ]
         ] )
       ] ) ;
       fhir:rule ( [
         fhir:name [ fhir:v "birthDose" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "immz" ] ;
           fhir:element [ fhir:v "birthDose" ] ;
           fhir:variable [ fhir:v "content" ]
         ] ) ;
         fhir:target ( [
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:variable [ fhir:v "code" ] ;
           fhir:transform [ fhir:v "c" ] ;
           fhir:parameter ( [
             fhir:value [
               a fhir:string ;
               fhir:v "http://smart.who.int/immunizations/CodeSystem/IMMZ.D"
             ]
           ] [
             fhir:value [
               a fhir:string ;
               fhir:v "DE263"
             ]
           ] [
             fhir:value [
               a fhir:string ;
               fhir:v "Birth dose"
             ]
           ] )
         ] ) ;
         fhir:dependent ( [
           fhir:name [ fhir:v "MakeImmzObservation" ] ;
           fhir:variable ( [ fhir:v "patient" ] [ fhir:v "immid" ] [ fhir:v "code" ] [ fhir:v "survey" ] [ fhir:v "content" ] [ fhir:v "bundle" ] )
         ] )
       ] [
         fhir:name [ fhir:v "completedThePrimaryVaccinationSeries" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "immz" ] ;
           fhir:element [ fhir:v "completedThePrimaryVaccinationSeries" ] ;
           fhir:variable [ fhir:v "content" ]
         ] ) ;
         fhir:target ( [
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:variable [ fhir:v "code" ] ;
           fhir:transform [ fhir:v "c" ] ;
           fhir:parameter ( [
             fhir:value [
               a fhir:string ;
               fhir:v "http://smart.who.int/immunizations/CodeSystem/IMMZ.D"
             ]
           ] [
             fhir:value [
               a fhir:string ;
               fhir:v "DE203"
             ]
           ] [
             fhir:value [
               a fhir:string ;
               fhir:v "Completed the primary vaccination series"
             ]
           ] )
         ] ) ;
         fhir:dependent ( [
           fhir:name [ fhir:v "MakeImmzObservation" ] ;
           fhir:variable ( [ fhir:v "patient" ] [ fhir:v "immid" ] [ fhir:v "code" ] [ fhir:v "survey" ] [ fhir:v "content" ] [ fhir:v "bundle" ] )
         ] )
       ] [
         fhir:name [ fhir:v "completedTheBoosterSeries" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "immz" ] ;
           fhir:element [ fhir:v "completedTheBoosterSeries" ] ;
           fhir:variable [ fhir:v "content" ]
         ] ) ;
         fhir:target ( [
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:variable [ fhir:v "code" ] ;
           fhir:transform [ fhir:v "c" ] ;
           fhir:parameter ( [
             fhir:value [
               a fhir:string ;
               fhir:v "http://smart.who.int/immunizations/CodeSystem/IMMZ.D"
             ]
           ] [
             fhir:value [
               a fhir:string ;
               fhir:v "DE257"
             ]
           ] [
             fhir:value [
               a fhir:string ;
               fhir:v "Completed the booster series"
             ]
           ] )
         ] ) ;
         fhir:dependent ( [
           fhir:name [ fhir:v "MakeImmzObservation" ] ;
           fhir:variable ( [ fhir:v "patient" ] [ fhir:v "immid" ] [ fhir:v "code" ] [ fhir:v "survey" ] [ fhir:v "content" ] [ fhir:v "bundle" ] )
         ] )
       ] [
         fhir:name [ fhir:v "dateWhenPrimaryVaccinationSeriesWasCompleted" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "immz" ] ;
           fhir:element [ fhir:v "dateWhenPrimaryVaccinationSeriesWasCompleted" ] ;
           fhir:variable [ fhir:v "content" ]
         ] ) ;
         fhir:target ( [
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:variable [ fhir:v "code" ] ;
           fhir:transform [ fhir:v "c" ] ;
           fhir:parameter ( [
             fhir:value [
               a fhir:string ;
               fhir:v "http://smart.who.int/immunizations/CodeSystem/IMMZ.D"
             ]
           ] [
             fhir:value [
               a fhir:string ;
               fhir:v "DE242"
             ]
           ] [
             fhir:value [
               a fhir:string ;
               fhir:v "Date when primary vaccination series was completed"
             ]
           ] )
         ] ) ;
         fhir:dependent ( [
           fhir:name [ fhir:v "MakeImmzObservation" ] ;
           fhir:variable ( [ fhir:v "patient" ] [ fhir:v "immid" ] [ fhir:v "code" ] [ fhir:v "survey" ] [ fhir:v "content" ] [ fhir:v "bundle" ] )
         ] )
       ] [
         fhir:name [ fhir:v "hivStatus" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "immz" ] ;
           fhir:element [ fhir:v "hivStatus" ] ;
           fhir:variable [ fhir:v "content" ]
         ] ) ;
         fhir:target ( [
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:variable [ fhir:v "code" ] ;
           fhir:transform [ fhir:v "c" ] ;
           fhir:parameter ( [
             fhir:value [
               a fhir:string ;
               fhir:v "http://smart.who.int/immunizations/CodeSystem/IMMZ.D"
             ]
           ] [
             fhir:value [
               a fhir:string ;
               fhir:v "DE204"
             ]
           ] [
             fhir:value [
               a fhir:string ;
               fhir:v "HIV status"
             ]
           ] )
         ] ) ;
         fhir:dependent ( [
           fhir:name [ fhir:v "MakeImmzObservation" ] ;
           fhir:variable ( [ fhir:v "patient" ] [ fhir:v "immid" ] [ fhir:v "code" ] [ fhir:v "survey" ] [ fhir:v "content" ] [ fhir:v "bundle" ] )
         ] )
       ] [
         fhir:name [ fhir:v "contactDate" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "immz" ] ;
           fhir:element [ fhir:v "contactDate" ] ;
           fhir:variable [ fhir:v "content" ]
         ] ) ;
         fhir:target ( [
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:variable [ fhir:v "code" ] ;
           fhir:transform [ fhir:v "c" ] ;
           fhir:parameter ( [
             fhir:value [
               a fhir:string ;
               fhir:v "http://smart.who.int/immunizations/CodeSystem/IMMZ.D"
             ]
           ] [
             fhir:value [
               a fhir:string ;
               fhir:v "DE201"
             ]
           ] [
             fhir:value [
               a fhir:string ;
               fhir:v "Contact date"
             ]
           ] )
         ] ) ;
         fhir:dependent ( [
           fhir:name [ fhir:v "MakeImmzObservation" ] ;
           fhir:variable ( [ fhir:v "patient" ] [ fhir:v "immid" ] [ fhir:v "code" ] [ fhir:v "survey" ] [ fhir:v "content" ] [ fhir:v "bundle" ] )
         ] )
       ] [
         fhir:name [ fhir:v "ancContactNumber" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "immz" ] ;
           fhir:element [ fhir:v "ancContactNumber" ] ;
           fhir:variable [ fhir:v "content" ]
         ] ) ;
         fhir:target ( [
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:variable [ fhir:v "code" ] ;
           fhir:transform [ fhir:v "c" ] ;
           fhir:parameter ( [
             fhir:value [
               a fhir:string ;
               fhir:v "http://smart.who.int/immunizations/CodeSystem/IMMZ.D"
             ]
           ] [
             fhir:value [
               a fhir:string ;
               fhir:v "DE202"
             ]
           ] [
             fhir:value [
               a fhir:string ;
               fhir:v "ANC contact number"
             ]
           ] )
         ] ) ;
         fhir:dependent ( [
           fhir:name [ fhir:v "MakeImmzObservation" ] ;
           fhir:variable ( [ fhir:v "patient" ] [ fhir:v "immid" ] [ fhir:v "code" ] [ fhir:v "survey" ] [ fhir:v "content" ] [ fhir:v "bundle" ] )
         ] )
       ] )
     ] )
  ] [
     fhir:name [ fhir:v "D1Observations" ] ;
     fhir:typeMode [ fhir:v "none" ] ;
     fhir:input ( [
       fhir:name [ fhir:v "patient" ] ;
       fhir:type [ fhir:v "Reference" ] ;
       fhir:mode [ fhir:v "source" ]
     ] [
       fhir:name [ fhir:v "immid" ] ;
       fhir:mode [ fhir:v "source" ]
     ] [
       fhir:name [ fhir:v "immz" ] ;
       fhir:mode [ fhir:v "source" ]
     ] [
       fhir:name [ fhir:v "bundle" ] ;
       fhir:type [ fhir:v "Bundle" ] ;
       fhir:mode [ fhir:v "target" ]
     ] ) ;
     fhir:rule ( [
       fhir:name [ fhir:v "DefineCategory" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "immz" ]
       ] ) ;
       fhir:target ( [
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:variable [ fhir:v "survey" ] ;
         fhir:transform [ fhir:v "c" ] ;
         fhir:parameter ( [
           fhir:value [
             a fhir:string ;
             fhir:v "http://terminology.hl7.org/CodeSystem/observation-category"
           ]
         ] [
           fhir:value [
             a fhir:string ;
             fhir:v "survey"
           ]
         ] [
           fhir:value [
             a fhir:string ;
             fhir:v "Survey"
           ]
         ] )
       ] ) ;
       fhir:rule ( [
         fhir:name [ fhir:v "pretermBirth" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "immz" ] ;
           fhir:element [ fhir:v "pretermBirth" ] ;
           fhir:variable [ fhir:v "content" ]
         ] ) ;
         fhir:target ( [
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:variable [ fhir:v "code" ] ;
           fhir:transform [ fhir:v "c" ] ;
           fhir:parameter ( [
             fhir:value [
               a fhir:string ;
               fhir:v "http://smart.who.int/immunizations/CodeSystem/IMMZ.D"
             ]
           ] [
             fhir:value [
               a fhir:string ;
               fhir:v "DE208"
             ]
           ] [
             fhir:value [
               a fhir:string ;
               fhir:v "Preterm birth"
             ]
           ] )
         ] ) ;
         fhir:dependent ( [
           fhir:name [ fhir:v "MakeImmzObservation" ] ;
           fhir:variable ( [ fhir:v "patient" ] [ fhir:v "immid" ] [ fhir:v "code" ] [ fhir:v "survey" ] [ fhir:v "content" ] [ fhir:v "bundle" ] )
         ] )
       ] [
         fhir:name [ fhir:v "immunocompromised" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "immz" ] ;
           fhir:element [ fhir:v "immunocompromised" ] ;
           fhir:variable [ fhir:v "content" ]
         ] ) ;
         fhir:target ( [
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:variable [ fhir:v "code" ] ;
           fhir:transform [ fhir:v "c" ] ;
           fhir:parameter ( [
             fhir:value [
               a fhir:string ;
               fhir:v "http://smart.who.int/immunizations/CodeSystem/IMMZ.D"
             ]
           ] [
             fhir:value [
               a fhir:string ;
               fhir:v "DE209"
             ]
           ] [
             fhir:value [
               a fhir:string ;
               fhir:v "Immunocompromised"
             ]
           ] )
         ] ) ;
         fhir:dependent ( [
           fhir:name [ fhir:v "MakeImmzObservation" ] ;
           fhir:variable ( [ fhir:v "patient" ] [ fhir:v "immid" ] [ fhir:v "code" ] [ fhir:v "survey" ] [ fhir:v "content" ] [ fhir:v "bundle" ] )
         ] )
       ] [
         fhir:name [ fhir:v "currentlyOnArt" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "immz" ] ;
           fhir:element [ fhir:v "currentlyOnArt" ] ;
           fhir:variable [ fhir:v "content" ]
         ] ) ;
         fhir:target ( [
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:variable [ fhir:v "code" ] ;
           fhir:transform [ fhir:v "c" ] ;
           fhir:parameter ( [
             fhir:value [
               a fhir:string ;
               fhir:v "http://smart.who.int/immunizations/CodeSystem/IMMZ.D"
             ]
           ] [
             fhir:value [
               a fhir:string ;
               fhir:v "DE210"
             ]
           ] [
             fhir:value [
               a fhir:string ;
               fhir:v "Currently on ART"
             ]
           ] )
         ] ) ;
         fhir:dependent ( [
           fhir:name [ fhir:v "MakeImmzObservation" ] ;
           fhir:variable ( [ fhir:v "patient" ] [ fhir:v "immid" ] [ fhir:v "code" ] [ fhir:v "survey" ] [ fhir:v "content" ] [ fhir:v "bundle" ] )
         ] )
       ] [
         fhir:name [ fhir:v "typeOfTbInfectionTestPerformed" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "immz" ] ;
           fhir:element [ fhir:v "typeOfTbInfectionTestPerformed" ] ;
           fhir:variable [ fhir:v "content" ]
         ] ) ;
         fhir:target ( [
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:variable [ fhir:v "code" ] ;
           fhir:transform [ fhir:v "c" ] ;
           fhir:parameter ( [
             fhir:value [
               a fhir:string ;
               fhir:v "http://smart.who.int/immunizations/CodeSystem/IMMZ.D"
             ]
           ] [
             fhir:value [
               a fhir:string ;
               fhir:v "DE243"
             ]
           ] [
             fhir:value [
               a fhir:string ;
               fhir:v "Type of TB infection test performed"
             ]
           ] )
         ] ) ;
         fhir:dependent ( [
           fhir:name [ fhir:v "MakeImmzObservation" ] ;
           fhir:variable ( [ fhir:v "patient" ] [ fhir:v "immid" ] [ fhir:v "code" ] [ fhir:v "survey" ] [ fhir:v "content" ] [ fhir:v "bundle" ] )
         ] )
       ] [
         fhir:name [ fhir:v "tbInfectionTestResult" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "immz" ] ;
           fhir:element [ fhir:v "tbInfectionTestResult" ] ;
           fhir:variable [ fhir:v "content" ]
         ] ) ;
         fhir:target ( [
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:variable [ fhir:v "code" ] ;
           fhir:transform [ fhir:v "c" ] ;
           fhir:parameter ( [
             fhir:value [
               a fhir:string ;
               fhir:v "http://smart.who.int/immunizations/CodeSystem/IMMZ.D"
             ]
           ] [
             fhir:value [
               a fhir:string ;
               fhir:v "DE246"
             ]
           ] [
             fhir:value [
               a fhir:string ;
               fhir:v "TB infection test result"
             ]
           ] )
         ] ) ;
         fhir:dependent ( [
           fhir:name [ fhir:v "MakeImmzObservation" ] ;
           fhir:variable ( [ fhir:v "patient" ] [ fhir:v "immid" ] [ fhir:v "code" ] [ fhir:v "survey" ] [ fhir:v "content" ] [ fhir:v "bundle" ] )
         ] )
       ] [
         fhir:name [ fhir:v "immunologicallyStable" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "immz" ] ;
           fhir:element [ fhir:v "immunologicallyStable" ] ;
           fhir:variable [ fhir:v "content" ]
         ] ) ;
         fhir:target ( [
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:variable [ fhir:v "code" ] ;
           fhir:transform [ fhir:v "c" ] ;
           fhir:parameter ( [
             fhir:value [
               a fhir:string ;
               fhir:v "http://smart.who.int/immunizations/CodeSystem/IMMZ.D"
             ]
           ] [
             fhir:value [
               a fhir:string ;
               fhir:v "DE249"
             ]
           ] [
             fhir:value [
               a fhir:string ;
               fhir:v "Immunologically stable"
             ]
           ] )
         ] ) ;
         fhir:dependent ( [
           fhir:name [ fhir:v "MakeImmzObservation" ] ;
           fhir:variable ( [ fhir:v "patient" ] [ fhir:v "immid" ] [ fhir:v "code" ] [ fhir:v "survey" ] [ fhir:v "content" ] [ fhir:v "bundle" ] )
         ] )
       ] [
         fhir:name [ fhir:v "clinicallyWell" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "immz" ] ;
           fhir:element [ fhir:v "clinicallyWell" ] ;
           fhir:variable [ fhir:v "content" ]
         ] ) ;
         fhir:target ( [
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:variable [ fhir:v "code" ] ;
           fhir:transform [ fhir:v "c" ] ;
           fhir:parameter ( [
             fhir:value [
               a fhir:string ;
               fhir:v "http://smart.who.int/immunizations/CodeSystem/IMMZ.D"
             ]
           ] [
             fhir:value [
               a fhir:string ;
               fhir:v "DE250"
             ]
           ] [
             fhir:value [
               a fhir:string ;
               fhir:v "Clinically well"
             ]
           ] )
         ] ) ;
         fhir:dependent ( [
           fhir:name [ fhir:v "MakeImmzObservation" ] ;
           fhir:variable ( [ fhir:v "patient" ] [ fhir:v "immid" ] [ fhir:v "code" ] [ fhir:v "survey" ] [ fhir:v "content" ] [ fhir:v "bundle" ] )
         ] )
       ] [
         fhir:name [ fhir:v "birthWeightInGrams" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "immz" ] ;
           fhir:element [ fhir:v "birthWeightInGrams" ] ;
           fhir:variable [ fhir:v "value" ]
         ] ) ;
         fhir:target ( [
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:variable [ fhir:v "content" ] ;
           fhir:transform [ fhir:v "create" ] ;
           fhir:parameter ( [
             fhir:value [
               a fhir:string ;
               fhir:v "Quantity"
             ]
           ] )
         ] [
           fhir:context [ fhir:v "content" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "system" ] ;
           fhir:transform [ fhir:v "copy" ] ;
           fhir:parameter ( [
             fhir:value [
               a fhir:string ;
               fhir:v "http://unitsofmeasure.org"
             ]
           ] )
         ] [
           fhir:context [ fhir:v "content" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "code" ] ;
           fhir:transform [ fhir:v "copy" ] ;
           fhir:parameter ( [
             fhir:value [
               a fhir:string ;
               fhir:v "g"
             ]
           ] )
         ] [
           fhir:context [ fhir:v "content" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "unit" ] ;
           fhir:transform [ fhir:v "copy" ] ;
           fhir:parameter ( [
             fhir:value [
               a fhir:string ;
               fhir:v "g"
             ]
           ] )
         ] [
           fhir:context [ fhir:v "content" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "value" ] ;
           fhir:transform [ fhir:v "copy" ] ;
           fhir:parameter ( [
             fhir:value [
               a fhir:id ;
               fhir:v "value"
             ]
           ] )
         ] [
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:variable [ fhir:v "bwloinc" ] ;
           fhir:transform [ fhir:v "c" ] ;
           fhir:parameter ( [
             fhir:value [
               a fhir:string ;
               fhir:v "http://loinc.org"
             ]
           ] [
             fhir:value [
               a fhir:string ;
               fhir:v "8339-4"
             ]
           ] [
             fhir:value [
               a fhir:string ;
               fhir:v "Birth weight Measured"
             ]
           ] )
         ] [
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:variable [ fhir:v "bwdak" ] ;
           fhir:transform [ fhir:v "c" ] ;
           fhir:parameter ( [
             fhir:value [
               a fhir:string ;
               fhir:v "http://smart.who.int/immunizations/CodeSystem/IMMZ.D"
             ]
           ] [
             fhir:value [
               a fhir:string ;
               fhir:v "DE211"
             ]
           ] [
             fhir:value [
               a fhir:string ;
               fhir:v "Birth weight in grams"
             ]
           ] )
         ] [
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:variable [ fhir:v "code" ] ;
           fhir:transform [ fhir:v "create" ] ;
           fhir:parameter ( [
             fhir:value [
               a fhir:string ;
               fhir:v "CodeableConcept"
             ]
           ] )
         ] [
           fhir:context [ fhir:v "code" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "coding" ] ;
           fhir:transform [ fhir:v "copy" ] ;
           fhir:parameter ( [
             fhir:value [
               a fhir:id ;
               fhir:v "bwloinc"
             ]
           ] )
         ] [
           fhir:context [ fhir:v "code" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "coding" ] ;
           fhir:transform [ fhir:v "copy" ] ;
           fhir:parameter ( [
             fhir:value [
               a fhir:id ;
               fhir:v "bwdak"
             ]
           ] )
         ] [
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:variable [ fhir:v "vital" ] ;
           fhir:transform [ fhir:v "c" ] ;
           fhir:parameter ( [
             fhir:value [
               a fhir:string ;
               fhir:v "http://terminology.hl7.org/CodeSystem/observation-category"
             ]
           ] [
             fhir:value [
               a fhir:string ;
               fhir:v "vital-signs"
             ]
           ] [
             fhir:value [
               a fhir:string ;
               fhir:v "Vital Signs"
             ]
           ] )
         ] ) ;
         fhir:dependent ( [
           fhir:name [ fhir:v "MakeImmzObservation" ] ;
           fhir:variable ( [ fhir:v "patient" ] [ fhir:v "immid" ] [ fhir:v "code" ] [ fhir:v "vital" ] [ fhir:v "content" ] [ fhir:v "bundle" ] )
         ] )
       ] [
         fhir:name [ fhir:v "artStartDate" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "immz" ] ;
           fhir:element [ fhir:v "artStartDate" ] ;
           fhir:variable [ fhir:v "content" ]
         ] ) ;
         fhir:target ( [
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:variable [ fhir:v "code" ] ;
           fhir:transform [ fhir:v "c" ] ;
           fhir:parameter ( [
             fhir:value [
               a fhir:string ;
               fhir:v "http://smart.who.int/immunizations/CodeSystem/IMMZ.D"
             ]
           ] [
             fhir:value [
               a fhir:string ;
               fhir:v "DE215"
             ]
           ] [
             fhir:value [
               a fhir:string ;
               fhir:v "ART start date"
             ]
           ] )
         ] ) ;
         fhir:dependent ( [
           fhir:name [ fhir:v "MakeImmzObservation" ] ;
           fhir:variable ( [ fhir:v "patient" ] [ fhir:v "immid" ] [ fhir:v "code" ] [ fhir:v "survey" ] [ fhir:v "content" ] [ fhir:v "bundle" ] )
         ] )
       ] [
         fhir:name [ fhir:v "highRiskOfPneumococcalInfection" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "immz" ] ;
           fhir:element [ fhir:v "highRiskOfPneumococcalInfection" ] ;
           fhir:variable [ fhir:v "content" ]
         ] ) ;
         fhir:target ( [
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:variable [ fhir:v "code" ] ;
           fhir:transform [ fhir:v "c" ] ;
           fhir:parameter ( [
             fhir:value [
               a fhir:string ;
               fhir:v "http://smart.who.int/immunizations/CodeSystem/IMMZ.D"
             ]
           ] [
             fhir:value [
               a fhir:string ;
               fhir:v "DE251"
             ]
           ] [
             fhir:value [
               a fhir:string ;
               fhir:v "High risk of pneumococcal infection"
             ]
           ] )
         ] ) ;
         fhir:dependent ( [
           fhir:name [ fhir:v "MakeImmzObservation" ] ;
           fhir:variable ( [ fhir:v "patient" ] [ fhir:v "immid" ] [ fhir:v "code" ] [ fhir:v "survey" ] [ fhir:v "content" ] [ fhir:v "bundle" ] )
         ] )
       ] [
         fhir:name [ fhir:v "ageInMonthsWhenClientReceivedFirstMeningococcalDose" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "immz" ] ;
           fhir:element [ fhir:v "ageInMonthsWhenClientReceivedFirstMeningococcalDose" ] ;
           fhir:variable [ fhir:v "value" ]
         ] ) ;
         fhir:target ( [
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:variable [ fhir:v "content" ] ;
           fhir:transform [ fhir:v "create" ] ;
           fhir:parameter ( [
             fhir:value [
               a fhir:string ;
               fhir:v "Quantity"
             ]
           ] )
         ] [
           fhir:context [ fhir:v "content" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "unit" ] ;
           fhir:transform [ fhir:v "copy" ] ;
           fhir:parameter ( [
             fhir:value [
               a fhir:string ;
               fhir:v "mo"
             ]
           ] )
         ] [
           fhir:context [ fhir:v "content" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "value" ] ;
           fhir:transform [ fhir:v "copy" ] ;
           fhir:parameter ( [
             fhir:value [
               a fhir:id ;
               fhir:v "value"
             ]
           ] )
         ] [
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:variable [ fhir:v "code" ] ;
           fhir:transform [ fhir:v "c" ] ;
           fhir:parameter ( [
             fhir:value [
               a fhir:string ;
               fhir:v "http://smart.who.int/immunizations/CodeSystem/IMMZ.D"
             ]
           ] [
             fhir:value [
               a fhir:string ;
               fhir:v "DE236"
             ]
           ] [
             fhir:value [
               a fhir:string ;
               fhir:v "Age in months when client received first meningococcal dose"
             ]
           ] )
         ] ) ;
         fhir:dependent ( [
           fhir:name [ fhir:v "MakeImmzObservation" ] ;
           fhir:variable ( [ fhir:v "patient" ] [ fhir:v "immid" ] [ fhir:v "code" ] [ fhir:v "survey" ] [ fhir:v "content" ] [ fhir:v "bundle" ] )
         ] )
       ] [
         fhir:name [ fhir:v "vnaLevel" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "immz" ] ;
           fhir:element [ fhir:v "vnaLevel" ] ;
           fhir:variable [ fhir:v "value" ]
         ] ) ;
         fhir:target ( [
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:variable [ fhir:v "content" ] ;
           fhir:transform [ fhir:v "create" ] ;
           fhir:parameter ( [
             fhir:value [
               a fhir:string ;
               fhir:v "Quantity"
             ]
           ] )
         ] [
           fhir:context [ fhir:v "content" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "system" ] ;
           fhir:transform [ fhir:v "copy" ] ;
           fhir:parameter ( [
             fhir:value [
               a fhir:string ;
               fhir:v "http://unitsofmeasure.org"
             ]
           ] )
         ] [
           fhir:context [ fhir:v "content" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "code" ] ;
           fhir:transform [ fhir:v "copy" ] ;
           fhir:parameter ( [
             fhir:value [
               a fhir:string ;
               fhir:v "[IU]/mL"
             ]
           ] )
         ] [
           fhir:context [ fhir:v "content" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "unit" ] ;
           fhir:transform [ fhir:v "copy" ] ;
           fhir:parameter ( [
             fhir:value [
               a fhir:string ;
               fhir:v "[IU]/mL"
             ]
           ] )
         ] [
           fhir:context [ fhir:v "content" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "value" ] ;
           fhir:transform [ fhir:v "copy" ] ;
           fhir:parameter ( [
             fhir:value [
               a fhir:id ;
               fhir:v "value"
             ]
           ] )
         ] [
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:variable [ fhir:v "code" ] ;
           fhir:transform [ fhir:v "c" ] ;
           fhir:parameter ( [
             fhir:value [
               a fhir:string ;
               fhir:v "http://smart.who.int/immunizations/CodeSystem/IMMZ.D"
             ]
           ] [
             fhir:value [
               a fhir:string ;
               fhir:v "DE240"
             ]
           ] [
             fhir:value [
               a fhir:string ;
               fhir:v "VNA level"
             ]
           ] )
         ] ) ;
         fhir:dependent ( [
           fhir:name [ fhir:v "MakeImmzObservation" ] ;
           fhir:variable ( [ fhir:v "patient" ] [ fhir:v "immid" ] [ fhir:v "code" ] [ fhir:v "survey" ] [ fhir:v "content" ] [ fhir:v "bundle" ] )
         ] )
       ] [
         fhir:name [ fhir:v "riskOfOccupationalExposureToRabiesVirus" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "immz" ] ;
           fhir:element [ fhir:v "riskOfOccupationalExposureToRabiesVirus" ] ;
           fhir:variable [ fhir:v "content" ]
         ] ) ;
         fhir:target ( [
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:variable [ fhir:v "code" ] ;
           fhir:transform [ fhir:v "c" ] ;
           fhir:parameter ( [
             fhir:value [
               a fhir:string ;
               fhir:v "http://smart.who.int/immunizations/CodeSystem/IMMZ.D"
             ]
           ] [
             fhir:value [
               a fhir:string ;
               fhir:v "DE253"
             ]
           ] [
             fhir:value [
               a fhir:string ;
               fhir:v "Risk of occupational exposure to rabies virus"
             ]
           ] )
         ] ) ;
         fhir:dependent ( [
           fhir:name [ fhir:v "MakeImmzObservation" ] ;
           fhir:variable ( [ fhir:v "patient" ] [ fhir:v "immid" ] [ fhir:v "code" ] [ fhir:v "survey" ] [ fhir:v "content" ] [ fhir:v "bundle" ] )
         ] )
       ] [
         fhir:name [ fhir:v "dengueSerostatus" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "immz" ] ;
           fhir:element [ fhir:v "dengueSerostatus" ] ;
           fhir:variable [ fhir:v "content" ]
         ] ) ;
         fhir:target ( [
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:variable [ fhir:v "code" ] ;
           fhir:transform [ fhir:v "c" ] ;
           fhir:parameter ( [
             fhir:value [
               a fhir:string ;
               fhir:v "http://smart.who.int/immunizations/CodeSystem/IMMZ.D"
             ]
           ] [
             fhir:value [
               a fhir:string ;
               fhir:v "DE241"
             ]
           ] [
             fhir:value [
               a fhir:string ;
               fhir:v "Dengue serostatus"
             ]
           ] )
         ] ) ;
         fhir:dependent ( [
           fhir:name [ fhir:v "MakeImmzObservation" ] ;
           fhir:variable ( [ fhir:v "patient" ] [ fhir:v "immid" ] [ fhir:v "code" ] [ fhir:v "survey" ] [ fhir:v "content" ] [ fhir:v "bundle" ] )
         ] )
       ] )
     ] )
  ] ) . # 

# -------------------------------------------------------------------------------------

