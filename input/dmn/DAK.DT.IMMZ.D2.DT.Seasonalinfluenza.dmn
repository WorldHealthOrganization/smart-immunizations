<dmn:definitions xmlns:dmn="https://www.omg.org/spec/DMN/20240513/MODEL/" namespace="http://smart.who.int/immunizations" label="IMMZ.D2 Determine required vaccination(s) if any  " id="DAK.DT.IMMZ.D2.DT.Seasonalinfluenza">
  <dmn:decision id="DAK.DT.IMMZ.D2.DT.Seasonalinfluenza" label="IMMZ.D2 Determine required vaccination(s) if any  ">
    <dmn:question>IMMZ.D2 Determine required vaccination(s) if any  </dmn:question>
    <dmn:usingTask href="http://smart.who.int/immunizations/bpmn/Determine.bpmn#if%20the%20client%20is%20due%20for%20a%20seasonal%20influenza%20vaccination%20according%20to%20the%20national%20immunization%20schedule"/>
    <dmn:decisionTable id="DAK.DT.IMMZ.D2.DT.Seasonalinfluenza">
      <dmn:input id="input.DAK.DT.IMMZ.D2.DT.Seasonalinfluenza.Numberofseasonalinfluenzaprimaryseriesdosesadministered" label="Number of seasonal influenza primary series doses administered">
        <dmn:inputExpression id="inputExpression.DAK.DT.IMMZ.D2.DT.Seasonalinfluenza.Numberofseasonalinfluenzaprimaryseriesdosesadministered" typeRef="string">
          <dmn:text>Count of vaccines administered (where "Vaccine type" = "Seasonal influenza vaccines" and "Type of dose" = "Primary series")</dmn:text>
        </dmn:inputExpression>
      </dmn:input>
      <dmn:input id="input.DAK.DT.IMMZ.D2.DT.Seasonalinfluenza.Clientsage" label="Clients age">
        <dmn:inputExpression id="inputExpression.DAK.DT.IMMZ.D2.DT.Seasonalinfluenza.Clientsage" typeRef="string">
          <dmn:text>Today's date − "Date of birth"</dmn:text>
        </dmn:inputExpression>
      </dmn:input>
      <dmn:input id="input.DAK.DT.IMMZ.D2.DT.Seasonalinfluenza.Timepassedsincelastseasonalinfluenzadosewasadministered" label="Time passed since last seasonal influenza dose was administered">
        <dmn:inputExpression id="inputExpression.DAK.DT.IMMZ.D2.DT.Seasonalinfluenza.Timepassedsincelastseasonalinfluenzadosewasadministered" typeRef="string">
          <dmn:text>Today's date − "Date and time of vaccination" (where "Vaccine type" = "Seasonal influenza vaccines")</dmn:text>
        </dmn:inputExpression>
      </dmn:input>
      <dmn:output id="output.DAK.DT.IMMZ.D2.DT.Seasonalinfluenza.CarePlan" label="Care Plan">
        <dmn:description>Produce a suggested Care Plan for consideration by health worker</dmn:description>
      </dmn:output>
      <dmn:output id="output.DAK.DT.IMMZ.D2.DT.Seasonalinfluenza.Guidancedisplayedtohealthworker" label="Guidance displayed to health worker">
        <dmn:description>Request to communicate guidance to the health worker</dmn:description>
      </dmn:output>
      <dmn:output id="output.DAK.DT.IMMZ.D2.DT.Seasonalinfluenza.Annotations" label="Annotations">
        <dmn:description>Additional information for the health worker</dmn:description>
      </dmn:output>
      <dmn:output id="output.DAK.DT.IMMZ.D2.DT.Seasonalinfluenza.References" label="Reference(s)">
        <dmn:description>Reference for the source content (L1)</dmn:description>
      </dmn:output>
      <dmn:rule id="rule.DAK.DT.IMMZ.D2.DT.Seasonalinfluenza.rule.Cliec1f89abe7b">
        <dmn:inputEntry>
          <dmn:description>–</dmn:description>
          <dmn:text>–</dmn:text>
        </dmn:inputEntry>
        <dmn:inputEntry>
          <dmn:description>Today's date − "Date of birth" &lt; 6 months</dmn:description>
          <dmn:text>Clients age is less than 6 months</dmn:text>
        </dmn:inputEntry>
        <dmn:inputEntry>
          <dmn:description>–</dmn:description>
          <dmn:text>–</dmn:text>
        </dmn:inputEntry>
        <dmn:outputEntry>
          <dmn:description>"Immunization recommendation status" = "Not due"</dmn:description>
          <dmn:text>Client is not due for seasonal influenza vaccination</dmn:text>
        </dmn:outputEntry>
        <dmn:outputEntry>
          <dmn:description>Check for any other vaccines due and inform the caregiver of when to come back for first dose.</dmn:description>
          <dmn:text>Should not vaccinate client with first seasonal influenza dose as clients age is less than 6 months.</dmn:text>
        </dmn:outputEntry>
        <dmn:annotationEntry>
          <dmn:text>Influenza vaccines are safe and effective in children from 6 months of age. Children aged under 6 months can be protected through maternal immunization during pregnancy.</dmn:text>
        </dmn:annotationEntry>
        <dmn:annotationEntry>
          <dmn:text>Vaccines against influenza: WHO position paper (May 2022) (28)</dmn:text>
        </dmn:annotationEntry>
      </dmn:rule>
      <dmn:rule id="rule.DAK.DT.IMMZ.D2.DT.Seasonalinfluenza.rule.Nose937988b18e">
        <dmn:inputEntry>
          <dmn:description>Count of vaccines administered (where "Vaccine type" = "Seasonal influenza vaccines" and "Type of dose" = "Primary series") = 0</dmn:description>
          <dmn:text>No seasonal influenza primary series doses were administered</dmn:text>
        </dmn:inputEntry>
        <dmn:inputEntry>
          <dmn:description>Today's date − "Date of birth" ≥ 6 months</dmn:description>
          <dmn:text>Clients age is more than or equal to 6 months</dmn:text>
        </dmn:inputEntry>
        <dmn:inputEntry>
          <dmn:description>–</dmn:description>
          <dmn:text>–</dmn:text>
        </dmn:inputEntry>
        <dmn:outputEntry>
          <dmn:description>"Immunization recommendation status" = "Due"</dmn:description>
          <dmn:text>Client is due for seasonal influenza vaccination</dmn:text>
        </dmn:outputEntry>
        <dmn:outputEntry>
          <dmn:description>Check for contraindications.</dmn:description>
          <dmn:text>Should vaccinate client with first seasonal influenza dose as no seasonal infuenza doses were administered and client is within appropriate age range.</dmn:text>
        </dmn:outputEntry>
        <dmn:annotationEntry>
          <dmn:text>Children aged 6 months to 8 years should receive 2 doses at least 4 weeks apart. A single dose is appropriate for those ≥ 9 years of age and healthy adults.</dmn:text>
        </dmn:annotationEntry>
        <dmn:annotationEntry>
          <dmn:text>WHO recommendations for routine immunization – summary tables (March 2023) (1)</dmn:text>
        </dmn:annotationEntry>
      </dmn:rule>
      <dmn:rule id="rule.DAK.DT.IMMZ.D2.DT.Seasonalinfluenza.rule.Onesa4f04087cb">
        <dmn:inputEntry>
          <dmn:description>Count of vaccines administered (where "Vaccine type" = "Seasonal influenza vaccines" and "Type of dose" = "Primary series") = 1</dmn:description>
          <dmn:text>One seasonal influenza primary series doses were administered</dmn:text>
        </dmn:inputEntry>
        <dmn:inputEntry>
          <dmn:description>Today's date − "Date of birth" &lt; 9 years</dmn:description>
          <dmn:text>Clients age is less than 9 years</dmn:text>
        </dmn:inputEntry>
        <dmn:inputEntry>
          <dmn:description>Today's date − "Date and time of vaccination" (where "Vaccine type" = "Seasonal influenza vaccines") &lt; 4 weeks</dmn:description>
          <dmn:text>The latest seasonal influenza dose was administered less than 4 weeks ago</dmn:text>
        </dmn:inputEntry>
        <dmn:outputEntry>
          <dmn:description>"Immunization recommendation status" = "Not due"</dmn:description>
          <dmn:text>Client is not due for seasonal influenza vaccination</dmn:text>
        </dmn:outputEntry>
        <dmn:outputEntry>
          <dmn:description>Check for any other vaccines due and inform the caregiver of when to come back for the second dose.</dmn:description>
          <dmn:text>Should not vaccinate client with second seasonal influenza dose as latest seasonal influenza dose was administered less than 4 weeks ago.</dmn:text>
        </dmn:outputEntry>
        <dmn:annotationEntry>
          <dmn:text>Children aged 6 months to 8 years should receive 2 doses at least 4 weeks apart.</dmn:text>
        </dmn:annotationEntry>
      </dmn:rule>
      <dmn:rule id="rule.DAK.DT.IMMZ.D2.DT.Seasonalinfluenza.rule.Ones4bc74350ff">
        <dmn:inputEntry>
          <dmn:description>Count of vaccines administered (where "Vaccine type" = "Seasonal influenza vaccines" and "Type of dose" = "Primary series") = 1</dmn:description>
          <dmn:text>One seasonal influenza primary series doses were administered</dmn:text>
        </dmn:inputEntry>
        <dmn:inputEntry>
          <dmn:description>Today's date − "Date of birth" &lt; 9 years</dmn:description>
          <dmn:text>Clients age is less than 9 years</dmn:text>
        </dmn:inputEntry>
        <dmn:inputEntry>
          <dmn:description>Today's date − "Date and time of vaccination" (where "Vaccine type" = "Seasonal influenza vaccines") ≥ 4 weeks</dmn:description>
          <dmn:text>The latest seasonal influenza dose was administered more than 4 weeks ago</dmn:text>
        </dmn:inputEntry>
        <dmn:outputEntry>
          <dmn:description>"Immunization recommendation status" = "Due"</dmn:description>
          <dmn:text>Client is due for seasonal influenza vaccination</dmn:text>
        </dmn:outputEntry>
        <dmn:outputEntry>
          <dmn:description>Check for contraindications.</dmn:description>
          <dmn:text>Should vaccinate client with second seasonal influenza dose as client is within appropriate age range and latest seasonal influenza dose was administerered more than 4 weeks ago.</dmn:text>
        </dmn:outputEntry>
      </dmn:rule>
      <dmn:rule id="rule.DAK.DT.IMMZ.D2.DT.Seasonalinfluenza.rule.Ones421a9fc0e0">
        <dmn:inputEntry>
          <dmn:description>Count of vaccines administered (where "Vaccine type" = "Seasonal influenza vaccines" and "Type of dose" = "Primary series") = 1</dmn:description>
          <dmn:text>One seasonal influenza primary series doses were administered</dmn:text>
        </dmn:inputEntry>
        <dmn:inputEntry>
          <dmn:description>Today's date − "Date of birth" ≥ 9 years</dmn:description>
          <dmn:text>Clients age is more than or equal to 9 years</dmn:text>
        </dmn:inputEntry>
        <dmn:inputEntry>
          <dmn:description>Today's date − "Date and time of vaccination" (where "Vaccine type" = "Seasonal influenza vaccines") &lt; 1 year</dmn:description>
          <dmn:text>The latest seasonal influenza dose was administered less than 1 year ago</dmn:text>
        </dmn:inputEntry>
        <dmn:outputEntry>
          <dmn:description>"Immunization recommendation status" = "Not due"
"Completed the primary vaccination series" (where "Vaccine type" = "Seasonal influenza vaccines") = TRUE</dmn:description>
          <dmn:text>The primary series is complete. Client is not due for seasonal influenza annual dose</dmn:text>
        </dmn:outputEntry>
        <dmn:outputEntry>
          <dmn:description>Check for any other vaccines due and inform the caregiver of when to come back for the next dose.</dmn:description>
          <dmn:text>Should not vaccinate client with annual dose as the latest seasonal influenza dose was administered less than 1 year ago.</dmn:text>
        </dmn:outputEntry>
        <dmn:annotationEntry>
          <dmn:text>A single dose is appropriate for children aged ≥ 9 years and healthy adults. Those who have previously been vaccinated at least once should subsequently receive an annual dose, as should children and adolescents aged 9 years or over and healthy adults.</dmn:text>
        </dmn:annotationEntry>
      </dmn:rule>
      <dmn:rule id="rule.DAK.DT.IMMZ.D2.DT.Seasonalinfluenza.rule.Onesa7ed154383">
        <dmn:inputEntry>
          <dmn:description>Count of vaccines administered (where "Vaccine type" = "Seasonal influenza vaccines" and "Type of dose" = "Primary series") = 1</dmn:description>
          <dmn:text>One seasonal influenza primary series doses were administered</dmn:text>
        </dmn:inputEntry>
        <dmn:inputEntry>
          <dmn:description>Today's date − "Date of birth" ≥ 9 years</dmn:description>
          <dmn:text>Clients age is more than or equal to 9 years</dmn:text>
        </dmn:inputEntry>
        <dmn:inputEntry>
          <dmn:description>Today's date − "Date and time of vaccination" (where "Vaccine type" = "Seasonal influenza vaccines") ≥ 1 year</dmn:description>
          <dmn:text>The latest seasonal influenza dose was administered more than 1 year ago</dmn:text>
        </dmn:inputEntry>
        <dmn:outputEntry>
          <dmn:description>"Immunization recommendation status" = "Due"
"Completed the primary vaccination series" (where "Vaccine type" = "Seasonal influenza vaccines") = TRUE</dmn:description>
          <dmn:text>The primary series is complete. Client is due for seasonal influenza annual dose</dmn:text>
        </dmn:outputEntry>
        <dmn:outputEntry>
          <dmn:description>Check for contraindications.</dmn:description>
          <dmn:text>Should vaccinate client with annual dose as the latest seasonal influenza dose was administered more than 1 year ago.</dmn:text>
        </dmn:outputEntry>
      </dmn:rule>
      <dmn:rule id="rule.DAK.DT.IMMZ.D2.DT.Seasonalinfluenza.rule.Twos9b88064063">
        <dmn:inputEntry>
          <dmn:description>Count of vaccines administered (where "Vaccine type" = "Seasonal influenza vaccines" and "Type of dose" = "Primary series") = 2</dmn:description>
          <dmn:text>Two seasonal influenza primary series doses were administered</dmn:text>
        </dmn:inputEntry>
        <dmn:inputEntry>
          <dmn:description>–</dmn:description>
          <dmn:text>–</dmn:text>
        </dmn:inputEntry>
        <dmn:inputEntry>
          <dmn:description>Today's date − "Date and time of vaccination" (where "Vaccine type" = "Seasonal influenza vaccines") &lt; 1 year</dmn:description>
          <dmn:text>The latest seasonal influenza dose was administered less than 1 year ago</dmn:text>
        </dmn:inputEntry>
        <dmn:outputEntry>
          <dmn:description>"Immunization recommendation status" = "Not due"
"Completed the primary vaccination series" (where "Vaccine type" = "Seasonal influenza vaccines") = TRUE</dmn:description>
          <dmn:text>The primary series is complete. Client is not due for seasonal influenza annual dose</dmn:text>
        </dmn:outputEntry>
        <dmn:outputEntry>
          <dmn:description>Check for any other vaccines due and inform the caregiver of when to come back for the next dose.</dmn:description>
          <dmn:text>Should not vaccinate client with annual dose as latest seasonal influenza dose was administered less than 1 year ago.</dmn:text>
        </dmn:outputEntry>
      </dmn:rule>
      <dmn:rule id="rule.DAK.DT.IMMZ.D2.DT.Seasonalinfluenza.rule.Twosa13f90b01c">
        <dmn:inputEntry>
          <dmn:description>Count of vaccines administered (where "Vaccine type" = "Seasonal influenza vaccines" and "Type of dose" = "Primary series") = 2</dmn:description>
          <dmn:text>Two seasonal influenza primary series doses were administered</dmn:text>
        </dmn:inputEntry>
        <dmn:inputEntry>
          <dmn:description>–</dmn:description>
          <dmn:text>–</dmn:text>
        </dmn:inputEntry>
        <dmn:inputEntry>
          <dmn:description>Today's date − "Date and time of vaccination" (where "Vaccine type" = "Seasonal influenza vaccines") ≥ 1 year</dmn:description>
          <dmn:text>The latest seasonal influenza dose was administered more than 1 year ago</dmn:text>
        </dmn:inputEntry>
        <dmn:outputEntry>
          <dmn:description>"Immunization recommendation status" = "Due"
"Completed the primary vaccination series" (where "Vaccine type" = "Seasonal influenza vaccines") = TRUE</dmn:description>
          <dmn:text>The primary series is complete. Client is due for seasonal influenza annual dose</dmn:text>
        </dmn:outputEntry>
        <dmn:outputEntry>
          <dmn:description>Check for contraindications.</dmn:description>
          <dmn:text>Should vaccinate client with annual dose as latest seasonal influenza dose was administered more than 1 year ago.</dmn:text>
        </dmn:outputEntry>
      </dmn:rule>
    </dmn:decisionTable>
  </dmn:decision>
</dmn:definitions>