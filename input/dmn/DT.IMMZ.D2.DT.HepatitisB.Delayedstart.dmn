<dmn:definitions xmlns:dmn="https://www.omg.org/spec/DMN/20240513/MODEL/" namespace="http://smart.who.int/immunizations" label="IMMZ.D2 Determine required vaccination(s) if any" id="DT.IMMZ.D2.DT.HepatitisB.Delayedstart">
  <dmn:decision id="DT.IMMZ.D2.DT.HepatitisB.Delayedstart" label="IMMZ.D2 Determine required vaccination(s) if any">
    <dmn:question>IMMZ.D2 Determine required vaccination(s) if any</dmn:question>
    <dmn:usingTask href="http://smart.who.int/immunizations/bpmn/Determine.bpmn#if%20the%20client%20is%20due%20for%20a%20hepatitis%20B%20vaccination%20according%20to%20the%20national%20immunization%20schedule"/>
    <dmn:decisionTable id="DT.IMMZ.D2.DT.HepatitisB.Delayedstart">
      <dmn:input id="input.DT.IMMZ.D2.DT.HepatitisB.Delayedstart.NumberofhepatitisBdosesadministered" label="Number of hepatitis B doses administered">
        <dmn:inputExpression id="inputExpression.DT.IMMZ.D2.DT.HepatitisB.Delayedstart.NumberofhepatitisBdosesadministered" typeRef="string">
          <dmn:text>Count of vaccines administered (where "Vaccine type" = "Hepatitis B-containing vaccines")</dmn:text>
        </dmn:inputExpression>
      </dmn:input>
      <dmn:input id="input.DT.IMMZ.D2.DT.HepatitisB.Delayedstart.Clientsage" label="Clients age">
        <dmn:inputExpression id="inputExpression.DT.IMMZ.D2.DT.HepatitisB.Delayedstart.Clientsage" typeRef="string">
          <dmn:text>Today's date − "Date of birth"</dmn:text>
        </dmn:inputExpression>
      </dmn:input>
      <dmn:input id="input.DT.IMMZ.D2.DT.HepatitisB.Delayedstart.TimepassedsincelasthepatitisBdosewasadministered" label="Time passed since last hepatitis B dose was administered">
        <dmn:inputExpression id="inputExpression.DT.IMMZ.D2.DT.HepatitisB.Delayedstart.TimepassedsincelasthepatitisBdosewasadministered" typeRef="string">
          <dmn:text>Today's date − latest "Date and time of vaccination" (where "Vaccine type" = "Hepatitis B-containing vaccines")</dmn:text>
        </dmn:inputExpression>
      </dmn:input>
      <dmn:input id="input.DT.IMMZ.D2.DT.HepatitisB.Delayedstart.TimepassedsincethefirsthepatitisBdosewasadministered" label="Time passed since the first hepatitis B dose was administered">
        <dmn:inputExpression id="inputExpression.DT.IMMZ.D2.DT.HepatitisB.Delayedstart.TimepassedsincethefirsthepatitisBdosewasadministered" typeRef="string">
          <dmn:text>Today's date – "Date and time of vaccination" (where "Vaccine type" = "Hepatitis B-containing vaccines" and "Dose number" = 1)</dmn:text>
        </dmn:inputExpression>
      </dmn:input>
      <dmn:output id="output.DT.IMMZ.D2.DT.HepatitisB.Delayedstart.CarePlan" label="Care Plan">
        <dmn:description>Produce a suggested Care Plan for consideration by health worker</dmn:description>
      </dmn:output>
      <dmn:output id="output.DT.IMMZ.D2.DT.HepatitisB.Delayedstart.Guidancedisplayedtohealthworker" label="Guidance displayed to health worker">
        <dmn:description>Request to communicate guidance to the health worker</dmn:description>
      </dmn:output>
      <dmn:output id="output.DT.IMMZ.D2.DT.HepatitisB.Delayedstart.Annotations" label="Annotations">
        <dmn:description>Additional information for the health worker</dmn:description>
      </dmn:output>
      <dmn:output id="output.DT.IMMZ.D2.DT.HepatitisB.Delayedstart.References" label="Reference(s)">
        <dmn:description>Reference for the source content (L1)</dmn:description>
      </dmn:output>
      <dmn:rule id="rule.DT.IMMZ.D2.DT.HepatitisB.Delayedstart.rule.No00f394741e">
        <dmn:inputEntry>
          <dmn:description>Count of vaccines administered (where "Vaccine type" = "Hepatitis B-containing vaccines") = 0</dmn:description>
          <dmn:text>No hepatitis B doses were administered</dmn:text>
        </dmn:inputEntry>
        <dmn:inputEntry>
          <dmn:description>Today's date − "Date of birth"  &gt; Member States defined lower limit</dmn:description>
          <dmn:text>Clients age is more than {Member States defined lower limit}</dmn:text>
        </dmn:inputEntry>
        <dmn:inputEntry>
          <dmn:description>–</dmn:description>
          <dmn:text>–</dmn:text>
        </dmn:inputEntry>
        <dmn:inputEntry>
          <dmn:description>–</dmn:description>
          <dmn:text>–</dmn:text>
        </dmn:inputEntry>
        <dmn:inputEntry>
          <dmn:description>–</dmn:description>
          <dmn:text>–</dmn:text>
        </dmn:inputEntry>
        <dmn:outputEntry>
          <dmn:description>"Immunization recommendation status" = "Due"</dmn:description>
          <dmn:text>Client is due for hepatitis B vaccination</dmn:text>
        </dmn:outputEntry>
        <dmn:outputEntry>
          <dmn:description>Check for contraindications.</dmn:description>
          <dmn:text>Should vaccinate client with first hepatitis B dose as hepatitis B birth dose was not administered. The first hepatitis B dose should be administered as soon as possible.</dmn:text>
        </dmn:outputEntry>
        <dmn:annotationEntry>
          <dmn:text>If delayed or interrupted scheduling of vaccination for children, adolescents and adults, 3 doses are recommended, with the second dose administered at least 1 month after the first, and the third dose 6 months after the first dose. If the vaccination schedule is interrupted, it is not necessary to restart the vaccine series.</dmn:text>
        </dmn:annotationEntry>
        <dmn:annotationEntry>
          <dmn:text>WHO recommendations for routine immunization – summary tables (March 2023) (1)</dmn:text>
        </dmn:annotationEntry>
      </dmn:rule>
      <dmn:rule id="rule.DT.IMMZ.D2.DT.HepatitisB.Delayedstart.rule.Onbdea29519e">
        <dmn:inputEntry>
          <dmn:description>Count of vaccines administered (where "Vaccine type" = "Hepatitis B-containing vaccines") = 1</dmn:description>
          <dmn:text>One hepatitis B dose was administered</dmn:text>
        </dmn:inputEntry>
        <dmn:inputEntry>
          <dmn:description>–</dmn:description>
          <dmn:text>–</dmn:text>
        </dmn:inputEntry>
        <dmn:inputEntry>
          <dmn:description>Today's date − latest "Date and time of vaccination" (where "Vaccine type" = "Hepatitis B-containing vaccines") &lt; 4 weeks</dmn:description>
          <dmn:text>The latest hepatitis B dose was administered less than 4 weeks ago</dmn:text>
        </dmn:inputEntry>
        <dmn:inputEntry>
          <dmn:description>–</dmn:description>
          <dmn:text>–</dmn:text>
        </dmn:inputEntry>
        <dmn:inputEntry>
          <dmn:description>–</dmn:description>
          <dmn:text>–</dmn:text>
        </dmn:inputEntry>
        <dmn:outputEntry>
          <dmn:description>"Immunization recommendation status" = "Not due"</dmn:description>
          <dmn:text>Client is not due for a hepatitis B vaccination</dmn:text>
        </dmn:outputEntry>
        <dmn:outputEntry>
          <dmn:description>Check for any other vaccines due, and inform the caregiver of when to come back for the next dose.</dmn:description>
          <dmn:text>Should not vaccinate client with second hepatitis B dose as the latest hepatitis B dose was administered less than 4 weeks ago.</dmn:text>
        </dmn:outputEntry>
      </dmn:rule>
      <dmn:rule id="rule.DT.IMMZ.D2.DT.HepatitisB.Delayedstart.rule.On4c736da41b">
        <dmn:inputEntry>
          <dmn:description>Count of vaccines administered (where "Vaccine type" = "Hepatitis B-containing vaccines") = 1</dmn:description>
          <dmn:text>One hepatitis B dose was administered</dmn:text>
        </dmn:inputEntry>
        <dmn:inputEntry>
          <dmn:description>–</dmn:description>
          <dmn:text>–</dmn:text>
        </dmn:inputEntry>
        <dmn:inputEntry>
          <dmn:description>Today's date − latest "Date and time of vaccination" (where "Vaccine type" = "Hepatitis B-containing vaccines") ≥ 4 weeks</dmn:description>
          <dmn:text>The latest hepatitis B dose was administered more than 4 weeks ago</dmn:text>
        </dmn:inputEntry>
        <dmn:inputEntry>
          <dmn:description>–</dmn:description>
          <dmn:text>–</dmn:text>
        </dmn:inputEntry>
        <dmn:inputEntry>
          <dmn:description>–</dmn:description>
          <dmn:text>–</dmn:text>
        </dmn:inputEntry>
        <dmn:outputEntry>
          <dmn:description>"Immunization recommendation status" = "Due"</dmn:description>
          <dmn:text>Client is due for a hepatitis B vaccination</dmn:text>
        </dmn:outputEntry>
        <dmn:outputEntry>
          <dmn:description>Check for contraindications.</dmn:description>
          <dmn:text>Should vaccinate client with second hepatitis B dose as the latest hepatitis B dose was administered less than 4 weeks ago.</dmn:text>
        </dmn:outputEntry>
      </dmn:rule>
      <dmn:rule id="rule.DT.IMMZ.D2.DT.HepatitisB.Delayedstart.rule.Tw74cfa07e42">
        <dmn:inputEntry>
          <dmn:description>Count of vaccines administered (where "Vaccine type" = "Hepatitis B-containing vaccines") = 2</dmn:description>
          <dmn:text>Two hepatitis B doses were administered</dmn:text>
        </dmn:inputEntry>
        <dmn:inputEntry>
          <dmn:description>–</dmn:description>
          <dmn:text>–</dmn:text>
        </dmn:inputEntry>
        <dmn:inputEntry>
          <dmn:description>Today's date − latest "Date and time of vaccination" (where "Vaccine type" = "Hepatitis B-containing vaccines") &lt; 4 weeks</dmn:description>
          <dmn:text>The latest hepatitis B dose was administered less than 4 weeks ago</dmn:text>
        </dmn:inputEntry>
        <dmn:inputEntry>
          <dmn:description>–</dmn:description>
          <dmn:text>–</dmn:text>
        </dmn:inputEntry>
        <dmn:inputEntry>
          <dmn:description>–</dmn:description>
          <dmn:text>–</dmn:text>
        </dmn:inputEntry>
        <dmn:outputEntry>
          <dmn:description>"Immunization recommendation status" = "Not due"</dmn:description>
          <dmn:text>Client is not due for a hepatitis B vaccination</dmn:text>
        </dmn:outputEntry>
        <dmn:outputEntry>
          <dmn:description>Check for any other vaccines due, and inform the caregiver of when to come back for the next dose.</dmn:description>
          <dmn:text>Should not vaccinate client with second hepatitis B dose as the latest hepatitis B dose was administered less than 4 weeks ago. Two hepatitis B doses have been administered to the client.</dmn:text>
        </dmn:outputEntry>
      </dmn:rule>
      <dmn:rule id="rule.DT.IMMZ.D2.DT.HepatitisB.Delayedstart.rule.Twcfdd662820">
        <dmn:inputEntry>
          <dmn:description>Count of vaccines administered (where "Vaccine type" = "Hepatitis B-containing vaccines") = 2</dmn:description>
          <dmn:text>Two hepatitis B doses were administered</dmn:text>
        </dmn:inputEntry>
        <dmn:inputEntry>
          <dmn:description>–</dmn:description>
          <dmn:text>–</dmn:text>
        </dmn:inputEntry>
        <dmn:inputEntry>
          <dmn:description>Today's date − latest "Date and time of vaccination" (where "Vaccine type" = "Hepatitis B-containing vaccines") ≥ 4 weeks</dmn:description>
          <dmn:text>The latest hepatitis B dose was administered more than 4 weeks ago</dmn:text>
        </dmn:inputEntry>
        <dmn:inputEntry>
          <dmn:description>Today's date − "Date and time of vaccination" (where "Vaccine type" = "Hepatitis B-containing vaccines" and "Dose number" = 1) &lt; 6 months</dmn:description>
          <dmn:text>The first hepatitis B dose was administered less than 6 months ago</dmn:text>
        </dmn:inputEntry>
        <dmn:inputEntry>
          <dmn:description>–</dmn:description>
          <dmn:text>–</dmn:text>
        </dmn:inputEntry>
        <dmn:outputEntry>
          <dmn:description>"Immunization recommendation status" = "Not due"</dmn:description>
          <dmn:text>Client is not due for a hepatitis B vaccination</dmn:text>
        </dmn:outputEntry>
        <dmn:outputEntry>
          <dmn:description>Check for any other vaccines due, and inform the caregiver of when to come back for the next dose.</dmn:description>
          <dmn:text>Should not vaccinate client with third hepatitis B dose as the first hepatitis B dose was administered less than 6 months ago.</dmn:text>
        </dmn:outputEntry>
      </dmn:rule>
      <dmn:rule id="rule.DT.IMMZ.D2.DT.HepatitisB.Delayedstart.rule.Twa321f94cdf">
        <dmn:inputEntry>
          <dmn:description>Count of vaccines administered (where "Vaccine type" = "Hepatitis B-containing vaccines") = 2</dmn:description>
          <dmn:text>Two hepatitis B doses were administered</dmn:text>
        </dmn:inputEntry>
        <dmn:inputEntry>
          <dmn:description>–</dmn:description>
          <dmn:text>–</dmn:text>
        </dmn:inputEntry>
        <dmn:inputEntry>
          <dmn:description>Today's date − latest "Date and time of vaccination" (where "Vaccine type" = "Hepatitis B-containing vaccines") ≥ 4 weeks</dmn:description>
          <dmn:text>The latest hepatitis B dose was administered more than 4 weeks ago</dmn:text>
        </dmn:inputEntry>
        <dmn:inputEntry>
          <dmn:description>Today's date − "Date and time of vaccination" (where "Vaccine type" = "Hepatitis B-containing vaccines" and "Dose number" = 1) ≥ 6 months</dmn:description>
          <dmn:text>The first hepatitis B dose was administered more than 6 months ago</dmn:text>
        </dmn:inputEntry>
        <dmn:inputEntry>
          <dmn:description>–</dmn:description>
          <dmn:text>–</dmn:text>
        </dmn:inputEntry>
        <dmn:outputEntry>
          <dmn:description>"Immunization recommendation status" = "Due"</dmn:description>
          <dmn:text>Client is due for a hepatitis B vaccination</dmn:text>
        </dmn:outputEntry>
        <dmn:outputEntry>
          <dmn:description>Check for contraindications.</dmn:description>
          <dmn:text>Should vaccinate client with third hepatitis B dose as the first hepatitis B dose was administered more than 6 months ago and the latest hepatitis B dose was administered more than 4 weeks ago.</dmn:text>
        </dmn:outputEntry>
      </dmn:rule>
      <dmn:rule id="rule.DT.IMMZ.D2.DT.HepatitisB.Delayedstart.rule.Th2f9ab273a7">
        <dmn:inputEntry>
          <dmn:description>Count of vaccines administered (where "Vaccine type" = "Hepatitis B-containing vaccines") = 3</dmn:description>
          <dmn:text>Three hepatitis B doses were administered</dmn:text>
        </dmn:inputEntry>
        <dmn:inputEntry>
          <dmn:description>–</dmn:description>
          <dmn:text>–</dmn:text>
        </dmn:inputEntry>
        <dmn:inputEntry>
          <dmn:description>–</dmn:description>
          <dmn:text>–</dmn:text>
        </dmn:inputEntry>
        <dmn:inputEntry>
          <dmn:description>–</dmn:description>
          <dmn:text>–</dmn:text>
        </dmn:inputEntry>
        <dmn:inputEntry>
          <dmn:description>–</dmn:description>
          <dmn:text>–</dmn:text>
        </dmn:inputEntry>
        <dmn:outputEntry>
          <dmn:description>'"Immunization recommendation status" = "Complete"
"Completed the primary vaccination series" = TRUE (where "Vaccine type" = "Hepatitis B-containing vaccines")</dmn:description>
          <dmn:text>Hepatitis B immunization schedule is complete</dmn:text>
        </dmn:outputEntry>
        <dmn:outputEntry>
          <dmn:description>Check for any other vaccines due.</dmn:description>
          <dmn:text>Hepatitis B immunization schedule is complete. Three hepatitis B primary series doses were administered.</dmn:text>
        </dmn:outputEntry>
        <dmn:annotationEntry>
          <dmn:text>–</dmn:text>
        </dmn:annotationEntry>
      </dmn:rule>
    </dmn:decisionTable>
  </dmn:decision>
</dmn:definitions>