<dmn:definitions xmlns:dmn="https://www.omg.org/spec/DMN/20240513/MODEL/" namespace="http://smart.who.int/immunizations" label="IMMZ.D2 Determine required vaccination(s) if any" id="DAK.DT.IMMZ.D2.DT.Hib.3doses">
  <dmn:decision id="DAK.DT.IMMZ.D2.DT.Hib.3doses" label="IMMZ.D2 Determine required vaccination(s) if any">
    <dmn:question>IMMZ.D2 Determine required vaccination(s) if any</dmn:question>
    <dmn:usingTask href="http://smart.who.int/immunizations/bpmn/Determine.bpmn#if%20the%20client%20is%20due%20for%20a%20Haemophilus%20influenzae%20type%20b%20%28Hib%29%20vaccination%20according%20to%20the%20national%20immunization%20schedule"/>
    <dmn:decisionTable id="DAK.DT.IMMZ.D2.DT.Hib.3doses">
      <dmn:input id="input.DAK.DT.IMMZ.D2.DT.Hib.3doses.NumberofHibprimaryseriesdosesadministered" label="Number of Hib primary series doses administered">
        <dmn:inputExpression id="inputExpression.DAK.DT.IMMZ.D2.DT.Hib.3doses.NumberofHibprimaryseriesdosesadministered" typeRef="string">
          <dmn:text>Count of vaccines administered (where "Vaccine type" = "Hib-containing vaccines" and "Type of dose" = "Primary series")</dmn:text>
        </dmn:inputExpression>
      </dmn:input>
      <dmn:input id="input.DAK.DT.IMMZ.D2.DT.Hib.3doses.Clientsage" label="Clients age">
        <dmn:inputExpression id="inputExpression.DAK.DT.IMMZ.D2.DT.Hib.3doses.Clientsage" typeRef="string">
          <dmn:text>Today's date − "Date of birth"</dmn:text>
        </dmn:inputExpression>
      </dmn:input>
      <dmn:input id="input.DAK.DT.IMMZ.D2.DT.Hib.3doses.ClientsagewhenfirstHibdosewasadministered" label="Clients age when first Hib dose was administered">
        <dmn:inputExpression id="inputExpression.DAK.DT.IMMZ.D2.DT.Hib.3doses.ClientsagewhenfirstHibdosewasadministered" typeRef="string">
          <dmn:text>"Date and time of vaccination" (where "Vaccine type"= "Hib-containing vaccines" and "Dose number" = 1) − "Date of birth"</dmn:text>
        </dmn:inputExpression>
      </dmn:input>
      <dmn:input id="input.DAK.DT.IMMZ.D2.DT.Hib.3doses.TimepassedsincelastHibdosewasadministered" label="Time passed since last Hib dose was administered">
        <dmn:inputExpression id="inputExpression.DAK.DT.IMMZ.D2.DT.Hib.3doses.TimepassedsincelastHibdosewasadministered" typeRef="string">
          <dmn:text>Today's date − latest "Date and time of vaccination" (where "Vaccine type" = "Hib-containing vaccines")</dmn:text>
        </dmn:inputExpression>
      </dmn:input>
      <dmn:output id="output.DAK.DT.IMMZ.D2.DT.Hib.3doses.CarePlan" label="Care Plan">
        <dmn:description>Produce a suggested Care Plan for consideration by health worker</dmn:description>
      </dmn:output>
      <dmn:output id="output.DAK.DT.IMMZ.D2.DT.Hib.3doses.Guidancedisplayedtohealthworker" label="Guidance displayed to health worker">
        <dmn:description>Request to communicate guidance to the health worker</dmn:description>
      </dmn:output>
      <dmn:output id="output.DAK.DT.IMMZ.D2.DT.Hib.3doses.Annotations" label="Annotations">
        <dmn:description>Additional information for the health worker</dmn:description>
      </dmn:output>
      <dmn:output id="output.DAK.DT.IMMZ.D2.DT.Hib.3doses.References" label="Reference(s)">
        <dmn:description>Reference for the source content (L1)</dmn:description>
      </dmn:output>
      <dmn:rule id="rule.DAK.DT.IMMZ.D2.DT.Hib.3doses.rule.Clientsagei84b73dac90">
        <dmn:inputEntry>
          <dmn:description>–</dmn:description>
          <dmn:text>–</dmn:text>
        </dmn:inputEntry>
        <dmn:inputEntry>
          <dmn:description>Today's date − "Date of birth" &lt; 6 weeks</dmn:description>
          <dmn:text>Clients age is less than 6 weeks</dmn:text>
        </dmn:inputEntry>
        <dmn:inputEntry>
          <dmn:description>–</dmn:description>
          <dmn:text>–</dmn:text>
        </dmn:inputEntry>
        <dmn:inputEntry>
          <dmn:description>–</dmn:description>
          <dmn:text>–</dmn:text>
        </dmn:inputEntry>
        <dmn:inputEntry>
          <dmn:description>–</dmn:description>
          <dmn:text>–</dmn:text>
        </dmn:inputEntry>
        <dmn:outputEntry>
          <dmn:description>"Immunization recommendation status" = "Not due"</dmn:description>
          <dmn:text>Client is not due for Hib vaccination</dmn:text>
        </dmn:outputEntry>
        <dmn:outputEntry>
          <dmn:description>Check for any other vaccines due and inform the caregiver of when to come back for first dose.</dmn:description>
          <dmn:text>Should not vaccinate client with first Hib dose as clients age is less than 6 weeks.</dmn:text>
        </dmn:outputEntry>
        <dmn:annotationEntry>
          <dmn:text>Because serious Hib disease occurs most commonly in children aged 4–18 months, immunization should start from 6 weeks of age, or as early as possible thereafter. The interval between doses should be at least 4 weeks if 3 primary doses are given. Hib-containing vaccine is not required for healthy children aged over  5 years.</dmn:text>
        </dmn:annotationEntry>
        <dmn:annotationEntry>
          <dmn:text>WHO recommendations for routine immunization – summary tables (March 2023) (1)</dmn:text>
        </dmn:annotationEntry>
      </dmn:rule>
      <dmn:rule id="rule.DAK.DT.IMMZ.D2.DT.Hib.3doses.rule.NoHibprimarfd4f28580e">
        <dmn:inputEntry>
          <dmn:description>Count of vaccines administered (where "Vaccine type" = "Hib-containing vaccines" and "Type of dose" = "Primary series") = 0</dmn:description>
          <dmn:text>No Hib primary series doses were administered</dmn:text>
        </dmn:inputEntry>
        <dmn:inputEntry>
          <dmn:description>6 weeks ≤ Today's date − "Date of birth" ≤ 5 years</dmn:description>
          <dmn:text>Clients age is between 6 weeks and 5 years</dmn:text>
        </dmn:inputEntry>
        <dmn:inputEntry>
          <dmn:description>–</dmn:description>
          <dmn:text>–</dmn:text>
        </dmn:inputEntry>
        <dmn:inputEntry>
          <dmn:description>–</dmn:description>
          <dmn:text>–</dmn:text>
        </dmn:inputEntry>
        <dmn:inputEntry>
          <dmn:description>–</dmn:description>
          <dmn:text>–</dmn:text>
        </dmn:inputEntry>
        <dmn:outputEntry>
          <dmn:description>"Immunization recommendation status" = "Due"</dmn:description>
          <dmn:text>Client is due for Hib vaccination</dmn:text>
        </dmn:outputEntry>
        <dmn:outputEntry>
          <dmn:description>Check for contraindications.</dmn:description>
          <dmn:text>Should vaccinate client with first Hib dose as no Hib doses were administered and client is within appropriate age range.</dmn:text>
        </dmn:outputEntry>
      </dmn:rule>
      <dmn:rule id="rule.DAK.DT.IMMZ.D2.DT.Hib.3doses.rule.OneHibprimab95913ef9a">
        <dmn:inputEntry>
          <dmn:description>Count of vaccines administered (where "Vaccine type" = "Hib-containing vaccines" and "Type of dose"= "Primary series") = 1</dmn:description>
          <dmn:text>One Hib primary series dose was administered</dmn:text>
        </dmn:inputEntry>
        <dmn:inputEntry>
          <dmn:description>6 weeks ≤ Today's date − "Date of birth" ≤ 5 years</dmn:description>
          <dmn:text>Clients age is at least 6 weeks and not more than 5 years</dmn:text>
        </dmn:inputEntry>
        <dmn:inputEntry>
          <dmn:description>"Date and time of vaccination" (where "Vaccine type"= "Hib-containing vaccines" and "Dose number" = 1) − "Date of birth" &lt; 1 year</dmn:description>
          <dmn:text>Clients age was less than 1 year when first Hib dose was administered</dmn:text>
        </dmn:inputEntry>
        <dmn:inputEntry>
          <dmn:description>Today's date − latest "Date and time of vaccination" (where "Vaccine type" = "Hib-containing vaccines") &lt; 4 weeks</dmn:description>
          <dmn:text>The latest Hib dose was administered less than 4 weeks ago</dmn:text>
        </dmn:inputEntry>
        <dmn:inputEntry>
          <dmn:description>–</dmn:description>
          <dmn:text>–</dmn:text>
        </dmn:inputEntry>
        <dmn:outputEntry>
          <dmn:description>"Immunization recommendation status" = "Not due"</dmn:description>
          <dmn:text>Client is not due for Hib vaccination</dmn:text>
        </dmn:outputEntry>
        <dmn:outputEntry>
          <dmn:description>Check for any other vaccines due and inform the caregiver of when to come back for second dose.</dmn:description>
          <dmn:text>Should not vaccinate client with second Hib dose as latest Hib dose was administered less than 4 weeks ago.</dmn:text>
        </dmn:outputEntry>
      </dmn:rule>
      <dmn:rule id="rule.DAK.DT.IMMZ.D2.DT.Hib.3doses.rule.OneHibprimafeaea453c3">
        <dmn:inputEntry>
          <dmn:description>Count of vaccines administered (where "Vaccine type" = "Hib-containing vaccines" and "Type of dose"= "Primary series") = 1</dmn:description>
          <dmn:text>One Hib primary series dose was administered</dmn:text>
        </dmn:inputEntry>
        <dmn:inputEntry>
          <dmn:description>6 weeks ≤ Today's date − "Date of birth" ≤ 5 years</dmn:description>
          <dmn:text>Clients age is at least 6 weeks and not more than 5 years</dmn:text>
        </dmn:inputEntry>
        <dmn:inputEntry>
          <dmn:description>"Date and time of vaccination" (where "Vaccine type"= "Hib-containing vaccines" and "Dose number" = 1) − "Date of birth" &lt; 1 year</dmn:description>
          <dmn:text>Clients age was less than 1 year when first Hib dose was administered</dmn:text>
        </dmn:inputEntry>
        <dmn:inputEntry>
          <dmn:description>Today's date − latest "Date and time of vaccination" (where "Vaccine type" = "Hib-containing vaccines") ≥ 4 weeks</dmn:description>
          <dmn:text>The latest Hib dose was administered more than 4 weeks ago</dmn:text>
        </dmn:inputEntry>
        <dmn:inputEntry>
          <dmn:description>–</dmn:description>
          <dmn:text>–</dmn:text>
        </dmn:inputEntry>
        <dmn:outputEntry>
          <dmn:description>"Immunization recommendation status" = "Due"</dmn:description>
          <dmn:text>Client is due for Hib vaccination</dmn:text>
        </dmn:outputEntry>
        <dmn:outputEntry>
          <dmn:description>Check for contraindications.</dmn:description>
          <dmn:text>Should vaccinate client with second Hib dose as clients age was less than 1 year when first Hib dose was administered and the latest Hib dose was administered more than 4 weeks ago.</dmn:text>
        </dmn:outputEntry>
      </dmn:rule>
      <dmn:rule id="rule.DAK.DT.IMMZ.D2.DT.Hib.3doses.rule.OneHibprima64f99adfbf">
        <dmn:inputEntry>
          <dmn:description>Count of vaccines administered (where "Vaccine type" = "Hib-containing vaccines" and "Type of dose"= "Primary series") = 1</dmn:description>
          <dmn:text>One Hib primary series dose was administered</dmn:text>
        </dmn:inputEntry>
        <dmn:inputEntry>
          <dmn:description>6 weeks ≤ Today's date − "Date of birth" ≤ 5 years</dmn:description>
          <dmn:text>Clients age is at least 6 weeks and not more than 5 years</dmn:text>
        </dmn:inputEntry>
        <dmn:inputEntry>
          <dmn:description>"Date and time of vaccination" (where "Vaccine type"= "Hib-containing vaccines" and "Dose number" = 1) − "Date of birth" ≥ 1 year</dmn:description>
          <dmn:text>Clients age was more than 1 year when first Hib dose was administered</dmn:text>
        </dmn:inputEntry>
        <dmn:inputEntry>
          <dmn:description>–</dmn:description>
          <dmn:text>–</dmn:text>
        </dmn:inputEntry>
        <dmn:inputEntry>
          <dmn:description>–</dmn:description>
          <dmn:text>–</dmn:text>
        </dmn:inputEntry>
        <dmn:outputEntry>
          <dmn:description>"Immunization recommendation status" = "Complete"
"Completed the primary vaccination series" = TRUE (where "Vaccine type" = "Hib-containing vaccines")</dmn:description>
          <dmn:text>Hib immunization schedule is complete</dmn:text>
        </dmn:outputEntry>
        <dmn:outputEntry>
          <dmn:description>Check for any other vaccines due.</dmn:description>
          <dmn:text>Hib immunization schedule is complete as clients age was more than 1 year when first Hib dose was administered. One Hib primary series dose was administered.</dmn:text>
        </dmn:outputEntry>
        <dmn:annotationEntry>
          <dmn:text>When a first dose is given to a child aged over 12 months, only one dose is recommended</dmn:text>
        </dmn:annotationEntry>
      </dmn:rule>
      <dmn:rule id="rule.DAK.DT.IMMZ.D2.DT.Hib.3doses.rule.TwoHibprima639cadf624">
        <dmn:inputEntry>
          <dmn:description>Count of vaccines administered (where "Vaccine type" = "Hib-containing vaccines" and "Type of dose" = "Primary series" ) = 2</dmn:description>
          <dmn:text>Two Hib primary series doses were administered</dmn:text>
        </dmn:inputEntry>
        <dmn:inputEntry>
          <dmn:description>6 weeks ≤ Today's date − "Date of birth" ≤ 5 years</dmn:description>
          <dmn:text>Clients age is between 6 weeks and not more than 5 years</dmn:text>
        </dmn:inputEntry>
        <dmn:inputEntry>
          <dmn:description>–</dmn:description>
          <dmn:text>–</dmn:text>
        </dmn:inputEntry>
        <dmn:inputEntry>
          <dmn:description>Today's date − latest "Date and time of vaccination" (where "Vaccine type" = "Hib-containing vaccines") &lt; 4 weeks</dmn:description>
          <dmn:text>The latest Hib dose was administered less than 4 weeks ago</dmn:text>
        </dmn:inputEntry>
        <dmn:inputEntry>
          <dmn:description>–</dmn:description>
          <dmn:text>–</dmn:text>
        </dmn:inputEntry>
        <dmn:outputEntry>
          <dmn:description>"Immunization recommendation status" = "Not due"</dmn:description>
          <dmn:text>Client is not due for Hib vaccination</dmn:text>
        </dmn:outputEntry>
        <dmn:outputEntry>
          <dmn:description>Check for any other vaccines due and inform the caregiver of when to come back for third dose.</dmn:description>
          <dmn:text>Should not vaccinate client with third Hib dose as latest Hib dose was administered less than 4 weeks ago.</dmn:text>
        </dmn:outputEntry>
        <dmn:annotationEntry>
          <dmn:text>The interval between doses should be at least 4 weeks if 3 primary doses are given.
Hib-containing vaccine is not required for healthy children aged over 5 years.</dmn:text>
        </dmn:annotationEntry>
      </dmn:rule>
      <dmn:rule id="rule.DAK.DT.IMMZ.D2.DT.Hib.3doses.rule.TwoHibprimaf5d56779bd">
        <dmn:inputEntry>
          <dmn:description>Count of vaccines administered (where "Vaccine type" = "Hib-containing vaccines" and "Type of dose" = "Primary series" ) = 2</dmn:description>
          <dmn:text>Two Hib primary series doses were administered</dmn:text>
        </dmn:inputEntry>
        <dmn:inputEntry>
          <dmn:description>6 weeks ≤ Today's date − "Date of birth" ≤ 5 years</dmn:description>
          <dmn:text>Clients age is between 6 weeks and not more than 5 years</dmn:text>
        </dmn:inputEntry>
        <dmn:inputEntry>
          <dmn:description>–</dmn:description>
          <dmn:text>–</dmn:text>
        </dmn:inputEntry>
        <dmn:inputEntry>
          <dmn:description>Today's date − latest "Date and time of vaccination" (where "Vaccine type" = "Hib-containing vaccines") ≥ 4 weeks</dmn:description>
          <dmn:text>The latest Hib dose was administered more than 4 weeks ago</dmn:text>
        </dmn:inputEntry>
        <dmn:inputEntry>
          <dmn:description>–</dmn:description>
          <dmn:text>–</dmn:text>
        </dmn:inputEntry>
        <dmn:outputEntry>
          <dmn:description>"Immunization recommendation status" = "Due"</dmn:description>
          <dmn:text>Client is due for Hib vaccination</dmn:text>
        </dmn:outputEntry>
        <dmn:outputEntry>
          <dmn:description>Check for contraindications.</dmn:description>
          <dmn:text>Should vaccinate client with third Hib dose as client is within appropriate age range and latest Hib dose was administered more than 4 weeks ago.</dmn:text>
        </dmn:outputEntry>
      </dmn:rule>
      <dmn:rule id="rule.DAK.DT.IMMZ.D2.DT.Hib.3doses.rule.ThreeHibprif2b6d4746c">
        <dmn:inputEntry>
          <dmn:description>Count of vaccines administered (where "Vaccine type" = "Hib-containing vaccines" and "Type of dose"= "Primary series") = 3</dmn:description>
          <dmn:text>Three Hib primary series doses were administered</dmn:text>
        </dmn:inputEntry>
        <dmn:inputEntry>
          <dmn:description>–</dmn:description>
          <dmn:text>–</dmn:text>
        </dmn:inputEntry>
        <dmn:inputEntry>
          <dmn:description>–</dmn:description>
          <dmn:text>–</dmn:text>
        </dmn:inputEntry>
        <dmn:inputEntry>
          <dmn:description>–</dmn:description>
          <dmn:text>–</dmn:text>
        </dmn:inputEntry>
        <dmn:inputEntry>
          <dmn:description>–</dmn:description>
          <dmn:text>–</dmn:text>
        </dmn:inputEntry>
        <dmn:outputEntry>
          <dmn:description>"Immunization recommendation status" = "Complete"
"Completed the primary vaccination series" = TRUE (where "Vaccine type" = "Hib-containing vaccines")</dmn:description>
          <dmn:text>Hib immunization schedule is complete</dmn:text>
        </dmn:outputEntry>
        <dmn:outputEntry>
          <dmn:description>Check for any vaccines due.</dmn:description>
          <dmn:text>Hib immunization schedule is complete. Three Hib primary series doses were administered.</dmn:text>
        </dmn:outputEntry>
        <dmn:annotationEntry>
          <dmn:text>–</dmn:text>
        </dmn:annotationEntry>
      </dmn:rule>
      <dmn:rule id="rule.DAK.DT.IMMZ.D2.DT.Hib.3doses.rule.Clientsagei9a8ab3d070">
        <dmn:inputEntry>
          <dmn:description>–</dmn:description>
          <dmn:text>–</dmn:text>
        </dmn:inputEntry>
        <dmn:inputEntry>
          <dmn:description>Today's date − "Date of birth" &gt; 5 years</dmn:description>
          <dmn:text>Clients age is more than 5 years</dmn:text>
        </dmn:inputEntry>
        <dmn:inputEntry>
          <dmn:description>–</dmn:description>
          <dmn:text>–</dmn:text>
        </dmn:inputEntry>
        <dmn:inputEntry>
          <dmn:description>–</dmn:description>
          <dmn:text>–</dmn:text>
        </dmn:inputEntry>
        <dmn:inputEntry>
          <dmn:description>–</dmn:description>
          <dmn:text>–</dmn:text>
        </dmn:inputEntry>
        <dmn:outputEntry>
          <dmn:description>"Immunization recommendation status" = "Not due"</dmn:description>
          <dmn:text>Client is not due for Hib vaccination</dmn:text>
        </dmn:outputEntry>
        <dmn:outputEntry>
          <dmn:description>Check for any other vaccines due.</dmn:description>
          <dmn:text>Should not vaccinate client with Hib dose as client is more than 5 years old and Hib vaccination is not required for healthy children aged over 5 years.</dmn:text>
        </dmn:outputEntry>
        <dmn:annotationEntry>
          <dmn:text>–</dmn:text>
        </dmn:annotationEntry>
      </dmn:rule>
    </dmn:decisionTable>
  </dmn:decision>
</dmn:definitions>