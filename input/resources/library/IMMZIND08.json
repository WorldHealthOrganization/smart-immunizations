{
  "resourceType": "Library",
  "id": "IMMZIND08",
  "version" : "1.0.1",
  "extension": [ {
    "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-softwaresystem",
    "valueReference": {
      "reference": "Device/cqf-tooling"
    }
  } ],
  "url": "http://fhir.org/guides/who/smart-immunization/Library/IMMZIND08",
  "name": "IMMZ.IND.08",
  "parameter": [ {
    "name": "periodStart",
    "use": "in",
    "min": 1,
    "max": "1",
    "type": "string"
  } ],
  "dataRequirement": [ {
    "type": "Patient",
    "profile": [ "http://hl7.org/fhir/StructureDefinition/Patient" ]
  }, {
    "type": "Immunization",
    "profile": [ "http://hl7.org/fhir/StructureDefinition/Immunization" ],
    "mustSupport": [ "status", "vaccineCode", "occurrence" ]
  } ],
  "content": [ 
    {
      "contentType": "text/cql",
      "data": "LyoKICogTGlicmFyeTogSU1NWi5JTkQuMDgKICogSW1tdW5pemF0aW9uIGNvdmVyYWdlIGZvciBNZWFzbGVzIGNvbnRhaW5pbmcgdmFjY2luZSAoRXN0aW1hdGVkIERlbm9taW5hdG9yKSAKICogUmVmZXJlbmNlczogV0hPIEltbXVuaXphdGlvbiBGYWNpbGl0eSBBbmFseXNpcyBHdWlkZSAoMSksIFdITyAvIFVOSUNFRiBKb2ludCBSZXBvcnRpbmcgRm9ybSAoMyAtIGVsZW1lbnRzIDQyNDAgYW5kIDQyNjAgKQogKi8KLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKiBNZWFzbGUgRG9zZSAxCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICogSW5pdGlhbCBQYXRpZW50IFBvcHVsYXRpb24gPQogKiAgICAgQWxsIHBhdGllbnQKICoKICogRGVub21pbmF0b3IgPQogKiAgICAgRGVtb2dyYXBoaWMgZGF0YSBmcm9tIG1lYXN1cmUgcmVwb3J0CiAqCiAqIE51bWVyYXRvciA9CiAqICAgICBQYXRpZW50IHdpdGggMXN0IE1lYXNsZSBpbW11bml6YXRpb24gaW4gdGhlIHJlcG9ydGluZyBwZXJpb2QKICoKICogRGVub21pbmF0b3IgRXhjZXB0aW9ucyA9CiAqICAgICBOb25lCiAqCiAqIERpc2FnZ3JlZ2F0aW9uOgogKiAgICBBZ2UgR3JvdXAgKDwgMSB5ZWFyIG9yIDEgeWVhciBvciA+IDIgeWVhcnMpCiAqICAgIEdlb2dyYXBoaWMgUmVnaW9uCiAqICAgIEFkbWluaXN0cmF0aXZlIEdlbmRlciAob3IgQmlvbG9naWNhbCBTZXgpCiAqIAogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CgogLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKiBNZWFzbGUgRG9zZSAyCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICogSW5pdGlhbCBQYXRpZW50IFBvcHVsYXRpb24gPQogKiAgICAgQWxsIHBhdGllbnQKICoKICogRGVub21pbmF0b3IgPQogKiAgICAgRGVtb2dyYXBoaWMgZGF0YSBmcm9tIG1lYXN1cmUgcmVwb3J0CiAqCiAqIE51bWVyYXRvciA9CiAqICAgICBQYXRpZW50IHdpdGggMm5kIE1lYXNsZSBpbW11bml6YXRpb24gaW4gdGhlIHJlcG9ydGluZyBwZXJpb2QKICoKICogRGVub21pbmF0b3IgRXhjZXB0aW9ucyA9CiAqICAgICBOb25lCiAqCiAqIERpc2FnZ3JlZ2F0aW9uOgogKiAgICBBZ2UgR3JvdXAgKDwgMSB5ZWFyIG9yIDEgeWVhciBvciA+IDIgeWVhcnMpCiAqICAgIEdlb2dyYXBoaWMgUmVnaW9uCiAqICAgIEFkbWluaXN0cmF0aXZlIEdlbmRlciAob3IgQmlvbG9naWNhbCBTZXgpCiAqIAogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqLwoKbGlicmFyeSBJTU1aSU5EMDggdmVyc2lvbiAnMS4wLjEnCgoKdXNpbmcgRkhJUiB2ZXJzaW9uICc0LjAuMScKaW5jbHVkZSBGSElSSGVscGVycyB2ZXJzaW9uICc0LjAuMScKCnBhcmFtZXRlciAiTWVhc3VyZW1lbnQgUGVyaW9kIiBJbnRlcnZhbDxEYXRlPgpwYXJhbWV0ZXIgImNhbm9uaWNhbF9kZW1vZ3JhcGhpY19tZWFzdXJlX3VybCIgU3RyaW5nIGRlZmF1bHQgJ2h0dHBzOi8vZmhpci53aG8ub3JnL01lYXN1cmUvZGVtb2dyYXBoaWMtZm9yLWltbXVuaXphdGlvbicKCnZhbHVlc2V0ICJNZWFzbGVzIFZhY2NpbmVzIjogJ2h0dHA6Ly9maGlyLm9yZy9ndWlkZXMvd2hvL3NtYXJ0LWltbXVuaXphdGlvbi9WYWx1ZVNldC9JTU1aLkExLkRFJwoKLy8gQWdlIGNvZGVzCmNvZGVzeXN0ZW0gIklTTy04NjAxLURlcml2ZWQgUGVyaW9kcyI6ICdodHRwOi8vb2hpZS5vcmcvVmFsdWVTZXQvaXNvLTg2MDEtZGVyaXZlZC1wZXJpb2RzJyAvLyB7ICdQMFktLVAxWScsICdQMVktLVA1WScsIC4uLiB9CmNvZGUgIlAwWS0tUDFZIjogJ1AwWS0tUDFZJyBmcm9tICJJU08tODYwMS1EZXJpdmVkIFBlcmlvZHMiIGRpc3BsYXkgJzwgMSB5ZWFyJwpjb2RlICJQMVktLVAyWSI6ICdQMVktLVAyWScgZnJvbSAiSVNPLTg2MDEtRGVyaXZlZCBQZXJpb2RzIiBkaXNwbGF5ICcxIHllYXInCmNvZGUgIlAyWS0tUDk5OTlZIjogJ1AxWS0tUDk5OTlZJyBmcm9tICJJU08tODYwMS1EZXJpdmVkIFBlcmlvZHMiIGRpc3BsYXkgJzIrIHllYXJzJwoKCi8vIFNleCBjb2Rlcwpjb2Rlc3lzdGVtICJBZG1pbmlzdHJhdGl2ZSBHZW5kZXIgQ29kZXMiOiAnaHR0cDovL2hsNy5vcmcvZmhpci9hZG1pbmlzdHJhdGl2ZS1nZW5kZXInCmNvZGUgIk1hbGVzIiA6ICdtYWxlJyBmcm9tICJBZG1pbmlzdHJhdGl2ZSBHZW5kZXIgQ29kZXMiIGRpc3BsYXkgJ01hbGVzJwpjb2RlICJGZW1hbGVzIiA6ICdmZW1hbGUnIGZyb20gIkFkbWluaXN0cmF0aXZlIEdlbmRlciBDb2RlcyIgZGlzcGxheSAnRmVtYWxlcycKY29kZSAiT3RoZXIiIDogJ290aGVyJyBmcm9tICJBZG1pbmlzdHJhdGl2ZSBHZW5kZXIgQ29kZXMiIGRpc3BsYXkgJ090aGVyL05BJwoKY29udGV4dCBQYXRpZW50CgpkZWZpbmUgZ2V0UGF0aWVudEdlb2dyYXBoaWNTdHI6CglGaXJzdChQYXRpZW50LmFkZHJlc3MgQSB3aGVyZSBBLnVzZSBpbiB7ICdob21lJyB9KS5kaXN0cmljdAoKZGVmaW5lIGdldFBhdGllbnRHZW9ncmFwaGljTG9jYXRpb246CiAgICBpZiBnZXRQYXRpZW50R2VvZ3JhcGhpY1N0ciBpcyBub3QgbnVsbCB0aGVuCiAgICAgIEZpcnN0KFtMb2NhdGlvbl0gTCB3aGVyZSBMLmlkID0gaWQgeyB2YWx1ZTogZ2V0UGF0aWVudEdlb2dyYXBoaWNTdHJ9KQogICAgZWxzZSBudWxsCgoKLyoKQWxsIHBhdGllbnQgc2hvdWxkIGJlIGluY2x1ZGVkIAoqLwpkZWZpbmUgSW5pdGlhbFBvcHVsYXRpb246Cgl0cnVlCgovKgpEZW5vbWluYXRvciBpbml0aWF0aW9uIHBvcHVsYXRpb24gZnJvbSBwb3B1bGF0aW9uIG1lYXN1cmUgcmVwb3J0IG9uIGRpc3RyaWN0LCAKbmVlZHMgaHR0cHM6Ly9idWlsZC5maGlyLm9yZy9pZy9ITDcvY3FmLW1lYXN1cmVzL1N0cnVjdHVyZURlZmluaXRpb24tY3FmbS1hZ2dyZWdhdGVNZXRob2QuaHRtbCAKd2l0aCBodHRwczovL3Rlcm1pbm9sb2d5LmhsNy5vcmcvNS4yLjAvQ29kZVN5c3RlbS1tZWFzdXJlLWFnZ3JlZ2F0ZS1tZXRob2QuaHRtbCNtZWFzdXJlLWFnZ3JlZ2F0ZS1tZXRob2QtbWF4aW11bQoqLwpkZWZpbmUgRGVub21pbmF0b3JQb3B1bGF0aW9uOgoJRmlyc3QoCgkJW01lYXN1cmVSZXBvcnRdIE1SIAoJCXdoZXJlIE1SLnN1YmplY3QucmVmZXJlbmNlID0gJ0xvY2F0aW9uLycgKyBnZXRQYXRpZW50R2VvZ3JhcGhpY1N0cgoJCWFuZCBNUi5tZWFzdXJlID0gRkhJUi5jYW5vbmljYWwge3ZhbHVlOmNhbm9uaWNhbF9kZW1vZ3JhcGhpY19tZWFzdXJlX3VybH0KCQlhbmQgc3RhcnQgb2YgIk1lYXN1cmVtZW50IFBlcmlvZCIgaW4gTVIucGVyaW9kICkuZ3JvdXAuZmlyc3QoKS5zdHJhdGlmaWVyLmZpcnN0KCkuc3RyYXR1bS53aGVyZSgKCQkJZXhpc3RzKGNvbXBvbmVudC53aGVyZShjb2RlLmNvZGluZy5maXJzdCgpLmNvZGUgfiBjb2RlIHsgdmFsdWU6ICdzZXgnfSBhbmQgIHZhbHVlLmNvZGluZy5maXJzdCgpLmNvZGUgfiAiQWRtaW5pc3RyYXRpdmUgR2VuZGVyIFN0cmF0aWZpZXIiLmNvZGUpKSAKCQkJYW5kIGV4aXN0cyhjb21wb25lbnQud2hlcmUoY29kZS5jb2RpbmcuZmlyc3QoKS5jb2RlIH4gY29kZSB7IHZhbHVlOiAnQWdlR3JvdXAnfSAgIGFuZCB2YWx1ZS5jb2RpbmcuZmlyc3QoKS5jb2RlIH4gIkFnZSBHcm91cCBTdHJhdGlmaWVyIi5jb2RlKSkKCQkpLmZpcnN0KCkucG9wdWxhdGlvbi5maXJzdCgpLmNvdW50CgoKZGVmaW5lIGdldGRvc2VzOgoJW0ltbXVuaXphdGlvbl0gSSAKCXdoZXJlIEkudmFjY2luZUNvZGUgaW4gIk1lYXNsZXMgVmFjY2luZXMiCglzb3J0IGJ5IChvY2N1cnJlbmNlIGFzIEZISVIuZGF0ZVRpbWUpLnZhbHVlIGRlc2MKCgoKZGVmaW5lIEZpcnN0RG9zZToKCUNvdW50KGdldGRvc2VzKSA9IDEgYW5kIGV4aXN0cyhnZXRkb3Nlcy53aGVyZShUb0RhdGUob2NjdXJyZW5jZSkgaW4gIk1lYXN1cmVtZW50IFBlcmlvZCIpKQoKCmRlZmluZSBTZWNvbmREb3NlOgoJQ291bnQoZ2V0ZG9zZXMpID0gMiBhbmQgZXhpc3RzKGdldGRvc2VzLndoZXJlKFRvRGF0ZShvY2N1cnJlbmNlKSBpbiAiTWVhc3VyZW1lbnQgUGVyaW9kIikpCgoKLyoqCiAqIEBkZXNjcmlwdGlvbiBUYWtlcyB0aGUgZGF0ZSBjaG9pY2Ugb2YgYSBkYXRlL3N0cmluZyBjaG9pY2UgKGZvciBJbW11bml6YXRpb24gZGF0ZSkKICovCmRlZmluZSBmdW5jdGlvbiBUb0RhdGUoY2hvaWNlIENob2ljZTxGSElSLmRhdGUsIEZISVIuc3RyaW5nPik6CiAgY2FzZQoJICB3aGVuIGNob2ljZSBpcyBGSElSLmRhdGUgdGhlbgogICAgCWNob2ljZSBhcyBGSElSLmRhdGUKICAgIHdoZW4gIENvbnZlcnRzVG9EYXRlKGNob2ljZSkgdGhlbgogICAgICBUb0RhdGUoY2hvaWNlKQoJCWVsc2UKICAgICAgTWVzc2FnZShudWxsIGFzIEZISVIuZGF0ZSwgdHJ1ZSwgJzEnLCAnRXJyb3InLCAnQ2Fubm90IGNvbXB1dGUgYSBkYXRlIGZyb20gYSBTdHJpbmcgdmFsdWUnKQoJZW5kCgovLyBTdHJhdGlmaWVycwoKLy8gQWdlIEdyb3VwCmRlZmluZSAiQWdlIEdyb3VwIFN0cmF0aWZpZXIiOgogIGNhc2UKICAgIHdoZW4gQWdlSW5ZZWFyc0F0KHN0YXJ0IG9mICJNZWFzdXJlbWVudCBQZXJpb2QiKSBpbiBJbnRlcnZhbFswLCAxKSB0aGVuICJQMFktLVAxWSIKICAgIHdoZW4gQWdlSW5ZZWFyc0F0KHN0YXJ0IG9mICJNZWFzdXJlbWVudCBQZXJpb2QiKSBpbiBJbnRlcnZhbFsxLCAyKSB0aGVuICJQMVktLVAyWSIKICAgIHdoZW4gQWdlSW5ZZWFyc0F0KHN0YXJ0IG9mICJNZWFzdXJlbWVudCBQZXJpb2QiKSA+PSAyIHRoZW4gIlAyWS0tUDk5OTlZIgogICAgZWxzZSBudWxsCiAgZW5kCgovLyBTZXgKZGVmaW5lICJTZXgiOiBQYXRpZW50LmdlbmRlcgoKLyoqCiAqIEJ5IEFkbWluaXN0cmF0aXZlIEdlbmRlciBvZiBQYXRpZW50IFN0cmF0aWZpZXIKICovCmRlZmluZSAiQWRtaW5pc3RyYXRpdmUgR2VuZGVyIFN0cmF0aWZpZXIiOgogICAgY2FzZSAKICAgICAgICB3aGVuIFBhdGllbnQuZ2VuZGVyID0gJ21hbGUnIHRoZW4gIk1hbGVzIgogICAgICAgIHdoZW4gUGF0aWVudC5nZW5kZXIgPSAnZmVtYWxlJyB0aGVuICJGZW1hbGVzIgogICAgICAgIGVsc2UgIk90aGVyIgogICAgZW5kCgovKioKICogQnkgQWRtaW5pc3RyYXRpdmUgR2VuZGVyIG9mIFBhdGllbnQgU3RyYXRpZmllcgogKi8KZGVmaW5lICJHZW9ncmFwaGljIFJlZ2lvbiBTdHJhdGlmaWVyIjoKICAgIFN5c3RlbS5Db2RlIHtjb2RlOiBnZXRQYXRpZW50R2VvZ3JhcGhpY1N0cn0KCmRlZmluZSAiQWdlIEdyb3VwIC8gUmVnaW9uIC8gU2V4IFN0cmF0aWZpZXIiOgoJY29kZSB7IHZhbHVlOiAoIkdlb2dyYXBoaWMgUmVnaW9uIFN0cmF0aWZpZXIiLmNvZGUgKyAnX18nICsgIkFkbWluaXN0cmF0aXZlIEdlbmRlciBTdHJhdGlmaWVyIi5jb2RlICsgJ19fJyArICJBZ2UgR3JvdXAgU3RyYXRpZmllciIuY29kZSl9"
    }
  ]
}